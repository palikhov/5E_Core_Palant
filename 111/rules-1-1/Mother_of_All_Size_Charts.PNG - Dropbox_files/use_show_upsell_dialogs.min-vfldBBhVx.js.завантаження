define(["require","exports","tslib","react","api_v2/user_client","modules/clean/react/file_viewer/sdk_file_viewer/upsell/upsell_dialog_user_actions_tracker","modules/clean/react/campaigns/campaign_events_api"],(function(i,n,e,a,s,o,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.trackDismissAction=n.useShowUpsellDialogs=n.initialState=void 0,n.initialState={proEsign:{showUpsell:!1,stormcrowVariant:"OFF",productPlanType:"UNKNOWN",campaignContext:void 0,proEsignSpaceCopy:""},docsend:{showUpsell:!1,stormcrowVariant:"OFF",campaignContext:void 0}};var r=["pdf","doc","docx"],c=["pdf","docx","doc","pptx","ppt","xlsx","xls","key"];function p(i,n){var a,s,o,t,r,c;switch(n.type){case"showProEsignCampaign":return e.__assign(e.__assign({},i),{proEsign:e.__assign(e.__assign({},i.proEsign),{showUpsell:!0,stormcrowVariant:null===(a=n.proEsignPayload)||void 0===a?void 0:a.stormcrowVariant,productPlanType:null===(s=n.proEsignPayload)||void 0===s?void 0:s.productPlanType,campaignContext:null===(o=n.proEsignPayload)||void 0===o?void 0:o.campaignContext,proEsignSpaceCopy:null===(t=n.proEsignPayload)||void 0===t?void 0:t.proEsignSpaceCopy})});case"showDocsendUpsellCampaign":return e.__assign(e.__assign({},i),{docsend:e.__assign(e.__assign({},i.docsend),{showUpsell:!0,stormcrowVariant:null===(r=n.docsendPayload)||void 0===r?void 0:r.stormcrowVariant,campaignContext:null===(c=n.docsendPayload)||void 0===c?void 0:c.campaignContext})});default:return i}}function l(i){return e.__awaiter(this,void 0,Promise,(function(){return e.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i];case 1:return[2,{value:n.sent(),failed:!1}];case 2:return n.sent(),[2,{failed:!0}];case 3:return[2]}}))}))}n.useShowUpsellDialogs=function(i,e){var o=a.useReducer(p,n.initialState),d=o[0],_=o[1];return a.useEffect((function(){var n=!0;if(void 0!==i&&void 0!==e){if(!e.ext)return;var a=e.ext.slice(1);Promise.all([r.includes(a)?l((new s.UserApiV2Client).ns("growth_bundling").rpc("show_pro_esign_upsell",{sjid:e.sjid,ns_id:e.ns_id,file_ext:e.ext.slice(1),surface:"sdk_file_viewer"},{subjectUserId:i})):Promise.resolve(),c.includes(a)?l((new s.UserApiV2Client).ns("growth_bundling").rpc("show_docsend_upsell",{sjid:e.sjid,ns_id:e.ns_id,file_ext:e.ext.slice(1)},{subjectUserId:i})):Promise.resolve()]).then((function(i){var e,a,s,o=i[0],r=i[1],c=o&&o.value,p=r&&r.value;n&&(c&&c.show_campaign&&_({type:"showProEsignCampaign",proEsignPayload:{showUpsell:!0,stormcrowVariant:c.variant||"",productPlanType:c.product_plan_type||"",campaignContext:void 0!==(null===(e=c.campaign_context)||void 0===e?void 0:e.campaign_impression_id)?t.createMegaphoneCampaignImpressionContext(c.campaign_context.campaign_impression_id,c.campaign_context.campaign_id,c.campaign_context.campaign_variant_id):void 0,proEsignSpaceCopy:(null===(a=c.rcs_copy)||void 0===a?void 0:a.pro_esign_space)||""}}),p&&p.show_campaign&&_({type:"showDocsendUpsellCampaign",docsendPayload:{showUpsell:!0,stormcrowVariant:p.variant||"",campaignContext:void 0!==(null===(s=p.campaign_context)||void 0===s?void 0:s.campaign_impression_id)?t.createMegaphoneCampaignImpressionContext(p.campaign_context.campaign_impression_id,p.campaign_context.campaign_id,p.campaign_context.campaign_variant_id):void 0}}))}))}return function(){n=!1}}),[i,e]),d},n.trackDismissAction=function(i){i&&new o.EsignUpsellUserActionTracker(i).track(o.EsignUpsellUserAction.DISMISS)}}));
//# sourceMappingURL=use_show_upsell_dialogs.min.js-vfl_yUcM7.map