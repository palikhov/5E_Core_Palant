define(["require","exports","tslib","typescript/component_libraries/files_components/src/blades/comments/index","react","react-dom","react-redux","lodash","file-viewer/hooks/useStabilizedCallback","file-viewer/toolbar/video_thumbnails_v2","typescript/component_libraries/files_components/src/blades/comments/data/types"],(function(e,t,r,a,i,n,o,l,d,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentMarkers=void 0,i=r.__importStar(i);var c="comment-markers-container__fITsiVtXKT__toolbar_v2",m="comment-marker__1y5i1a1tCW__toolbar_v2",b=function(e){var t=e.fileId,r=e.duration,n=e.fileViewerId,m=e.audioVideoMetadata,b=e.logVideoAction,_=e.sharedLinkInfo,v=u.createCommentFileIdentifier(t,null==_?void 0:_.url),h=o.useDispatch(),p=o.useSelector((function(e){return e.threads[v]||{}})),k=i.useState(),T=k[0],y=k[1],C=d.useStabilizedCallback((function(e){h(a.activateThread({fileId:t,fileViewerId:n,isThirdParty:e.isThirdParty,threadId:e.id}))})),I="video"===(null==m?void 0:m[".tag"])?null==m?void 0:m.thumb_scrubber_vtt_url:void 0,g=i.useCallback(l.once((function(e){b(e?"scrubber_thumbnails_loaded":"scrubber_thumbnails_failed")})),[b]);return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:c},Object.keys(p).map((function(e){return i.default.createElement(f,{key:e,duration:r,thread:p[e],setHoveredThread:y})}))),I&&i.default.createElement(s.VideoThumbnailsComponent,{vttUrl:I,onScrubberThumbnailsLoaded:g,duration:r,lastHighlightedThread:T,openThreadInRightRail:C}))},f=function(e){var t=e.duration,r=e.thread,a=e.setHoveredThread,n=d.useStabilizedCallback((function(){return a(r)})),o=s.getTimeForThread(r);if(void 0===o)return null;var l=0===t?0:100*o/t;return i.default.createElement("div",{className:m,style:{left:l+"%"},onMouseEnter:n})};t.CommentMarkers=function(e){var t=e.container,a=r.__rest(e,["container"]);return n.createPortal(i.default.createElement(b,Object.assign({},a)),t)},t.CommentMarkers.displayName="CommentMarkers"}));
//# sourceMappingURL=markers.min.js-vflXcjVvl.map