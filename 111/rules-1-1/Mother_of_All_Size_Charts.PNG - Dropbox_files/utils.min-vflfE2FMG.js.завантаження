define(["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","modules/clean/cloud_docs/open_with_utils","modules/clean/file_store/utils","modules/clean/open_with","modules/clean/react/extensions/connect_flow","modules/clean/react/extensions/utils","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/open_button/types","modules/clean/react/file_viewer/open_with_helpers","modules/clean/react/file_viewer/unity/unity_utils","modules/clean/react/paper/utils","modules/core/i18n","modules/clean/react/file_viewer/logging","modules/clean/react/flows/conversions/actions/unzip","modules/core/browser_detection"],(function(e,n,t,i,o,r,s,l,a,u,p,c,d,f,h,_,m,O,A,g,v){"use strict";function y(e,n,i,o){var r;if(o.provider===s.OpenWithCloudDocProvider.GoogleDSS)r={type:f.OpenButtonAction.OPEN_WITH_CLOUD_DOC,userAction:c.UserAction.OpenWithCloudDocEditor};else{if(o.provider!==s.OpenWithCloudDocProvider.OfficeOnline)return null;r={type:f.OpenButtonAction.OPEN_WITH,userAction:c.UserAction.OpenInOfficeOnline}}return t.__assign({handler:function(){return o.handler(e,n,i)},spriteName:o.spriteName||null,iconUrl:o.iconUrl,text:o.text},r)}function U(e){for(var n=e.file,t=e.user,i=e.isOpenWithDisabled,o=[],r={gdd:!e.isCloudEditorDisabled,wopi:w({file:n,isOpenWithDisabled:i,user:t})},l=e.actionSource,a=0,u=s.getOpenWithCloudEditorInfo(n,t,r,l);a<u.length;a++){var p=y(n,t,l,u[a]);p&&o.push(p)}return o}function w(e){var n=e.file,t=e.isOpenWithDisabled,i=e.user;return!t&&h.OpenWithHelpers.canOpenWith(n,i)}function E(e,n){var t=(e?e.open_application_name:void 0)||O.intl.formatMessage({id:"Uyxn/h",defaultMessage:"Desktop"});return n?t:O.intl.formatMessage({id:"KtD8FA",defaultMessage:"Open in {app_name}"},{app_name:t})}function I(e){var n=(null!==e?e.file_browser_display_name:void 0)||O.intl.formatMessage({id:"Bbnzjx",defaultMessage:"File Browser"});return O.intl.formatMessage({id:"suwlZc",defaultMessage:"Show in {file_browser}"},{file_browser:n})}function D(e){var n=e.file,t=e.isFolder,i=e.user;return function(){_.UnityHelpers.openFile(n.ns_id,n.ns_path,i.id,t)}}function F(e){var n=e.file,t=e.user;return function(){m.openFileInPaper({file:n,user:t})}}Object.defineProperty(n,"__esModule",{value:!0}),n.shouldShowCoachmark=n.getOpenOptionsSharedFile=n.convertOpenWithCloudEditorInfo=n.getOpenOptions=void 0,i=t.__importDefault(i),a=t.__importDefault(a),n.getOpenOptions=function(e){var n=e.file,a=t.__rest(e,["file"]);return l.isBrowseFile(n)?(function(e){var n=e.file,t=e.hasOpenInPaperSupport,l=e.isUnityDisabled,a=e.isOpenWithDisabled,h=e.isCloudEditorDisabled,m=e.unityInfo,U=e.extraOptions,b=e.user,S=e.sharingServiceInfo,M=e.refreshSharingServiceInfo,N=e.showOpenWithShare,P=e.onPresentInZoom,x=e.isCloudBasedDoc,B=e.actionSource,C=e.landingPagesEnabled,W=e.isInActionBar,T=e.previewActionHandler,H=e.openDesktopActionHandler,k=e.goToFolderActionHandler,L=e.isCurrentFolderEligibleForAutomation,R=e.isSubfolderEligibleForAutomation,Z=e.hideZipAction,z=e.replayActionHandler,Y=[];!Z&&g.UnzipAction.selector([n])&&Y.push({handler:function(){g.UnzipAction.convert([n],b,{isCurrentFolderEligibleForAutomation:L,isSubfolderEligibleForAutomation:R,source:"browse"}),A.logUserAction(c.UserAction.DecompressFile,c.UserActionContext.TitleBarSplitButton)},spriteName:null,iconElement:i.default.createElement(r.UIIcon,{src:o.ZipPictogram}),text:g.UnzipAction.actionText,type:f.OpenButtonAction.DECOMPRESS_FILE,userAction:c.UserAction.DecompressFile});z&&Y.push({handler:z,spriteName:null,text:O.intl.formatMessage({id:"9saYUt",defaultMessage:"Replay"}),type:f.OpenButtonAction.OPEN_IN_REPLAY,userAction:c.UserAction.OpenInReplay});T&&Y.push({handler:T,spriteName:null,text:O.intl.formatMessage({id:"wHolW4",defaultMessage:"Preview (Dropbox)"}),type:f.OpenButtonAction.PREVIEW_FILE,userAction:c.UserAction.PreviewFile});if(H){var G=v.mac?O.intl.formatMessage({id:"3KanyU",defaultMessage:"Finder"}):O.intl.formatMessage({id:"kJ3mnY",defaultMessage:"File Explorer"});Y.push({handler:H,spriteName:null,text:G,type:f.OpenButtonAction.OPEN_IN_DESKTOP,userAction:c.UserAction.OpenInDesktop})}k&&Y.push({handler:k,spriteName:null,text:O.intl.formatMessage({id:"mppZEu",defaultMessage:"Go to folder"}),type:f.OpenButtonAction.GO_TO_FOLDER,userAction:c.UserAction.GoToFolder});if(!m)return Y;t&&Y.push({handler:F({file:n,user:b}),spriteName:"paper",text:O.intl.formatMessage({id:"MhNU0E",defaultMessage:"Copy to Paper"}),type:f.OpenButtonAction.OPEN_IN_PAPER,userAction:c.UserAction.CopyToPaper});!x&&(function(e){var n=e.isUnityDisabled,t=e.unityInfo;return null!=t&&!n&&_.UnityHelpers.isUnityFileSupported(t)})({isUnityDisabled:l,unityInfo:m})&&Y.push({handler:D({file:n,user:b,isFolder:!1}),spriteName:"ow_desktop",text:E(m,W),type:f.OpenButtonAction.UNITY_FILE,userAction:c.UserAction.OpenInUnity});for(var K=w({file:n,isOpenWithDisabled:a,user:b}),j={gdd:!h,wopi:K},J=s.getOpenWithCloudEditorInfo(n,b,j,B),q=0,Q=J;q<Q.length;q++){var V=Q[q],X=y(n,b,B,V);X&&Y.push(X)}!W&&(function(e){var n=e.isUnityDisabled,t=e.unityInfo;return null!=t&&!n&&_.UnityHelpers.isUnityFolderSupported(t)})({isUnityDisabled:l,unityInfo:m})&&Y.push({handler:D({file:n,user:b,isFolder:!0}),spriteName:"ow_folder",text:I(m),type:f.OpenButtonAction.UNITY_FOLDER,userAction:c.UserAction.OpenInUnityFolder});U&&U.forEach((function(e){e&&Y.push(e)}));W||Y.length||x||Y.push({handler:function(){return d.download(n)},spriteName:null,text:O.intl.formatMessage({id:"pHnJw0",defaultMessage:"Download"}),type:f.OpenButtonAction.DOWNLOAD,userAction:c.UserAction.Download});var $=!1,ee=!1;N&&S&&($=p.isSlackAvailable(S),ee=p.isZoomAvailable(S));$&&S&&M&&Y.push({handler:function(){return u.shareInSlackFlow(b,S,M,n,"open_with_button",void 0!==C?C:null)},spriteName:null,text:O.intl.formatMessage({id:"Qws4v2",defaultMessage:"Slack"}),type:f.OpenButtonAction.SHARE_TO_SLACK,userAction:c.UserAction.ShareToSlack});ee&&S&&P&&M&&Y.push({handler:function(){return u.presentInZoomFlow(b,S,M,P,"open_with_button",void 0!==C?C:null)},spriteName:null,text:O.intl.formatMessage({id:"mzy+1c",defaultMessage:"Zoom"}),type:f.OpenButtonAction.PRESENT_IN_ZOOM,userAction:c.UserAction.PresentInZoom});return Y})(t.__assign({file:n},a)):l.isSharedFile(n)?U(t.__assign({file:n},a)):[]},n.convertOpenWithCloudEditorInfo=y,n.getOpenOptionsSharedFile=U,n.shouldShowCoachmark=function(e,n){var t=e.map((function(e){return e.type})).includes(f.OpenButtonAction.UNITY_FILE),i=n&&a.default.is_adobe_app(n.open_application_identifier),o=e.map((function(e){return e.type})).includes(f.OpenButtonAction.OPEN_WITH);return t&&i||o}}));
//# sourceMappingURL=utils.min.js-vflyp-ML2.map