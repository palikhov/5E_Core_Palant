define("modules/clean/clipboard_v2",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClipboardV2=void 0;var n=(function(){function e(e,t){this.do_copy=this.do_copy.bind(this),this.onSuccess=e,this.onError=t}return e.prototype.do_copy=function(){document.execCommand("copy",!1)?this.onSuccess():this.onError()},e})();t.ClipboardV2=n})),define("modules/clean/react/file_viewer/collection_viewer",["require","exports","tslib","lodash","react","react-redux","modules/clean/file_store/utils","modules/clean/react/file_viewer/utils","modules/clean/react/file_viewer/file_viewer","modules/clean/previews/data/selectors","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/data/store","modules/clean/react/file_viewer/data/selectors","modules/clean/react/keyboard_binding/keyboard_binding_provider","modules/clean/react/keyboard_binding/keyboard_binding_connector","ts-keycode-enum","modules/clean/react/keyboard_binding/keyboard_binding","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/integrations/zoom_share_dialog/async_modal","modules/core/uri","modules/clean/history","modules/constants/file_viewer","modules/clean/react/file_viewer/sdk_file_viewer/async_file_viewer","modules/clean/react/file_viewer/sdk_file_viewer/utils","modules/constants/python","modules/clean/react/previews/constants"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v,M,y,C,b,I,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileCollectionViewer=t._FileCollectionViewer=void 0,s=n.__importStar(s),i=n.__importDefault(i),M=n.__importDefault(M);var k=u.getStoreForFileViewer();function w(e){var t=e.file,n=e.files,i=e.sharedLinkInfos,r=e.sharePermissions,l=e.shareTokens,c=(function(e,t,n){var i=t.filter((function(e){return!e.is_dir})),r=a.getFileRevisionId(e),l=s.find(i,(function(e){return a.getFileRevisionId(e)===r}));if(!l){var c=e.file_id;l=s.find(i,(function(e){return e.file_id===c}))}if(!l&&o.isPreviewPageRevampEnabled()&&i.length>0&&void 0!==n){var d=n;return n>=i.length&&(d=i.length>1?i.length-1:0),{file:i[d],files:i,newIndex:d}}l||(l=e);var u=i.indexOf(l);return-1===u?{file:l,files:[l],newIndex:0}:{file:l,files:i,newIndex:u}})(t,n,e.oldIndex);return{collection:{file:c.file,files:c.files,sharedLinkInfos:i,sharePermissions:r,shareTokens:l},currentIndex:c.newIndex}}var A=(function(e){function t(t){var n=e.call(this,t)||this;return n.updateFileViewer=function(){var e=n.props.file;n.openFile(e)},n.handleFlipNext=s.throttle((function(){var e=n.props.isFlippingEnabled,t=n.state,s=t.collection,i=t.currentIndex;if(e){n.props.onFlipNext&&n.props.onFlipNext();var r=i+1===s.files.length?0:i+1;n.switchFile(r)}}),100),n.handleFlipPrevious=s.throttle((function(){var e=n.props.isFlippingEnabled,t=n.state,s=t.collection,i=t.currentIndex;if(e){n.props.onFlipPrevious&&n.props.onFlipPrevious();var r=0===i?s.files.length-1:i-1;n.switchFile(r)}}),100),n.switchFile=function(e){var t=n.state.collection;n.setState({currentIndex:e});var s=t.files[e];n.updatePreviewUrl(s),n.openFile(s)},n.flipKeybindings=[g.hydrateKeyboardBinding({keyboardEventCriteria:{which:f.Key.RightArrow},callback:function(){n.handleFlipNext(),_.logUserAction(S.UserAction.FlipNext,S.UserActionContext.Keyboard)}}),g.hydrateKeyboardBinding({keyboardEventCriteria:{which:f.Key.LeftArrow},callback:function(){n.handleFlipPrevious(),_.logUserAction(S.UserAction.FlipPrevious,S.UserActionContext.Keyboard)}})],n.closeViewer=function(){var e=n.props.onCloseViewer;e&&e(),d.closeFile()},n.renderInSdk=function(e){switch(e){case I.FileViewOriginType.BROWSE:case I.FileViewOriginType.HOME:case I.FileViewOriginType.RECENTS:case I.FileViewOriginType.STARRED:case I.FileViewOriginType.SEARCH:case I.FileViewOriginType.VERSION_HISTORY:case I.FileViewOriginType.SHARED_LINK_PAGE:case I.FileViewOriginType.COLLECTIONS:return o.isPreviewPageRevampEnabled();case I.FileViewOriginType.SHARED_CONTENT_LINK_PAGE:return y.INBAND_FVSDK_LINKS;case I.FileViewOriginType.PHOTOS:return o.isPreviewPageRevampEnabled()&&y.WEB_PHOTOS_REFRESH;default:return!1}},n.state=w(t),n}return n.__extends(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.updateFileViewer()},t.prototype.componentDidMount=function(){var e=this.state,t=e.collection,n=e.currentIndex,s=this.props,i=s.previewApiDataMap,r=s.shouldPresentInZoom,l=s.user,c=s.file,d=t.files.map((function(e){var t=a.getFileRevisionId(e);return i[t]&&i[t].data}));o.preloadImages(d,n),this.setupPreviewUrl(c),l&&r&&E.asyncShowModal(l.id,c.file_id,"file-viewer-modal-overlay")},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this;if((function(e,t){var n=e.file,s=e.files,i=e.sharedLinkInfos,r=e.sharePermissions,a=e.shareTokens;return n!==t.file||s!==t.files||i!==t.sharedLinkInfos||r!==t.sharePermissions||a!==t.shareTokens})(this.props,e)){var s=this.state.currentIndex,i=e.file,r=w(n.__assign(n.__assign({},e),{file:i,oldIndex:s}));this.setState(r,(function(){s!==r.currentIndex&&t.switchFile(r.currentIndex)}))}},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.closeFile,n=e.onClose;t(),n&&n(),this.teardownPreviewUrl()},t.prototype.openFile=function(e){this.props.openFile(e)},t.prototype.setupPreviewUrl=function(e){this.props.skipOuterRouting||this.setPreviewUrl(e)},t.prototype.updatePreviewUrl=function(e){this.setPreviewUrl(e,!1)},t.prototype.teardownPreviewUrl=function(){this.props.skipOuterRouting||this.setPreviewUrl(null)},t.prototype.setPreviewUrl=function(e,t){if(void 0===t&&(t=!0),!this.props.disableRouting){var n=v.URI.parse(M.default.get_url()),s=v.URI.encode_parts(n.getPath()),i=n.removeQuery("select").removeQuery("page");if(null==e)i=i.removeQuery("preview");else{var r=a.getFilename(e);i=i.updateQuery({preview:r})}var o=i.getQuery();t?M.default.push_state(s,o,{immediatelyRestoreState:!1}):M.default.replace_state(s,o)}},t.prototype.renderSDKSurface=function(){var e=this.props,t=e.fileViewOrigin,n=e.hidePageChrome,r=e.user,a=e.browseContext,o=e.browseExceptions,l=e.canRestoreRevision,c=e.onRestoreRevision,d=e.brandingInfo,u=e.initialPreviewSourceContext,p=e.shouldFocusApproval,m=e.shouldFocusComment,h=e.activeCommentThreadId,f=e.appDownloadInterstitialDismissed,g=this.state,_=g.collection,S=g.currentIndex,E=s.get(_.sharedLinkInfos,S),v=s.get(_.sharePermissions,S),M=s.get(_.shareTokens,S);switch(t){case I.FileViewOriginType.BROWSE:case I.FileViewOriginType.VERSION_HISTORY:case I.FileViewOriginType.HOME:case I.FileViewOriginType.PHOTOS:case I.FileViewOriginType.STARRED:case I.FileViewOriginType.RECENTS:case I.FileViewOriginType.SEARCH:case I.FileViewOriginType.COLLECTIONS:if(!r)throw new Error("User is required to browse files");var y=void 0;switch(t){case I.FileViewOriginType.VERSION_HISTORY:y=b.SDKPreviewSurface.VERSION_HISTORY;break;case I.FileViewOriginType.HOME:y=b.SDKPreviewSurface.HOME;break;case I.FileViewOriginType.STARRED:y=b.SDKPreviewSurface.STARRED;break;case I.FileViewOriginType.RECENTS:y=b.SDKPreviewSurface.RECENTS;break;case I.FileViewOriginType.SEARCH:y=b.SDKPreviewSurface.SEARCH;break;case I.FileViewOriginType.PHOTOS:y=b.SDKPreviewSurface.PHOTOS;break;case I.FileViewOriginType.COLLECTIONS:y=b.SDKPreviewSurface.COLLECTIONS;break;default:y=b.SDKPreviewSurface.BROWSE}return i.default.createElement(C.AsyncFileViewer,{file:s.get(_.files,S),fileIndex:S,fileCount:_.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:E,sharePermission:v,shareToken:M,brandingInfo:d,user:r,closeFile:this.closeViewer,previewSurface:y,canRestoreRevision:l,onRestoreRevision:c,browseContext:a,browseExceptions:o,previewContentOnly:n,canShowFileFlippers:y===b.SDKPreviewSurface.SEARCH||y===b.SDKPreviewSurface.BROWSE||y===b.SDKPreviewSurface.COLLECTIONS,shouldFocusApproval:p,shouldFocusComment:m,activeCommentThreadId:h,hideOpenInAppInterstitial:!!f});case I.FileViewOriginType.SHARED_LINK_PAGE:if(!E||!v||!M)throw new Error("Missing required data to view");return i.default.createElement(C.AsyncFileViewer,{file:s.get(_.files,S),fileIndex:S,fileCount:_.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:E,sharePermission:v,shareToken:M,brandingInfo:d,closeFile:this.closeViewer,previewSurface:b.SDKPreviewSurface.SHARED_LINK,user:r,canShowFileFlippers:u===T.PreviewSourceContext.SharedLinkFolder||u===T.PreviewSourceContext.SharedLinkCollection,previewContentOnly:n,hideOpenInAppInterstitial:!!f});case I.FileViewOriginType.SHARED_CONTENT_LINK_PAGE:if(!E||!v||!M)throw new Error("Missing required data to view");if(!r)throw new Error("user required");return i.default.createElement(C.AsyncFileViewer,{file:s.get(_.files,S),fileIndex:S,fileCount:_.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:E,sharePermission:v,shareToken:M,brandingInfo:d,closeFile:this.closeViewer,previewSurface:b.SDKPreviewSurface.SHARED_CONTENT_LINK,user:r,canShowFileFlippers:!1,previewContentOnly:n,hideOpenInAppInterstitial:!!f});default:return null}},t.prototype.render=function(){var e=this.props,t=(e.files,e.fileViewOrigin),r=e.isOverflowZoomMode,a=(e.onFlipNext,e.onFlipPrevious,e.sharedLinkInfos,e.shareTokens,e.sharePermissions,e.skipOuterRouting,e.user),o=(e.browseContext,e.canRestoreRevision),c=e.onRestoreRevision,d=n.__rest(e,["files","fileViewOrigin","isOverflowZoomMode","onFlipNext","onFlipPrevious","sharedLinkInfos","shareTokens","sharePermissions","skipOuterRouting","user","browseContext","canRestoreRevision","onRestoreRevision"]),u=this.state,p=u.currentIndex,f=u.collection,g=this.renderInSdk(t);return i.default.createElement(m.KeyboardBindingProvider,null,i.default.createElement("div",null,g||r?null:i.default.createElement(h.KeyboardBindingConnector,{keyboardBindings:this.flipKeybindings}),g?this.renderSDKSurface():i.default.createElement(l.FileViewer,n.__assign({},d,{user:a,fileViewOrigin:t,fileIndex:p,fileCount:f.files.length,onFlipNext:this.handleFlipNext,onFlipPrevious:this.handleFlipPrevious,sharedLinkInfo:s.get(f.sharedLinkInfos,p),shareToken:s.get(f.shareTokens,p),sharePermission:s.get(f.sharePermissions,p),canRestoreRevision:o,onRestoreRevision:c}))))},t.defaultProps={isFlippingEnabled:!0},t.displayName="_FileCollectionViewer",t})(i.default.Component);t._FileCollectionViewer=A;var N=r.connect((function(e,t){return{isFlippingEnabled:p.getIsFlippingEnabled(e),previewApiDataMap:c.getApiDataForFiles(e,t.files),isOverflowZoomMode:p.isOverflowZoomMode(e)}}),{closeFile:d.closeFile,openFile:d.openFile})(A),L=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return i.default.createElement(r.Provider,{store:k},i.default.createElement(N,n.__assign({},this.props)))},t.displayName="FileCollectionViewerWithProvider",t})(i.default.Component);t.FileCollectionViewer=L})),define("modules/clean/react/file_viewer/controller",["require","exports","tslib","react","react-dom","modules/clean/react/file_viewer/data/store","modules/clean/previews/data/store","modules/clean/react/file_viewer/utils","modules/core/browser_detection","modules/clean/react/file_viewer/collection_viewer","modules/clean/react/file_viewer/url_utils","modules/clean/react/previews/constants","modules/clean/react/extensions/data/store"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateProps=t.render=t.isShown=t.close=t.updateFiles=t.open=t.prewarmPreviewData=void 0,s=n.__importDefault(s),i=n.__importDefault(i);var m=null,h="";function f(e,t){var n=r.getStoreForFileViewer();a.fetchPreviewDataUpdateStore(n,e,t)}t.prewarmPreviewData=function(e,t){f(e,t)};function g(){var e;e=document.getElementById(h),i.default.unmountComponentAtNode(e),(function(e){var t=document.getElementById(e);if(t){var n=t.getAttribute("data-preview-created-container");n&&"true"===n&&document.body.removeChild(t)}})(h),m=null}function _(e){var t=document.getElementById(h);m=i.default.render(s.default.createElement(c.FileCollectionViewer,n.__assign({},e)),t)}t.open=function(e,t,s,i,c){var m,f;m=h=i,(f=document.getElementById(m))||((f=document.createElement("div")).setAttribute("data-preview-created-container","true"),f.id=m,document.body.insertBefore(f,document.body.children[0]));var S=(function(e){var t=e.initialPreviewSourceAction,s=e.initialPreviewSourceContext,i=(e.sharedLinkInfos,e.sharePermissions,e.shareTokens,n.__rest(e,["initialPreviewSourceAction","initialPreviewSourceContext","sharedLinkInfos","sharePermissions","shareTokens"]));i.canClose=!0,null==s&&(s=o.getSourceContext()||u.PreviewSourceContext.Browse);null==t&&(t=o.getSourceAction());var r=l.is_supported_mobile_browser();i.isMobileUserAgent=r,r&&(i.hideComments=!0);var a=i.onCloseViewer;return i.onCloseViewer=function(){return g(),"function"==typeof a?a():void 0},n.__assign({initialPreviewSourceAction:t,initialPreviewSourceContext:s},i)})(c);(function(e,t){var n=r.getStoreForFileViewer();r.hydrateFileViewerNamespace(n,{},t),a.hydrateFileStoreAndPreviewStore(n,e,t),t&&p.initializeStore(t,e)})(e,s),_(n.__assign(n.__assign({},S),{titleBarCloseUrl:d.getCurrentFolderHref(),files:e,file:e[t],sharedLinkInfos:c.sharedLinkInfos,shareTokens:c.shareTokens,sharePermissions:c.sharePermissions,user:s,shouldPresentInZoom:c.shouldPresentInZoom}))},t.updateFiles=function(e){if(m){(function(e){var t=r.getStoreForFileViewer();r.updateFileStore(t,e)})(e);var t=m.props;f(e,t.user),_(n.__assign(n.__assign({},t),{files:e}))}},t.close=g,t.isShown=function(){return null!=m},t.render=_,t.updateProps=function(e){if(m){var t=m.props;_(n.__assign(n.__assign({},t),e))}}})),define("modules/clean/react/pass/action_timestamps",["require","exports","tslib","modules/clean/react/pass/constants","modules/core/exception"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTimestampsTracker=void 0,i=n.__importStar(i);var r=[s.LoggingActions.PRESENCE_RECEIVE,s.LoggingActions.TRANSMITTER_TOKEN_BEGIN,s.LoggingActions.TRANSMITTER_TOKEN_RECEIVE,s.LoggingActions.RECEIVER_TOKEN_BEGIN,s.LoggingActions.RECEIVER_TOKEN_RECEIVE,s.LoggingActions.SEEN_STATE_USERS_BEGIN,s.LoggingActions.SEEN_STATE_USERS_RECEIVE],a=(function(){function e(){this.allTimestamps={}}return e.prototype.record=function(e,t){if(t){var n=(new Date).getTime()/1e3;this.allTimestamps[t]=this.allTimestamps[t]||{};var s=this.allTimestamps[t];s.hasOwnProperty(e)?this.reportStackForRepeatedAction(s,e,t,n):s[e]=n}},e.prototype.get=function(e){return e&&this.allTimestamps[e]||{}},e.prototype.reportStackForRepeatedAction=function(e,t,n,s){if(!(r.indexOf(t)>=0)){var a=e[t];i.reportStack("Attempted to record action for which there existed a previous record",{severity:i.SEVERITY.NONCRITICAL,tags:["pass:actionTimestampsTracker"],exc_extra:{preview_session_id:n,action:t,oldTimestamp:a,newTimestamp:s}})}},e})();t.ActionTimestampsTracker=new a})),define("modules/clean/react/pass/actions",["require","exports","modules/clean/flux/dispatcher","modules/clean/react/pass/constants"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PassActions=void 0;var i=(function(){function e(){}return e.passPermissionRequest=function(e){n.Dispatcher.dispatch({type:s.ActionTypes.PASS_PERMISSION_REQUEST,data:{fileId:e}})},e.updatePermissions=function(e,t){n.Dispatcher.dispatch({type:s.ActionTypes.UPDATE_PERMISSIONS,data:{fileId:e,partialPermission:t}})},e.fetchPassError=function(e){n.Dispatcher.dispatch({type:s.ActionTypes.FETCH_PASS_ERROR,data:{fileId:e}})},e.fetchPassConcluded=function(e){n.Dispatcher.dispatch({type:s.ActionTypes.FETCH_PASS_CONCLUDED,data:{fileId:e}})},e.receivePresenceDelta=function(e,t,i,r){n.Dispatcher.dispatch({type:s.ActionTypes.RECEIVE_PRESENCE_DELTA,data:{userId:e,fileId:t,onlineUniqueUsers:i,offlineUniqueUsers:r}})},e.receivePresenceSnapshot=function(e,t,i){n.Dispatcher.dispatch({type:s.ActionTypes.RECEIVE_PRESENCE_SNAPSHOT,data:{userId:e,fileId:t,onlineUniqueUsers:i}})},e.resetPassInfo=function(e){n.Dispatcher.dispatch({type:s.ActionTypes.RESET_PASS_INFO,data:{fileId:e}})},e.updateSeenStateInfo=function(e,t,i){n.Dispatcher.dispatch({type:s.ActionTypes.UPDATE_SEEN_STATE_INFO,data:{fileId:e,seenStateInfo:t,seenStateCursor:i}})},e.updateUserTeamInteractionInfo=function(e,t){n.Dispatcher.dispatch({type:s.ActionTypes.UPDATE_USER_TEAM_INTERACTION_INFO,data:{fileId:e,userTeamInteractionInfo:t}})},e.updateSeenStateInfoContinue=function(e,t,i){n.Dispatcher.dispatch({type:s.ActionTypes.UPDATE_SEEN_STATE_INFO_CONTINUE,data:{fileId:e,seenStateInfo:t,seenStateCursor:i}})},e.discontinueSeenStateInfo=function(e){n.Dispatcher.dispatch({type:s.ActionTypes.DISCONTINUE_SEEN_STATE_INFO,data:{fileId:e}})},e.updateSeenStateUnavailable=function(e,t){n.Dispatcher.dispatch({type:s.ActionTypes.UPDATE_SEEN_STATE_UNAVAILABLE,data:{userId:e,fileId:t}})},e})();t.PassActions=i})),define("modules/clean/react/pass/beacon_presence_helpers",["require","exports","tslib","lodash","api_v2/user_client","api_v2/noauth_client","modules/clean/beacon","modules/clean/react/pass/action_timestamps","modules/clean/react/pass/seen_state_helpers","modules/clean/react/pass/actions","modules/clean/react/pass/constants","modules/clean/uuid/uuid","modules/clean/viewer","modules/constants/python"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m){"use strict";function h(e){c.PassActions.resetPassInfo(e),c.PassActions.fetchPassError(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.BeaconPresenceHelpers=void 0,s=n.__importStar(s),a=n.__importStar(a);var f=(function(){function e(){}return e.resetClassState=function(){delete this.receiverData,delete this.transmitterData,delete this.lastFileIdForReceiverTokenRequest,delete this.lastFileIdForTransmitterTokenRequest},e.shutdown=function(e){var t=e.beaconFileData,n=e.user,s=e.async,i=e.shouldWritePresence,r=void 0===i||i;if(delete this.lastFileIdForReceiverTokenRequest,delete this.lastFileIdForTransmitterTokenRequest,this.transmitterData){var a=this.transmitterData,o=a.beaconUserId,c=a.context,d=a.identifier;this.transmitterData.transmitter.stop(),delete this.transmitterData,!p.Viewer.get_viewer().is_assume_user_session&&r&&l.SeenStateHelpers.updateSeenStateOnResign(n,t,s,o,d,c)}this.receiverData&&this.receiverData.receiver&&(this.receiverData.receiver.stop(),delete this.receiverData)},e.receiveBeaconData=function(e){var t=e.beaconFileData,s=e.user,i=e.previewSessionId,r=e.onUpdate;return n.__awaiter(this,void 0,void 0,(function(){var e,l,u,p=this;return n.__generator(this,(function(n){switch(n.label){case 0:return e=t.fileId,o.ActionTimestampsTracker.record(d.LoggingActions.RECEIVER_TOKEN_BEGIN,i),this.lastFileIdForReceiverTokenRequest=e,[4,this.fetchReceiverToken(s,t)];case 1:return l=n.sent(),this.lastFileIdForReceiverTokenRequest!==e?[2]:l.beacon_presence_error?(c.PassActions.updatePermissions(e,{canReadPresence:!1}),"no_permission"===l.beacon_presence_error[".tag"]||h(e),[2]):(c.PassActions.updatePermissions(e,{canReadPresence:!0}),o.ActionTimestampsTracker.record(d.LoggingActions.RECEIVER_TOKEN_RECEIVE,i),u=[new a.PresenceParams(a.PresenceType.Context,s.account_id,this.APP,l.beacon_presence_info.context,l.beacon_presence_info.token)],this.receiverData&&this.receiverData.receiver&&this.receiverData.receiver.stop(),this.receiverData={authKey:l.beacon_presence_info.auth_key,receiver:new a.Receiver(u,(function(e){o.ActionTimestampsTracker.record(d.LoggingActions.PRESENCE_RECEIVE,i);var n=p.parseBeaconUpdates(e[0]);r(n,s.id,t)}),(function(){return p.receiveBeaconData({user:s,beaconFileData:t,previewSessionId:i,onUpdate:r})})),context:l.beacon_presence_info.context},this.receiverData.receiver.start(),[2])}}))}))},e.fetchReceiverToken=function(e,t){var n={file_info:g(t.fileId,t.url)};return(new i.UserApiV2Client).ns("file_presence").rpc("get_pass_receiver_token",n,{subjectUserId:e.id})},e.isOnline=function(e){return this.HARMONY_ONLINE_STATUSES.includes(e)||e===m.BEACON_ONLINE_STATUS},e.parseBeaconUpdates=function(e){for(var t,n={},s={},i=e.delta?"delta":"snapshot",r=0,a=null!==(t=e.delta||e.snapshot)&&void 0!==t?t:[];r<a.length;r++){var o=a[r],l=o.agent,c=l.user_id,d=l.source.identifier;this.isOnline(o.status)?(c in n||(n[c]={}),n[c][d]=!0):(c in s||(s[c]={}),s[c][d]=!0)}return{onlineUniqueUsers:n,offlineUniqueUsers:s,type:i}},e.transmitBeaconData=function(e){var t=e.user,i=e.beaconFileData,r=e.prevBeaconFileData,l=e.previewSessionId;return n.__awaiter(this,void 0,void 0,(function(){var e,p,f=this;return n.__generator(this,(function(n){switch(n.label){case 0:return e=i.fileId,this.transmitterData&&r&&(this.transmitterData.transmitter.add_or_update_agents([this.getAgentStatusForFile(this.transmitterData.beaconUserId,this.transmitterData.identifier,this.transmitterData.authKey,this.transmitterData.context,m.BEACON_OFFLINE_STATUS)]),setTimeout((function(){f.transmitterData.transmitter.stop()}),1)),o.ActionTimestampsTracker.record(d.LoggingActions.TRANSMITTER_TOKEN_BEGIN,l),this.lastFileIdForTransmitterTokenRequest=e,[4,this.fetchTransmitterToken(t,i)];case 1:return p=n.sent(),this.lastFileIdForTransmitterTokenRequest!==e?[2]:p.beacon_presence_error?(c.PassActions.updatePermissions(e,{canWritePresence:!1}),"no_permission"===p.beacon_presence_error[".tag"]||h(e),[2]):(c.PassActions.updatePermissions(e,{canWritePresence:!0}),o.ActionTimestampsTracker.record(d.LoggingActions.TRANSMITTER_TOKEN_RECEIVE,l),this.transmitterData={identifier:u.UUID.v4({allowInsecure:!0}),beaconUserId:p.beacon_presence_info.beacon_user_id,authKey:p.beacon_presence_info.auth_key,transmitter:new a.Transmitter(p.beacon_presence_info.token,(function(){return f.transmitBeaconData({user:t,beaconFileData:i,prevBeaconFileData:null,previewSessionId:l})}),s.noop),context:p.beacon_presence_info.context},this.transmitterData.transmitter.add_or_update_agents([this.getAgentStatusForFile(this.transmitterData.beaconUserId,this.transmitterData.identifier,this.transmitterData.authKey,this.transmitterData.context,m.BEACON_ONLINE_STATUS)]),this.transmitterData.transmitter.start(),[2])}}))}))},e.getAgentStatusForFile=function(e,t,n,s,i){var r=new a.Source(this.PLATFORM,this.SURFACE,t),o=new a.Agent(e,this.APP,s,r);return new a.AgentStatus(o,i,n)},e.fetchTransmitterToken=function(e,t){var n={file_info:g(t.fileId,t.url)};return e?(new i.UserApiV2Client).ns("file_presence").rpc("get_pass_transmitter_token",n,{subjectUserId:e.id}):(new r.NoAuthApiV2Client).ns("file_presence").rpc("logged_out/get_pass_transmitter_token",n,{})},e.APP="harmony",e.PLATFORM=a.Platforms.WEB,e.SURFACE="file_viewer",e.HARMONY_ONLINE_STATUSES=["modifier","viewer"],e})();function g(e,t){return t?{".tag":"shared_link_details",url:t}:{".tag":"file_identifier",file_identifier:e}}t.BeaconPresenceHelpers=f})),define("modules/clean/react/pass/pass_helpers",["require","exports","tslib","jquery","modules/clean/react/file_viewer/utils","modules/clean/react/previews/constants","modules/clean/react/file_viewer/models","modules/clean/react/pass/actions","modules/clean/react/pass/beacon_presence_helpers","modules/clean/react/pass/seen_state_helpers","modules/clean/react/pass/types","modules/clean/react/pass/constants","modules/clean/sharing/actions/sharing_actions","modules/clean/viewer"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PassHelpers=void 0,s=n.__importDefault(s);var h=u.MAX_FACES_NORMAL+u.MAX_OVERFLOW_BUTTON_INDICATOR+1,f=(function(){function e(){}return e.setup=function(t){var n=t.user,s=t.fileData,i=t.prevFileData,r=t.shouldWritePresence,a=void 0===r||r,l=t.skipSharingEndpoints,c=void 0!==l&&l,d=t.limit,u=void 0===d?150:d,p=s.file.file_id;this.shouldInitializePass(n,p,a)&&setTimeout((function(){o.PassActions.passPermissionRequest(p),e.makeAllRequests({user:n,fileData:s,prevFileData:i,shouldWritePresence:a,skipSharingEndpoints:c,limit:u})}),0)},e.teardown=function(e){var t=e.user,n=e.fileData,i=e.async,r=e.shouldWritePresence,a=void 0===r||r,o=n.file,c=n.url,u=o.file_id;if(this.shouldInitializePass(t,u,a)){s.default(window).off("beforeunload.passpresence");var p=new d.BeaconFileData(u,c);l.BeaconPresenceHelpers.shutdown({beaconFileData:p,user:t,async:i,shouldWritePresence:a})}},e.shouldInitializePass=function(e,t,n){return i.getSourceContext()!==r.PreviewSourceContext.SharedLinkCollection&&(null!==e||n)&&t},e.onBeaconUpdate=function(e,t,n){var s=n.fileId;"delta"===e.type?o.PassActions.receivePresenceDelta(t,s,e.onlineUniqueUsers,e.offlineUniqueUsers):"snapshot"===e.type&&o.PassActions.receivePresenceSnapshot(t,s,e.onlineUniqueUsers)},e.makeAllRequests=function(e){var t=this,n=e.user,i=e.fileData,r=e.prevFileData,u=e.limit,f=void 0===u?150:u,g=e.shouldWritePresence,_=void 0===g||g,S=e.skipSharingEndpoints,E=void 0!==S&&S,v=a.FilePreviewSession.currentSession&&a.FilePreviewSession.currentSession.id,M=i.file,y=i.url,C=M.file_id,b=M.fq_path,I=C||b,T=new d.BeaconFileData(M.file_id,y);n?(I&&!E&&(p.SharingActions.fetchFileMemberCount({user:n,contentId:I,limit:h,countGroupsAsMembers:!1,url:y,previewSessionId:v,runViewerInfoChecks:!0}),p.SharingActions.listMembers({user:n,contentId:I,isFolder:!1,limit:6,url:y,previewSessionId:v,includeSeenState:!1})),c.SeenStateHelpers.fetchSeenStateInfo(n,C,f,y,v),l.BeaconPresenceHelpers.receiveBeaconData({beaconFileData:T,user:n,previewSessionId:v,onUpdate:this.onBeaconUpdate})):o.PassActions.updatePermissions(C,{canReadPresence:!1,canReadSeenState:!1});var k=m.Viewer.get_viewer().is_assume_user_session;if(!_||k)o.PassActions.updatePermissions(C,{canWritePresence:!1});else{var w=r&&new d.BeaconFileData(r.file,r.url);l.BeaconPresenceHelpers.transmitBeaconData({user:n,beaconFileData:T,prevBeaconFileData:w,previewSessionId:v}),s.default(window).off("beforeunload.passpresence"),s.default(window).on("beforeunload.passpresence",(function(e){t.teardown({user:n,fileData:i,async:!1,shouldWritePresence:!0}),e.returnValue=void 0}))}},e})();t.PassHelpers=f})),define("modules/clean/react/pass/seen_state_helpers",["require","exports","tslib","api_v2/transport/fetch","api_v2/user_client","api_v2/noauth_client","api_v2/error","api_v2/types","modules/clean/react/file_viewer/models","modules/clean/react/pass/action_timestamps","modules/clean/react/pass/actions","modules/clean/react/pass/constants"],(function(e,t,n,s,i,r,a,o,l,c,d,u){"use strict";function p(e){d.PassActions.resetPassInfo(e),d.PassActions.fetchPassError(e)}function m(e,t){return{file_identifier:e,shared_link_details:t?{url:t}:void 0}}var h;Object.defineProperty(t,"__esModule",{value:!0}),t.SeenStateHelpers=t.APITransport=void 0,(function(e){e.create=function(e){return e?new s.FetchAsyncTransport:new s.FetchSyncTransport}})(h=t.APITransport||(t.APITransport={}));var f=(function(){function e(){}return e.constructFakeSeenStateInfo=function(e,t,n){for(var s=n.seen_states,i=[],r=0,a=s;r<a.length;r++){var o=a[r];i.push(o.seen_state_user.user_id)}for(var l=0,c=e;l<c.length;l++){var d=c[l];if(!i.includes(d.user_id)){d.sharing_access_type&&(d.sharing_access_type=this.convertToUnion(d.sharing_access_type));var u={seen_state_user:d,when_last_seen:t,seen_events:[]};s.unshift(u)}}return n.seen_states=s,n},e.convertToUnion=function(e){return e?o.Union.parse(e):null},e.parseSeenStatePassPlatform=function(e){if(e)switch(o.Union.parse(e).type){case"web":return u.PassPlatform.WEB;case"mobile":return u.PassPlatform.MOBILE;case"desktop":return u.PassPlatform.DESKTOP}return u.PassPlatform.UNKNOWN},e.fetchSeenStateUsers=function(e,t,s,r,o){return n.__awaiter(this,void 0,void 0,(function(){var h,f,g,_;return n.__generator(this,(function(n){switch(n.label){case 0:return h=Date.now()/1e3,f=l.FilePreviewSession.currentSession&&l.FilePreviewSession.currentSession.id,c.ActionTimestampsTracker.record(u.LoggingActions.SEEN_STATE_USERS_BEGIN,f),[4,(new i.UserApiV2Client).ns("seen_state").rpc("get_seen_state_users",{user_ids:s,file_info:m(r,o)},{subjectUserId:e}).catch(a.catchApiError((function(){return p(r),Promise.reject(void 0)})))];case 1:return g=n.sent(),c.ActionTimestampsTracker.record(u.LoggingActions.SEEN_STATE_USERS_RECEIVE,f),_=this.constructFakeSeenStateInfo(g,h,t),d.PassActions.updateSeenStateInfo(r,_),[2]}}))}))},e.processAndUpdateSeenStateInfo=function(e,t,n,s){var i=n[0],r=i.seen_state_info,a=i.seen_state_error,l=i.seen_state_cursor;if(a)if(s)d.PassActions.discontinueSeenStateInfo(t);else{if("no_permission"===o.Union.parse(a).type)return;p(t)}else{for(var c=0,u=r.seen_states;c<u.length;c++){var m=u[c];m.seen_state_user.sharing_access_type=this.convertToUnion(m.seen_state_user.sharing_access_type),m.platform_type=this.parseSeenStatePassPlatform(m.platform_type)}s?d.PassActions.updateSeenStateInfoContinue(t,r,l):d.PassActions.updateSeenStateInfo(t,r,l)}},e.fetchSeenStateInfo=function(e,t,s,r,o){return n.__awaiter(this,void 0,void 0,(function(){var l,h,f,g,_;return n.__generator(this,(function(n){switch(n.label){case 0:return c.ActionTimestampsTracker.record(u.LoggingActions.SEEN_STATE_BEGIN,o),[4,(new i.UserApiV2Client).ns("seen_state").rpc("get_seen_state_info",{file_infos:[m(t,r)],limit:s},{subjectUserId:e.id}).catch(a.catchApiError((function(){return p(t),Promise.reject(void 0)})))];case 1:return l=n.sent(),!0,f=l[0],g=f.seen_state_info,_=f.seen_state_error,h=!(!g||_),d.PassActions.updatePermissions(t,{canReadSeenState:h}),h||d.PassActions.updateSeenStateUnavailable(e.id,t),h&&c.ActionTimestampsTracker.record(u.LoggingActions.SEEN_STATE_RECEIVE,o),this.processAndUpdateSeenStateInfo(e,t,l,!1),h&&this.fetchRemainingSeenStateInfo(e,t,l,r),[2]}}))}))},e.fetchRemainingSeenStateInfo=function(e,t,n,s){var i=n[0].seen_state_cursor;if(i&&i.has_next){var r=i.cursor_state;r&&this.fetchSeenStateInfoContinue(e,t,r,1e5,s)}},e.fetchSeenStateInfoContinue=function(e,t,s,r,o){return n.__awaiter(this,void 0,void 0,(function(){var l;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,(new i.UserApiV2Client).ns("seen_state").rpc("get_seen_state_info/continue",{file_infos:[m(t,o)],cursor:s,limit:r},{subjectUserId:e.id}).catch(a.catchApiError((function(){return d.PassActions.discontinueSeenStateInfo(t),Promise.reject(void 0)})))];case 1:return l=n.sent(),this.processAndUpdateSeenStateInfo(e,t,l,!0),[2]}}))}))},e.updateSeenStateOnResign=function(e,t,n,s,a,o){var l=h.create(n);return(function(e,t,n,s,a){return e?t(new i.UserApiV2Client(a).ns("seen_state"),s,{subjectUserId:e.id}):n(new r.NoAuthApiV2Client(a).ns("seen_state"),s,{})})(e,(function(e,t,n){return e.rpc("update_timestamps_and_mark_offline",t,n)}),(function(e,t,n){return e.rpc("logged_out/mark_offline",t,n)}),{beacon_infos:[{beacon_user_id:s,context:o,shared_link_url:t.url,identifier:a}]},l)},e})();t.SeenStateHelpers=f})),define("modules/clean/react/pass/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeaconFileData=t.FacepileInfo=t.UserInfo=void 0;var n=function(e,t,n,s,i,r,a,o,l,c,d,u,p){this.key=e,this.displayName=t,this.isActive=n,this.isViewer=s,this.incrementOverflowBasis=i,this.email=r,this.accessLevel=a,this.whenLastSeen=o,this.photoUrl=l,this.userId=c,this.platformType=d,this.same_team=u,this.is_guest=p};t.UserInfo=n;var s=(function(){function e(e,t){this.isLoaded=e,this.data=t}return e.create=function(t){return new e(!0,t)},e.createNotLoaded=function(){return new e(!1,null)},e})();t.FacepileInfo=s;var i=function(e,t){this.fileId=e,this.url=t};t.BeaconFileData=i})),define("modules/clean/react/teams/modals/limited_team_share_folder_modal",["require","exports","tslib","create-react-class","react","prop-types","react-addons-pure-render-mixin","modules/clean/analytics","modules/clean/filepath/filepath","modules/clean/react/components/modal","modules/core/browser","modules/core/i18n","modules/core/uri"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showModalInstance=void 0,s=n.__importDefault(s),i=n.__importDefault(i),r=n.__importDefault(r),a=n.__importDefault(a),l=n.__importStar(l),d=n.__importStar(d);var m=function(e){return o.TeamsWebActionsLogger.log(e,null,null,null,!1,o.TeamsWebActionsLogger.LOG_CATEGORY.TEAM_INFO)},h=s.default({mixins:[a.default],displayName:"LimitedTeamShareFolderModal",propTypes:{fqPath:r.default.string.isRequired},_navigateToTeam:function(){return m("team_folder_share_invite"),d.redirect(new p.URI({path:"/team",query:{invite_members:"",tk:"team_folder_share_invite",_camp:"modal"}}))},render:function(){var e=l.filename(this.props.fqPath);return i.default.createElement(c.Modal,{title:u.intl.formatMessage({id:"lTRVQL",defaultMessage:"Share {folder_name}"},{folder_name:e}),acceptButtonText:u.intl.formatMessage({id:"sTZgnw",defaultMessage:"Invite"}),onAccept:this._navigateToTeam,showButtonDivider:!0},i.default.createElement("div",null,u.intl.formatMessage({id:"4BBW2C",defaultMessage:"To share the {folder_name} with someone, invite them to join your team!"},{folder_name:e})))}});t.showModalInstance=function(e){var t=c.Modal.showInstance(i.default.createElement(h,n.__assign({},e)));return m("team_folder_share"),t}})),define("modules/clean/sharing/action_types",["require","exports","modules/clean/flux/action_type"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingActionTypes=t.ShareModalActionTypes=void 0,t.ShareModalActionTypes=n.withActionNamespace("share-modal-actions",{SHARE_MODAL_OPEN:"share-modal-open",SHARE_MODAL_CLOSE:"share-modal-close",RESET_MODAL_STATE:"reset-modal-state",OPEN_LINK_SETTINGS_MODAL:"open-link-settings-modal",OPEN_FOLDER_SETTINGS_MODAL:"open-folder-settings-modal",OPEN_SHARED_LINK_MODAL:"open-shared-link-modal",CLOSE_LINK_SETTINGS_MODAL:"close-link-settings-modal",CLOSE_FOLDER_SETTINGS_MODAL:"close-folder-settings-modal",CLOSE_SHARED_LINK_MODAL:"close-shared-link-modal",CLEAR_METADATA:"clear-metadata",FETCH_METADATA_REQUEST:"metadata-request",FETCH_METADATA_SUCCESS:"metadata-success",FETCH_METADATA_FAILURE:"metadata-failure",CLEAR_LINK_METADATA:"clear-link-metadata",FETCH_LINK_METADATA_REQUEST:"link-metadata-request",FETCH_LINK_METADATA_SUCCESS:"link-metadata-success",FETCH_LINK_METADATA_FAILURE:"link-metadata-failure",CLEAR_SHARING_PREFS:"clear-sharing-prefs",FETCH_SHARING_PREFS_REQUEST:"sharing-prefs-request",FETCH_SHARING_PREFS_SUCCESS:"sharing-prefs-success",FETCH_SHARING_PREFS_FAILURE:"sharing-prefs-failure",ERROR_MESSAGE:"error-message",ERROR_MESSAGE_CLEAR:"error-message-clear",CLEAR_FILE_MEMBERSHIP:"clear-file-membership",FETCH_FILE_MEMBERSHIP_REQUEST:"fetch-file-membership-request",FETCH_FILE_MEMBERSHIP_SUCCESS:"fetch-file-membership-success",FETCH_FILE_MEMBERSHIP_FAILURE:"fetch-file-membership-failure",CLEAR_FOLDER_MEMBERSHIP:"clear-folder-membership",FETCH_FOLDER_MEMBERSHIP_REQUEST:"fetch-folder-membership-request",FETCH_FOLDER_MEMBERSHIP_SUCCESS:"fetch-folder-membership-success",FETCH_FOLDER_MEMBERSHIP_FAILURE:"fetch-folder-membership-failure",FETCH_USER_ACCOUNTS_REQUEST:"fetch-user-accounts-request",FETCH_USER_ACCOUNTS_SUCCESS:"fetch-user-accounts-success",FETCH_USER_ACCOUNTS_FAILURE:"fetch-user-accounts-failure",FETCH_USER_ACCOUNTS_CONTINUED_REQUEST:"fetch-user-accounts-continued-request",FETCH_USER_ACCOUNTS_CONTINUED_SUCCESS:"fetch-user-accounts-continued-success",CLEAR_FILE_MEMBERSHIP_LAST_SEEN_INFO:"clear-file-membership-last-seen-info",FETCH_FILE_MEMBER_COUNT_REQUEST:"fetch-file-member-count-request",FETCH_FILE_MEMBER_COUNT_SUCCESS:"fetch-file-member-count-success",CHANGE_RECIPIENTS:"change-recipients",CHANGE_RECIPIENT_MESSAGE:"change-recipient-message",CHANGE_RECIPIENT_ACCESS:"change-recipient-access",UPDATE_RECIPIENT_VALIDATION:"update-recipient-validation",CREATE_LINK_REQUEST:"create-link-request",CREATE_LINK_SUCCESS:"create-link-success",CREATE_LINK_FAILURE:"create-link-failure",DISPLAY_CONTENT_NAME_INFO:"display-content-name-info",SEND_SHARE_REQUEST:"send-share-request",SEND_SHARE_SUCCESS:"send-share-success",SEND_SHARE_FAILURE:"send-share-failure",SHARE_FOLDER_REQUEST:"share-folder-request",SHARE_FOLDER_SUCCESS:"share-folder-success",SHARE_FOLDER_FAILURE:"share-folder-failure",SEND_FOLDER_SHARE_REQUEST:"send-folder-share-request",SEND_FOLDER_SHARE_SUCCESS:"send-folder-share-success",SEND_FOLDER_SHARE_FAILURE:"send-folder-share-failure",CHANGE_MEMBER_ACCESS_REQUEST:"change-member-access-request",CHANGE_MEMBER_ACCESS_SUCCESS:"change-member-access-success",CHANGE_MEMBER_ACCESS_FAILURE:"change-member-access-failure",MEMBER_ACTION_PENDING:"member-action-pending",MEMBER_ACTION_COMPLETE:"member-action-complete",REMOVE_MEMBER_SUCCESS:"remove-member-success",REMOVE_MEMBER_KEEP_ACCESS:"remove-member-keep-access",TRANSFER_OWNER_SUCCESS:"transfer-owner-success",FETCH_CURRENT_ACCOUNT_REQUEST:"fetch-current-account-request",FETCH_CURRENT_ACCOUNT_SUCCESS:"fetch-current-account-success",FETCH_MEMBER_COUNTS_REQUEST:"fetch-member-counts-request",FETCH_MEMBER_COUNTS_SUCCESS:"fetch-member-counts-success",HANDLE_CONTENT_NAME_CHANGE:"handle-content-name-change",VALIDATE_CONTENT_NAME_SUCCESS:"validate-content-name-success",VALIDATE_CONTENT_NAME_ERROR:"validate-content-name-error",CHANGE_LINK_AUDIENCE_REQUEST:"change-link-audience-request",CHANGE_LINK_AUDIENCE_SUCCESS:"change-link-audience-success",CHANGE_LINK_AUDIENCE_FAILURE:"change-link-audience-failure",UNBLOCK_MEMBER_LIST_ON_PASS_LOAD:"unblock-member-list-on-pass-load",UPDATE_SHARING_SETTINGS_SUCCESS:"update-sharing-settings-success",DELETE_LINK_METADATA_SUCCESS:"delete-link-metadata-success",CHANGE_CREATE_COMMENT_CHECKBOX:"change-create-comment-checkbox",SET_UPSELL_COUNTER_PREF:"set-upsell-counter-pref",SET_UPSELL_COUNTER_PREF_SUCCESS:"set-upsell-counter-pref-success",SET_DISMISSED_DOCSEND_BANNER:"set-dismissed-docsend-banner",CHANGE_LINK_AUDIENCE_SELECTION:"change-link-audience-selection",REMOVE_LINK_AUDIENCE_SELECTION:"remove-link-audience-selection"}),t.SharingActionTypes=n.withActionNamespace("sharing-actions",{CLEAR_EVERYTHING:"clear-everything",FETCH_METADATA_BATCH_ATTEMPT:"fetch-metadata-batch-attempt",FETCH_METADATA_BATCH_SUCCESS:"fetch-metadata-batch-success",FETCH_METADATA_BATCH_FAIL:"fetch-metadata-batch-fail"})})),define("modules/clean/sharing/actions/share_modal",["require","exports","tslib","react","modules/clean/analytics","api_v2/error","modules/clean/browse_interface","modules/clean/contacts/contact","modules/clean/contacts/types","modules/clean/em_string","modules/clean/filepath/filepath","modules/clean/flux/dispatcher","modules/clean/react/browse/constants","modules/clean/react/components/modal","modules/clean/react/pass/actions","spectrum-sharing/utils/sharing_constants","modules/clean/react/pass/constants","modules/clean/react/pass/pass_helpers","modules/clean/react/pass/store","modules/clean/sharing/sharing_settings_util","modules/clean/sharing/action_types","modules/clean/sharing/actions/sharing_actions","modules/clean/sharing/api","modules/clean/sharing/api/types/metadata","modules/clean/sharing/api/util/types","modules/clean/sharing/confirmation_modals/member_access_change_confirmation_modal","modules/clean/sharing/confirmation_modals/relinquish_membership_confirmation_modal","modules/clean/sharing/sharing_settings_modal","modules/clean/sharing/access_level","modules/clean/sharing/parent_folder_access_modal","modules/clean/sharing/share_page/action_types","modules/clean/sharing/stores/sharing_info","modules/clean/sharing/stores/sharing_info_util","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants","spectrum-sharing/utils/logging","spectrum-sharing/utils/logging","modules/clean/sharing/ui_util","modules/clean/sharing/ui_notifications_util","modules/clean/sharing/views/inherited_members","modules/clean/teams/modals/create_team_prompt_modal_v2","modules/clean/web_user_action_logger","modules/clean/web_user_action_events","modules/clean/deprecated_ajax/ajax_form_extract_errors","modules/constants/teams","modules/core/browser","modules/core/i18n","modules/clean/react/snackbar","modules/clean/sharing/actions/contact_validators","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/views/share_modal_evolution/utils/logging","modules/clean/sharing/sharing_questionnaire/content/constants","modules/clean/sharing/sharing_questionnaire/util","modules/clean/sharing/views/constants","dig-components/icons","dig-components/icons/src","modules/clean/sharing/views/rich_snackbar/exp_esign_snackbar","modules/clean/sharing/views/constants"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v,M,y,C,b,I,T,k,w,A,N,L,P,F,O,R,x,D,U,B,H,V,q,G,W,j,K,z,Y,Q,Z,X,J,$,ee,te,ne){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalActionHandler=t.incompleteInbandShare=void 0,s=n.__importDefault(s),a=n.__importStar(a),l=n.__importDefault(l),G=n.__importStar(G),W=n.__importStar(W);var se,ie=s.default.createElement;t.incompleteInbandShare=new Set,(function(e){e.copy="copy",e.share="share"})(se||(se={}));var re=(function(){function re(o,l,c,d,h,g){var _=this;this.groupSeenStateInfo=null,this.linkSeenStateInfo=null,this.presentAccountIds=null,this.hasLoggedSet={},this.setUrl=null,this.haveTrackedEsignUpsell=!1,this.changeAccess=function(e,t,n){void 0===n&&(n=!1);var s=Promise.resolve({}),i=e.memberId(),r=_.getContentInfo(),a=r.id,o=_.sharingInfo.isNonUserRelativeContext();if(t===f.MEMBER_ACTION.REMOVE)i!==_.user.account_id||o?(s=(r.isFileFolder()?_.client.getParentFolderAccess({contentId:_.sharingInfo.parentSharedFolderId(),memberId:i}):_.removeMember(a,e,n,r.isFolder())).then((function(t){_.showParentFolderAccessModalIfQualified("remove",e,t)})),_.showScreen(Y.MANAGE_SCREEN)):_.relinquishMembership(a,n);else if(t===w.ACCESS_LEVEL.OWNER)s=_.client.transferContent({contentId:a,memberId:i}).then((function(){_.dispatch(v.ShareModalActionTypes.TRANSFER_OWNER_SUCCESS),D.sharingNotificationSuccess(j.intl.formatMessage({id:"sAxJWH",defaultMessage:"Made {name} the owner"},{name:e.displayName()})),_.fetchDataAndShowShareModal()}));else{var l=void 0;if(r.isFileFolder()&&t===w.ACCESS_LEVEL.READER)l=_.client.getParentFolderAccess({contentId:_.sharingInfo.parentSharedFolderId(),memberId:i,accessLevel:t});else{var c=_.getContentInfo().isFileFolder();c&&_.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_PENDING,{member:e}),l=_.shareIfFileFolder(j.intl.formatMessage({id:"xYinYM",defaultMessage:"Updating member access..."})).then((function(){return c&&_.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_COMPLETE,{member:e}),_.changeMemberAccess(_.getContentInfo().id,e,t)})).catch((function(t){_.reportShareFailure(t),c&&_.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_COMPLETE,{member:e})}))}s=l.then((function(t){_.fetchInitialData(),K.Snackbar.complete(j.intl.formatMessage({id:"x5Je3g",defaultMessage:"Member access updated."}),"sharing-notification"),_.showParentFolderAccessModalIfQualified("update",e,t)}))}return s.then(_.refreshSharedWithColumnContentData)},this.changeRecipientAccess=function(e){return n.__awaiter(_,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.dispatch(v.ShareModalActionTypes.CHANGE_RECIPIENT_ACCESS,{newAccess:e}),[4,this.validateContacts(this.getSharingInfo().recipientTokens())];case 1:return t.sent(),[2]}}))}))},this.changeRecipientMessage=function(e){_.dispatch(v.ShareModalActionTypes.CHANGE_RECIPIENT_MESSAGE,{message:e})},this.changeCreateCommentCheckbox=function(e){_.dispatch(v.ShareModalActionTypes.CHANGE_CREATE_COMMENT_CHECKBOX,{checked:e})},this.enableNamespaceCreation=function(e){return _.getSharingInfo().sharingPrefs().can_create_edit_folder_link&&_.getContentInfo().isFileFolder()&&"editor"===e&&_.getSharingInfo().fetchMetadataStatus()!==J.FETCH_METADATA_STATUS.FAIL},this.createNamespaceIfNeeded=function(e){if(!_.enableNamespaceCreation(e))return Promise.resolve({});if(_.sharingInfo.shareFolderPromise())return _.sharingInfo.shareFolderPromise();var t=void 0;return null!=_.sharingInfo.shouldSyncThisFolder()&&(t=_.sharingInfo.shouldSyncThisFolder()?"default":"not_synced"),_.shareFolderSimple(_.getFqPath(),_.sharingInfo.shareAsConfidential(),t)},this.getCreateSharedLinkTTI=function(e){return Date.now()-e},this.buildExtraFieldForCreateSharedLinkEvents=function(e,t,n){return{is_alpha:!0,access:n,include_ns_creation:e,timing:_.getCreateSharedLinkTTI(t)}},this.createSharedLink=function(e,t){var s=Date.now(),i=_.enableNamespaceCreation(e),a=e||"viewer";return _.log(O.TiburonEventName.ClickTibCreateLink),_.log(O.TiburonEventName.AttemptCreateSharedLinkWithSettings,{access:a}),_.dispatch(v.ShareModalActionTypes.CREATE_LINK_REQUEST),"editor"===e?K.Snackbar.sync(j.intl.formatMessage({id:"OvEApa",defaultMessage:"Creating edit link..."}),!1,"sharing-notification",void 0,_.exp_getUpsellSnackbarProps(se.copy)):K.Snackbar.sync(j.intl.formatMessage({id:"8PPImn",defaultMessage:"Creating view link..."}),!1,"sharing-notification",void 0,_.exp_getUpsellSnackbarProps(se.copy)),_.createNamespaceIfNeeded(e).catch((function(e){return _.reportCreatingNamespaceError(e),_.log(O.TiburonEventName.FailCreateSharedLinkWithSettings,n.__assign({http_status_code:e.raw&&e.raw.status,error_tag:e.error&&e.error[".tag"]||"undefined_error",error_summary:e&&e.summary,fail_at:"ns_creation"},_.buildExtraFieldForCreateSharedLinkEvents(i,s,a))),_.dispatch(v.ShareModalActionTypes.CREATE_LINK_FAILURE),Promise.reject(e)})).then((function(){var o={};e&&(o.access=e),t&&(o.audience=t);var l=_.getContentInfo(),c=l.fileId()||l.displayPath();return _.client.createSharedLink({fileIdOrPath:c,settings:o}).then((function(t){_.dispatch(v.ShareModalActionTypes.CREATE_LINK_SUCCESS,{linkMetadata:t}),_.refreshSharedWithColumnLinkData(),_.log(O.TiburonEventName.SucceedCreateSharedLinkWithSettings,n.__assign(n.__assign({http_status_code:200,response_status:"success"},_.buildExtraFieldForCreateSharedLinkEvents(i,s,a)),Q.buildExtraFromLinkMetadata(t))),"editor"===e?K.Snackbar.complete(j.intl.formatMessage({id:"JtONmB",defaultMessage:"Edit link created."}),"sharing-notification",void 0,_.exp_getUpsellSnackbarProps(se.copy)):K.Snackbar.complete(j.intl.formatMessage({id:"ufl8ka",defaultMessage:"View link created."}),"sharing-notification",void 0,_.exp_getUpsellSnackbarProps(se.copy))})).catch(r.catchApiError((function(e){return e instanceof r.AppError&&e.error&&"access_denied"===e.error[".tag"]?_.getContentInfo().isFolder()?D.sharingNotificationError(j.intl.formatMessage({id:"/ivxG2",defaultMessage:"You don’t have permission to create a link to this folder"})):D.sharingNotificationError(j.intl.formatMessage({id:"p1EB+W",defaultMessage:"You don’t have permission to create a link to this file"})):_.showStandardError(e),e.error&&"shared_link_already_exists"===e.error[".tag"]?_.log(O.TiburonEventName.SucceedCreateSharedLinkWithSettings,n.__assign({http_status_code:e.raw&&e.raw.status,response_status:"success"},_.buildExtraFieldForCreateSharedLinkEvents(i,s,a))):_.log(O.TiburonEventName.FailCreateSharedLinkWithSettings,n.__assign({http_status_code:e.raw&&e.raw.status,error_tag:e.error&&e.error[".tag"]||"undefined_error",error_summary:e&&e.summary,fail_at:"link_creation"},_.buildExtraFieldForCreateSharedLinkEvents(i,s,a))),_.dispatch(v.ShareModalActionTypes.CREATE_LINK_FAILURE),Promise.reject(e)})))}))},this.fetchMetadataForFile=function(e){return M.SharingActions.loadFileMetadata({user:_.user,contentId:e.id,sourceUrl:e.url(),client:_.client}).catch(r.catchApiError((function(t){_.handleLoadingError(t,e)})))},this.fetchMetadataForFileFolder=function(e){var t,s,i=f.MEMBER_ACTION.ALL,a=f.VALIDATE_PATH_PERMISSIONS_CONFIDENTIAL_AWARE,o={actions:Object.keys(a),listMembersArg:{actions:i},shouldParseMetadataFromError:!0},l=!!_.sharingInfo.isNonUserRelativeContext();return l&&!_.user.is_cdm_member?(t=function(e){return n.__awaiter(_,void 0,void 0,(function(){var t;return n.__generator(this,(function(n){return t=this.contentManagerValidateFolderPath(e),[2,this.client.validatePathContinue(t,!1)]}))}))},s={nsId:e.nsId(),nsPath:e.nsPath()}):(t=_.client.validateFqPath,s={fqPath:e.displayPath(),shareAsConfidential:_.sharingInfo.shareAsConfidential()}),t(n.__assign(n.__assign({},s),o)).then((function(e){var t=e.metadata,n=e.inheritedMembers;_.handleGetMetadataSuccess(t);var s=_.getContentInfo();_.listMembers({contentId:s.id,url:s.url(),members:s.isFileFolder()&&n||void 0,isNonUserRelativeContext:l})})).catch(r.catchApiError((function(t){_.handleLoadingError(t,e)})))},this.fetchMetadataForSharedFolder=function(e){return _.client.getMetadata({contentId:e.id,isInSharedFolder:e.isInSharedFolder(),actions:Object.keys(f.ALPHA_FOLDER_METADATA_PERMISSIONS)}).then(_.handleGetMetadataSuccess).catch(r.catchApiError((function(t){_.handleLoadingError(t,e)})))},this.handleSetConfidentialClick=function(e,t){m.Modal.showInstance(s.default.createElement(U.SetInheritedMembersUIConfidentialModal,{actionHandler:_,initialIsConfidentialFolder:e,contentInfo:_.getContentInfo(),teamName:t,onCancel:_.openShareModal,userId:_.user.id}))},this.handleInheritedMemberAccessChange=function(e,t,n,i){var r=_.getContentInfo(),a=_.getSharingInfo();m.Modal.showInstance(s.default.createElement(U.SingleInheritedUserAccessChangeModal,{actionHandler:_,member:e,teamName:t,userId:_.user.id,isSharedFolder:r.isSharedFolder(),parentFolderName:a.parentFolderName(),currentFolderName:a.name(),isUserSelf:e.memberId()===_.user.account_id,isDowngrading:n,newAccessLevel:i}))},this.handleMemberAccessChange=function(e,t){var n=e.displayName();if(t===f.MEMBER_ACTION.REMOVE||t===w.ACCESS_LEVEL.OWNER){var s=t===f.MEMBER_ACTION.REMOVE&&e.memberId()===_.user.account_id,i=_.getContentInfo().isFolder(),r=_.getContentInfo().isNestedSharedFolder(),a=e.permissions.leave_a_copy&&e.permissions.leave_a_copy.allow,o=function(n){_.changeAccess(e,t,!0===n)},l=_.openManageAccessModal,c=_.getSharingInfo().parentFolderName(),d=_.getSharingInfo().isConfidentialFolder(),u=e.type()===C.MembershipType.GROUPS,p=_.getSharingInfo().isNonUserRelativeContext(),m=_.getSharingInfo().isFolderInsideTeamFolderTree(),h=t===f.MEMBER_ACTION.REMOVE&&e.is_inherited;s?T.showRelinquishMembershipConfirmationModal(i,r,o,l,a,d):h&&i&&!m?_.changeAccess(e,t):I.showMemberAccessChangeConfirmationModal(n,t,i,r,a,o,l,d,p,c,u)}else _.changeAccess(e,t)},this.handleGetMetadataSuccess=function(e){_.dispatch(v.ShareModalActionTypes.FETCH_METADATA_SUCCESS,{metadata:e}),u.Dispatcher.dispatch({type:N.SharePageActionTypes.FETCH_METADATA_SUCCESS,metadata:e,user:_.user})},this.handleLinkSettingsClick=function(e){void 0===e&&(e={isLinkOnly:!0,linkAccessLevel:"viewer"}),i.TeamsWebActionsLogger.log("open_link_settings_modal");var t=F.VIEW_LINK_SETTINGS,n=void 0;"editor"===e.linkAccessLevel&&(t=F.EDIT_LINK_SETTINGS),_.log(O.TiburonEventName.OpenLinkSettingsModal,{settings_tab:t}),e.isLinkOnly||(n=_.sharingInfo.isFolder()?_.sharingInfo.folderPolicy():_.sharingInfo.filePolicy()),m.Modal.showInstance(s.default.createElement(k.SharingSettingsModal,{actionHandler:_,sharingInfo:_.sharingInfo,sharingPrefs:_.sharingInfo.sharingPrefs(),client:_.client,currentTab:t,currentPolicy:n,folderName:_.sharingInfo.name(),isFolder:_.sharingInfo.isFolder(),isSharedFolder:_.getContentInfo().isSharedFolder(),isFolderInsideTeamFolderTree:_.sharingInfo.isFolderInsideTeamFolderTree(),isInContentManager:_.getSharingInfo().isNonUserRelativeContext(),isTeamSharedFolder:_.sharingInfo.isTeamSharedFolder(),isUserOnOwnerTeam:_.sharingInfo.isUserOnOwnerTeam(),linkMetadata:_.sharingInfo.linkMetadata(),onDismiss:function(){return m.Modal.close()},permissions:_.sharingInfo.permissions(),ownerTeam:_.sharingInfo.ownerTeam(),user:_.user}))},this.handleLoadingError=function(e,t){var n,s,i;if(e instanceof r.AppError){if("not_a_member"===(null===(n=e.error)||void 0===n?void 0:n[".tag"])||"no_access"===(null===(s=e.error)||void 0===s?void 0:s[".tag"]))D.sharingNotificationError(j.intl.formatMessage({id:"O4CWz2",defaultMessage:"You don’t have permission to share this folder"})),m.Modal.close();else if("invalid_id"===(null===(i=e.error)||void 0===i?void 0:i[".tag"]))D.sharingNotificationError(j.intl.formatMessage({id:"4GGEvb",defaultMessage:"This folder can’t be shared"})),m.Modal.close();else if(e.error&&e.error.too_many_mounts&&t.isFolder()&&!t.extras.exists){var a=_.user.is_cdm_member;e.error.too_many_mounts[".tag"]===ne.NS_LIMIT_ERROR.TOTAL_MOUNTS_EXCEEDED?_.failSnackbarWithHelpCenter(x.totalMountsExceededFailSnackbarMsg(e),"/help/9259"):e.error.too_many_mounts[".tag"]===ne.NS_LIMIT_ERROR.HOME_MOUNTS_EXCEEDED?_.failSnackbarWithHelpCenter(x.homeMountsExceededFailSnackbarMsg(a,e),"/help/9259"):e.error.too_many_mounts[".tag"]===ne.NS_LIMIT_ERROR.TREE_SIZE_EXCEEDED&&_.failSnackbarWithHelpCenter(x.treeSizeExceededFailSnackbarMsg(e),"/help/9259"),m.Modal.close()}_.dispatch(v.ShareModalActionTypes.FETCH_METADATA_FAILURE,{reason:e.error&&e.error.bad_path&&e.error.bad_path[".tag"]||e.error&&e.error.too_many_mounts&&e.error.too_many_mounts[".tag"]})}else _.showStandardError(e),m.Modal.close()},this.handleSetConfidential=function(e,t){void 0===t&&(t=!1);var n=_.getContentInfo(),s=n.isSharedFolder()?n.sharedFolderId().toString():void 0,i=function(e){return _.handleGetMetadataSuccess(e),e},a=function(e,t,n){return _.client.setConfidentiality({contentId:e,confidential:t,keepInheritedMembers:n}).then(i)};return s?a(s,e,t):_.client.share({fqPath:_.getFqPath(),confidential:e}).then(i).catch((function(n){if(n instanceof r.AppError&&n.error&&n.error.bad_path&&"already_shared"===n.error.bad_path[".tag"]){var s=b.folderMetadataApiToRecord(n.error.bad_path);_.handleGetMetadataSuccess(s);var i=_.getContentInfo().sharedFolderId();return a(i.toString(),e,t)}return Promise.reject(n)}))},this.openSharingQuestionnaire=function(e,t){void 0===e&&(e=Y.SHARE_SCREEN);var n=_.getSharingInfo(),s=n.getShowSharingQuestionnaire();if(s){m.Modal.close();var i=n.user();s((function(n){var s=n.file;return{file:s,user:i,sharingQuestionnaireId:Z.SharingQuestionnaireId.BTS_M1,variant:X.getFileBtsM1Variant(s),onAbort:function(){_.showScreen(e,t)},entryPoint:Z.SharingQuestionnaireEntryPoints.SHARE_MODAL_FOOTER}}))}},this.openShareModal=function(){m.Modal.showInstance(ie(_.shareModalClass,{actionHandler:_}))},this.openSharingSettingsModal=function(e){m.Modal.showInstance(ie(_.shareModalClass,{actionHandler:_,initialScreen:Y.SETTINGS_SCREEN,initialCurrentTab:e}))},this.showScreen=function(e,t){switch(e){case Y.SHARE_SCREEN:_.openShareModal();break;case Y.SETTINGS_SCREEN:var n=_.getSharingInfo().isFolder()?F.FOLDER_SETTINGS:F.FILE_SETTINGS,s=t||n;_.openSharingSettingsModal(s);break;case Y.MANAGE_SCREEN:_.openManageAccessModal();break;default:_.openShareModal()}},this.openManageAccessModal=function(){m.Modal.showInstance(ie(_.shareModalClass,{actionHandler:_,initialScreen:Y.MANAGE_SCREEN}))},this.recipientsChange=function(e,t){return void 0===t&&(t=""),Promise.resolve({}).then((function(){return _.dispatch(v.ShareModalActionTypes.CHANGE_RECIPIENTS,{recipientTokens:e,recipientRawInput:t})})).then((function(){return _.validateContacts(e)}))},this.redirectToPath=function(t,s){if(null!=_.setUrl&&_.getSharingInfo().getInitialProps().content&&_.getSharingInfo().fqPath()){t!==_.getSharingInfo().fqPath()?(_.setUrl({path:t,qargs:{share:!0}}),W.reload()):(r=_.getSharingInfo().getInitialProps().content,s&&new Promise((function(t,n){e(["modules/clean/sharing/share_modal_util"],t,n)})).then(n.__importStar).then((function(e){return(0,e.showShareModal)(_.user,r,{origin:f.SHARE_ACTION_ORIGIN_TYPE.PARENT_FOLDER_MODAL},_.setUrl)})))}else{var i=a.browse_uri_for_fq_path(_.user,t);s&&i.updateQuery({shareoptions:"1"}),W.redirect(i.toString())}var r},this.refreshSharedWithColumnContentData=function(){_.getContentInfo().isFolder()?u.Dispatcher.dispatch({type:p.SharedWithActionType.SIGNAL_SHARED_FOLDER_DATA_OUT_OF_DATE,data:{}}):u.Dispatcher.dispatch({type:p.SharedWithActionType.SIGNAL_SHARED_FILE_DATA_OUT_OF_DATE,data:{fileIds:[_.getContentInfo().id]}})},this.handleShareClick=function(e){return _.sharingInfo.contentInfo().pathExists()?_.sendShare(e):_.setContentNameAndSendShare(e)},this.failSnackbarWithHelpCenter=function(e,t,n){var i;i=n||j.intl.formatMessage({id:"sGKSF8",defaultMessage:"Learn more"}),K.Snackbar.show(s.default.createElement(K.Snackbar,{actionButtonText:i,closeButtonText:j.intl.formatMessage({id:"0NA7+K",defaultMessage:"Close"}),onActionClick:function(){W.open_tab(t)},title:e,variant:"fail",id:"sharing-notification"}))},this.shareIfFileFolder=function(e,t){if(_.getSharingInfo().shouldCloseImmediately()?m.Modal.close():K.Snackbar.sync(e,!0,"sharing-notification",void 0,_.exp_getUpsellSnackbarProps(se.share)),!_.getContentInfo().isFileFolder())return Promise.resolve({});if(_.sharingInfo.shareFolderPromise())return _.sharingInfo.shareFolderPromise();var n=void 0;return null!=_.sharingInfo.shouldSyncThisFolder()&&(n=_.sharingInfo.shouldSyncThisFolder()?"default":"not_synced"),_.shareFolderSimple(_.getFqPath(),_.sharingInfo.shareAsConfidential(),n,t)},this.reportCreatingNamespaceError=function(e){e instanceof r.RateLimitError?K.Snackbar.fail(j.intl.formatMessage({id:"+v688d",defaultMessage:"Folder updates in progress. Try again in a few minutes."}),"sharing-notification"):e instanceof r.AppError&&"too_many_files"===e.error[".tag"]?K.Snackbar.fail(j.intl.formatMessage({id:"XIuX+L",defaultMessage:"Couldn’t create link. Too many files in this folder."}),"sharing-notification"):x.isTotalMountsExceededError(e)?K.Snackbar.fail(x.getTotalMountsExceededMsg(),"sharing-notification"):x.isTreeSizeExceededError(e)?K.Snackbar.fail(x.getTreeSizeExceededMsg(),"sharing-notification"):x.isHomeMountsExceededError(e)?K.Snackbar.fail(x.getHomeMountsExceededMsg(),"sharing-notification"):K.Snackbar.fail(j.intl.formatMessage({id:"15YAHw",defaultMessage:"There was a problem completing this request."}),"sharing-notification")},this.reportShareFailure=function(e){e instanceof r.RateLimitError?_.failSnackbarWithHelpCenter(j.intl.formatMessage({id:"/sRvdA",defaultMessage:"Folder updates in progress — please try again later."}),"/help/9259"):e instanceof r.AppError&&"too_many_files"===e.error[".tag"]?_.failSnackbarWithHelpCenter(j.intl.formatMessage({id:"Js1Gcw",defaultMessage:"Couldn’t share. If this folder has a lot of files, try sharing fewer files."}),"/support",x.getContactSupportMessage()):e instanceof r.AppError&&"internal_error"===e.error[".tag"]?_.failSnackbarWithHelpCenter(j.intl.formatMessage({id:"7/f5Vp",defaultMessage:"Couldn’t share, but it might work if you reload the page and try again."}),"/support",x.getContactSupportMessage()):x.isTotalMountsExceededError(e)?_.failSnackbarWithHelpCenter(x.getTotalMountsExceededMsg(),"/support",x.getContactSupportMessage()):x.isTreeSizeExceededError(e)?_.failSnackbarWithHelpCenter(x.getTreeSizeExceededMsg(),"/support",x.getContactSupportMessage()):x.isHomeMountsExceededError(e)?_.failSnackbarWithHelpCenter(x.getHomeMountsExceededMsg(),"/support",x.getContactSupportMessage()):K.Snackbar.fail(x.convertIfHTML(x.genAddMemberErrorMessage(e)),"sharing-notification")},this.showParentFolderAccessModalIfQualified=function(e,t,n){null!=n&&m.Modal.showInstance(s.default.createElement(A.ParentFolderAccessModal,{contentInfo:_.getContentInfo(),memberAccessLevelResult:n,memberDisplayName:t.displayName()||"",originalAction:e,isInContentManager:_.sharingInfo.isNonUserRelativeContext(),onClose:_.openShareModal,onParentFolderClicked:_.redirectToPath}))},this.parseParentFolderAccessError=function(e){var t=e.error;if("member_error"===e.error[".tag"]&&(t=e.error.member_error),"no_explicit_access"===t[".tag"])return b.memberAccessLevelApiToRecord(_.user.id,t);_.showStandardError(e)},this.changeLinkAudienceSelection=function(e,t){_.dispatch(v.ShareModalActionTypes.CHANGE_LINK_AUDIENCE_SELECTION,{accessLevel:e,audience:t})},this.removeLinkAudienceSelection=function(e){_.dispatch(v.ShareModalActionTypes.REMOVE_LINK_AUDIENCE_SELECTION,{accessLevel:e})},this.updateLinkAudience=function(e,t){var s=E.getLinkPolicy(e).set("audience",t),i=E.getLinkPolicy(e),r=E.getModifiedSettings(e,s,i);return r&&r.settings?(_.log(O.TiburonEventName.ChangeSharedLinkAudience,n.__assign({old_audience:i.audience,new_audience:t,screen:R.ScreenName.ShareScreen},Q.buildExtraFromLinkMetadata(e))),_.updateLinkSettings([r])):Promise.reject("Error getting modified settings for audience "+t)},this.updateLinkSettings=function(e){return Promise.all(e.map((function(e){return _.client.modifySharedLinkSettings(e)}))).then((function(e){D.sharingNotificationSuccess(j.intl.formatMessage({id:"8TOykk",defaultMessage:"Settings saved."}));for(var t=[],n=function(n){var s=e.find((function(e){return(n.link_permissions.link_access_level||"viewer")===(e.link_permissions.link_access_level||"viewer")}));t.push(s||n)},s=0,i=_.sharingInfo.sharedLinks();s<i.length;s++){n(i[s])}_.setSharedLinks(t),_.refreshSharedWithColumnLinkData()})).catch((function(){return D.sharingNotificationError(j.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),Promise.reject()}))},this.waitForAllMembersLoaded=function(){if(_.sharingInfo.areMembersFullyLoaded())return Promise.resolve({});var e=_.sharingInfo.fetchingMembersRequest();return e&&e.promise||Promise.resolve({})},this.onPageNavigationAttempt=function(e){if(t.incompleteInbandShare.size>0)return _.log(O.TiburonEventName.AttemptNavigateAwayDuringShare),e.preventDefault(),e.returnValue="",""},this.onPageNavigationAway=function(e){t.incompleteInbandShare.size>0&&_.log(O.TiburonEventName.SucceedNavigateAwayDuringShare)},this.client=o,this.asyncContactValidator=new z.AsyncContactValidator(this.client),this.user=l,this.shareModalClass=c,this.setUrl=d||null,this.contentManagerValidateFolderPath=h,this.openSettingsFromTheExternalSharePageQuickActions=g}return re.prototype.initializeShareModal=function(e,t){void 0===t&&(t={});var n=e.contentInfo;return u.Dispatcher.dispatch({type:v.ShareModalActionTypes.SHARE_MODAL_OPEN,data:{initialProps:t,shareModalInfoAttrs:e},contentIds:P.getContentIdsForContentInfo(n),user:this.user}),this.sharingInfo=L.sharingInfoStore.getSharingInfo(this.user.id,n.id),this.fetchInitialData()},re.prototype.fetchDataAndShowShareModal=function(){this.fetchInitialData(),this.openShareModal()},re.prototype.fetchInitialData=function(){var e=this.sharingInfo.contentInfo(),t=this.sharingInfo.isNonUserRelativeContext();this.beginTime=Date.now(),this.fetchPassInfo();var n=[];return e.isFileFolder()?n.push(this.fetchMetadataForFileFolder(e)):(n.push(this.listMembers({contentId:e.id,url:e.url(),isNonUserRelativeContext:t})),e.isFile()?n.push(this.fetchMetadataForFile(e)):e.isSharedFolder()&&n.push(this.fetchMetadataForSharedFolder(e))),n.push(this.fetchMemberCounts()),n.push(this.fetchCurrentAccount()),n.push(this.fetchSharingPrefs()),this.sharingInfo.shouldFetchLinkMetadata()&&n.push(this.fetchLinkMetadata()),Promise.all(n)},re.prototype.fetchPassInfo=function(){var e=this;this.sharingInfo.shouldBlockMemberListOnPassLoad()&&setTimeout((function(){return e.dispatch(v.ShareModalActionTypes.UNBLOCK_MEMBER_LIST_ON_PASS_LOAD)}),4e3);var t=this.getPassFetchingInfo(),n=t.shouldFetchPass,s=t.fileId;if(n&&s){this.clearCachedPassInfo();var i=S.passStore.passFetchingStatus(s);if(g.fetchingStatusIsSuccessful(i)){var r=S.passStore.getLinkAndGroupSeenStateInfo(s),a=r.groupSeenStateInfo,o=r.linkSeenStateInfo;this.groupSeenStateInfo=a,this.linkSeenStateInfo=o,this.presentAccountIds=S.passStore.presence(s)}else i===g.PassFetchingStatus.NOT_YET_KNOWN&&_.PassHelpers.setup({user:this.user,fileData:this.getFileData(),prevFileData:null,shouldWritePresence:!1,skipSharingEndpoints:!0})}},re.prototype.getAsyncContactValidator=function(){return this.asyncContactValidator},re.prototype.getSharingInfo=function(){return this.sharingInfo},re.prototype.clearCachedPassInfo=function(){var e;e=[null,null,null],this.groupSeenStateInfo=e[0],this.linkSeenStateInfo=e[1],this.presentAccountIds=e[2]},re.prototype.getPassInfo=function(){var e,t=this.getContentInfo();if(t.isFolder())return{groupSeenStateInfo:{},linkSeenStateInfo:[],presentAccountIds:[],passFetchingStatus:g.PassFetchingStatus.ERROR};if(this.groupSeenStateInfo&&this.linkSeenStateInfo&&this.presentAccountIds)return{groupSeenStateInfo:this.groupSeenStateInfo,linkSeenStateInfo:this.linkSeenStateInfo,presentAccountIds:this.presentAccountIds,passFetchingStatus:g.PassFetchingStatus.PASS_SUCCESS};var s=this.getPassFetchingInfo().fileId;if(!s)return e=[{},[],[]],this.groupSeenStateInfo=e[0],this.presentAccountIds=e[1],{groupSeenStateInfo:{},linkSeenStateInfo:[],presentAccountIds:[],passFetchingStatus:g.PassFetchingStatus.ERROR};var i=S.passStore.getPassPermissions(s),r=S.passStore.passFetchingStatus(s);if(!g.fetchingStatusIsComplete(r))return{groupSeenStateInfo:{},linkSeenStateInfo:[],presentAccountIds:[],passFetchingStatus:g.PassFetchingStatus.FETCHING};if(null==i||!i.canReadPresence)return{groupSeenStateInfo:{},linkSeenStateInfo:[],presentAccountIds:[],passFetchingStatus:g.PassFetchingStatus.ERROR};var a=S.passStore.getLinkAndGroupSeenStateInfo(s),o=a.linkSeenStateInfo,l=a.groupSeenStateInfo;return this.linkSeenStateInfo=o,this.groupSeenStateInfo=l,this.presentAccountIds=n.__spreadArrays(S.passStore.presence(s)||[]),this.isContentInfoForFilePreview(t)&&this.presentAccountIds.indexOf(this.user.account_id)<0&&this.presentAccountIds.push(this.user.account_id),{groupSeenStateInfo:this.groupSeenStateInfo,linkSeenStateInfo:this.linkSeenStateInfo,presentAccountIds:this.presentAccountIds,passFetchingStatus:r}},re.prototype.getPassFetchingInfo=function(){var e=this.getContentInfo();if(e.extras.origin&&["BROWSE_FILE_ACTIONS","BROWSE_FILE_FACEPILE","BROWSE_FILE_ROW","PREVIEW_PAGE","PREVIEW_PAGE_FACEPILE","PAPER_INTEGRATION","GOOGLE_DSS"].indexOf(e.extras.origin)>=0&&e.isFile()){var t=e.extras.fileId,n=this.isContentInfoForFilePreview(e);return{shouldFetchPass:!!t&&!n&&e.isFile(),fileId:t}}return{shouldFetchPass:!1}},re.prototype.getUrl=function(){var e=this.sharingInfo.linkMetadata();return e?e.url:void 0},re.prototype.getFileData=function(e){var t=this.getPassFetchingInfo().fileId;return{file:{file_id:void 0===t?null:t},url:e}},re.prototype.getContentInfo=function(){return this.sharingInfo.contentInfo()},re.prototype.getOpenSettingsFromTheExternalSharePageQuickActions=function(){return this.openSettingsFromTheExternalSharePageQuickActions},re.prototype.dispatch=function(e,t){void 0===t&&(t={}),u.Dispatcher.dispatch({type:e,data:t,contentIds:[this.getContentInfo().id],user:this.user})},re.prototype.changeMemberAccessSimple=function(e,t,n){return this.client.updateMember({contentId:e,memberId:t,accessLevel:n})},re.prototype.changeMemberAccess=function(e,t,n){var s=this,i=t.access_type;return this.log(O.TiburonEventName.SelectChangeMemberPermission,{new_access:n,old_access:i}),this.dispatch(v.ShareModalActionTypes.CHANGE_MEMBER_ACCESS_REQUEST,{member:t,newAccess:n}),this.changeMemberAccessSimple(e,t.memberId(),n).then((function(e){if(s.log(O.TiburonEventName.SucceedChangeMemberPermission,{http_status_code:200,response_status:"success",is_alpha:!1}),e.access_level&&e.warning)return s.dispatch(v.ShareModalActionTypes.CHANGE_MEMBER_ACCESS_FAILURE,{member:t,prevAccess:e.access_level}),e})).catch(r.catchApiError((function(e){var n=e.error&&e.error[".tag"];return s.log(O.TiburonEventName.FailChangeMemberPermission,{http_status_code:e.raw&&e.raw.status,error_tag:n||"undefined",is_alpha:!1}),s.dispatch(v.ShareModalActionTypes.CHANGE_MEMBER_ACCESS_FAILURE,{member:t,prevAccess:i}),s.parseParentFolderAccessError(e)})))},re.prototype._constructSearchResults=function(e){var t=this;return e.map((function(e){if("group_id"in e)return new o.Contact({type:l.default.NEW_STYLE_GROUP,group_id:e.group_id,name:e.name,members:e.members,on_team:e.dbx_team_id===t.user.team_dbtid,group_size:e.group_size});if("dbx_account_id"in e)return new o.Contact({type:l.default.EMAIL,dbx_account_id:e.dbx_account_id,dbx_team_id:e.dbx_team_id,name:e.name,email:e.email,photo_url:e.photo_url,on_team:e.dbx_team_id===t.user.team_dbtid});throw new Error("Could not parse contact result.")}))},re.prototype.suggestTargets=function(e,t){var n=this;return this.client.targetsSearch(e,t).then((function(e){n.log(O.TiburonEventName.AttemptTargetSearch);var t=n._constructSearchResults(e.entries);return n.log(O.TiburonEventName.SucceedTargetSearch),t})).catch(r.catchApiError((function(e){t&&t.aborted||(n.log(O.TiburonEventName.AttemptTargetSearch),n.log(O.TiburonEventName.FailTargetSearch,{error:e.message}),n.showStandardError(e))}))).catch((function(e){n.log(O.TiburonEventName.FailTargetSearch,{error:e.message})}))},re.prototype.validateContacts=function(e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,this._validateContacts(e,!1)];case 1:return[2,t.sent()]}}))}))},re.prototype.resetContactValidations=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return[4,this._validateContacts(this.getSharingInfo().recipientTokens(),!0)];case 1:return[2,e.sent()]}}))}))},re.prototype._validateContacts=function(e,t){return void 0===t&&(t=!1),n.__awaiter(this,void 0,void 0,(function(){var s,i,r,a,o,l,c,d;return n.__generator(this,(function(n){switch(n.label){case 0:return s=this.getSharingInfo(),i=s.recipientAccess(),r=s.recipientValidation()[i]||{},0===(a=t?e:e.filter((function(e){return!r[e.getKey()]}))).length?[2]:(o={},s.sharingPrefs().in_server_side_contact_validation_settings?(l=s.contentInfo(),c=l.isFileFolder()?this.getFqPath():String(l.id),[4,this.getAsyncContactValidator().validate(this.user.id,c,l,s.recipientAccess(),a)]):[3,2]);case 1:return o=n.sent(),[3,3];case 2:o=this.localValidation(a),n.label=3;case 3:return this.dispatch(v.ShareModalActionTypes.UPDATE_RECIPIENT_VALIDATION,{recipientValidation:(d={},d[i]=o,d),resetCurrentValidations:t}),[2]}}))}))},re.prototype.localValidation=function(e){var t=this,n=this.getSharingInfo(),s={};return e.forEach((function(e){return s[e.getKey()]=x.validateContact(e,t.user,n.ownerTeam(),n.folderPolicy(),n.isTeamSharedFolder(),n.isFolderInsideTeamFolderTree(),n.memberCountWithRecipients())})),s},re.prototype.fetchLinkMetadata=function(){var e=this;return"/"!==this.getContentInfo().displayPath()?(this.dispatch(v.ShareModalActionTypes.FETCH_LINK_METADATA_REQUEST),this.client.sharedLinkInfo({fileIdOrPath:this.getContentInfo().idForLink()}).then((function(t){e.dispatch(v.ShareModalActionTypes.FETCH_LINK_METADATA_SUCCESS,{sharedLinks:t})})).catch((function(){e.dispatch(v.ShareModalActionTypes.FETCH_LINK_METADATA_FAILURE),e.isContentInfoForPaper(e.getContentInfo())||e.sharingInfo.isNonUserRelativeContext()||(e.showStandardError(),m.Modal.close())}))):Promise.resolve({})},re.prototype.fetchMemberCounts=function(){var e=this.getContentInfo();return e.isFile()?M.SharingActions.fetchFileMemberCount({user:this.user,contentId:e.id,limit:f.FETCH_FILE_MEMBER_COUNT_LIMIT}):e.isSharedFolder()||e.isFolder()&&e.isInSharedFolder()?M.SharingActions.fetchFolderMemberCount({user:this.user,contentId:e.isSharedFolder()?e.sharedFolderId():e.nsId(),client:this.client}):Promise.resolve({})},re.prototype.fetchSharingPrefs=function(){var e=this;return this.dispatch(v.ShareModalActionTypes.FETCH_SHARING_PREFS_REQUEST),this.client.getSharingPrefs().then((function(t){e.dispatch(v.ShareModalActionTypes.FETCH_SHARING_PREFS_SUCCESS,{sharingPrefs:t})}))},re.prototype.setSeenUpsellCounterPref=function(e){var t=this;return this.dispatch(v.ShareModalActionTypes.SET_UPSELL_COUNTER_PREF),this.client.setSharingPrefs({has_seen_share_modal_upsell_premium_sharing_counter:e}).then((function(){t.dispatch(v.ShareModalActionTypes.SET_UPSELL_COUNTER_PREF_SUCCESS)}))},re.prototype.setDismissedDocsendBanner=function(){this.dispatch(v.ShareModalActionTypes.SET_DISMISSED_DOCSEND_BANNER)},re.prototype.setHasSeenPostSharingEsignPref=function(){return this.client.setSharingPrefs({has_seen_esign_post_sharing:!0})},re.prototype.setLastSeenPostSharingEsignTsPref=function(){return this.client.setSharingPrefs({is_in_esign_post_sharing_exclusion_period:!0})},re.prototype.onShareModalUnmount=function(e){this.teardownPass();var t=e&&e.serializeInputData()||{};this.dispatch(v.ShareModalActionTypes.SHARE_MODAL_CLOSE,t);var n=this.getSharingInfo().getInitialProps();n.onClose&&n.onClose()},re.prototype.fetchCurrentAccount=function(){var e=this;return this.dispatch(v.ShareModalActionTypes.FETCH_CURRENT_ACCOUNT_REQUEST),this.client.getCurrentAccountCached().then((function(t){e.dispatch(v.ShareModalActionTypes.FETCH_CURRENT_ACCOUNT_SUCCESS,{teamPolicy:t.team&&t.team.sharing_policies,isFamilyUser:t.is_family_user})}))},re.prototype.handleContentNameChange=function(e){var t="SIMPLIFIED_WIZARD_UI::CONTENT_NAME_CHANGE";this.hasLoggedSet[t]||(this.sharingExperimentsLog(t),this.hasLoggedSet[t]=!0),this.dispatch(v.ShareModalActionTypes.HANDLE_CONTENT_NAME_CHANGE,{name:e})},re.prototype.handleUpdateFilePolicy=function(e,t){this.handleUpdateSharingSettings(e);var n=this.getSharingInfo().filePolicy(),s=this.getPassFetchingInfo().fileId;if(s)if(n.viewer_info_policy===C.ViewerInfoPolicy.disabled&&t.viewer_info_policy===C.ViewerInfoPolicy.enabled)this.clearCachedPassInfo(),h.PassActions.resetPassInfo(s),h.PassActions.fetchPassError(s),this.dispatch(v.ShareModalActionTypes.CLEAR_FILE_MEMBERSHIP_LAST_SEEN_INFO);else{var i=n.audience===C.LinkAudience.members!=(t.audience===C.LinkAudience.members),r=n.viewer_info_policy===C.ViewerInfoPolicy.enabled&&t.viewer_info_policy===C.ViewerInfoPolicy.disabled;if(i||r){this.clearCachedPassInfo();var a=this.getUrl();r&&this.listMembers({contentId:s,url:a,isNonUserRelativeContext:this.sharingInfo.isNonUserRelativeContext()});var o=this.isContentInfoForFilePreview(this.getContentInfo());_.PassHelpers.setup({user:this.user,fileData:this.getFileData(a),prevFileData:null,shouldWritePresence:o,skipSharingEndpoints:!0})}}},re.prototype.handleUpdateSharingSettings=function(e){this.dispatch(v.ShareModalActionTypes.UPDATE_SHARING_SETTINGS_SUCCESS,{metadata:e})},re.prototype.listMembers=function(e){var t=e.contentId,n=e.url,s=e.members,i=e.isNonUserRelativeContext,r=void 0!==i&&i;return M.SharingActions.listMembers({user:this.user,contentId:t,isFolder:this.sharingInfo.isFolder(),url:n,members:s,client:this.client,isNonUserRelativeContext:r})},re.prototype.addMembers=function(e,t,n,s){void 0===n&&(n=!1);var i=e.map((function(e){return{member:b.createUnionScalar(e.contactType(),e.contactId()),access_level:b.accessLevelConstToApi(e.access_type)}}));return this.client.addMembersWithAccessLevel({contentId:t,members:i,customMessage:s,quiet:n})},re.prototype.isContentInfoForFilePreview=function(e){return("PREVIEW_PAGE"===e.extras.origin||"PREVIEW_PAGE_FACEPILE"===e.extras.origin)&&!e.isFolder()},re.prototype.isContentInfoForPaper=function(e){return e.extras&&"PAPER_INTEGRATION"===e.extras.origin},re.prototype.log=function(e,t){void 0===t&&(t={}),x.logTiburonEvent(this.getContentInfo(),this.user.id,e,t)},re.prototype.logIfHaventBefore=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!0),this.hasLoggedSet[e]||(this.hasLoggedSet[e]=!0,n&&(t.timing=Date.now()-this.beginTime),this.log(e,t))},re.prototype.onClickX=function(e){e&&e.finishLogging(!0),m.Modal.close()},re.prototype.redirectToBrowseUrl=function(e){if(null!=this.setUrl)this.setUrl({path:e});else{var t=a.browse_uri_for_fq_path(this.user,e);W.redirect(t.toString())}},re.prototype.redirectToUpgrade=function(){W.redirect("/upgrade?oqa=spw")},re.prototype.refreshSharedWithColumnLinkData=function(){u.Dispatcher.dispatch({type:p.SharedWithActionType.SIGNAL_SHARED_LINK_DATA_OUT_OF_DATE,data:{fileFqPaths:[this.getContentInfo().displayPath()]}})},re.prototype.relinquishMembershipSimple=function(e,t){var n=this;return this.client.relinquishMembership({contentId:e,leaveACopy:t}).then((function(){m.Modal.close(),n.redirectToBrowseUrl("/")}))},re.prototype.relinquishMembership=function(e,t){var n=this.getContentInfo();return this.relinquishMembershipSimple(e,t).then((function(){n.isFolder()?D.sharingNotificationSuccess(j.intl.formatMessage({id:"CD+ZYc",defaultMessage:"Folder access removed."})):D.sharingNotificationSuccess(j.intl.formatMessage({id:"GTNg67",defaultMessage:"File access removed."}))}))},re.prototype.removeMemberSimple=function(e,t,n){return this.client.removeMember({contentId:e,memberId:t,leaveACopy:n})},re.prototype.removeMember=function(e,t,n,s){var i=this;return this.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_PENDING,{member:t}),this.removeMemberSimple(e,t.memberId(),n).then((function(e){return i.fetchInitialData().then((function(){if(e&&null!=e.access_level&&null!=e.warning)return i.dispatch(v.ShareModalActionTypes.REMOVE_MEMBER_KEEP_ACCESS,{member:t,access:e.access_level}),e;s?D.sharingNotificationSuccess(j.intl.formatMessage({id:"CD+ZYc",defaultMessage:"Folder access removed."})):D.sharingNotificationSuccess(j.intl.formatMessage({id:"GTNg67",defaultMessage:"File access removed."})),i.dispatch(v.ShareModalActionTypes.REMOVE_MEMBER_SUCCESS,{member:t}),i.fetchMemberCounts()}))})).catch(r.catchApiError((function(e){return i.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_COMPLETE,{member:t}),i.parseParentFolderAccessError(e)})))},re.prototype.setContentNameAndSendShare=function(e){var t=this,n=this.sharingInfo.contentNameInputValue(),s=d.parent_dir(this.sharingInfo.fqPath()),i=x.getNewFolderPathFromContentName(n,s),r=!this.sharingInfo.isNonUserRelativeContext();this.getSharingInfo().shouldSuppressRedirectToBrowse()&&(r=!1);var o=r;return this.getSharingInfo().shouldCloseImmediately()&&(o=!0),new Promise((function(s,l){new y.SharingApi(t.user).validate_new_sf_path(n,i,(function(){t.dispatch(v.ShareModalActionTypes.VALIDATE_CONTENT_NAME_SUCCESS,{newFolderPath:i}),t.sendShare(e,{keepModalOpen:r,suppressSuccessSnackbar:o}).then((function(){if(t.sharingInfo.shareAsConfidential()&&H.WebUserActionLog.log(t.user.id,V.WebUserActionLogEvent.CONF_BY_CREATE_CONFIDENTIAL_FOLDER,{ns_id:t.sharingInfo.contentId(),who_has_access:V.WebUserActionLogExtraValue.SPECIFIC_PEOPLE,location:t.sharingInfo.isNonUserRelativeContext()?V.WebUserActionLogExtraValue.CONTENT_MANAGER:V.WebUserActionLogExtraValue.BROWSE}),r){var e=a.browse_uri_for_fq_path(t.user,i);e.updateQuery("show_share_success_snackbar","1"),W.redirect(e.toString())}s()}))}),(function(e){t.sharingExperimentsLog("SIMPLIFIED_WIZARD_UI::INVALID_CONTENT_NAME");var n=q.extractErrors(e.responseText),s=n.folder_name&&n.folder_name.message_text;t.dispatch(v.ShareModalActionTypes.VALIDATE_CONTENT_NAME_ERROR,{errorMsg:s}),l(s)}))}))},re.prototype.setSharedLinks=function(e){this.dispatch(v.ShareModalActionTypes.FETCH_LINK_METADATA_SUCCESS,{sharedLinks:e})},re.prototype.deleteLinkMetadata=function(e){this.dispatch(v.ShareModalActionTypes.DELETE_LINK_METADATA_SUCCESS,{deletedLink:e})},re.prototype.enableImmediateModalClose=function(e){var t=this.sharingInfo.getEligibleInviteAfterSharingContacts().inviteEligibleNotSeenContacts,n=this.sharingInfo.sharingPrefs().invite_after_sharing_modal_variant;return e||0===t.length||t.length>1&&this.isBasicUserRequestModal(n)||"not_enabled"===n},re.prototype.sendShare=function(e,n){var i=this;void 0===n&&(n={keepModalOpen:!1,suppressSuccessSnackbar:!1});var a=this.getSharingInfo().getInitialProps(),o=this.sharingInfo.contentInfo().id;a.onShareClick&&a.onShareClick(this.getSharingInfo().recipientTokens(),this.getSharingInfo().recipientAccess());var l=t.incompleteInbandShare.has(o);this.log(O.TiburonEventName.ClickInbandShareButton,{in_progress:l});var u,p=Date.now(),h=this.isNewlySharedContent();return this.recipientsChange(e.getContacts()).then((function(){return i.validateContacts(i.sharingInfo.recipientTokens())})).then((function(){if(i.sharingInfo.contactsError().level===x.ContactsErrorLevel.Error)return i.log(O.TiburonEventName.FailInbandShare,{error_tag:"contacts_error"}),Promise.reject({});i.enableImmediateModalClose(n.keepModalOpen)&&(m.Modal.close(),i.log(O.TiburonEventName.CloseShareModal,{time_modal_opened:Date.now()-p})),window.addEventListener("beforeunload",i.onPageNavigationAttempt),window.addEventListener("unload",i.onPageNavigationAway),t.incompleteInbandShare.add(o),i.dispatch(v.ShareModalActionTypes.SEND_SHARE_REQUEST),u=b.contactsToMembers(i.sharingInfo.recipientTokens());var e=i.sharingInfo.contentInfo().extras.origin;return e!==f.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS&&e!==f.SHARE_ACTION_ORIGIN_TYPE.WIZARD||H.WebUserActionLog.log(i.user.id,V.WebUserActionLogEvent.NEW_FOLDER_ADD_MEMBER,{num_invites:u.length}),i.shareIfFileFolder(j.intl.formatMessage({id:"lhzBKS",defaultMessage:"Sharing <st>{folder_name}</st>..."},{st:function(e){return s.default.createElement("strong",null,e)},folder_name:c.Emstring.em_snippet(i.sharingInfo.name(),f.SNIPPET_SIZES.FILENAME)}))})).then((function(){return i.client.addMembers({accessLevel:i.sharingInfo.recipientAccess(),contentId:i.sharingInfo.contentInfo().id,customMessage:i.sharingInfo.recipientMessage(),members:u,addMessageAsComment:!!i.sharingInfo.recipientMessage()&&i.sharingInfo.isShareMessageAsCommentChecked()&&i.sharingInfo.permissionsObj().canShareMessageAsComment()})})).catch((function(e){if(e instanceof r.ApiError){var t=e.error&&e.error[".tag"];i.dispatch(v.ShareModalActionTypes.SEND_SHARE_FAILURE),i.reportShareFailure(e),i.log(O.TiburonEventName.FailInbandShare,{http_status_code:e.raw&&e.raw.status,error_tag:t||"undefined",error_summary:"summary"in e?e.summary:"message"in e?e.message:"undefined",timing:Date.now()-p,num_recipients:u.length})}else i.log(O.TiburonEventName.FailInbandShare,{error_message:e.message});return Promise.reject({})})).then((function(){i.log(O.TiburonEventName.SucceedInbandShare,{timing:Date.now()-p,num_recipients:u.length}),i.dispatch(v.ShareModalActionTypes.SEND_SHARE_SUCCESS),i.fetchMemberCounts();var e=i.sharingInfo.contentInfo().extras.origin;if(!n.suppressSuccessSnackbar){var t=i.sharingInfo.name(),r=d.file_extension(t);if(["pdf","doc","docx"].includes(r)&&"DSV1"===i.sharingInfo.coreO21nDndMomentPdfWordVariant()||["ppt","pptx","key"].includes(r)&&"DSV1"===i.sharingInfo.coreO21nDndMomentPptKeynoteVariant())D.showInBandShareSuccessDocSendSnackbar(t,i.user.id);else if(i.shouldShowEsignDiscoveryUpsell()){var o=i.sharingInfo.hasSeenEsignPostSharing();o||i.setHasSeenPostSharingEsignPref(),te.showInBandShareSuccessEsignSnackbar(t,D.formatSuccessMessageForFolder(t),i.sharingInfo.fqPath(),i.user.id,Number(i.sharingInfo.contentId()),o,(function(){i.setLastSeenPostSharingEsignTsPref()}))}else D.showInBandShareSuccessSnackbar(i.sharingInfo.name(),i.exp_getUpsellSnackbarProps(se.share));x.trackUserLeapEvent(x.SharingUserLeapEvent.SHARE_SUCCESS,e)}e!==f.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS&&e!==f.SHARE_ACTION_ORIGIN_TYPE.WIZARD||H.WebUserActionLog.log(i.user.id,V.WebUserActionLogEvent.NEW_SHARED_FOLDER_SUCCESS,{}),a.onSuccessSharing&&a.onSuccessSharing(),i.refreshSharedWithColumnContentData();var l=h?u.length:i.sharingInfo.memberCountWithRecipients()-1;if(G.SHOW_CREATE_TEAM_MODAL_AFTER_SHARING&&l>=2){var c=i.sharingInfo.sharingPrefs().exp_browse_pisces_biz_basic_variant;c!==C.BrowsePiscesBizBasicVariant.V1_ADVANCED&&c!==C.BrowsePiscesBizBasicVariant.V1_STANDARD||m.Modal.showInstance(s.default.createElement(B.CreateTeamPromptModalV2,{variant:c}))}else if(!n.keepModalOpen){var g=i.sharingInfo.getEligibleInviteAfterSharingContacts(),_=g.inviteEligibleNotSeenContacts,S=g.inviteEligibleSeenContacts,E=i.getSharingInfo().sharingPrefs().invite_after_sharing_modal_variant,M=_.length>0&&(i.isAdminInviteModal(E)||i.isMemberInviteModal(E)),y=i.isBasicUserRequestModal(E)&&1===_.length;if(M||y){m.Modal.close();var b=i.getInviteAfterSharingUsers(_,S);if("admin_invite_expand_eligibility"===E){var I=Date.now();i.loadShowAdminInviteAfterSharingModal().then((function(t){t({eligibleUsers:b,adminModalVariant:E,modalOrigin:e,modalLoadingStartTime:I})}))}else if(i.isMemberInviteModal(E)){var T=Date.now();i.loadShowMemberInviteAfterSharingModal().then((function(t){t({eligibleUsers:b,memberModalVariant:E,sharingOrigin:e,modalLoadingStartTime:T})}))}else if(i.isBasicUserRequestModal(E)){var k=i.convertContactsToRequestAfterSharingUserEmail(_);i.loadShowRequestJoinAfterSharingModal().then((function(e){e({receiverEmail:k})}))}}else i.exp_shouldShowFamilyUpsellV1(se.share)?i.exp_showFamilyUpsellModal():i.exp_shouldShowFamilyUpsellV1(se.share)||m.Modal.close()}return Promise.resolve()})).finally((function(){t.incompleteInbandShare.delete(o)}))},re.prototype.loadShowAdminInviteAfterSharingModal=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/teams/invite/modals/invite_after_sharing/admin_invite_after_sharing_modal"],t,n)})).then(n.__importStar)];case 1:return[2,t.sent().showAdminInviteAfterSharingModal]}}))}))},re.prototype.loadShowMemberInviteAfterSharingModal=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/teams/invite/modals/invite_after_sharing/member_invite_after_sharing_modal"],t,n)})).then(n.__importStar)];case 1:return[2,t.sent().showMemberInviteAfterSharingModal]}}))}))},re.prototype.loadShowRequestJoinAfterSharingModal=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/teams/invite/modals/invite_after_sharing/request_join_after_sharing_modal"],t,n)})).then(n.__importStar)];case 1:return[2,t.sent().showRequestJoinAfterSharingModal]}}))}))},re.prototype.getInviteAfterSharingUsers=function(e,t){var s=this.convertContactsToInviteAfterSharingUsers(e,!0),i=this.convertContactsToInviteAfterSharingUsers(t,!1);return n.__spreadArrays(s,i)},re.prototype.convertContactsToRequestAfterSharingUserEmail=function(e){return this.convertContactsToInviteAfterSharingUsers(e,!0)[0].email},re.prototype.convertContactsToInviteAfterSharingUsers=function(e,t){return e.filter((function(e){return void 0!==e.email})).map((function(e){return{email:e.email,checkForInvite:t}}))},re.prototype.isNewlySharedContent=function(){var e=this.getContentInfo();return e.isFileFolder()||e.isFile()&&!this.sharingInfo.hasNonOwnerMembers()},re.prototype.shareFolderSimple=function(e,t,n,s){var i=this;void 0===t&&(t=!1);var a=function(e){i.dispatch(v.ShareModalActionTypes.SHARE_FOLDER_SUCCESS,{metadata:e}),u.Dispatcher.dispatch({type:N.SharePageActionTypes.FETCH_METADATA_SUCCESS,metadata:e,user:i.user})},o={fqPath:e,confidential:t,syncSetting:n,folderPolicy:s},l=this.client.share(o);return this.dispatch(v.ShareModalActionTypes.SHARE_FOLDER_REQUEST,{promise:l}),l.then(a).catch((function(e){if(e instanceof r.AppError&&e.error&&e.error.bad_path&&"already_shared"===e.error.bad_path[".tag"]){var t=b.folderMetadataApiToRecord(e.error.bad_path);return a(t)}return i.dispatch(v.ShareModalActionTypes.SHARE_FOLDER_FAILURE),Promise.reject(e)}))},re.prototype.getFqPath=function(){return this.sharingInfo.isNonUserRelativeContext()&&!this.user.is_cdm_member?"ns:"+this.getContentInfo().nsId()+this.getContentInfo().nsPath():this.getContentInfo().displayPath()},re.prototype.sharingExperimentsLog=function(e,t){void 0===t&&(t={});var n=this.getContentInfo().extras.modalSessionId;t.modalSessionId=t.modalSessionId||n,i.SharingExperimentsLogger.log(this.user.id,e,t)},re.prototype.teardownPass=function(){this.clearCachedPassInfo(),this.getPassFetchingInfo().shouldFetchPass&&_.PassHelpers.teardown({user:this.user,fileData:this.getFileData(),async:!0,shouldWritePresence:!1})},re.prototype.showStandardError=function(e){var t=e&&e.message;D.sharingNotificationError(t||j.intl.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}))},re.prototype.shouldShowEsignDiscoveryUpsell=function(){return["pdf","doc","docx"].includes(d.file_extension(this.sharingInfo.name()))&&"HSV1"===this.sharingInfo.pgEsignDiscoveryVariant()&&!this.sharingInfo.isInEsignPostSharingExclusionPeriod()},re.prototype.exp_shouldShowFamilyUpsellV1=function(e){return this.exp_shouldShowFamilyUpsell("V1",e)},re.prototype.exp_shouldShowFamilyUpsellV2=function(e){return this.exp_shouldShowFamilyUpsell("V2",e)},re.prototype.exp_shouldShowFamilyUpsell=function(e,t){return(t!==se.share||!this.shouldShowEsignDiscoveryUpsell())&&this.sharingInfo.familySharingUpsellGating()===e},re.prototype.exp_trackInitialShow=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,s;return n.__generator(this,(function(r){switch(r.label){case 0:return this.haveTrackedEsignUpsell?[2]:[4,new Promise((function(t,n){e(["modules/clean/growth/user_action/tracker"],t,n)})).then(n.__importStar)];case 1:return t=r.sent().GrowthUserActionTracker,s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.project="pg_family_sharing_contextual_upsell",t}return n.__extends(t,e),t})(t),new s(this.user.id).track("show",{}),this.haveTrackedEsignUpsell=!0,i.ProEventsLogger.log("pg_snackbar_family_compare_plans_upsell_show",{variant:this.sharingInfo.familySharingUpsellGating(),user_id:this.user.id}),[2]}}))}))},re.prototype.exp_showFamilyUpsellModal=function(){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(i){switch(i.label){case 0:return[4,Promise.all([new Promise((function(t,n){e(["modules/clean/sharing/upsells/family_upsell_modal"],t,n)})).then(n.__importStar),this.exp_trackInitialShow()])];case 1:return t=i.sent()[0].CreateFamilyUpsellModal,m.Modal.showInstance(s.default.createElement(t,null)),[2]}}))}))},re.prototype.exp_afterCopy=function(){this.exp_shouldShowFamilyUpsellV1(se.copy)&&this.exp_showFamilyUpsellModal()},re.prototype.exp_getUpsellSnackbarProps=function(e){if(this.exp_shouldShowFamilyUpsellV2(e))return this.exp_trackInitialShow(),{richSnackbarProps:{actions:[{name:"family_compare_plans",dataUxaLog:"pg_snackbar_family_compare_plans_upsell_cta",text:j.intl.formatMessage({id:"eXMGp+",defaultMessage:"Compare plans"}),onClick:function(){W.unsafe_open_tab("/plans?trigger=nr")}}],helperText:s.default.createElement(s.default.Fragment,null,s.default.createElement($.UIIcon,{className:"share_modal_snackbar--family_upsell__icon",src:ee.PersonMultipleLine}),s.default.createElement("div",{className:"share_modal_snackbar--family_upsell__line"}),s.default.createElement("div",{className:"share_modal_snackbar--family_upsell__text"},s.default.createElement("b",null,"Save money with Dropbox Family.")," Share 2 TB (2,000 GB) with up to 6 people and connect in the Family Room.")),clickHandlerArgs:{experiment:"pg_family_sharing_contextual_upsell",userId:this.user.id,filePath:"",ns_id:-1}},timeoutDelayMs:1e5}},re.prototype.isMemberInviteModal=function(e){return["member_invite","member_suggestion","member_invite_expand_eligibility","member_suggestion_expand_eligibility"].includes(e)},re.prototype.isAdminInviteModal=function(e){return["admin_invite_after_move","admin_invite_expand_eligibility"].includes(e)},re.prototype.isBasicUserRequestModal=function(e){return"basic_user_request_to_join"===e},re})();t.ShareModalActionHandler=re})),define("modules/clean/sharing/actions/sharing_actions",["require","exports","modules/clean/flux/dispatcher","modules/clean/react/pass/action_timestamps","modules/clean/react/pass/constants","modules/clean/sharing/action_types","modules/clean/sharing/api/client","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/share_page/action_types","modules/clean/sharing/stores/sharing_info","modules/core/assert"],(function(e,t,n,s,i,r,a,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingActions=void 0,t.SharingActions={loadFileMetadataBatch:function(e,t){return new a.FileShareApiClient({userId:e.id}).getMetadataBatchAlpha({contentIds:t,actions:Object.keys(o.ALPHA_FILE_METADATA_PERMISSIONS)}).then((function(t){return n.Dispatcher.dispatch({type:r.SharingActionTypes.FETCH_METADATA_BATCH_SUCCESS,user:e,data:t})}))},loadFileMetadata:function(e){var t=e.user,s=e.contentId,i=e.sourceUrl,d=e.client,u=c.sharingInfoStore.getSharingInfo(t.id,s);if(u&&u.fetchingMetadataPromise())return u.fetchingMetadataPromise();var p=(d=d||new a.FileShareApiClient({userId:t.id})).getMetadataAlpha({contentId:s,actions:Object.keys(o.ALPHA_FILE_METADATA_PERMISSIONS),sourceURL:i}).then((function(e){n.Dispatcher.dispatch({type:r.SharingActionTypes.FETCH_METADATA_BATCH_SUCCESS,user:t,data:[e]}),n.Dispatcher.dispatch({type:l.SharePageActionTypes.FETCH_METADATA_SUCCESS,metadata:e,user:t})}));return n.Dispatcher.dispatch({type:r.ShareModalActionTypes.FETCH_METADATA_REQUEST,contentIds:[s],data:{promise:p},user:t}),p},listMembers:function(e){var t=e.user,o=e.contentId,l=e.isFolder,u=e.limit,p=e.url,m=e.members,h=e.client,f=e.previewSessionId,g=void 0===f?null:f,_=e.includeSeenState,S=void 0===_||_,E=e.isNonUserRelativeContext,v=void 0!==E&&E;d.assert(!u||u<=100,"listMembers not implemented for limit > 100");var M=u||9999999,y=c.sharingInfoStore.getSharingInfo(t.id,o);if(y){var C=y.fetchingMembersRequest();if(C&&M<=C.limitNonNull)return C.promise;if(y.hasDisplayableMembers()&&M<y.members().getMemberCount())return Promise.resolve({})}var b=Math.random().toString(),I=!l;h||(h=l?new a.FolderShareApiClient({userId:t.id,isNonUserRelativeContext:v}):new a.FileShareApiClient({userId:t.id,isNonUserRelativeContext:v}));var T,k=function(e){return e?(n.Dispatcher.dispatch({type:r.ShareModalActionTypes.FETCH_USER_ACCOUNTS_CONTINUED_REQUEST,contentIds:[o],user:t}),h.listMembersContinue({cursor:e,url:p,isAlpha:I}).then((function(e){n.Dispatcher.dispatch({type:r.ShareModalActionTypes.FETCH_USER_ACCOUNTS_CONTINUED_SUCCESS,contentIds:[o],data:{members:e,requestId:b},user:t}),k(e.cursor)}))):Promise.resolve({})};return s.ActionTimestampsTracker.record(i.LoggingActions.LIST_MEMBERS_BEGIN,g),T=(T=m?Promise.resolve(m):h.listMembers({contentId:o,url:p,limit:u,isAlpha:I,includeSeenState:S})).then((function(e){s.ActionTimestampsTracker.record(i.LoggingActions.LIST_MEMBERS_RECEIVE,g),n.Dispatcher.dispatch({type:r.ShareModalActionTypes.FETCH_USER_ACCOUNTS_SUCCESS,contentIds:[o],data:{members:e,requestId:b},user:t}),u||k(e.cursor)})),n.Dispatcher.dispatch({type:r.ShareModalActionTypes.FETCH_USER_ACCOUNTS_REQUEST,contentIds:[o],data:{limitNonNull:M,requestId:b,promise:T},user:t}),T},fetchFileMemberCount:function(e){var t=e.user,o=e.contentId,l=e.limit,c=e.url,d=e.client,u=e.countGroupsAsMembers,p=void 0!==u&&u,m=e.previewSessionId,h=void 0===m?null:m,f=e.runViewerInfoChecks,g=void 0!==f&&f;d=d||new a.FileShareApiClient({userId:t.id}),s.ActionTimestampsTracker.record(i.LoggingActions.MEMBER_COUNTS_BEGIN,h);var _=d.getMemberCounts({contentId:o,limit:l,url:c,countGroupsAsMembers:p,runViewerInfoChecks:g});return n.Dispatcher.dispatch({type:r.ShareModalActionTypes.FETCH_FILE_MEMBER_COUNT_REQUEST,contentIds:[o],user:t}),_.then((function(e){s.ActionTimestampsTracker.record(i.LoggingActions.MEMBER_COUNTS_RECEIVE,h),n.Dispatcher.dispatch({type:r.ShareModalActionTypes.FETCH_FILE_MEMBER_COUNT_SUCCESS,contentIds:[o],data:e,user:t})}))},fetchFolderMemberCount:function(e){var t=e.user,s=e.contentId,i=e.client;return n.Dispatcher.dispatch({type:r.ShareModalActionTypes.FETCH_MEMBER_COUNTS_REQUEST,data:{},contentIds:[s],user:t}),i.getMemberCounts({contentId:s}).then((function(e){n.Dispatcher.dispatch({type:r.ShareModalActionTypes.FETCH_MEMBER_COUNTS_SUCCESS,data:{memberCounts:e},contentIds:[s],user:t})}))}}})),define("modules/clean/sharing/actions/contact_validators",["require","exports","tslib","modules/clean/sharing/api/util/types","lodash","modules/clean/sharing/ui_util","modules/core/exception","modules/clean/js_client_stopwatch","modules/clean/contacts/contact_token_state","spectrum-sharing/utils/logging"],(function(e,t,n,s,i,r,a,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContactValidator=void 0,i=n.__importStar(i);var d={state:l.ContactTokenState.invalid,msg:r.CONTACT_ERROR_MESSAGES.SINGLE_INVALID},u=(function(){function e(e){this.validationStopWatchName="async_contact_server_side_validation",this.client=e,o.JSStopwatch.create_stopwatch_if_not_exist(this.validationStopWatchName)}return e.prototype.validate=function(e,t,i,l,u){return n.__awaiter(this,void 0,Promise,(function(){var p,m,h,f,g,_,S,E=this;return n.__generator(this,(function(v){switch(v.label){case 0:if(p={},u.filter((function(e){return e.invalid})).forEach((function(e){return p[e.getKey()]=d})),0===(m=u.filter((function(e){return!e.invalid}))).length)return[2,p];h=o.JSStopwatch.startSpan("validation",{stopwatchName:this.validationStopWatchName,async:!0}),f=void 0,v.label=1;case 1:return v.trys.push([1,3,,4]),r.logTiburonEvent(i,e,c.TiburonEventName.AttemptTargetValidation),[4,this.client.validateMembers({contentId:t,accessLevel:l,members:s.contactsToMembers(m,!0)})];case 2:return f=v.sent(),[3,4];case 3:return g=v.sent(),r.logTiburonEvent(i,e,c.TiburonEventName.FailTargetValidation,{error:g.error?g.error[".tag"]:"unknown server error"}),a.reportStack("server error in contact validation",{severity:a.SEVERITY.NONCRITICAL,tags:["sharing"]}),[3,4];case 4:return f?(r.logTiburonEvent(i,e,c.TiburonEventName.SucceedTargetValidation),_=f.results,S={},u.forEach((function(e){S[E.selectorToScalarKey(s.contactToMember(e,!0))]=e.getKey()})),_.forEach((function(e){var t=S[E.selectorToScalarKey(e.member)],s=e.target_invite_eligibility;p[t]=n.__assign(n.__assign({},E.calculateValidation(e.result)),{inviteAfterSharingEligibility:s})})),o.JSStopwatch.endSpan("validation",{stopwatchName:this.validationStopWatchName,spanId:h}),setTimeout((function(){return o.JSStopwatch.flush_current_data()}),0),[2,p]):[2,p]}}))}))},e.prototype.selectorToScalarKey=function(e){var t=e[".tag"];return t+"-"+i.get(e,t)},e.prototype.calculateValidation=function(e){var t=e[".tag"];switch(t){case"allowed":var n=e.allowed[".tag"];switch(n){case"no_warning":return{state:l.ContactTokenState.ok,msg:null};case"outside_of_team":return{state:l.ContactTokenState.warn,msg:r.CONTACT_ERROR_MESSAGES.SINGLE_OUT_OF_TEAM};default:return a.reportStack("New allowed warning type without handling",{tags:["sharing"],severity:a.SEVERITY.CRITICAL,exc_extra:{warning:n}}),{state:l.ContactTokenState.ok,msg:null}}case"disallowed":var s=e.disallowed[".tag"];switch(s){case"invalid_member":return{state:l.ContactTokenState.invalid,msg:r.CONTACT_ERROR_MESSAGES.SINGLE_INVALID};case"outside_of_team":return{state:l.ContactTokenState.invalid,msg:r.CONTACT_ERROR_MESSAGES.SINGLE_OUT_OF_TEAM};case"target_is_individual":return{state:l.ContactTokenState.invalid,msg:r.CONTACT_ERROR_MESSAGES.NONGROUP_INVITEE};case"no_permission":return{state:l.ContactTokenState.invalid,msg:r.CONTACT_ERROR_MESSAGES.NO_PERMISSION};default:return a.reportStack("New disallowed error type without handling",{tags:["sharing"],severity:a.SEVERITY.CRITICAL,exc_extra:{error:s}}),{state:"invalid",msg:r.CONTACT_ERROR_MESSAGES.NO_PERMISSION}}default:var i="Unpredicted state in client validation API response";throw a.reportStack(i,{tags:["sharing"],severity:a.SEVERITY.CRITICAL,exc_extra:{state:t}}),new Error(i)}},e})();t.AsyncContactValidator=u})),define("modules/clean/sharing/api",["require","exports","tslib","jquery","modules/clean/deprecated_ajax/ajax_jquery"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingApi=void 0,s=n.__importDefault(s);var r=(function(){function e(e){this.user=e}return e.prototype.get_sync_vars_for_ns_id=function(e,t,n){var s={ns_id:e,sub_path:t};this._make_request("/sharing/get_sync_vars_for_ns_id",s,n,null,!0)},e.prototype.validate_new_sf_path=function(e,t,n,s){var i={share_type:"new",folder_name:e,path:t};this._make_request("/share_ajax/validate_folder",i,n,s,!0)},e.prototype.validate_shareable_existing_sf_path=function(e,t,n){var s={share_type:"shareable_existing",path:e};this._make_request("/share_ajax/validate_folder",s,t,n,!0)},e.prototype._make_request=function(t,n,r,a,o,l){void 0===o&&(o=!1),void 0===l&&(l=!0);var c={url:t,data:n,success:function(i,a,o){r(o),s.default(document).trigger(e.REQUEST_SUCCEEDED_EVENT,{request_url:t,ns_id:n.ns_id||null})},error:function(e){a&&a(e)}};l&&(c.subject_user=this.user.id),o?i.FormWebRequest(c):i.WebRequest(c)},e.REQUEST_SUCCEEDED_EVENT="db:sharing_api:request_succeeded",e})();t.SharingApi=r})),define("modules/clean/sharing/cdm_new_folder_modal_components",["require","exports","tslib","classnames","react","dig-components/icons","dig-components/icons/src","dig-components/modal","dig-components/text_fields","dig-components/typography","spectrum/icon_content/index","spectrum/input/index","modules/clean/filepath/filepath","modules/clean/react/flag","modules/clean/sharing/views/hover_close_button","modules/core/i18n"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderNameInput=t.FolderNameDefaultWarningMessage=t.FolderNameDefaultErrorMessage=t.FolderNameDefaultWarningValidator=t.FolderNameDefaultErrorValidator=t.FolderNameHeader=void 0,s=n.__importDefault(s),i=n.__importStar(i),h=n.__importDefault(h),t.FolderNameHeader=function(e){var t=e.isCreateViaUpload,n=e.folderPath,s=e.handleClickCloseButton,r=e.useDigModal,a=t&&n?p.filename(n):f.intl.formatMessage({id:"5Z9j+l",defaultMessage:"Create folder"});return r?i.createElement(o.Modal.Header,{className:"cdm-create-folder-modal__header--dig",hasBottomSpacing:"title-small"},i.createElement(d.IconContent,{name:"folder-small"}),i.createElement(c.Title,{className:"cdm-create-folder-modal__header-title--dig",size:"small"},a)):i.createElement("div",null,i.createElement(m.Flag,{rightAttachment:s?i.createElement(h.default,{onClick:s}):void 0,leftAttachment:i.createElement(d.IconContent,{name:"folder-small"}),spacing:"s"},a))},t.FolderNameHeader.displayName="FolderNameHeader",t.FolderNameDefaultErrorValidator=function(e){return g(e,["\\","/",":"])},t.FolderNameDefaultWarningValidator=function(e){return g(e,['"',"*","<",">","?","|"])};var g=function(e,t){if(!e)return!1;for(var n=0,s=t;n<s.length;n++){var i=s[n];if(e.indexOf(i)>=0)return!1}return!0};t.FolderNameDefaultErrorMessage=f.intl.formatMessage({id:"LAZfR0",defaultMessage:'Folder names can’t contain: " \\ / :'}),t.FolderNameDefaultWarningMessage=f.intl.formatMessage({id:"Vf5SED",defaultMessage:"Warning: To avoid potential sync issues, name should not contain \" * '<' '>' ? |"});var _=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=i.createRef(),t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.focusOnMount&&this.inputRef.current&&this.inputRef.current.focus()},t.prototype.render=function(){if(this.props.isCreateViaUpload)return null;var e=this.props.errorText||this.props.warningText;return this.props.useDig?i.createElement("div",{className:s.default("cdm-create-folder-modal__name-input--dig",this.props.className)},i.createElement(l.FormLabel,{htmlFor:"new_folder_name_input"},f.intl.formatMessage({id:"cJojIg",defaultMessage:"Name"})),i.createElement(l.TextInput,{ref:this.inputRef,id:"new_folder_name_input",placeholder:f.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),onChange:this.props.handleFolderNameChange,onKeyDown:this.props.onKeyDown,isInvalid:!!e,"aria-describedby":"new_folder_name_message",defaultValue:this.props.defaultInputFolderName}),this.props.errorText&&i.createElement(l.FormHelperText,{isInvalid:!0,id:"new_folder_name_message"},i.createElement(r.UIIcon,{src:a.FailLine,size:"small"})," ",this.props.errorText),this.props.warningText&&i.createElement(l.FormHelperText,{id:"new_folder_name_message"},i.createElement(r.UIIcon,{src:a.WarningLine,size:"small"})," ",this.props.warningText)):i.createElement("div",{className:s.default("u-pad-vertical-s",this.props.className,{"u-mar-bottom-s":!e})},i.createElement("div",{className:"cdm-create-folder-modal__header u-pad-bottom-xs u-font-meta"},f.intl.formatMessage({id:"cJojIg",defaultMessage:"Name"})),i.createElement(u.Input,{forwardedRef:this.inputRef,placeholder:f.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),id:"new_folder_name_input",onChange:this.props.handleFolderNameChange,className:s.default("cdm-create-folder-modal__content-name",this.props.inputClassName,{valid:this.props.isValid,invalid:!this.props.isValid}),onKeyDown:this.props.onKeyDown,defaultValue:this.props.defaultInputFolderName}),i.createElement("label",{style:{display:"none"},htmlFor:"new_folder_name_input"},f.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"})),!e&&i.createElement("div",{className:"new-folder-empty-status"}),this.props.errorText&&i.createElement("span",{className:"new-folder-error-text"},this.props.errorText),this.props.warningText&&i.createElement("span",{className:"new-folder-warning-text"},this.props.warningText))},t.displayName="FolderNameInput",t})(i.PureComponent);t.FolderNameInput=_})),define("modules/clean/sharing/confirmation_modals/confirm_recursive_policy_change_modal",["require","exports","tslib","react","dompurify","modules/clean/react/components/modal","modules/core/i18n","spectrum/modal/index"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confirmRecursivePolicyChange=void 0,s=n.__importStar(s),i=n.__importStar(i),t.confirmRecursivePolicyChange=function(e){var t=e.isTeamSharedFolder?i.sanitize(a.intl.formatMessage({id:"p4X4PM",defaultMessage:"Your changes will be applied to this team folder and any folders inside it."})):i.sanitize(a.intl.formatMessage({id:"ImAPkp",defaultMessage:"Your changes will be applied to this folder and any folders inside it."}));r.Modal.showInstance(s.createElement(o.UtilityModal,{ariaLabel:a.intl.formatMessage({id:"SoVWmf",defaultMessage:"Save settings?"}),title:a.intl.formatMessage({id:"SoVWmf",defaultMessage:"Save settings?"}),overlayClickClose:!0,primaryAction:a.intl.formatMessage({id:"kTq6n5",defaultMessage:"Save settings"}),secondaryAction:a.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onPrimaryAction:e.onConfirm,onSecondaryAction:e.onCancel,open:!0,onRequestClose:e.onCancel},t))}})),define("modules/clean/sharing/confirmation_modals/member_access_change_confirmation_modal",["require","exports","tslib","react","modules/clean/em_string","modules/clean/sharing/confirmation_modals/confirm_with_option_modal","spectrum-sharing/utils/sharing_constants","modules/clean/react/components/modal","modules/core/browser","modules/core/i18n"],(function(e,t,n,s,i,r,a,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showMemberAccessChangeConfirmationModal=void 0,s=n.__importDefault(s),l=n.__importStar(l);t.showMemberAccessChangeConfirmationModal=function(e,t,n,d,u,p,m,h,f,g,_){var S,E,v,M,y;void 0===e&&(e=""),void 0===u&&(u=!1),void 0===h&&(h=!1),void 0===_&&(_=!1);var C=i.Emstring.em_snippet(e,40),b=null;if(t===a.MEMBER_ACTION.REMOVE){if(v=c.intl.formatMessage({id:"sIVZG2",defaultMessage:"Remove {name}?"},{name:C}),n)S=d&&!h?g?c.intl.formatMessage({id:"ru4Qhg",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder. Keep in mind that anyone who can access <strong>{parentname}</strong> will still be able to access this folder."},{strong:function(e){return s.default.createElement("strong",null,e)},name:C,parentname:g}):c.intl.formatMessage({id:"8rlotY",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder. Keep in mind that anyone who can access the parent folder will still be able to access this folder."},{strong:function(e){return s.default.createElement("strong",null,e)},name:C}):c.intl.formatMessage({id:"03tbWi",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder."},{strong:function(e){return s.default.createElement("strong",null,e)},name:C}),u&&(b=c.intl.formatMessage({id:"RB9i4M",defaultMessage:"Let {name} keep a copy of this shared folder"},{name:C}));else S=_?c.intl.formatMessage({id:"D0n7tP",defaultMessage:"Keep in mind, if group members have a shared link to this file, they might still be able to view or edit it."}):c.intl.formatMessage({id:"nAwKbF",defaultMessage:"Keep in mind, if they have a shared link to this file, they might still be able to view or edit it."}),M=c.intl.formatMessage({id:"S+RxKh",defaultMessage:"More about links"}),y=function(){return l.open_tab("https://help.dropbox.com/files-folders/share/remove-link")};E=c.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"})}else v=c.intl.formatMessage({id:"B01nan",defaultMessage:"Make {name} the owner of this folder and all contained files and folders?"},{name:C}),S=f?c.intl.formatMessage({id:"gek9SL",defaultMessage:"Settings for this folder will now be managed by {name}. Keep in mind, if they’re not on your Dropbox team, you won’t be able to manage this folder here anymore."},{name:C}):c.intl.formatMessage({id:"OhU3GK",defaultMessage:"Only <strong>{name}</strong> will be able to unshare this folder or change folder settings."},{strong:function(e){return s.default.createElement("strong",null,e)},name:C}),E=c.intl.formatMessage({id:"+ZJXxL",defaultMessage:"Make owner"});return o.Modal.showInstance(s.default.createElement(r.ConfirmWithOptionModal,{autoClose:!1,confirmText:E,cancelText:c.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),link:M,onConfirm:p,onCancel:m,onClickLink:y,optionLabel:b,showOption:null!=b,title:v},S))}})),define("modules/clean/sharing/content_info",["require","exports","tslib","immutable"],(function(e,t,n,s){"use strict";function i(e){var t=(e.isFolder?e.targetNsId:e.fileId)||e.fqPath;if(null===t)throw new Error("Not enough fields provided for extras");return t}Object.defineProperty(t,"__esModule",{value:!0}),t.ContentInfoExtras=t.ContentInfo=void 0;var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.createFromParams=function(e){var n=new a(e);return new t({extras:n,id:i(n)})},t.prototype.setNsId=function(e){var t=this.setIn(["extras","targetNsId"],e);return t.set("id",i(t.extras))},t.prototype.setFQPath=function(e){var t=this.setIn(["extras","fqPath"],e);return t.set("id",i(t.extras))},t.prototype.isFolder=function(){return this.extras.isFolder},t.prototype.isFile=function(){return!this.isFolder()},t.prototype.isFileFolder=function(){return this.isFolder()&&!this.isSharedFolder()},t.prototype.isSharedFolder=function(){return Boolean(this.extras.targetNsId)},t.prototype.isTeamSharedFolder=function(){return this.extras.isTeamSharedFolder},t.prototype.isInSharedFolder=function(){return Boolean(this.extras.nsId&&this.extras.nsId!==this.extras.userHomeNs)},t.prototype.isNestedSharedFolder=function(){return this.isInSharedFolder()&&this.isSharedFolder()},t.prototype.isMounted=function(){return!this.extras.url},t.prototype.url=function(){return this.extras.url},t.prototype.pathExists=function(){return Boolean(this.extras.exists)},t.prototype.name=function(){return this.displayPath()?this.displayPath().split("/").pop():this.filename()},t.prototype.idForLink=function(){var e=this.extras.fileId||this.extras.fqPath;if(!e)throw new Error("No identifiers for getting links");return e},t.prototype.sharedFolderId=function(){var e=this.extras.targetNsId;if(!e)throw new Error("No shared folder ID");return e},t.prototype.displayPath=function(){return this.extras.fqPath},t.prototype.fileId=function(){return this.extras.fileId},t.prototype.filename=function(){return this.extras.filename},t.prototype.nsId=function(){if(!this.extras.nsId)throw new Error("Can't determine nsId");return this.extras.nsId},t.prototype.nsPath=function(){if(null===this.extras.nsPath)throw new Error("Can't determine nsPath");return this.extras.nsPath},t.prototype.sjid=function(){return this.extras.sjid},t.prototype.teamGroupInfo=function(){return this.extras&&this.extras.teamGroupInfo},t})((s=n.__importStar(s)).Record({extras:null,id:null},"ContentInfo"));t.ContentInfo=r;var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(s.Record({exists:!0,fileId:null,filename:null,fqPath:null,isFolder:null,isTeamSharedFolder:!1,modalSessionId:null,nsId:null,nsPath:null,origin:null,sjid:null,targetNsId:null,url:null,userHomeNs:null,teamGroupInfo:null},"ContentInfoExtras"));t.ContentInfoExtras=a})),define("modules/clean/sharing/delete_link_modal",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","react","modules/clean/em_string","modules/clean/react/components/modal","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/ui_notifications_util","spectrum/modal/index","modules/core/i18n","spectrum-sharing/utils/sharing_constants"],(function(e,t,n,s,i,r,a,o,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteLinkWithConfirmLegacy=t.deleteLinkWithConfirm=void 0,s=n.__importStar(s),i=n.__importDefault(i),o=n.__importStar(o);t.deleteLinkWithConfirm=function(e){var t=e.client,n=e.url,s=e.contentName,p=e.onDeleteLink,m=e.onCancel,h=e.actionHandler;s=r.Emstring.em_snippet(s,o.SNIPPET_SIZES.FILENAME);var f=d.intl.formatMessage({id:"gbccCU",defaultMessage:"Delete link to “{name}”?"},{name:s}),g=function(){a.Modal.close(),m&&m()};a.Modal.showInstance(i.default.createElement(c.UtilityModal,{ariaLabel:f,title:f,overlayClickClose:!0,primaryAction:d.intl.formatMessage({id:"9v2+SN",defaultMessage:"Delete"}),secondaryAction:d.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onPrimaryAction:function(){var e=d.intl.formatMessage({id:"NEH57K",defaultMessage:"Deleting link to <st>{name}</st>..."},{st:function(e){return i.default.createElement("strong",null,e)},name:s});l.sharingNotificationInProgress(e,!0),t.revokeSharedLink({url:n}).then((function(){var e=d.intl.formatMessage({id:"gfG7zK",defaultMessage:"Deleted link to <st>{name}</st>."},{st:function(e){return i.default.createElement("strong",null,e)},name:s});h?l.showDeleteLinkSuccessSnackbar(e,(function(){return h.showScreen(u.MANAGE_SCREEN)}),"sharing-notification"):l.sharingNotificationSuccess(e),a.Modal.close(),p&&p()}))},onSecondaryAction:g,open:!0,onRequestClose:g,overlayClassName:"file-viewer-modal-overlay"},d.intl.formatMessage({id:"poEviS",defaultMessage:"If you want to further restrict access, check the list of people who still have access."})))};t.deleteLinkWithConfirmLegacy=function(e){var t=e.client,n=e.tkey,i=e.contentName,c=e.onDeleteLink,u=e.onCancel;if(i=r.Emstring.em_snippet(i,o.SNIPPET_SIZES.FILENAME),null!==n){return a.SimpleModal.show({autoclose:!1,body_html:d.intl.formatMessage({id:"xuc+Bh",defaultMessage:"This link will no longer work for anyone who has it."}),cancel_completed_callback:u,cancel_text:d.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),confirm_callback:function(){return s.WebRequest({url:"/sm/disable/"+n,type:"POST",data:{tkey:n},subject_user:t.userId,success:function(){var e=d.intl.formatMessage({id:"Rfyu6S",defaultMessage:"Deleted link to “{name}”"},{name:i});l.sharingNotificationSuccess(e),a.Modal.close(),c&&c()}})},confirm_text:d.intl.formatMessage({id:"9v2+SN",defaultMessage:"Delete"}),title_text:d.intl.formatMessage({id:"gbccCU",defaultMessage:"Delete link to “{name}”?"},{name:i}),style:"default-maestro"})}a.Modal.close()}})),define("modules/clean/sharing/member_constructors",["require","exports","modules/clean/sharing/api/types/metadata","modules/clean/sharing/access_level","modules/clean/react/pass/utils","modules/core/i18n","modules/core/user_i18n"],(function(e,t,n,s,i,r,a){"use strict";function o(){var e=new n.PermissionSetting({allow:!1});return new n.MemberPermissions({make_editor:e,make_viewer:e,make_owner:e,remove:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.constructLinkMembers=t.constructGuests=void 0,t.constructGuests=function(e){var t=i.AnonymousViewerUtils.getAnonymousUserIds(e),s=r.intl.formatMessage({id:"+s6D7j",defaultMessage:"Guest"});return t.map((function(e){return new n.UserMembershipInfo({access_type:"reader",account:new n.BasicAccount({account_id:e,display_name:s,familiar_name:s,given_name:s,surname:""}),account_id:e,initials:i.AnonymousViewerUtils.getAnonymousViewerInitials(s),is_inherited:!1,permissions:o(),same_team:!1,time_last_seen:null})}))},t.constructLinkMembers=function(e){return e?e.map((function(e){var t=e.seen_state_user,i=t.user_id,r=t.display_name,l=t.email,c=t.photo_circle_url,d=t.sharing_access_type,u=e.when_last_seen,p=s.ACCESS_LEVEL.READER;return d&&"edit_link_access"===d.type&&(p=s.ACCESS_LEVEL.WRITER),new n.UserMembershipInfo({access_type:p,account:new n.BasicAccount({account_id:i,display_name:r,email:l,email_verified:!0,familiar_name:"",given_name:"",profile_photo_url:c,surname:""}),account_id:i,initials:a.getInitials(r),is_inherited:!1,permissions:o(),same_team:!0,time_last_seen:u?new Date(1e3*u):null})})):[]}})),define("modules/clean/sharing/parent_folder_access_modal",["require","exports","tslib","react","react-intl","modules/clean/em_string","modules/clean/react/flag","modules/clean/react/components/modal","modules/clean/react/sprite","modules/clean/sharing/access_level","spectrum-sharing/utils/sharing_constants","modules/core/i18n"],(function(e,t,n,s,i,r,a,o,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentFolderAccessModal=void 0,s=n.__importDefault(s),a=n.__importStar(a);var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dismissModal=function(){o.Modal.close(),t.handleDismissed()},t.handleDismissed=function(){t.props.onClose&&t.props.onClose()},t.handleNavigateToParentFolder=function(e){return function(){o.Modal.close(),t.props.onParentFolderClicked&&t.props.onParentFolderClicked(e.path,t.arePermissionsAllowed(e.permissions))}},t.arePermissionsAllowed=function(e){return e.some((function(e){return e&&e.allow}))},t.memberCanEdit=function(){return[c.ACCESS_LEVEL.OWNER,c.ACCESS_LEVEL.WRITER].indexOf(t.props.memberAccessLevelResult.access_level)>-1},t.getInfoStr=function(e){return"remove"===t.props.originalAction?t.props.contentInfo.isFolder()?u.intl.formatMessage({id:"tEArbp",defaultMessage:"{count, plural, one{As a member of the parent folder listed below, {member_name} can still access the contents of “{content_name}”.} other{As a member of the parent folders listed below, {member_name} can still access the contents of “{content_name}”.}}"},n.__assign({count:t.props.memberAccessLevelResult.parentFolders.length},e)):u.intl.formatMessage({id:"P/dkL3",defaultMessage:"{count, plural, one{As a member of the parent folder listed below, {member_name} can still access “{content_name}”.} other{As a member of the parent folders listed below, {member_name} can still access “{content_name}”.}}"},n.__assign({count:t.props.memberAccessLevelResult.parentFolders.length},e)):t.props.contentInfo.isFolder()?t.memberCanEdit()?u.intl.formatMessage({id:"vGWLOq",defaultMessage:"{count, plural, one{As a member of the parent folder listed below, {member_name} can still edit the contents of “{content_name}”.} other{As a member of the parent folders listed below, {member_name} can still edit the contents of “{content_name}”.}}"},n.__assign({count:t.props.memberAccessLevelResult.parentFolders.length},e)):u.intl.formatMessage({id:"r+xJ//",defaultMessage:"{count, plural, one{As a member of the parent folder listed below, {member_name} can still view the contents of “{content_name}”.} other{As a member of the parent folders listed below, {member_name} can still view the contents of “{content_name}”.}}"},n.__assign({count:t.props.memberAccessLevelResult.parentFolders.length},e)):t.memberCanEdit()?u.intl.formatMessage({id:"VcTut+",defaultMessage:"{count, plural, one{As a member of the parent folder listed below, {member_name} can still edit “{content_name}”.} other{As a member of the parent folders listed below, {member_name} can still edit “{content_name}”.}}"},n.__assign({count:t.props.memberAccessLevelResult.parentFolders.length},e)):u.intl.formatMessage({id:"7bObr8",defaultMessage:"{count, plural, one{As a member of the parent folder listed below, {member_name} can still view “{content_name}”.} other{As a member of the parent folders listed below, {member_name} can still view “{content_name}”.}}"},n.__assign({count:t.props.memberAccessLevelResult.parentFolders.length},e))},t.renderParentFolderContent=function(){return s.default.createElement("div",null,t.getInfoStr({member_name:r.Emstring.em_snippet(t.props.memberDisplayName,d.SNIPPET_SIZES.DISPLAY_NAME),content_name:r.Emstring.em_snippet(t.props.contentInfo.name()||"",d.SNIPPET_SIZES.FILENAME)}),s.default.createElement("div",{className:"parent-folder-access-modal__folder-list u-mar-top-s"},s.default.createElement("ul",{className:"o-list-ui o-list-ui--dividers"},t.props.memberAccessLevelResult.parentFolders.map(t.renderParentFolder))))},t.renderParentFolder=function(e){var n=s.default.createElement(l.Sprite,{group:"web",name:"folder_user_32",className:"u-pad-right-xs",alt:""});return s.default.createElement("li",null,s.default.createElement("div",{className:"parent-folder-access-modal__parent-folder u-pad-vertical-xs u-pad-horizontal-s",onClick:t.handleNavigateToParentFolder(e)},s.default.createElement(a.Flag,{leftAttachment:n,rightAttachment:t.renderFolderLink(e)},s.default.createElement("span",{className:"parent-folder-access-modal__folder-name"},r.Emstring.em_snippet(e.name,d.SNIPPET_SIZES.FILENAME)))))},t.renderFolderLink=function(e){return s.default.createElement("button",{className:"button-as-link",onClick:t.handleNavigateToParentFolder(e),type:"button"},t.arePermissionsAllowed(e.permissions)?u.intl.formatMessage({id:"kH07jA",defaultMessage:"Manage membership"}):u.intl.formatMessage({id:"GW4cXr",defaultMessage:"View folder"}))},t.renderSimpleContent=function(){return s.default.createElement("div",null,s.default.createElement("span",{className:"parent-folder-access-modal__warning"},t.props.memberAccessLevelResult.warning),s.default.createElement("div",{className:"u-mar-top-m clearfix"},s.default.createElement("div",{className:"u-l-fr"},s.default.createElement("button",{className:"c-btn c-btn--primary confirm-button",onClick:t.dismissModal},u.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"})))))},t.getTitleStr=function(){return"remove"===t.props.originalAction?t.props.contentInfo.isFolder()?i.defineMessage({id:"kzDJ/C",defaultMessage:"{member_name} can still access this folder"}):i.defineMessage({id:"11DRm6",defaultMessage:"{member_name} can still access this file"}):t.props.contentInfo.isFolder()?t.memberCanEdit()?i.defineMessage({id:"lElTYu",defaultMessage:"{member_name} can still edit this folder"}):i.defineMessage({id:"orL+7x",defaultMessage:"{member_name} can still view this folder"}):t.memberCanEdit()?i.defineMessage({id:"3ux07n",defaultMessage:"{member_name} can still edit this file"}):i.defineMessage({id:"dkDAAI",defaultMessage:"{member_name} can still view this file"})},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.getTitleStr();return s.default.createElement(o.Modal,{autoClose:!1,className:"parent-folder-access-modal",buttonComponent:s.default.createElement("span",null),onDismissCompleted:this.handleDismissed,title:u.intl.formatMessage(e,{member_name:r.Emstring.em_snippet(this.props.memberDisplayName,d.SNIPPET_SIZES.DISPLAY_NAME)})},s.default.createElement("div",{className:"parent-folder-access-modal__contents"},this.props.memberAccessLevelResult.parentFolders&&!this.props.isInContentManager?this.renderParentFolderContent():this.renderSimpleContent()))},t.displayName="ParentFolderAccessModal",t})(s.default.Component);t.ParentFolderAccessModal=p})),define("modules/clean/sharing/share_modal/store/modal_info/reducer",["require","exports","tslib","immutable","modules/clean/sharing/content_info","modules/clean/cloud_docs/constants","modules/clean/sharing/action_types","modules/clean/sharing/views/constants","modules/clean/sharing/access_level"],(function(e,t,n,s,i,r,a,o,l){"use strict";function c(e,t){return t.shared_folder_id?e.setNsId(t.shared_folder_id):e}Object.defineProperty(t,"__esModule",{value:!0}),t.modalInfoReducer=t.initialModalInfoState=void 0,s=n.__importStar(s),t.initialModalInfoState={canRelinquishMembership:!1,contentInfo:i.ContentInfo.createFromParams({fqPath:"",isFolder:!1}),contentNameInputValue:"",contentNameMessageLevel:o.CONTENT_NAME_MESSAGE_LEVELS.INFO,initialProps:{},initialRecipientTokens:[],isContentNameFocused:!1,pendingMemberAction:s.Set(),recipientMessage:"",recipientRawInput:"",recipientTokens:[],recipientValidation:{},shareAsConfidential:!1,uiMode:o.MODES.MEMBERSHIP,fetchMetadataStatus:o.FETCH_METADATA_STATUS.FETCHING},t.modalInfoReducer=function(e,s){var i=s.payload;switch(s.type){case a.ShareModalActionTypes.CHANGE_CREATE_COMMENT_CHECKBOX:return n.__assign(n.__assign({},e),{isShareMessageAsCommentExplicitlyChecked:i.checked});case a.ShareModalActionTypes.CHANGE_RECIPIENTS:var d=i.recipientTokens,u=i.recipientRawInput,p=e.uiMode;return d.length>0||u.length>0?p===o.MODES.MEMBERSHIP&&(p=o.MODES.SHARE):p===o.MODES.SHARE&&(p=o.MODES.MEMBERSHIP),n.__assign(n.__assign({},e),{recipientTokens:d,recipientRawInput:u,uiMode:p});case a.ShareModalActionTypes.CHANGE_RECIPIENT_ACCESS:return n.__assign(n.__assign({},e),{recipientAccess:i.newAccess});case a.ShareModalActionTypes.CHANGE_RECIPIENT_MESSAGE:return n.__assign(n.__assign({},e),{recipientMessage:i.message});case a.ShareModalActionTypes.UPDATE_RECIPIENT_VALIDATION:var m=i.recipientValidation,h=i.resetCurrentValidations?{}:e.recipientValidation,f={};return l.ACCESS_VALUES.forEach((function(e){var t=h[e]||{},s=m[e]||{};f[e]=n.__assign(n.__assign({},t),s)})),n.__assign(n.__assign({},e),{recipientValidation:f});case a.ShareModalActionTypes.FETCH_METADATA_FAILURE:return n.__assign(n.__assign({},e),{uiMode:o.MODES.LINK_ONLY,linkOnlyReason:e.linkOnlyReason!==o.LINK_ONLY_REASON.LINKS_PAGE?i.reason:e.linkOnlyReason,fetchMetadataStatus:o.FETCH_METADATA_STATUS.FAIL});case a.ShareModalActionTypes.FETCH_METADATA_SUCCESS:var g=i.metadata;p=g.path_lower&&r.isPointerByExtension(g.path_lower)?o.MODES.POINTER:e.uiMode;return n.__assign(n.__assign({},e),{uiMode:p,contentInfo:c(e.contentInfo,g),fetchMetadataStatus:o.FETCH_METADATA_STATUS.SUCCESS});case a.ShareModalActionTypes.HANDLE_CONTENT_NAME_CHANGE:return n.__assign(n.__assign({},e),{contentNameInputValue:i.name,contentNameMessageLevel:o.CONTENT_NAME_MESSAGE_LEVELS.INFO,contentNameMessage:""===i.name?o.CONTENT_NAME_EMPTY_TOOLTIP:void 0});case a.ShareModalActionTypes.HANDLE_CONTENT_NAME_FOCUS_CHANGE:return n.__assign(n.__assign({},e),{isContentNameFocused:i.focus});case a.ShareModalActionTypes.MEMBER_ACTION_COMPLETE:return n.__assign(n.__assign({},e),{pendingMemberAction:e.pendingMemberAction.delete(i.member.memberKey())});case a.ShareModalActionTypes.MEMBER_ACTION_PENDING:return n.__assign(n.__assign({},e),{pendingMemberAction:e.pendingMemberAction.add(i.member.memberKey())});case a.ShareModalActionTypes.REMOVE_MEMBER_KEEP_ACCESS:case a.ShareModalActionTypes.REMOVE_MEMBER_SUCCESS:return n.__assign(n.__assign({},e),{pendingMemberAction:e.pendingMemberAction.delete(i.member.memberKey())});case a.ShareModalActionTypes.SEND_SHARE_FAILURE:return n.__assign(n.__assign({},e),{uiMode:o.MODES.SHARE});case a.ShareModalActionTypes.SEND_SHARE_REQUEST:return n.__assign(n.__assign({},e),{uiMode:o.MODES.SHARE_SENDING});case a.ShareModalActionTypes.SEND_SHARE_SUCCESS:return n.__assign(n.__assign({},e),{uiMode:o.MODES.SHARE});case a.ShareModalActionTypes.SHARE_FOLDER_SUCCESS:return n.__assign(n.__assign({},e),{contentInfo:c(e.contentInfo,i.metadata)});case a.ShareModalActionTypes.SHARE_MODAL_OPEN:var _=i.shareModalInfoAttrs.contentInfo,S=i.shareModalInfoAttrs.inLinksPage,E=_.isFolder()&&!_.pathExists(),v=E&&!i.initialProps.initialContentName,M=(p=t.initialModalInfoState.uiMode,void 0);return r.isPointerByExtension(_.displayPath()||"")?p=o.MODES.POINTER:E?p=o.MODES.SHARE:S&&(p=o.MODES.LINK_ONLY,M=o.LINK_ONLY_REASON.LINKS_PAGE),n.__assign(n.__assign({},e),{contentInfo:_,linkOnlyReason:M,uiMode:p,contentNameInputValue:i.initialProps.initialContentName,contentNameMessage:v?o.CONTENT_NAME_EMPTY_TOOLTIP:"",initialProps:i.initialProps,initialRecipientTokens:i.shareModalInfoAttrs.initialRecipientTokens||[],isContentNameFocused:v,onCreateGroupCallback:i.initialProps.onCreateGroupCallback,recipientAccess:void 0,recipientMessage:i.initialProps.recipientMessage||"",recipientTokens:[],recipientValidation:{},showSharingQuestionnaire:i.initialProps.showSharingQuestionnaire,showTsdAccessVisibility:i.initialProps.showTsdAccessVisibility,oneClickCopyLink:i.initialProps.oneClickCopyLink});case a.ShareModalActionTypes.SHARE_MODAL_CLOSE:return n.__assign(n.__assign({},e),{initialRecipientTokens:i.tokens||e.initialRecipientTokens||[]});case a.ShareModalActionTypes.VALIDATE_CONTENT_NAME_ERROR:return n.__assign(n.__assign({},e),{contentNameMessage:i.errorMsg,contentNameMessageLevel:o.CONTENT_NAME_MESSAGE_LEVELS.ERROR});case a.ShareModalActionTypes.VALIDATE_CONTENT_NAME_SUCCESS:return n.__assign(n.__assign({},e),{contentInfo:e.contentInfo.setFQPath(i.newFolderPath)});default:return e}}})),define("modules/clean/sharing/share_modal/store/sharing_info/reducer",["require","exports","tslib","modules/clean/sharing/action_types","modules/clean/sharing/api/types/metadata"],(function(e,t,n,s,i){"use strict";function r(e,t){var n=e.metadata,s=t.permissions||n&&n.permissions;return t.set("permissions",s)}Object.defineProperty(t,"__esModule",{value:!0}),t.sharingInfoReducer=t.initialSharingInfoState=void 0,t.initialSharingInfoState={areMembersFullyLoaded:!1,areSharingPrefsLoaded:!1,hasDisplayableMembers:!1,isLinkMetadataLoaded:!1,isCurrentAccountLoaded:!1,shouldBlockMemberListOnPassLoad:!0,memberCounts:new i.MemberCounts,members:new i.SharingMembership,sharingPrefs:new i.SharingPrefs,sharedLinks:[],selectedAudienceByAccessLevel:{}},t.sharingInfoReducer=function(e,a){void 0===e&&(e=t.initialSharingInfoState);var o=a.payload;switch(a.type){case s.ShareModalActionTypes.CHANGE_MEMBER_ACCESS_FAILURE:return n.__assign(n.__assign({},e),{members:e.members.setIn([o.member.type(),o.member.memberKey(),"access_type"],o.prevAccess)});case s.ShareModalActionTypes.CHANGE_MEMBER_ACCESS_REQUEST:return n.__assign(n.__assign({},e),{members:e.members.setIn([o.member.type(),o.member.memberKey(),"access_type"],o.newAccess)});case s.ShareModalActionTypes.CLEAR_FILE_MEMBERSHIP_LAST_SEEN_INFO:return n.__assign(n.__assign({},e),{members:e.members.update("users",(function(e){return e.map((function(e){return e.set("time_last_seen",null)}))}))});case s.ShareModalActionTypes.CREATE_LINK_SUCCESS:return n.__assign(n.__assign({},e),{hasCreatedLink:!0,linkMetadata:o.linkMetadata,sharedLinks:e.sharedLinks.concat(o.linkMetadata)});case s.ShareModalActionTypes.FETCH_MEMBER_COUNTS_SUCCESS:return n.__assign(n.__assign({},e),{memberCounts:o.memberCounts});case s.ShareModalActionTypes.FETCH_METADATA_FAILURE:return n.__assign(n.__assign({},e),{fetchingMetadataPromise:void 0});case s.ShareModalActionTypes.FETCH_METADATA_REQUEST:return n.__assign(n.__assign({},e),{fetchingMetadataPromise:o.promise});case s.ShareModalActionTypes.FETCH_METADATA_SUCCESS:return n.__assign(n.__assign({},e),{metadata:r(e,o.metadata),fetchingMetadataPromise:void 0});case s.ShareModalActionTypes.FETCH_SHARING_PREFS_REQUEST:return n.__assign({},e);case s.ShareModalActionTypes.FETCH_SHARING_PREFS_SUCCESS:return n.__assign(n.__assign({},e),{areSharingPrefsLoaded:!0,sharingPrefs:o.sharingPrefs});case s.ShareModalActionTypes.FETCH_LINK_METADATA_FAILURE:return n.__assign(n.__assign({},e),{isLinkMetadataLoaded:!0,linkMetadata:void 0,sharedLinks:[]});case s.ShareModalActionTypes.FETCH_LINK_METADATA_SUCCESS:return n.__assign(n.__assign({},e),{isLinkMetadataLoaded:!0,linkMetadata:o.sharedLinks.length>0?o.sharedLinks[0]:null,sharedLinks:o.sharedLinks,selectedAudienceByAccessLevel:{}});case s.ShareModalActionTypes.DELETE_LINK_METADATA_SUCCESS:for(var l=[],c=0,d=e.sharedLinks;c<d.length;c++){var u=d[c];u.url!==o.deletedLink.url&&l.push(u)}return n.__assign(n.__assign({},e),{hasCreatedLink:!1,hasIncrementedUpsellCounter:!1,linkMetadata:l[0]?l[0]:null,sharedLinks:l});case s.ShareModalActionTypes.FETCH_USER_ACCOUNTS_REQUEST:return n.__assign(n.__assign({},e),{fetchingMembersRequest:{limitNonNull:o.limitNonNull,promise:o.promise,requestId:o.requestId}});case s.ShareModalActionTypes.FETCH_USER_ACCOUNTS_SUCCESS:return e.fetchingMembersRequest&&e.fetchingMembersRequest.requestId!==o.requestId?e:e.hasDisplayableMembers&&e.fetchingMembersRequest&&e.fetchingMembersRequest.limitNonNull<e.members.getMemberCount()?e:n.__assign(n.__assign({},e),{hasDisplayableMembers:!0,areMembersFullyLoaded:!o.members.cursor,fetchingMembersRequest:o.members.cursor?e.fetchingMembersRequest:void 0,members:o.members});case s.ShareModalActionTypes.FETCH_USER_ACCOUNTS_CONTINUED_SUCCESS:return e.fetchingMembersRequest&&e.fetchingMembersRequest.requestId!==o.requestId?e:n.__assign(n.__assign({},e),{areMembersFullyLoaded:!o.members.cursor,fetchingMembersRequest:o.members.cursor?e.fetchingMembersRequest:void 0,members:e.members.mergeDeep(o.members)});case s.ShareModalActionTypes.FETCH_CURRENT_ACCOUNT_REQUEST:return n.__assign(n.__assign({},e),{isCurrentAccountLoaded:!1});case s.ShareModalActionTypes.FETCH_CURRENT_ACCOUNT_SUCCESS:return n.__assign(n.__assign({},e),{isCurrentAccountLoaded:!0,isFamilyUser:o.isFamilyUser,teamPolicy:o.teamPolicy});case s.ShareModalActionTypes.FETCH_FILE_MEMBER_COUNT_SUCCESS:return n.__assign(n.__assign({},e),{memberCounts:new i.MemberCounts({total_unique_users:o.count,users_outside_team:0,exceeds_count:o.exceeds_limit})});case s.ShareModalActionTypes.REMOVE_MEMBER_KEEP_ACCESS:return n.__assign(n.__assign({},e),{members:e.members.setIn([o.member.type(),o.member.memberKey(),"access_type"],o.access)});case s.ShareModalActionTypes.REMOVE_MEMBER_SUCCESS:return n.__assign(n.__assign({},e),{members:e.members.deleteIn([o.member.type(),o.member.memberKey()])});case s.ShareModalActionTypes.SHARE_FOLDER_FAILURE:return n.__assign(n.__assign({},e),{shareFolderPromise:void 0});case s.ShareModalActionTypes.SHARE_FOLDER_REQUEST:return n.__assign(n.__assign({},e),{shareFolderPromise:o.promise});case s.ShareModalActionTypes.SHARE_FOLDER_SUCCESS:return n.__assign(n.__assign({},e),{metadata:r(e,o.metadata),shareFolderPromise:o.promise});case s.ShareModalActionTypes.TRANSFER_OWNER_SUCCESS:return n.__assign(n.__assign({},e),{metadata:void 0,isLinkMetadataLoaded:!1,hasDisplayableMembers:!1});case s.ShareModalActionTypes.UNBLOCK_MEMBER_LIST_ON_PASS_LOAD:return n.__assign(n.__assign({},e),{shouldBlockMemberListOnPassLoad:!1});case s.ShareModalActionTypes.UPDATE_SHARING_SETTINGS_SUCCESS:return n.__assign(n.__assign({},e),{metadata:r(e,o.metadata)});case s.ShareModalActionTypes.SET_UPSELL_COUNTER_PREF_SUCCESS:return n.__assign(n.__assign({},e),{hasIncrementedUpsellCounter:!0});case s.ShareModalActionTypes.SET_DISMISSED_DOCSEND_BANNER:return n.__assign(n.__assign({},e),{dismissedDocsendBanner:!0});case s.ShareModalActionTypes.CHANGE_LINK_AUDIENCE_SELECTION:var p=e.selectedAudienceByAccessLevel;return p[o.accessLevel]=o.audience,n.__assign(n.__assign({},e),{selectedAudienceByAccessLevel:p});case s.ShareModalActionTypes.REMOVE_LINK_AUDIENCE_SELECTION:if(e.selectedAudienceByAccessLevel){var m=Object.keys(e.selectedAudienceByAccessLevel).reduce((function(t,n){return e.selectedAudienceByAccessLevel&&n!==o.accessLevel&&(t[n]=e.selectedAudienceByAccessLevel[n]),t}),{});return n.__assign(n.__assign({},e),{selectedAudienceByAccessLevel:m})}return e;case s.ShareModalActionTypes.SHARE_MODAL_OPEN:return n.__assign(n.__assign({},e),{selectedAudienceByAccessLevel:{}});default:return e}}})),define("modules/clean/sharing/share_modal",["require","exports","tslib","immutable","react","classnames","modules/clean/flux/store_listener","modules/clean/react/pass/constants","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants","spectrum-sharing/utils/logging","modules/clean/react/pass/store","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/views/constants","ts-keycode-enum","modules/clean/sharing/member_constructors","modules/clean/sharing/stores/sharing_info","modules/clean/sharing/ui_util","modules/clean/sharing/gating_util","modules/clean/sharing/sharing_settings_modal","modules/clean/sharing/views/modal_content_spectrum","modules/clean/viewer","spectrum/modal/index","modules/core/i18n","modules/clean/ux_analytics/utils","modules/clean/sharing/api/client","modules/clean/stormcrow/stormcrow_exposure_logger"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v,M,y,C,b,I){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModal=void 0,s=n.__importStar(s),i=n.__importDefault(i),r=n.__importDefault(r);var T=(function(e){function t(t){var n=e.call(this,t)||this;return n.spectrumModalClassName="scl-share-modal",n.handleKeyDown=function(e){e.keyCode===m.Key.Escape&&n.onModalCloseClick()},n.preventEventBubbling=function(e){return e.stopPropagation()},n.onModalCloseClick=function(){var e=n.props.onCancel;e&&e();var t=n.getTokenizer();t&&t.finishLogging(!1),n.setState({open:!1}),C.dispatchModalClosed(),g.trackUserLeapEvent(g.SharingUserLeapEvent.SHARE_MODAL_CLOSE,n.props.contentInfo.extras.origin),g.logTiburonEvent(n.props.contentInfo,n.props.user.id,c.TiburonEventName.CloseShareModal)},n.getSpectrumModalElement=function(){return document.getElementsByClassName(n.spectrumModalClassName)[0]},n.onModalReady=function(){C.dispatchModalOpened();var e=n.getSpectrumModalElement();e&&e.addEventListener("keypress",n.preventEventBubbling,!1)},n.handleDismiss=function(){n.showPreviousScreen(),n.props.openSettingsFromTheExternalSharePageQuickActions&&n.onModalCloseClick()},n.showPreviousScreen=function(){n.setState({currentScreen:n.state.previousScreen})},n.onSettingsClick=function(){g.logTiburonEvent(n.props.contentInfo,n.props.user.id,n.props.sharingInfo.isFolder()?c.TiburonEventName.OpenFolderSettingsModal:c.TiburonEventName.OpenFileSettingsModal),n.setState({currentTab:n.props.sharingInfo.isFolder()?l.FOLDER_SETTINGS:l.FILE_SETTINGS,previousScreen:n.state.currentScreen,currentScreen:u.SETTINGS_SCREEN})},n.onLinkSettingsClick=function(){var e=l.VIEW_LINK_SETTINGS;n.props.sharingInfo.permissionsObj().canCreateEditLink()&&(e=l.EDIT_LINK_SETTINGS),g.logTiburonEvent(n.props.contentInfo,n.props.user.id,c.TiburonEventName.OpenLinkSettingsModal,{settings_tab:e}),n.setState({currentTab:e,previousScreen:n.state.currentScreen,currentScreen:u.SETTINGS_SCREEN})},n.state={open:!0,currentScreen:t.initialScreen?t.initialScreen:u.SHARE_SCREEN,currentTab:t.initialCurrentTab,previousScreen:u.SHARE_SCREEN},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){document.addEventListener("keydown",this.handleKeyDown,!1);var e=new I.StormcrowExposureLogger;this.props.oneClickCopyLink&&e.logExposure("sharing_one_click_copy_link",this.props.oneClickCopyLink)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeyDown,!1);var e=this.getTokenizer();this.props.actionHandler.onShareModalUnmount(e);var t=this.getSpectrumModalElement();t&&t.removeEventListener("keypress",this.preventEventBubbling,!1)},t.prototype.getTokenizer=function(){return this.refs.content&&this.refs.content.getWrappedComponent()&&this.refs.content.getWrappedComponent().refs.tokenizer},t.prototype.getClient=function(){return this.props.sharingInfo.isFolder()?new b.FolderShareApiClient({userId:this.props.user.id,isNonUserRelativeContext:this.props.isInContentManager}):new b.FileShareApiClient({userId:this.props.user.id})},t.prototype.getIsPassEnabled=function(){var e=d.passStore.getPassPermissions(this.props.contentInfo.extras.fileId);return!!e&&e.canReadPresence},t.prototype.isPassInfoLoaded=function(){return o.fetchingStatusIsComplete(this.props.passFetchingStatus)},t.prototype.shouldRenderMainLoading=function(){if(this.props.sharingInfo.fetchMetadataStatus()===p.FETCH_METADATA_STATUS.FAIL)return!1;var e=this.props.isLinkMetadataLoaded||!this.props.sharingInfo.shouldFetchLinkMetadata(),t=this.props.sharingInfo.isMetadataLoaded()&&this.props.sharingInfo.areSharingPrefsLoaded(),n=this.props.sharingInfo.hasNonSelfMembers()||this.props.areMembersFullyLoaded,s=!this.getIsPassEnabled()||this.isPassInfoLoaded(),i=this.props.shouldBlockMemberListOnPassLoad&&!s;return!t||!n||i||!e},t.prototype.getFinalUIMode=function(){return this.props.uiMode===p.MODES.POINTER?p.MODES.POINTER:this.shouldRenderMainLoading()?p.MODES.LOADING:this.shouldRenderShareME()?p.MODES.EVOLUTION:this.props.uiMode},t.prototype.render=function(){var e;if(e=this.props.sharingInfo.isFolder()?this.props.sharingInfo.folderPolicy():this.props.sharingInfo.filePolicy(),this.state.currentScreen===u.SETTINGS_SCREEN&&e)return i.default.createElement(S.SharingSettingsModal,{className:this.spectrumModalClassName,actionHandler:this.props.actionHandler,sharingInfo:this.props.sharingInfo,sharingPrefs:this.props.sharingPrefs,client:this.getClient(),currentTab:this.state.currentTab,currentPolicy:e,folderName:this.props.sharingInfo.name(),isFolder:this.props.sharingInfo.isFolder(),isSharedFolder:this.props.contentInfo.isSharedFolder(),isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,isInContentManager:this.props.isInContentManager,isTeamSharedFolder:this.props.isTeamSharedFolder,isUserOnOwnerTeam:this.props.isUserOnOwnerTeam,linkMetadata:this.props.linkMetadata,ownerTeam:this.props.ownerTeam,permissions:this.props.permissions,user:this.props.user,onDismiss:this.handleDismiss,onSuccessSharing:this.props.onSuccessSharing});var t=r.default(this.spectrumModalClassName,{"scl-share-modal--overflow-visible":this.getFinalUIMode()===p.MODES.EVOLUTION});return i.default.createElement(M.Modal,{appElement:document.getElementById("embedded-app")||document.body,ariaLabel:y.intl.formatMessage({id:"RQGLnS",defaultMessage:"Sharing Modal"}),className:t,bodyClassName:"scl-share-modal-content uxa-modal",bodyId:"unified-share-modal",displayCloseButton:!1,open:this.state.open,width:540,overlayClassName:"file-viewer-modal-overlay",overlayClickClose:!0,onReady:this.onModalReady,onRequestClose:this.onModalCloseClick},this.renderModalContent())},t.prototype.renderModalContent=function(){var e=!!(this.props.contentInfo.isFile()?this.props.filePolicy&&this.props.filePolicy.viewer_info_policy:this.props.folderPolicy&&this.props.folderPolicy.viewer_info_policy),t={currentScreen:this.state.currentScreen,headerId:"unified-share-modal-title",isCreatingNewFolder:this.isCreatingNewFolder(),isLimitedTeam:this.props.viewer.team_is_limited,isPassEnabled:this.getIsPassEnabled(),mode:this.getFinalUIMode(),showContentManagerBridge:this.shouldRenderContentManagerBridge(),showPassFileSettings:e,onLinkSettingsClick:this.onLinkSettingsClick,onModalCloseClick:this.onModalCloseClick,onSettingsClick:this.onSettingsClick},s=n.__assign(n.__assign({},this.props),t);return i.default.createElement(E.ShareModalContentSpectrum,n.__assign({},s))},t.prototype.shouldRenderContentManagerBridge=function(e){return void 0===e&&(e=!1),!this.props.isInContentManager&&(!!_.GoldenGate.hasContentManagerAndSuperAdmin(this.props.user.id)&&(!!this.props.isTeamSharedFolder||!(!this.props.isFolderInsideTeamFolderTree||!this.props.isUserOnOwnerTeam)&&(e||!this.props.sharingPermissions.canInviteEditor())))},t.prototype.isCreatingNewFolder=function(){var e=this.props.contentInfo;return e.isFolder()&&!e.extras.exists},t.prototype.notRenderShareME=function(){return this.props.sharingInfo.fetchMetadataStatus()===p.FETCH_METADATA_STATUS.FAIL||!this.props.sharingInfo.shouldFetchLinkMetadata()},t.prototype.shouldRenderShareME=function(){return!this.notRenderShareME()},t.displayName="ShareModal",t})(i.default.Component);t.ShareModal=a.listenToStores(T,{sharingInfoStore:f.sharingInfoStore,passStore:d.passStore},(function(e){var t=e.actionHandler.getSharingInfo(),n=t.getInitialProps(),i=e.actionHandler.getPassInfo(),r=i.groupSeenStateInfo,a=i.linkSeenStateInfo,o=i.presentAccountIds,l=i.passFetchingStatus;return{sharingInfo:t,actionHandler:e.actionHandler,areMembersFullyLoaded:t.areMembersFullyLoaded(),areSharingPrefsLoaded:t.areSharingPrefsLoaded(),canChangeOptions:t.permissionsObj().canChangeOptions(),canEdit:t.permissionsObj().canEdit(),canRelinquishMembership:t.permissionsObj().canRelinquishMembership(),canShareLink:t.canShareLink(),canUnshareFile:t.permissionsObj().canUnshare(),canUnshareFolder:t.permissionsObj().canUnshare(),canUpdateConfidentiality:t.permissionsObj().canUpdateConfidentiality(),contactsError:t.contactsError(),contentInfo:t.contentInfo(),contentNameMessage:t.contentNameMessage(),contentNameMessageLevel:t.contentNameMessageLevel(),filePolicy:t.filePolicy(),folderPolicy:t.folderPolicy(),guestMembers:h.constructGuests(o),groupSeenStateInfo:r,hasDisplayableMembers:t.hasDisplayableMembers(),hasParentSharedFolder:t.hasParentSharedFolder(),initialContentName:n.initialContentName,initialRecipientTokens:t.initialRecipientTokens(),sharingPrefs:t.sharingPrefs(),isConfidentialFolder:t.isConfidentialFolder(),isContentNameFocused:t.isContentNameFocused(),isFolderInsideTeamFolderTree:t.isFolderInsideTeamFolderTree(),isInContentManager:n.isInContentManager,isLinkMetadataLoaded:t.isLinkMetadataLoaded(),isMetadataLoaded:t.isMetadataLoaded(),isOwner:t.isOwner(),isCurrentAccountLoaded:t.isCurrentAccountLoaded(),isTeamSharedFolder:t.isTeamSharedFolder(),isTokenizerEmpty:t.isTokenizerEmpty(),isUserOnOwnerTeam:t.isUserOnOwnerTeam(),linkMembers:h.constructLinkMembers(a),linkMetadata:t.linkMetadata(),linkOnlyReason:t.linkOnlyReason(),memberCounts:t.memberCounts(),memberCountWithRecipients:t.memberCountWithRecipients(),members:t.members(),metadata:t.metadata(),ownerTeam:t.ownerTeam(),passFetchingStatus:l,pendingMemberAction:t.pendingMemberAction(),permissions:t.permissions(),sharingPermissions:t.permissionsObj(),presentAccountIds:s.Set(o),recipientMessage:t.recipientMessage(),recipientTokens:t.recipientTokens(),shareButtonLabelOverride:n.shareButtonLabelOverride,shareFolderPromise:t.shareFolderPromise(),shouldBlockMemberListOnPassLoad:t.shouldBlockMemberListOnPassLoad(),initialScreen:e.initialScreen,initialCurrentTab:e.initialCurrentTab,teamPolicy:t.teamPolicy(),uiMode:t.uiMode(),user:t.user(),onCancel:n.onCancel,onCreateGroupCallback:t.onCreateGroupCallback(),onDeleteLink:n.onDeleteLink,onSetContentNameAndSendShareFail:n.onSetContentNameAndSendShareFail,onShareClick:n.onShareClick,onSuccessSharing:n.onSuccessSharing,teamGroupInfo:n.teamGroupInfo,viewer:v.Viewer.get_viewer(),focusOnMount:n.focusOnMount,showSharingQuestionnaire:t.getShowSharingQuestionnaire(),openSettingsFromTheExternalSharePageQuickActions:e.actionHandler.getOpenSettingsFromTheExternalSharePageQuickActions(),oneClickCopyLink:t.getOneClickCopyLink()}}))})),define("modules/clean/sharing/share_modal_icon",["require","exports","tslib","react","spectrum/icon_content/index","modules/clean/filetypes","modules/clean/react/icon/file_icon","modules/clean/react/icon/icon_helper"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalIcon=void 0;var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return this.props.isFolder?this.renderFolder():this.renderFile()},t.prototype.renderFile=function(){var e={file:{type:r.FileTypes.FILE,fq_path:this.props.filename},className:this.props.className,variant:"small"};return s.default.createElement(a.FileIcon,n.__assign({},e))},t.prototype.renderFolder=function(){var e=r.FileTypes.FOLDER;this.props.pathExists&&(this.props.isTeamSharedFolder?e=r.FileTypes.TEAM_SHARED_FOLDER:this.props.isSharedFolder&&(e=r.FileTypes.SHARED_FOLDER));var t=o.spectrumFolderIcon({fileType:e,isViewOnly:this.props.isViewOnly,isInTeamFolderTree:this.props.isFolderInsideTeamFolderTree,size:o.SpectrumIconSize.Small,isConfidential:this.props.isConfidentialFolder||!1,iconPostfix:this.props.isConfidentialFolder?"_admin_view":""});return s.default.createElement(i.IconContent,{name:t,"aria-label":this.props.alt,role:"img",className:this.props.className})},t.displayName="ShareModalIcon",t})((s=n.__importDefault(s)).default.Component);t.ShareModalIcon=l})),define("modules/clean/sharing/share_modal_util",["require","exports","tslib","modules/clean/account/email","modules/clean/account/email_verify_reasons","modules/clean/contacts/contact","modules/clean/contacts/types","modules/clean/filetypes","modules/clean/react/browse/action_logger","modules/clean/react/browse/models","modules/clean/react/teams/modals/limited_team_share_folder_modal","modules/clean/sharing/actions/share_modal","modules/clean/sharing/api/client","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/content_info","modules/clean/sharing/public_folder/public_folder","modules/clean/sharing/share_modal","modules/clean/sharing/ui_util","modules/clean/viewer","spectrum-sharing/utils/logging","spectrum-sharing/utils/sharing_constants","spectrum-sharing/share_modal/sharing_settings/utils/index"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showPrefilledShareModal=t.showNewFolderShareModal=t.getShareModalInfo=t.showFastrakShareModalIfAllowed=t.showShareModal=t.getSharingInfo=t.generateModalSessionId=void 0,i=n.__importStar(i),a=n.__importDefault(a),l=n.__importStar(l),d=n.__importStar(d),t.generateModalSessionId=function(){return(new Date).getTime().toString()},t.getSharingInfo=function(e,s,i){void 0===i&&(i={});var r=null;"number"==typeof e&&(e=S.Viewer.get_viewer().get_user_by_id(e)),null==i.userHomeNs&&(i.userHomeNs=e.home_ns_id);var a=t.getShareModalInfo(s),o=null;if(null!=a){if((a=n.__assign(n.__assign({},a),i)).modalSessionId||(a.modalSessionId=t.generateModalSessionId()),void 0===i.logShareModalView||i.logShareModalView){var d=a.nsId,u=a.sjid,p=a.fileId,m=a.filename,f=a.fqPath;l.logViewShareModal({uid:e.id,modal_session_id:a.modalSessionId||"",file_nsid:d,file_sjid:u,file_id:p,file_name:m,file_path:f})}try{r=h.ContentInfo.createFromParams(a)}catch(e){r=null}o=s instanceof c.BrowseContext?s:a.browseContext}return{browseContext:o,contentInfo:r,shareModalInfo:a,user:e}},t.showShareModal=function(e,n,r,a,o,l){var c,d,h,S;if(void 0===r&&(r={}),void 0===l&&(l=!0),d=(c=t.getSharingInfo(e,n,r)).browseContext,h=c.contentInfo,S=c.shareModalInfo,e=c.user,null==h||null==S)return!1;if(_.logTiburonEvent(h,e.id,E.TiburonEventName.BeginShareFlow),S&&t.showFastrakShareModalIfAllowed(e,S,d))return!0;if(!S.skipPublicFolderCheck&&h&&d){var y=f.makePublicFolderLink(e.id,d.config,h.displayPath(),h.isFolder());if(y)return f.showPublicFolderLinkModal(y),!0}var C=(null!=d?d.isNonUserRelativeContext:void 0)||S.isNonUserRelativeContext,b=i.SHMODAL;if(S.origin===m.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE&&(b=i.SHARE_FILEVIEWER),C||s.EmailVerification.get_for_user(e).verified_or_show(b,S.onCancel)){var I=new(h.isFolder()?p.FolderShareApiClient:p.FileShareApiClient)({userId:e.id,isNonUserRelativeContext:C}),T=new u.ShareModalActionHandler(I,e,g.ShareModal,a,o,r.openSettingsFromTheExternalSharePageQuickActions),k=S.inLinksPage,w=S.prefillContacts,A=T.initializeShareModal({contentInfo:h,initialRecipientTokens:w,inLinksPage:k},{client:I,content:n,user:e,onDeleteLink:S.onDeleteLink,teamGroupInfo:h.teamGroupInfo(),isInContentManager:!!C,onSuccessSharing:S.onSuccessSharing,shareAsConfidential:!!S.shareAsConfidential,initialContentName:S.initialContentName,shouldSyncThisFolder:S.shouldSyncThisFolder,recipientMessage:S.recipientMessage,onCreateGroupCallback:S.onCreateGroupCallback,onShareClick:S.onShareClick,shouldSuppressRedirectToBrowse:S.shouldSuppressRedirectToBrowse,shouldCloseImmediately:S.shouldCloseImmediately,onCancel:S.onCancel,onClose:S.onClose,onSetContentNameAndSendShareFail:S.onSetContentNameAndSendShareFail,shareButtonLabelOverride:S.shareButtonLabelOverride,focusOnMount:l,showSharingQuestionnaire:S.showSharingQuestionnaire,showTsdAccessVisibility:S.showTsdAccessVisibility,oneClickCopyLink:S.oneClickCopyLink}),N=r.openSettingsTab;N?(N!==M.VIEW_LINK_SETTINGS||0!==T.getSharingInfo().sharedLinks().length||r.openSettingsFromTheExternalSharePageQuickActions||T.createSharedLink(),T.openSharingSettingsModal(N)):r.openLinkSettings?A.then((function(){return T.handleLinkSettingsClick()})):r.initialScreen&&r.initialScreen===v.MANAGE_SCREEN?T.showScreen(v.MANAGE_SCREEN):T.openShareModal()}else _.logTiburonEvent(h,e.id,E.TiburonEventName.ShareModalEmailUnverified);return!0},t.showFastrakShareModalIfAllowed=function(e,t,n){return!(!t.isTeamSharedFolder||!S.Viewer.get_viewer().team_is_limited)&&(d.showModalInstance({fqPath:t.fqPath}),!0)},t.getShareModalInfo=function(e){if(e instanceof c.File){var t=[o.FileTypes.FILE,o.FileTypes.PACKAGE].indexOf(e.type)>-1;return{exists:!e.isDeleted,fileId:e.file_id,fqPath:e.fq_path,isFolder:!t,isTeamSharedFolder:e.type===o.FileTypes.TEAM_SHARED_FOLDER,sjid:e.sjid,nsId:e.ns_id,nsPath:e.ns_path,targetNsId:e.target_ns}}return e instanceof c.BrowseContext?y(e):e};var y=function(e){return e.isInFolderMode?e.isInsideSharedFolder?e.currentNSPath?{fqPath:e.currentFQPath,isFolder:!0,nsId:e.currentNSID,nsPath:e.currentNSPath,targetNsId:null}:{fqPath:e.currentMountPoint,isFolder:!0,nsId:null,nsPath:e.currentMountPoint,targetNsId:e.currentNSID}:{fqPath:e.currentFQPath,isFolder:!0,nsId:e.currentNSID,nsPath:e.currentNSPath,targetNsId:null}:{fqPath:e.currentFQPath,isFolder:!1,nsId:e.currentNSID,nsPath:e.currentNSPath,targetNsId:null}};t.showNewFolderShareModal=function(e,n,s,i,r,a,o,l,c,d,u,p,h,f,g,S,E,v,M,y){void 0===n&&(n=null),void 0===s&&(s=null),void 0===i&&(i=null),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===o&&(o=null),void 0===p&&(p=null),void 0===h&&(h=null),void 0===v&&(v=!0),n||(n=t.generateModalSessionId());var C={fqPath:(function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=1;n<=100;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return _.getNewFolderPathFromContentName(e,s||"")})(),isFolder:!0,exists:!1,origin:m.SHARE_ACTION_ORIGIN_TYPE.WIZARD,modalSessionId:n,isNonUserRelativeContext:a,isTeamSharedFolder:!1,initialContentName:i,shareAsConfidential:r,shouldSyncThisFolder:o,shouldSuppressRedirectToBrowse:p,shouldCloseImmediately:h,onCancel:f,onClose:g,onSetContentNameAndSendShareFail:S,shareButtonLabelOverride:E,logShareModalView:v,oneClickCopyLink:y},b={};return d&&(b.onSuccessSharing=d),u&&(b.onShareClick=u),t.showShareModal(e,C,b,l,c)},t.showPrefilledShareModal=function(e){var s,i,o=e.user,l=e.sharePrefillEmails,c=e.content,d=e.setUrl,u=e.contentManagerValidateFolderPath,p=e.extras;return l&&l.length>0?(s=m.SHARE_ACTION_ORIGIN_TYPE.GRANT_ACCESS,i=l.map((function(e){return new r.Contact({type:a.default.EMAIL,email:e,name:"",query:e,pending:!0})}))):(s=m.SHARE_ACTION_ORIGIN_TYPE.DESKTOP_CLIENT,i=[]),t.showShareModal(o,c,n.__assign({origin:s,prefillContacts:i},p),d,u)}})),define("modules/clean/sharing/share_modal_dropdown_util",["require","exports","modules/clean/sharing/access_level","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/strings","modules/core/i18n"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMemberActionInfo=t.shouldShowMemberAction=void 0,t.shouldShowMemberAction=function(e,t,n,i,r){return t===n||i&&i.get(e)&&i.get(e).allow||t===s.MEMBER_ACTION.REMOVE&&r},t.getMemberActionInfo=function(e){return[[s.MEMBER_ACTION.MAKE_EDITOR,{value:n.ACCESS_LEVEL.WRITER,title:i.ACCESS_NAME[n.ACCESS_LEVEL.WRITER],folder_description:i.MEMBER_ACTION_FOLDER[s.MEMBER_ACTION.MAKE_EDITOR],file_description:i.MEMBER_ACTION_FILE[s.MEMBER_ACTION.MAKE_EDITOR]}],[s.MEMBER_ACTION.MAKE_VIEWER,{value:n.ACCESS_LEVEL.READER,title:i.ACCESS_NAME[n.ACCESS_LEVEL.READER],folder_description:i.MEMBER_ACTION_FOLDER[s.MEMBER_ACTION.MAKE_VIEWER],file_description:i.MEMBER_ACTION_FILE[s.MEMBER_ACTION.MAKE_VIEWER]}],[s.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT,{value:n.ACCESS_LEVEL.READER_NO_COMMENT,title:i.ACCESS_NAME[n.ACCESS_LEVEL.READER_NO_COMMENT],folder_description:i.MEMBER_ACTION_FOLDER[s.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT],file_description:i.MEMBER_ACTION_FILE[s.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]}],[s.MEMBER_ACTION.MAKE_OWNER,{value:n.ACCESS_LEVEL.OWNER,title:r.intl.formatMessage({id:"+ZJXxL",defaultMessage:"Make owner"})}],[s.MEMBER_ACTION.REMOVE,{value:"remove",title:e?r.intl.formatMessage({id:"eTtbKw",defaultMessage:"Remove my access"}):r.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"})}],[s.MEMBER_ACTION.MANAGE_LINK_ACCESS,{value:"manage_link_access",title:r.intl.formatMessage({id:"qG3VMJ",defaultMessage:"Manage access"})}]]}})),define("modules/clean/sharing/sharing_settings_dropdown",["require","exports","tslib","react","spectrum/dropdown_menu/index","spectrum/dropdown_menu/index","spectrum-sharing/components/sharing_dropdown_menu/index"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingDropdown=void 0;var o=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSelection=function(e){t.props.onValueSelected(e)},t}return n.__extends(t,e),t.prototype.render=function(){return s.default.createElement(a.SharingDropdownMenu,{disabled:this.props.disabled,onSelection:this.handleSelection,position:"right"},this.renderButton(),s.default.createElement(r.Menu,null,this.renderMenuItems()))},t.prototype.renderButton=function(){return s.default.createElement(i.DropdownMenuButton,{className:"sharing-settings-dropdown__button",disabled:this.props.disabled},this.props.optionsDict[this.props.currentValue].label)},t.prototype.renderMenuItems=function(){var e=this;return this.props.valuesList.map((function(t){return s.default.createElement(a.SharingDropdownMenuItem,{key:t,value:t,label:e.props.optionsDict[t].label,description:e.props.optionsDict[t].description,selected:t===e.props.currentValue})}))},t.displayName="SettingDropdown",t})((s=n.__importDefault(s)).default.Component);t.SettingDropdown=o})),define("modules/clean/sharing/sharing_settings_modal",["require","exports","tslib","react","classnames","modules/core/browser","modules/clean/sharing/share_page/action_types","modules/clean/flux/dispatcher","modules/clean/react/browse/constants","modules/clean/em_string","modules/clean/filepath/filepath","modules/clean/react/components/css","spectrum-sharing/components/fixed_tabbed_container/index","spectrum/modal/index","spectrum/button/index","modules/clean/react/components/modal","spectrum-sharing/components/sharing_modal_banner/index","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/sharing_settings_util","modules/clean/react/util","modules/clean/sharing/ui_notifications_util","modules/clean/sharing/content_manager","api_v2/error","modules/constants/trademark","modules/clean/sharing/delete_link_modal","modules/clean/sharing/gating_util","modules/clean/sharing/upsells/docsend_upsell_message","modules/clean/react/snackbar","modules/core/i18n","spectrum-sharing/utils/logging","modules/clean/sharing/ui_util","modules/clean/sharing/api/types/metadata","modules/clean/sharing/views/share_modal/inform_owner_update_section","modules/clean/sharing/views/sharing_settings_file_folder_policy_view","modules/clean/sharing/views/sharing_settings_link_section","modules/clean/sharing/confirmation_modals/confirm_recursive_policy_change_modal","modules/clean/sharing/confirmation_modals/reset_access_modal","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants","modules/clean/sharing/sharing_tracked_element","modules/clean/sharing/views/share_modal/sharing_modal_upsell_premium_sharing","modules/clean/sharing/views/share_modal_evolution/utils/logging","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_util","spectrum-sharing/components/sharing_modal_downgrade_banner/index","react-intl","modules/clean/sharing/access_level"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v,M,y,C,b,I,T,k,w,A,N,L,P,F,O,R,x,D,U,B,H,V,q,G,W){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsModal=t.SharingSettingsModalUnstyled=void 0,s=n.__importDefault(s),i=n.__importDefault(i),r=n.__importStar(r),d=n.__importStar(d);var j=s.default.createElement,K=(function(e){function t(t){var i=e.call(this,t)||this;return i.handleSaveLinkSettings=function(){for(var e=0,t=i.props.sharingInfo.sharedLinks();e<t.length;e++){var s=t[e],r=S.getLinkPolicy(s),a=i.state.updatedLinkPolicies[s.url]||r;r.audience!==a.audience&&N.logTiburonEvent(i.props.sharingInfo.contentInfo(),i.props.user.id,A.TiburonEventName.ChangeSharedLinkAudience,n.__assign({old_audience:r.audience,new_audience:a.audience,screen:A.ScreenName.SettingsScreen},H.buildExtraFromLinkMetadata(s)))}i.saveLinkSettings()},i.saveLinkSettings=function(){var e=i.getLinkSettingsToUpdate();e.errors||i.setState({isSubmitting:!0},(function(){i.props.actionHandler.updateLinkSettings(e.requests).then((function(){i.setState({isSubmitting:!1}),i.props.onDismiss&&i.props.onDismiss()})).catch((function(){i.setState({isSubmitting:!1})}))}))},i.saveFileSettings=function(){var e=S.getPolicyDiff(i.state.desiredPolicy,i.props.currentPolicy);e&&E.setStatePromise(i,{isSubmitting:!0}).then((function(){return i.props.client.updatePolicy({contentId:i.props.sharingInfo.contentId(),newPolicy:e,actions:Object.keys(_.ALPHA_FILE_METADATA_PERMISSIONS)})})).catch(y.catchApiError((function(e){i.setState({isSubmitting:!1});var t=e&&e.message;return v.sharingNotificationError(t||w.intl.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."})),Promise.reject()}))).then((function(e){v.sharingNotificationSuccess(w.intl.formatMessage({id:"Hpq9jD",defaultMessage:"File settings updated."})),i.setState({isSubmitting:!1}),i.props.currentPolicy&&i.props.actionHandler.handleUpdateFilePolicy(e,i.props.currentPolicy),i.props.onDismiss&&i.props.onDismiss()})).then((function(){return i.props.actionHandler.resetContactValidations()}))},i.handleSetFolderPolicy=function(){var e=S.getPolicyDiff(i.state.desiredPolicy,i.props.currentPolicy),t=function(t){k.Snackbar.complete(w.intl.formatMessage({id:"wGHIQR",defaultMessage:"Folder settings updated."}),"set-folder-policy"),null!=t&&(t.policy.shared_link_policy!==i.props.currentPolicy.shared_link_policy&&(i.props.actionHandler.fetchLinkMetadata(),o.Dispatcher.dispatch({type:l.SharedWithActionType.SIGNAL_SHARED_LINK_DATA_OUT_OF_DATE,data:{fileFqPaths:[i.props.sharingInfo.displayPath()]}})),i.props.actionHandler.handleUpdateSharingSettings(t),o.Dispatcher.dispatch({type:a.SharePageActionTypes.FETCH_FOLDER_POLICY_SUCCESS,user:i.props.user,sharedFolderMetadata:t,policyUpdate:e}),i.props.onSuccessSharing&&i.props.onSuccessSharing()),i.props.onDismiss&&i.props.onDismiss()},n=i.props.sharingInfo.metadata()&&i.props.sharingInfo.metadata().shared_folder_id;if(n)return i.props.client.updatePolicyAlpha({contentId:n,newPolicy:e,url:null!=i.props.linkMetadata?i.props.linkMetadata.url:void 0}).then(t).then((function(){return i.props.actionHandler.resetContactValidations()}));return i.props.actionHandler.shareIfFileFolder(w.intl.formatMessage({id:"AKdTOF",defaultMessage:"Updating folder settings..."}),e).then(t).then((function(){return i.props.actionHandler.resetContactValidations()})).catch((function(e){return i.props.actionHandler.reportShareFailure(e)}))},i.saveFolderSettings=function(){i.props.isTeamSharedFolder||i.props.hasParentSharedFolder?R.confirmRecursivePolicyChange({isTeamSharedFolder:i.props.isTeamSharedFolder,onConfirm:i.handleSetFolderPolicy,onCancel:f.Modal.close}):E.setStatePromise(i,{isSubmitting:!0}).then((function(){i.handleSetFolderPolicy().then((function(){i.setState({isSubmitting:!1})})).catch(y.catchApiError((function(){return i.setState({isSubmitting:!1})})))}))},i.handleUnshareFolder=function(){if(N.logTiburonEvent(i.props.sharingInfo.contentInfo(),i.props.user.id,A.TiburonEventName.AttemptRemoveAllMembers),i.props.sharingInfo.metadata()&&null!=i.props.sharingInfo.metadata().shared_folder_id&&i.props.sharingInfo.permissionsObj().canUnshare()){return x.confirmResetAccess({allowLeaveACopy:i.props.sharingInfo.permissionsObj().canLeaveACopy(),contentName:i.props.folderName,isFolder:!0,isNestedSharedFolder:!!i.props.hasParentSharedFolder,onCancel:function(){return f.Modal.close()},onConfirm:function(e){return k.Snackbar.sync(w.intl.formatMessage({id:"2h4tij",defaultMessage:"Unsharing <st>{folder_name}</st>..."},{st:function(e){return s.default.createElement("strong",null,e)},folder_name:c.Emstring.em_snippet(i.props.folderName,_.SNIPPET_SIZES.FILENAME)}),!0,"unshare-folder-notification"),i.props.client.unshare({contentId:i.props.sharingInfo.metadata()&&i.props.sharingInfo.metadata().shared_folder_id,leaveACopy:e}).then((function(){return N.logTiburonEvent(i.props.sharingInfo.contentInfo(),i.props.user.id,A.TiburonEventName.SucceedRemoveAllMembers,{http_status_code:200,response_status:"success"}),k.Snackbar.complete(w.intl.formatMessage({id:"tKbyJ8",defaultMessage:"Unshared <st>{folder_name}</st>."},{st:function(e){return s.default.createElement("strong",null,e)},folder_name:c.Emstring.em_snippet(i.props.folderName,_.SNIPPET_SIZES.FILENAME)}),"unshare-folder-notification"),i.props.actionHandler.refreshSharedWithColumnContentData(),f.Modal.close(),o.Dispatcher.dispatch({type:a.SharePageActionTypes.UNSHARE_FOLDER_SUCCESS,metadata:i.props.sharingInfo.metadata(),user:i.props.user})})).catch((function(e){return N.logTiburonEvent(i.props.sharingInfo.contentInfo(),i.props.user.id,A.TiburonEventName.FailRemoveAllMembers,{http_status_code:e.raw&&e.raw.status,error_message:e.error[".tag"]?e.error[".tag"]:"undefined_error"}),"too_many_files"===e.error[".tag"]?i.tooManyFilesSnackbar():v.sharingNotificationError(e.message),o.Dispatcher.dispatch({type:a.SharePageActionTypes.UNSHARE_FOLDER_ERROR,metadata:i.props.sharingInfo.metadata(),user:i.props.user})}))}})}},i.onSaveSettings=function(){switch(i.getCurrentTab()){case D.FILE_SETTINGS:return i.saveFileSettings();case D.FOLDER_SETTINGS:return i.saveFolderSettings();case D.EDIT_LINK_SETTINGS:case D.VIEW_LINK_SETTINGS:return i.handleSaveLinkSettings();default:throw new Error("Unknown tab")}},i.onDeleteLink=function(e){i.props.actionHandler.refreshSharedWithColumnLinkData(),i.props.actionHandler.deleteLinkMetadata(e),i.props.onDismiss&&i.props.onDismiss(),i.props.actionHandler.openSharingSettingsModal(i.getCurrentTab())},i.onCancelDeleteLink=function(){i.props.actionHandler.openSharingSettingsModal(i.getCurrentTab())},i.handleUnshareLink=function(){var e=i.props.linkMetadata;if(e){var t=i.props.sharingInfo.getInitialProps().onDeleteLink||i.onDeleteLink;b.deleteLinkWithConfirm({client:i.props.client,url:e.url,contentName:e.name,onDeleteLink:function(){t(e)},onCancel:i.onCancelDeleteLink,actionHandler:i.props.actionHandler})}},i.onUnshare=function(){switch(i.getCurrentTab()){case D.FILE_SETTINGS:i.handleUnshareFile();break;case D.FOLDER_SETTINGS:i.handleUnshareFolder();break;case D.EDIT_LINK_SETTINGS:case D.VIEW_LINK_SETTINGS:i.handleUnshareLink();break;default:throw new Error("Unknown tab")}},i.renderPrimaryAction=function(){return s.default.createElement(h.Button,{className:"confirm-button u-mar-left-s",variant:"primary",disabled:!i.allowSaveSettings()||i.state.isSubmitting,onClick:i.onSaveSettings},i.state.isSubmitting?w.intl.formatMessage({id:"rn6IdR",defaultMessage:"Saving..."}):w.intl.formatMessage({id:"78AHo5",defaultMessage:"Save"}))},i.handlePolicyUpdate=function(e,t){i.setState({desiredPolicy:i.state.desiredPolicy.set(e,t)})},i.onTabSelected=function(e){i.setState({currentTab:e}),N.logTiburonEvent(i.props.sharingInfo.contentInfo(),i.props.user.id,A.TiburonEventName.ViewSettingsTab,{settings_tab:e})},i.getCurrentTab=function(){return i.state.currentTab||i.getTabs()[0].id},i.handleLinkPolicyUpdate=function(e,t){var n=i.state.updatedLinkPolicies;if(n[e.url]=t,i.props.sharingInfo.editRighteousLink()){var s=S.getLinkPolicy(i.props.sharingInfo.editRighteousLink()).audience;W.isLinkAudienceLowerAccess(t.audience,s)&&i.setState({showDowngradeBanner:!0})}i.setState({updatedLinkPolicies:n})},i.hideDowngradeBanner=function(){i.setState({showDowngradeBanner:!1})},i.openManageAccess=function(e){e.preventDefault(),i.saveAndManageAccess()},i.saveAndManageAccess=function(){for(var e=0,t=i.props.sharingInfo.sharedLinks();e<t.length;e++){var s=t[e],r=S.getLinkPolicy(s),a=i.state.updatedLinkPolicies[s.url]||r;r.audience!==a.audience&&N.logTiburonEvent(i.props.sharingInfo.contentInfo(),i.props.user.id,A.TiburonEventName.ChangeSharedLinkAudience,n.__assign({old_audience:r.audience,new_audience:a.audience,screen:A.ScreenName.SettingsScreen},H.buildExtraFromLinkMetadata(s)))}var o=i.getLinkSettingsToUpdate();o.errors||i.setState({isSubmitting:!0},(function(){i.props.actionHandler.updateLinkSettings(o.requests).then((function(){i.setState({isSubmitting:!1}),i.props.actionHandler.showScreen(_.MANAGE_SCREEN)})).catch((function(){i.setState({isSubmitting:!1})}))}))},i.state={currentTab:t.currentTab,isSubmitting:!1,updatedLinkPolicies:{},desiredPolicy:t.currentPolicy,showDowngradeBanner:!1},i}return n.__extends(t,e),t.prototype.componentDidMount=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){return this.setState({isSubmitting:!1}),N.logTiburonEvent(this.props.sharingInfo.contentInfo(),this.props.user.id,A.TiburonEventName.ViewSettingsScreen,{settings_tab:this.getCurrentTab()}),N.logTiburonEvent(this.props.sharingInfo.contentInfo(),this.props.user.id,A.TiburonEventName.ViewSettingsTab,{settings_tab:this.getCurrentTab()}),[2]}))}))},t.prototype.getLinkSettingsToUpdate=function(){for(var e={errors:!1,requests:[]},t=0,n=this.props.sharingInfo.sharedLinks();t<n.length;t++){var s=n[t],i=S.getLinkPolicy(s),r=this.state.updatedLinkPolicies[s.url]||i,a=S.getModifiedSettings(s,r,i);if(a&&a.settings)e.requests.push(a);else if(null===a){e.errors=!0;break}}return e},t.prototype.tooManyFilesSnackbar=function(){return k.Snackbar.show(j(k.Snackbar,{actionButtonText:w.intl.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),closeButtonText:w.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),onActionClick:function(){return r.open_tab("/help/files-folders/unshare-folder#foldersize")},title:w.intl.formatMessage({id:"DWcV9y",defaultMessage:"Unsharing unsuccessful. This folder has too many files."}),variant:"fail"}))},t.prototype.render=function(){var e=this.getTabInfo(this.getCurrentTab());return s.default.createElement(m.UtilityModal,{className:i.default(this.props.className,"scl-settings-modal"),ariaLabel:this.renderTitle(),title:this.renderTitle(),overlayClickClose:!0,primaryAction:this.renderPrimaryAction,secondaryAction:w.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onPrimaryAction:this.onSaveSettings,onSecondaryAction:this.props.onDismiss,onLink:this.onUnshare,link:this.renderUnshareButton(),open:!0,onRequestClose:this.props.onDismiss,bodyClassName:"sharing-settings-utility-modal",overlayClassName:"file-viewer-modal-overlay"},s.default.createElement(p.FixedTabbedContainer,{className:"sharing-settings-modal",tabs:this.getTabs(),activeTabId:this.getCurrentTab(),onTabSelected:this.onTabSelected},s.default.createElement("div",{className:"sharing-settings-modal__banners"},e.banner,e.description),s.default.createElement("div",{className:"sharing-settings-modal__tab-content"},e.content)))},t.prototype.renderTitle=function(){var e={file_or_folder_name:c.Emstring.em_snippet(this.props.folderName,_.SNIPPET_SIZES.FILENAME)};return w.intl.formatMessage({id:"NHPru6",defaultMessage:"Settings for “{file_or_folder_name}”"},e)},t.prototype.handleUnshareFile=function(){var e=this;N.logTiburonEvent(this.props.sharingInfo.contentInfo(),this.props.user.id,A.TiburonEventName.AttemptRemoveAllMembers);x.confirmResetAccess({allowLeaveACopy:!1,contentName:this.props.folderName,isFolder:!1,isNestedSharedFolder:!1,onConfirm:function(){return k.Snackbar.sync(w.intl.formatMessage({id:"JopplL",defaultMessage:"Unsharing <st>{file_name}</st>..."},{st:function(e){return s.default.createElement("strong",null,e)},file_name:e.props.folderName}),!0,"unshare-file-notification"),e.props.client.unshare({contentId:e.props.sharingInfo.contentId()}).then((function(){N.logTiburonEvent(e.props.sharingInfo.contentInfo(),e.props.user.id,A.TiburonEventName.SucceedRemoveAllMembers,{http_status_code:200,response_status:"success"}),o.Dispatcher.dispatch({type:l.SharedWithActionType.SIGNAL_SHARED_FILE_DATA_OUT_OF_DATE,data:{fileIds:[e.props.sharingInfo.contentId()]}}),k.Snackbar.complete(w.intl.formatMessage({id:"4fsv5F",defaultMessage:"Unshared <st>{file_name}</st>."},{st:function(e){return s.default.createElement("strong",null,e)},file_name:e.props.folderName}),"unshare-file-notification"),f.Modal.close()})).catch((function(t){N.logTiburonEvent(e.props.sharingInfo.contentInfo(),e.props.user.id,A.TiburonEventName.FailRemoveAllMembers,{http_status_code:t.raw&&t.raw.status,error_message:t.error[".tag"]?t.error[".tag"]:"undefined_error"})}))},onCancel:function(){return f.Modal.close()}})},t.prototype.renderUnshareButton=function(){var e;return this.props.sharingInfo.permissionsObj().canUnshare()&&(!this.props.isFolder||!this.props.isInContentManager&&this.props.isSharedFolder)&&(e=this.props.isFolder?this.props.isFolderInsideTeamFolderTree?w.intl.formatMessage({id:"rHXOII",defaultMessage:"Reset membership"}):w.intl.formatMessage({id:"z/VsbM",defaultMessage:"Unshare folder"}):w.intl.formatMessage({id:"IRyrtr",defaultMessage:"Unshare file"})),e},t.prototype.getTabs=function(){var e=[],t={id:D.FILE_SETTINGS,label:w.intl.formatMessage({id:"vTaaOS",defaultMessage:"File settings"})},n={id:D.FOLDER_SETTINGS,label:w.intl.formatMessage({id:"3QmSF8",defaultMessage:"Folder settings"})};this.props.currentPolicy&&(e=this.props.isFolder?[n]:[t]);var s={id:D.EDIT_LINK_SETTINGS,label:w.intl.formatMessage({id:"/0odKW",defaultMessage:"Link for editing"})},i={id:D.VIEW_LINK_SETTINGS,label:w.intl.formatMessage({id:"O2aovx",defaultMessage:"Link for viewing"})};return this.showEditLinkSettingsTab()&&e.push(s),this.showViewLinkSettingsTab()&&e.push(i),e},t.prototype.showEditLinkSettingsTab=function(){return!!this.props.sharingInfo.editRighteousLink()||(this.props.isFolder?this.props.sharingPrefs.can_create_edit_folder_link&&this.props.sharingInfo.permissionsObj().canInviteEditor()&&!this.props.isTeamSharedFolder&&!this.props.isInContentManager:!this.props.isInContentManager&&this.props.sharingInfo.permissionsObj().canCreateEditLink())},t.prototype.showViewLinkSettingsTab=function(){return!this.props.isTeamSharedFolder&&!this.props.isInContentManager},t.prototype.isTeamFolderTree=function(){return this.props.isTeamSharedFolder||this.props.isFolderInsideTeamFolderTree},t.prototype.getFolderSettingsDescription=function(){var e;if(this.props.sharingInfo.permissionsObj().canChangeOptions()&&!this.props.user.is_team_admin)return e=this.isTeamFolderTree()?w.intl.formatMessage({id:"fYsGwY",defaultMessage:"Only team admins can change these settings."}):w.intl.formatMessage({id:"hLLslJ",defaultMessage:"Only the owner can change these settings."}),s.default.createElement(g.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:e})},t.prototype.getFileSettingsDescription=function(){if(this.props.sharingInfo.permissionsObj().canChangeOptions())return s.default.createElement(g.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:w.intl.formatMessage({id:"JK63j9",defaultMessage:"Anyone with edit access can change these settings."})})},t.prototype.getFileSettingsBanner=function(){var e;if(!this.props.sharingInfo.permissionsObj().canChangeOptions())return this.props.currentPolicy&&this.props.permissions&&(e=S.getPassDenyReason(this.props.currentPolicy,this.props.permissions)),e||(e=w.intl.formatMessage({id:"lxNU0Z",defaultMessage:"You don’t have permission to change the settings on this file."})),s.default.createElement(g.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"error",message:e})},t.prototype.shouldRenderContentManagerBridge=function(){return!this.props.isInContentManager&&(!!I.GoldenGate.hasContentManagerAndSuperAdmin(this.props.user.id)&&(!!this.props.isTeamSharedFolder||!(!this.props.isFolderInsideTeamFolderTree||!this.props.isUserOnOwnerTeam)&&(this.props.currentTab===D.FOLDER_SETTINGS||!this.props.sharingInfo.permissionsObj().canInviteEditor())))},t.prototype.getFolderSettingsBanner=function(){var e,t=w.intl.formatMessage({id:"PXwJ3O",defaultMessage:"These settings will apply to all folders inside “{folder_name}”."},{folder_name:this.props.folderName});if(this.props.isInContentManager&&this.isTeamFolderTree())e=t;else if(this.shouldRenderContentManagerBridge()){var n=d.parent_dir(this.props.sharingInfo.fqPath()),i=M.genContentManagerBridgeUri({containingFolder:n,filenameToSelect:this.props.folderName}),r=w.intl.formatMessage({id:"+XzGBK",defaultMessage:"These settings will apply to all folders inside “{folder_name}”. You can change these settings in the Admin Console."},{folder_name:this.props.folderName});e=s.default.createElement("div",null,r+" ",s.default.createElement("div",null,s.default.createElement("a",{href:i.toString(),target:"_blank"},w.intl.formatMessage({id:"hwq/Wo",defaultMessage:"Go to Admin Console."}))))}else if(this.isTeamFolderTree())e=s.default.createElement("div",null,t+" ",s.default.createElement("div",null,s.default.createElement("a",{href:"/team",target:"_blank"},w.intl.formatMessage({id:"RgAHdC",defaultMessage:"To edit, ask your admin."}))));else{if(this.props.sharingInfo.permissionsObj().canChangeOptions())return this.props.isInContentManager&&!this.isTeamFolderTree()?s.default.createElement(P.InformOwnerUpdateSection,{isInSharingSettingsModal:!0}):void 0;e=w.intl.formatMessage({id:"84NDsw",defaultMessage:"You don’t have permission to change the settings on this folder."})}return s.default.createElement(g.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"error",message:e})},t.prototype.linkControlPolicyWarning=function(e){var t=this.getCurrentLink(e);if(t){var n=t.link_permissions,i=S.getLinkPolicy(t),r=this.state.updatedLinkPolicies[t.url]||i,a=V.getLinkControlPolicyWarningText(i,r,n,w.intl);return a?s.default.createElement(g.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"warn",message:a}):void 0}},t.prototype.editFolderLinkSettingWarning=function(e){if("editor"===e&&this.props.sharingInfo.isFolder()&&this.getCurrentLink(e))return s.default.createElement(g.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"warn",message:w.intl.formatMessage({id:"So3uAn",defaultMessage:"This setting won't apply to people who add this folder to their Dropbox account."}),descriptionLinkUrl:"https://help.dropbox.com/files-folders/share/set-link-permissions",descriptionLinkText:w.intl.formatMessage({id:"N4y79U",defaultMessage:"Learn More"})})},t.prototype.getCurrentLink=function(e){var t=void 0;return"editor"===e?t=this.props.sharingInfo.editRighteousLink():(t=this.props.sharingInfo.viewRighteousLink())||(t=this.props.sharingInfo.shmodelLink()),t},t.prototype.getLinkSettingsBanner=function(e){var t=!1,n=this.getCurrentLink(e);if(n){if(n.isRighteousLink())!1===n.link_permissions.can_use_extended_sharing_controls&&(t=!0);else{var i=n.link_permissions;t=i.audience_options.filter((function(e){return e.disallowed_reason===L.LinkAudienceDisallowedReason.UserAccountType})).length>0||!1===i.can_disallow_download}if(this.props.sharingInfo&&this.props.sharingInfo.isFamilyUser()&&(t=!1),t){var r,a;1===this.props.user.is_team?(r="/team/upgrade",a=w.intl.formatMessage({id:"TfYT+f",defaultMessage:"Upgrade to {trademark_business} to enable all link settings."},{trademark_business:C.TRADEMARK_BUSINESS})):(r="/upgrade?oqa=sfp&_tk=sg_pro_bundle_header",this.props.sharingInfo&&"OFF"!==this.props.sharingInfo.shareModalUpsellPremiumSharingVariant()&&(r=B.getCTALink(this.props.user,this.props.sharingInfo.shareModalUpsellPremiumSharingVariant(),"sg_pro_bundle_header")),a=w.intl.formatMessage({id:"VvOgoh",defaultMessage:"Upgrade to Dropbox {trademark_professional} to enable all link settings."},{trademark_professional:C.TRADEMARK_PROFESSIONAL}));var o=s.default.createElement("div",null,s.default.createElement(U.TrackedLink,{trackingId:"link_settings_pro_upsell",user:this.props.user,contentInfo:this.props.sharingInfo&&this.props.sharingInfo.contentInfo(),href:r,target:"_blank",rel:"noopener noreferrer"},a));return s.default.createElement(g.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:o})}}},t.prototype.getFolderSettingPolicies=function(){var e=[];return Boolean(this.props.ownerTeam)&&e.push(D.MEMBER_POLICY),e.push(D.ACL_UPDATE_POLICY),Boolean(this.props.ownerTeam)&&e.push(D.FOLDER_LINK_AUDIENCE_POLICY),this.props.currentPolicy&&(this.props.currentPolicy instanceof L.FilePolicy||this.props.currentPolicy instanceof L.FolderPolicy)&&null!=this.props.currentPolicy.viewer_info_policy&&!this.shouldRenderContentManagerBridge()&&e.push(D.VIEWER_INFO_POLICY),e},t.prototype.getFileSettingPolicies=function(){var e=[];return this.props.currentPolicy&&(this.props.currentPolicy instanceof L.FilePolicy||this.props.currentPolicy instanceof L.FolderPolicy)&&null!=this.props.currentPolicy.viewer_info_policy&&e.push(D.VIEWER_INFO_POLICY),e},t.prototype.getTabInfo=function(e){switch(e){case D.FILE_SETTINGS:return{title:w.intl.formatMessage({id:"vTaaOS",defaultMessage:"File settings"}),banner:this.getFileSettingsBanner(),description:this.getFileSettingsDescription(),content:this.getFileFolderSettingsContent(this.getFileSettingPolicies())};case D.FOLDER_SETTINGS:return{title:w.intl.formatMessage({id:"3QmSF8",defaultMessage:"Folder settings"}),banner:this.getFolderSettingsBanner(),description:this.getFolderSettingsDescription(),content:this.getFileFolderSettingsContent(this.getFolderSettingPolicies())};case D.EDIT_LINK_SETTINGS:return{title:w.intl.formatMessage({id:"/0odKW",defaultMessage:"Link for editing"}),banner:this.getLinkSettingsBannerAndWarning("editor"),description:null,content:this.renderLinkSettings("editor")};case D.VIEW_LINK_SETTINGS:return{title:w.intl.formatMessage({id:"O2aovx",defaultMessage:"Link for viewing"}),banner:this.getLinkSettingsBannerAndWarning("viewer"),description:null,content:this.renderLinkSettings("viewer")};default:throw new Error("tabName not found")}},t.prototype.getFileFolderSettingsContent=function(e){var t=S.getPolicyDiff(this.state.desiredPolicy,this.props.currentPolicy);return s.default.createElement(F.SharingSettingsFileFolderPolicyView,{policies:e,policyUpdate:t,isFolder:this.props.isFolder,isTeamSharedFolder:this.props.isTeamSharedFolder,isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,teamPolicy:this.props.teamPolicy,ownerTeam:this.props.ownerTeam,onPolicyUpdate:this.handlePolicyUpdate,currentPolicy:this.props.currentPolicy,showContentManagerBridge:this.shouldRenderContentManagerBridge(),permissions:this.props.permissions})},t.prototype.renderLinkSettings=function(e){if(this.props.sharingInfo)return s.default.createElement("div",null,this.state.showDowngradeBanner&&this.renderDowngradeBanner(),s.default.createElement(O.SharingSettingsLinkSection,{client:this.props.client,sharingInfo:this.props.sharingInfo,sharingPrefs:this.props.sharingPrefs,updatedLinkPolicies:this.state.updatedLinkPolicies,onDeleteLink:this.onDeleteLink,onCancelDeleteLink:this.onCancelDeleteLink,onPolicyUpdate:this.handleLinkPolicyUpdate,actionHandler:this.props.actionHandler,accessLevel:e}))},t.prototype.renderDowngradeBanner=function(){return s.default.createElement(q.SharingModalDowngradeBanner,{header:w.intl.formatMessage(z.downgradeBannerHeader),subheader:w.intl.formatMessage(z.downgradeBannerSubheader),outlineButtonLabel:w.intl.formatMessage(z.downgradeBannerGotIt),transparentButtonLabel:w.intl.formatMessage(z.downgradeBannerManageLinks),onClickOutlineButton:this.hideDowngradeBanner,onClickCloseButton:this.hideDowngradeBanner,onClickTransparentButton:this.openManageAccess,showCloseButton:!0})},t.prototype.allowSaveSettings=function(){return[D.EDIT_LINK_SETTINGS,D.VIEW_LINK_SETTINGS].includes(this.getCurrentTab())?Object.keys(this.state.updatedLinkPolicies).length>0:!this.state.desiredPolicy.equals(this.props.currentPolicy)},t.prototype.getDocsendUpsellBanner=function(){var e=this;if(!this.props.sharingInfo||this.props.sharingInfo.sharingInfoState().dismissedDocsendBanner)return null;if(!["pdf","docx","doc","pptx","ppt","xlsx","xls","key"].includes(d.file_extension(this.props.sharingInfo.name())))return null;var t=this.props.sharingInfo.sharingPrefs().exp_pg_docsend_sharing_settings_upsell_variant,n="V1"===t?s.default.createElement(T.DocsendUpsellMessageV1,{tabName:this.getCurrentTab()}):"V2"===t?s.default.createElement(T.DocsendUpsellMessageV2,{onDismiss:function(){return e.props.actionHandler.setDismissedDocsendBanner()},userId:this.props.user.id,tabName:this.getCurrentTab()}):null;return n?s.default.createElement(g.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:n}):null},t.prototype.getLinkSettingsBannerAndWarning=function(e){var t=this.linkControlPolicyWarning(e),n=this.editFolderLinkSettingWarning(e),i=this.getLinkSettingsBanner(e),r=this.getDocsendUpsellBanner();if(n||t||i||r)return s.default.createElement("div",null,n,t,r,i)},t.displayName="SharingSettingsModal",t})(s.default.Component);t.SharingSettingsModalUnstyled=K;var z=G.defineMessages({downgradeBannerHeader:{id:"V2Zurn",defaultMessage:"People who have used this link might still have access"},downgradeBannerSubheader:{id:"rqdCog",defaultMessage:"You can check the list of people with access and remove them."},downgradeBannerGotIt:{id:"YCTkuR",defaultMessage:"Got It"},downgradeBannerManageLinks:{id:"UBFEXr",defaultMessage:"Who still has access?"}});t.SharingSettingsModal=u.requireCssWithComponent(K,["/static/css/sharing/share_modal-vflViKRiT.css","/static/css/modal-vflp8UKYY.css","/static/js/spectrum-sharing/index.web-vflGwppdS.css"])})),define("modules/clean/sharing/sharing_settings_util",["require","exports","tslib","modules/clean/previews/util","lodash","modules/clean/sharing/api/types/metadata","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants","modules/clean/sharing/ui_notifications_util","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_util","modules/core/i18n"],(function(e,t,n,s,i,r,a,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requiresChangeAudienceConfirmation=t.shouldRenderNoPreviewFileWarning=t.getModifiedSettings=t.getLinkPolicy=t.getEffectivePolicyValue=t.getPolicyDiff=t.isCommonSharingSettingsPolicy=t.getPassDenyReason=t.denyReasonToDenyString=t.canChangePolicy=void 0,s=n.__importStar(s),i=n.__importStar(i);var d={shared_folder_member_policy:"team"},u={shared_folder_member_policy:"team"},p={member_policy:"shared_folder_member_policy"};function m(e,t,n,s){switch(e){case a.VIEWER_INFO_POLICY:return!s&&(!!n&&(t&&"enabled"===t.get(a.VIEWER_INFO_POLICY)?!!n.disable_viewer_info&&n.disable_viewer_info.allow:!!n.enable_viewer_info&&n.enable_viewer_info.allow));default:return!1}}function h(e){switch(e){case"restricted_by_parent_folder":return c.intl.formatMessage({id:"98DfV5",defaultMessage:"This setting is turned off for all files in this folder."});case"restricted_by_team":return c.intl.formatMessage({id:"AGa70V",defaultMessage:"Your admin has disabled this setting."});default:return}}function f(e){return-1!==[a.VIEWER_INFO_POLICY].indexOf(e)}t.canChangePolicy=m,t.denyReasonToDenyString=h,t.getPassDenyReason=function(e,t){return"enabled"===e.get(a.VIEWER_INFO_POLICY)?t.disable_viewer_info?h(t.disable_viewer_info.reason):void 0:t.enable_viewer_info?h(t.enable_viewer_info.reason):void 0},t.isCommonSharingSettingsPolicy=f,t.getPolicyDiff=function(e,t){var n;return n=t instanceof r.FilePolicy?new r.FilePolicy:t instanceof r.FolderPolicy?new r.FolderPolicy:new r.LinkPolicy,e.keySeq().toArray().map((function(s){var r=e.get(s),a=t.get(s);("object"==typeof r?i.isEqual(r,a):r===a)||(n=n.set(s,r))})),n},t.getEffectivePolicyValue=function(e,t,n,s,i,r){var a,o=p[e];null!=o&&null!=i&&(a=i.get(o));var l=null!=(null!=t?t.get(e):void 0)?null!=t?t.get(e):void 0:n.get(e),c=null!=r.change_options&&r.change_options.allow;return null!=a&&d[o]===a&&(c=!1,l=u[o]),f(e)&&(c=m(e,n,r,s)),s&&(c=!1),[l,c]};var g=l.SharingSettingsUtil(c.intl);t.getLinkPolicy=function(e){return new r.LinkPolicy(g.getLinkPolicy(e))},t.getModifiedSettings=function(e,t,n){var s=g.getModifiedSettings(e,t,n);if(s)return s.error?(o.sharingNotificationError(s.error),null):{url:s.url,settings:s.settings,remove_expiration:s.remove_expiration}},t.shouldRenderNoPreviewFileWarning=function(e,t){if(!e)return!1;if(null!=(null!=t?t.preview_type:void 0)){var n=t.preview_type;if(Array.from(s.VALID_PREVIEW_TYPES).includes(n))return!1}return!0},t.requiresChangeAudienceConfirmation=function(e,t){var n=l.getAudienceForLink(e.link_permissions);return"password"===t&&"public"===n||"team"===t&&["public","password"].includes(n)||"no_one"===t&&["public","password","team"].includes(n)}})),define("modules/clean/sharing/stores/sharing_info",["require","exports","tslib","modules/constants/python","modules/clean/flux/base_store","modules/clean/sharing/action_types","modules/clean/sharing/api/types/metadata","modules/clean/sharing/share_modal/store/modal_info/reducer","modules/clean/sharing/share_modal/store/sharing_info/reducer","modules/clean/sharing/access_level","modules/clean/sharing/stores/sharing_info_util","modules/clean/sharing/ui_util","modules/core/assert","lodash"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingInfo=t.Permissions=t.sharingInfoStore=void 0,s=n.__importStar(s),m=n.__importStar(m);var h=function(e,t){return(t=String(t)).startsWith("id:")||(t=t.toLowerCase()),e+"::"+t},f=(function(e){function t(){var t=e.call(this)||this;return t.sharingInfoMap={},t}return n.__extends(t,e),t.prototype.getSharingInfo=function(e,t){return t?this.sharingInfoMap[h(e,t)]:null},t.prototype.mapContentIdsToSharingInfo=function(e,t,n){for(var s=0,i=t;s<i.length;s++){var r=i[s];r&&(this.sharingInfoMap[h(e,r)]=n)}},t.prototype._new_payload=function(e){var t=this;if(e&&e.action&&e.action.type)switch(e.action.type){case r.SharingActionTypes.CLEAR_EVERYTHING:this.sharingInfoMap={};break;case r.SharingActionTypes.FETCH_METADATA_BATCH_SUCCESS:var n=e.action.user;e.action.data.forEach((function(e){t._new_payload_for_single_content(r.ShareModalActionTypes.FETCH_METADATA_SUCCESS,n,d.getContentIdsForMetadata(e),{metadata:e})})),this.emit_change();break;default:if(!e.action.contentIds)return;this._new_payload_for_single_content(e.action.type,e.action.user,e.action.contentIds,e.action.data),this.emit_change()}},t.prototype._new_payload_for_single_content=function(e,t,n,s){var i;p.assert(Boolean(t.id),"valid user needed"),p.assert(n.length>0,"contentIds cannot be empty");for(var r=0,a=n;r<a.length;r++){var c=a[r],d=h(t.id,c);if(d in this.sharingInfoMap){i=this.sharingInfoMap[d];break}}i||(i=new _(t));var u={type:e,payload:s,user:t};return i.setState(o.modalInfoReducer(i.modalInfoState(),u),l.sharingInfoReducer(i.sharingInfoState(),u)),n.push(i.fqPath()),this.mapContentIdsToSharingInfo(t.id,n,i),i},t})(i.Store);t.sharingInfoStore=new f;var g=(function(){function e(e){this.change_options=m.get(e,"change_options.allow",!1),this.edit_contents=m.get(e,"edit_contents.allow",!1),this.invite_editor=m.get(e,"invite_editor.allow",!1),this.invite_viewer=m.get(e,"invite_viewer.allow",!1),this.relinquish_membership=m.get(e,"relinquish_membership.allow",!1),this.leave_a_copy=m.get(e,"leave_a_copy.allow",!1),this.create_edit_link=m.get(e,"create_edit_link.allow"),this.create_view_link=m.get(e,"create_view_link.allow",!1),this.unshare=m.get(e,"unshare.allow",!1),this.update_confidentiality=m.get(e,"update_confidentiality.allow",!1),this.is_file_permissions=e instanceof a.FilePermissions,this.share_message_as_comment=m.get(e,"share_message_as_comment.allow",!1)}return e.prototype.canChangeOptions=function(){return this.change_options},e.prototype.canEdit=function(){return this.edit_contents},e.prototype.canInviteEditor=function(){return this.invite_editor},e.prototype.canInviteViewer=function(){return this.invite_viewer},e.prototype.canInvite=function(){return this.canInviteViewer()||this.canInviteEditor()},e.prototype.canRelinquishMembership=function(){return this.relinquish_membership},e.prototype.canCreateEditLink=function(){return this.is_file_permissions&&this.create_edit_link},e.prototype.canCreateViewLink=function(){return this.is_file_permissions&&this.create_view_link},e.prototype.canUnshare=function(){return this.unshare},e.prototype.canUpdateConfidentiality=function(){return this.update_confidentiality},e.prototype.canLeaveACopy=function(){return this.leave_a_copy},e.prototype.canShareMessageAsComment=function(){return this.share_message_as_comment},e})();t.Permissions=g;var _=(function(){function e(e){this._user=e,this.setState(o.initialModalInfoState,l.initialSharingInfoState)}return e.prototype.setState=function(e,n){this._modalInfo=e,this._sharingInfoState=n,n.metadata&&t.sharingInfoStore.mapContentIdsToSharingInfo(this._user.id,d.getContentIdsForMetadata(n.metadata),this)},e.prototype.sharingInfoState=function(){return this._sharingInfoState},e.prototype.modalInfoState=function(){return this._modalInfo},e.prototype.user=function(){return this._user},e.prototype.hasNonSelfMembers=function(){var e=this.members(),t=e&&e.getMemberCount();return!!t&&(1!==t||1!==e.users.count()||e.users.first().account_id!==this._user.account_id)},e.prototype.hasNonOwnerMembers=function(){return this.hasNonSelfMembers()&&this.isOwner()},e.prototype.hasOutsideTeamMembers=function(){var e=this.memberCounts();return(e?e.users_outside_team:0)>0},e.prototype.memberNum=function(){var e=this.memberCounts(),t=this.members();return e&&e.total_unique_users?e.total_unique_users:t?t.getMemberCount():void 0},e.prototype.memberCountWithRecipients=function(){return(this.memberNum()||0)+u.getMemberCountForTokens(this.recipientTokens())},e.prototype.getInitialProps=function(){return this.modalInfoState().initialProps},e.prototype.areMembersFullyLoaded=function(){return this.sharingInfoState().areMembersFullyLoaded},e.prototype.areSharingPrefsLoaded=function(){return this.sharingInfoState().areSharingPrefsLoaded},e.prototype.sharingPrefs=function(){return this.sharingInfoState().sharingPrefs},e.prototype.canShareLink=function(){return!this.isConfidentialFolder()&&!this.isTeamSharedFolder()&&this.contentInfo().pathExists()&&this.contentInfo().isMounted()},e.prototype.canDeleteLink=function(){var e=this.linkMetadata();return Boolean(e&&e.link_permissions.can_revoke)},e.prototype.contactsError=function(){return u.validateContacts(this.recipientTokens(),this._user,this.recipientValidation()[this.recipientAccess()]||{},this.folderPolicy(),this.isTeamSharedFolder(),this.isFolderInsideTeamFolderTree(),this.memberCountWithRecipients())},e.prototype.contentId=function(){return this.contentInfo().id},e.prototype.contentInfo=function(){return this.modalInfoState().contentInfo},e.prototype.contentNameInputValue=function(){return this.modalInfoState().contentNameInputValue},e.prototype.contentNameMessage=function(){return this.modalInfoState().contentNameMessage},e.prototype.contentNameMessageLevel=function(){return this.modalInfoState().contentNameMessageLevel},e.prototype.displayPath=function(){var e=this.metadata();return this.contentInfo().displayPath()||e&&e.path_display||""},e.prototype.parentFolderName=function(){var e=this.metadata();if(e&&e instanceof a.SharedFileMetadata){var t=e.path_display;if(t){var n=t.split("/");if(n.length>1)return n[n.length-2]}}return e&&e instanceof a.SharedFolderMetadata&&e.parent_folder_name||""},e.prototype.fetchingMembersRequest=function(){return this.sharingInfoState().fetchingMembersRequest},e.prototype.fetchingMetadataPromise=function(){return this.sharingInfoState().fetchingMetadataPromise},e.prototype.filePolicy=function(){var e=this.metadata();return e&&e.file_policy},e.prototype.folderPolicy=function(){var e=this.metadata();return e&&e.policy},e.prototype.fqPath=function(){return this.contentInfo().displayPath()},e.prototype.hasDisplayableMembers=function(){return this.sharingInfoState().hasDisplayableMembers},e.prototype.hasParentSharedFolder=function(){var e=this.metadata();return!!e&&e.is_inside_team_folder},e.prototype.initialRecipientTokens=function(){return this.modalInfoState().initialRecipientTokens},e.prototype.isNonUserRelativeContext=function(){return this.getInitialProps().isInContentManager},e.prototype.isFolder=function(){return this.contentInfo().isFolder()},e.prototype.isConfidentialFolder=function(){var e=this.metadata();return Boolean(e&&e.is_confidential)},e.prototype.isContentNameFocused=function(){return this.modalInfoState().isContentNameFocused},e.prototype.isFolderInsideTeamFolderTree=function(){var e=this.metadata();return!!e&&e.is_inside_team_folder},e.prototype.isInsideSharedFolder=function(){var e=this.metadata();return Boolean(e&&e.parent_shared_folder_id||this.contentInfo().isInSharedFolder())},e.prototype.isLinkMetadataLoaded=function(){return this.sharingInfoState().isLinkMetadataLoaded},e.prototype.isMetadataLoaded=function(){return Boolean(this.metadata())},e.prototype.isOwner=function(){var e=this.metadata();return Boolean(e&&e.access_type===c.ACCESS_LEVEL.OWNER)},e.prototype.isOSXPackage=function(){var e=this.displayPath(),t=e.substr(e.lastIndexOf("."));return s.PACKAGE_EXTS.indexOf(t)>=0},e.prototype.isShareModalUpsellPremiumSharing=function(){return this.sharingPrefs().in_share_modal_upsell_premium_sharing},e.prototype.shareModalUpsellPremiumSharingVariant=function(){return this.sharingPrefs().in_share_modal_upsell_premium_sharing_variant},e.prototype.hasSeenUpsellCounter=function(){return this.sharingPrefs().has_seen_share_modal_upsell_premium_sharing_counter},e.prototype.hasCreatedLink=function(){return this.sharingInfoState().hasCreatedLink},e.prototype.hasIncrementedUpsellCounter=function(){return this.sharingInfoState().hasIncrementedUpsellCounter},e.prototype.inviteAfterSharingModalVariant=function(){return this.sharingPrefs().invite_after_sharing_modal_variant},e.prototype.coreO21nBetterTeamSharingVariant=function(){return this.sharingPrefs().exp_core_o21n_better_team_sharing},e.prototype.getShowSharingQuestionnaire=function(){return this.modalInfoState().showSharingQuestionnaire},e.prototype.getOneClickCopyLink=function(){return this.modalInfoState().oneClickCopyLink},e.prototype.coreO21nDndMomentPdfWordVariant=function(){return this.sharingPrefs().exp_core_o21n_dnd_moment_pdf_word},e.prototype.coreO21nDndMomentPptKeynoteVariant=function(){return this.sharingPrefs().exp_core_o21n_dnd_moment_ppt_keynote},e.prototype.pgEsignDiscoveryVariant=function(){return this.sharingPrefs().exp_pg_esign_discovery_variant},e.prototype.hasSeenEsignPostSharing=function(){return this.sharingPrefs().has_seen_esign_post_sharing},e.prototype.familySharingUpsellGating=function(){return this.sharingPrefs().exp_pg_family_sharing_upsell_gating},e.prototype.isInEsignPostSharingExclusionPeriod=function(){return this.sharingPrefs().is_in_esign_post_sharing_exclusion_period},e.prototype.getShowTsdAccessVisibility=function(){return this.modalInfoState().showTsdAccessVisibility},e.prototype.isUserOnOwnerTeam=function(){var e=this.metadata();return Boolean(e&&e.owner_team&&e.owner_team.id===this._user.team_dbtid)},e.prototype.isCurrentAccountLoaded=function(){return this.sharingInfoState().isCurrentAccountLoaded},e.prototype.isTeamSharedFolder=function(){var e=this.metadata();return Boolean(e&&e.is_team_folder||this.contentInfo().isTeamSharedFolder())},e.prototype.isTokenizerEmpty=function(){return 0===this.recipientRawInput().length&&0===this.recipientTokens().length},e.prototype.linkMetadata=function(){return this.sharingInfoState().linkMetadata},e.prototype.sharedLinks=function(){return this.sharingInfoState().sharedLinks||[]},e.prototype.shmodelLink=function(){return this.sharedLinks().filter((function(e){return!e.isRighteousLink()}))[0]},e.prototype.editRighteousLink=function(){return this.sharedLinks().filter((function(e){return"editor"===e.link_permissions.link_access_level}))[0]},e.prototype.viewRighteousLink=function(){return this.sharedLinks().filter((function(e){return"viewer"===e.link_permissions.link_access_level}))[0]},e.prototype.linkOnlyReason=function(){return this.modalInfoState().linkOnlyReason},e.prototype.memberCounts=function(){return this.sharingInfoState().memberCounts},e.prototype.members=function(){return this.sharingInfoState().members},e.prototype.metadata=function(){return this.sharingInfoState().metadata},e.prototype.name=function(){var e=this.contentInfo(),t=this.metadata();return e&&e.name()||t&&t.name||""},e.prototype.ownerTeam=function(){var e=this.metadata();return e&&e.owner_team},e.prototype.parentSharedFolderId=function(){var e=this.metadata();return e&&e.parent_shared_folder_id},e.prototype.pendingMemberAction=function(){return this.modalInfoState().pendingMemberAction},e.prototype.permissionsObj=function(){return new g(this.permissions())},e.prototype.permissions=function(){var e=this.metadata();return e&&e.permissions},e.prototype.recipientAccess=function(){var e=this.modalInfoState();return e.recipientAccess?e.recipientAccess:this.permissionsObj().canInviteEditor()||this.permissionsObj().canCreateEditLink()||this.editRighteousLink()?c.ACCESS_LEVEL.WRITER:c.ACCESS_LEVEL.READER},e.prototype.recipientMessage=function(){return this.modalInfoState().recipientMessage},e.prototype.onCreateGroupCallback=function(){return this.modalInfoState().onCreateGroupCallback},e.prototype.recipientRawInput=function(){return this.modalInfoState().recipientRawInput},e.prototype.recipientTokens=function(){return this.modalInfoState().recipientTokens},e.prototype.recipientValidation=function(){return this.modalInfoState().recipientValidation},e.prototype.shareAsConfidential=function(){return Boolean(this.getInitialProps().shareAsConfidential)},e.prototype.shareFolderPromise=function(){return this.sharingInfoState().shareFolderPromise},e.prototype.shouldBlockMemberListOnPassLoad=function(){return this.sharingInfoState().shouldBlockMemberListOnPassLoad},e.prototype.shouldSyncThisFolder=function(){return this.getInitialProps()?this.getInitialProps().shouldSyncThisFolder:null},e.prototype.teamPolicy=function(){return this.sharingInfoState().teamPolicy},e.prototype.isFamilyUser=function(){return this.sharingInfoState().isFamilyUser},e.prototype.uiMode=function(){return this.modalInfoState().uiMode},e.prototype.isCloudDoc=function(){var e=this.metadata();return!(!e||!e.is_cloud_doc)},e.prototype.fetchMetadataStatus=function(){return this.modalInfoState().fetchMetadataStatus},e.prototype.isShareMessageAsCommentChecked=function(){var e=this.modalInfoState().isShareMessageAsCommentExplicitlyChecked;return void 0===e?this.permissionsObj().canShareMessageAsComment():e},e.prototype.shouldSuppressRedirectToBrowse=function(){return this.getInitialProps()?this.getInitialProps().shouldSuppressRedirectToBrowse:null},e.prototype.shouldCloseImmediately=function(){return this.getInitialProps()?this.getInitialProps().shouldCloseImmediately:null},e.prototype.shouldFetchLinkMetadata=function(){return this.canShareLink()&&!this.isNonUserRelativeContext()&&this.contentInfo().isMounted()},e.prototype.getSelectedAudienceByAccessLevel=function(e){return this.sharingInfoState().selectedAudienceByAccessLevel[e]},e.prototype.getEligibleInviteAfterSharingContacts=function(){return d.getEligibleInviteAfterSharingContactsImpl(this.recipientTokens(),this.recipientValidation())},e})();t.SharingInfo=_})),define("modules/clean/sharing/stores/sharing_info_util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEligibleInviteAfterSharingContactsImpl=t.getContentIdsForContentInfo=t.getContentIdsForMetadata=void 0,t.getContentIdsForMetadata=function(e){return[e.shared_folder_id,e.id,e.path_lower].filter((function(e){return!!e}))},t.getContentIdsForContentInfo=function(e){var t=[];return e.isSharedFolder()?t.push(e.sharedFolderId()):(e.extras.fileId&&t.push(e.extras.fileId),e.extras.nsId&&e.extras.nsPath&&t.push("ns:"+e.nsId()+e.nsPath())),e.displayPath()&&t.push(e.displayPath()),t},t.getEligibleInviteAfterSharingContactsImpl=function(e,t){for(var n=new Set(e.filter((function(e){return!e.invalid})).map((function(e){return e.getKey()}))),s=Object.values(t),i=new Set,r=new Set,a=0,o=s;a<o.length;a++){var l=o[a];for(var c in l)if(l.hasOwnProperty(c)&&n.has(c)){var d=l[c];if(d&&d.inviteAfterSharingEligibility){var u=d.inviteAfterSharingEligibility[".tag"];"eligible_not_seen"===u?i.add(c):"eligible_seen"===u&&r.add(c)}}}return{inviteEligibleNotSeenContacts:e.filter((function(e){return i.has(e.getKey())&&!e.invalid})),inviteEligibleSeenContacts:e.filter((function(e){return r.has(e.getKey())&&!e.invalid}))}}})),define("modules/clean/sharing/strings",["require","exports","modules/clean/sharing/access_level","spectrum-sharing/utils/sharing_constants","modules/core/i18n"],(function(e,t,n,s,i){"use strict";var r,a,o,l,c,d,u;Object.defineProperty(t,"__esModule",{value:!0}),t.MEMBER_ACTION_FILE_NO_COMMENT=t.MEMBER_ACTION_FOLDER_NO_COMMENT=t.MEMBER_ACTION_CLOUD_DOC=t.MEMBER_ACTION_FILE=t.MEMBER_ACTION_FOLDER=t.ACCESS_NAME_NO_COMMENT=t.ACCESS_NAME=void 0;var p=((r={})[n.ACCESS_LEVEL.OWNER]=i.intl.formatMessage({id:"if8xIl",defaultMessage:"Owner"}),r[n.ACCESS_LEVEL.WRITER]=i.intl.formatMessage({id:"ywqz2g",defaultMessage:"Can edit"}),r[n.ACCESS_LEVEL.READER]=i.intl.formatMessage({id:"Gz5ABt",defaultMessage:"Can view"}),r[n.ACCESS_LEVEL.READER_NO_COMMENT]=i.intl.formatMessage({id:"vQquJX",defaultMessage:"View-only"}),r);t.ACCESS_NAME=p;var m=((a={})[n.ACCESS_LEVEL.OWNER]=i.intl.formatMessage({id:"if8xIl",defaultMessage:"Owner"}),a[n.ACCESS_LEVEL.WRITER]=i.intl.formatMessage({id:"ywqz2g",defaultMessage:"Can edit"}),a[n.ACCESS_LEVEL.READER]=i.intl.formatMessage({id:"Cgg/GQ",defaultMessage:"Can comment"}),a[n.ACCESS_LEVEL.READER_NO_COMMENT]=i.intl.formatMessage({id:"Gz5ABt",defaultMessage:"Can view"}),a);t.ACCESS_NAME_NO_COMMENT=m;var h=((o={})[s.MEMBER_ACTION.MAKE_EDITOR]=i.intl.formatMessage({id:"l98l5t",defaultMessage:"People can edit, delete, comment, and add the files to their Dropbox"}),o[s.MEMBER_ACTION.MAKE_VIEWER]=i.intl.formatMessage({id:"b2gULy",defaultMessage:"People can view, download, and comment"}),o[s.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]=i.intl.formatMessage({id:"SS1NPa",defaultMessage:"People can only view and download the files"}),o);t.MEMBER_ACTION_FOLDER=h;var f=((l={})[s.MEMBER_ACTION.MAKE_EDITOR]=i.intl.formatMessage({id:"p1FXFw",defaultMessage:"People can edit, delete, comment, and add the file to their Dropbox"}),l[s.MEMBER_ACTION.MAKE_VIEWER]=i.intl.formatMessage({id:"b2gULy",defaultMessage:"People can view, download, and comment"}),l[s.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]=i.intl.formatMessage({id:"EYJ3Li",defaultMessage:"People can only view and download the file"}),l);t.MEMBER_ACTION_FILE=f;var g=((c={})[s.MEMBER_ACTION.MAKE_EDITOR]=i.intl.formatMessage({id:"65RS70",defaultMessage:"People can edit and comment"}),c[s.MEMBER_ACTION.MAKE_VIEWER]=i.intl.formatMessage({id:"9zXodW",defaultMessage:"People can view and comment"}),c);t.MEMBER_ACTION_CLOUD_DOC=g;var _=((d={})[s.MEMBER_ACTION.MAKE_EDITOR]=i.intl.formatMessage({id:"UFB0OU",defaultMessage:"Lets them view, comment, and edit."}),d[s.MEMBER_ACTION.MAKE_VIEWER]=i.intl.formatMessage({id:"dLWWVm",defaultMessage:"Lets them view and comment, but not edit."}),d[s.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]=i.intl.formatMessage({id:"Fp+s39",defaultMessage:"Lets them view only. They can’t see comments."}),d);t.MEMBER_ACTION_FOLDER_NO_COMMENT=_;var S=((u={})[s.MEMBER_ACTION.MAKE_EDITOR]=i.intl.formatMessage({id:"UFB0OU",defaultMessage:"Lets them view, comment, and edit."}),u[s.MEMBER_ACTION.MAKE_VIEWER]=i.intl.formatMessage({id:"dLWWVm",defaultMessage:"Lets them view and comment, but not edit."}),u[s.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]=i.intl.formatMessage({id:"Fp+s39",defaultMessage:"Lets them view only. They can’t see comments."}),u);t.MEMBER_ACTION_FILE_NO_COMMENT=S})),define("modules/clean/sharing/sharing_tracked_element",["require","exports","tslib","react","modules/clean/sharing/ui_util","modules/clean/react/components/helpers","dig-components/typography","spectrum-sharing/utils/logging"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackedLink=t.withSharingTracking=void 0,s=n.__importDefault(s);var l=["trackingId","href"];function c(){return function(e){return(function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.getWhitelistedExtras=function(){var t={};return l.forEach((function(n){e.props.hasOwnProperty(n)&&(t["element_"+n]=e.props[n])})),t},e.onClick=function(){i.logTiburonEvent(e.props.contentInfo,e.props.user.id,o.TiburonEventName.ElementClick,e.getWhitelistedExtras())},e}return n.__extends(a,t),a.prototype.componentDidMount=function(){i.logTiburonEvent(this.props.contentInfo,this.props.user.id,o.TiburonEventName.ElementView,this.getWhitelistedExtras())},a.prototype.render=function(){return s.default.createElement(e,n.__assign({onClick:this.onClick},this.props))},a.displayName="withSharingTracking("+r.getDisplayName(e),a})(s.default.Component)}}t.withSharingTracking=c;var d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return s.default.createElement(a.Link,n.__assign({},this.props),this.props.children)},t.displayName="TrackedLinkElement",t})(s.default.Component);t.TrackedLink=c()(d)})),define("modules/clean/sharing/views/share_modal/contacts_error_banner",["require","exports","tslib","react","modules/clean/sharing/ui_util","spectrum-sharing/components/sharing_modal_banner/index"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactsErrorBanner=void 0,s=n.__importDefault(s),t.ContactsErrorBanner=function(e){var t,n=e.level,a=void 0===n?"defaultLevel":n,o=e.message;if(!o)return null;var l=(t={},t[i.ContactsErrorLevel.Error]="error",t[i.ContactsErrorLevel.Warn]="warn",t.defaultLevel="default",t)[a];return s.default.createElement(r.SharingModalBanner,{className:"contacts-error-banner",type:l,message:o})}})),define("modules/clean/sharing/views/share_modal/inform_owner_update_section",["require","exports","tslib","react","spectrum-sharing/components/sharing_modal_banner/index","modules/core/i18n"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InformOwnerUpdateSection=void 0;var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=r.intl.formatMessage({id:"jxjvN9",defaultMessage:"We’ll let the owner know whenever you change these settings"});return s.default.createElement(i.SharingModalBanner,{className:this.props.isInSharingSettingsModal?"sharing-settings-modal__banner":void 0,type:"dark",message:e})},t.displayName="InformOwnerUpdateSection",t})((s=n.__importDefault(s)).default.Component);t.InformOwnerUpdateSection=a})),define("modules/clean/sharing/views/share_modal/sharing_modal_no_permissions_section",["require","exports","tslib","react","spectrum-sharing/components/sharing_modal_banner/index","modules/core/i18n","lodash"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalNoPermissionsSection=void 0,s=n.__importDefault(s),a=n.__importStar(a);var o=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getNoPermissionMessage=function(){return t.props.isTeamSharedFolder?t.getTeamSharedFolderMessage():t.props.isFolder?r.intl.formatMessage({id:"7nUdHD",defaultMessage:"You don’t have permission to manage membership of this folder"}):r.intl.formatMessage({id:"Bg4C2n",defaultMessage:"You don’t have permission to manage membership of this file"})},t}return n.__extends(t,e),t.prototype.render=function(){return s.default.createElement(i.SharingModalBanner,{message:this.getNoPermissionMessage()})},t.prototype.getTeamSharedFolderMessage=function(){return this.renderTeamFolderNoPermissionMessage()?r.intl.formatMessage({id:"Ia9tjc",defaultMessage:"This folder is automatically shared with all members of {team_name}"},{team_name:this.props.teamName}):r.intl.formatMessage({id:"6Vgz8b",defaultMessage:"Only <admin_link>admins</admin_link> and <group_link>group managers</group_link> can change team folder membership."},{admin_link:function(e){return s.default.createElement("a",{href:"/team?_tk=left_nav_team",target:"_blank",rel:"noreferrer"},e)},group_link:function(e){return s.default.createElement("a",{href:"/help/7232#transfer",target:"_blank",rel:"noreferrer"},e)}})},t.prototype.renderTeamFolderNoPermissionMessage=function(){return a.get(this.props,"members.groups",{}).some((function(e){return"team"===e.group_type&&a.get(e,"permissions.make_editor.allow")&&a.get(e,"permissions.make_viewer.allow")}))},t.displayName="SharingModalNoPermissionsSection",t})(s.default.Component);t.SharingModalNoPermissionsSection=o})),define("modules/clean/sharing/views/share_modal/sharing_modal_upsell_premium_sharing",["require","exports","tslib","react","spectrum-sharing/components/banner/index","modules/clean/sharing/sharing_tracked_element","dig-components/typography","modules/core/i18n","modules/core/exception"],(function(e,t,n,s,i,r,a,o,l){"use strict";function c(e,n,s){return"M1V2"===n||"M1V2_LINK_SETTINGS"===n?1===e.paid?"/buy/professional?_tk="+s:"/pro/try?_tk="+s:(["M1V1","OFF","CONTROL"].indexOf(n)<0&&l.reportException({err:new Error("Variant is "+n),tags:[t.SHARE_MODAL_UPSELL_PREMIUM_SHARING_EXCLOG_TAG],severity:l.SEVERITY.NONCRITICAL}),"/upgrade?oqa=sfp&_tk="+s)}Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalUpsellPremiumSharing=t.getCTALink=t.SHARE_MODAL_UPSELL_PREMIUM_SHARING_EXCLOG_TAG=void 0,s=n.__importDefault(s),t.SHARE_MODAL_UPSELL_PREMIUM_SHARING_EXCLOG_TAG="share_modal_upsell_premium_sharing",t.getCTALink=c;var d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.hasIncrementedCounter||void 0===this.props.hasSeenCounter||this.props.onSetSeenCounter(this.props.hasSeenCounter+1)},t.prototype.getCTAText=function(){return 1===this.props.user.paid?o.intl.formatMessage({id:"vFDLgh",defaultMessage:"Try it with Professional"}):o.intl.formatMessage({id:"iPDKbr",defaultMessage:"Try free with Professional"})},t.prototype.render=function(){return s.default.createElement(i.Banner,{showTopCaret:!0},s.default.createElement(a.Text,{size:"small",className:"scl-banner__text"},o.intl.formatMessage({id:"R2FTNc",defaultMessage:"Secure this link with a password and expiration."})," ",s.default.createElement(r.TrackedLink,{trackingId:"share_modal_pro_upsell_footer",user:this.props.user,contentInfo:this.props.contentInfo,href:c(this.props.user,this.props.variant,"sharing_modal_upsell"),target:"_blank",rel:"noopener",hasNoUnderline:!0},this.getCTAText())))},t.displayName="SharingModalUpsellPremiumSharing",t})(s.default.Component);t.SharingModalUpsellPremiumSharing=d})),define("modules/clean/sharing/views/share_modal_evolution/manage/header_section",["require","exports","tslib","react","spectrum-sharing/components/sharing_modal_header/index","modules/core/i18n","modules/clean/sharing/views/share_modal_evolution/utils/context","spectrum-sharing/utils/logging"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderSection=void 0;var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSettingsButtonClick=function(e){e.preventDefault(),t.props.onSettingsButtonClick(),t.context.logEvent(o.TiburonEventName.ClickSettingsGear,void 0,{screen:o.ScreenName.ManageAccessScreen})},t}return n.__extends(t,e),t.prototype.render=function(){return s.default.createElement(i.SharingModalHeaderWithBackButton,{autoFocus:!0,closeButtonVisible:!0,settingsButtonVisible:!0,onClickBackButton:this.props.onBackButtonClick,onClickCloseButton:this.props.onCloseButtonClick,onClickSettingsButton:this.handleSettingsButtonClick,label:r.intl.formatMessage({id:"oMWVkR",defaultMessage:"Back"})})},t.displayName="HeaderSection",t.contextType=a.ShareModalEvolutionContext,t})((s=n.__importDefault(s)).default.Component);t.HeaderSection=l})),define("modules/clean/sharing/views/share_modal_evolution/manage/main_section",["require","exports","tslib","react","modules/clean/em_string","modules/core/i18n","modules/clean/react/components/css","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/views/member_list","modules/clean/sharing/views/share_modal/sharing_modal_no_permissions_section","spectrum-sharing/components/action_container/index","spectrum-sharing/components/sharing_modal_downgrade_banner/index","react-intl"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalEvolutionManageAccessMainSection=t.MainSection=void 0,s=n.__importDefault(s);var m=p.defineMessages({downgradeBannerHeader:{id:"YBKCoS",defaultMessage:"People who can view could still edit via link"},removeBannerHeader:{id:"w/RnTZ",defaultMessage:"People might still have access via link"},downgradeBannerSubheader:{id:"iYhJt/",defaultMessage:"You can delete the link to further restrict access."},downgradeBannerGotIt:{id:"YCTkuR",defaultMessage:"Got It"},downgradeBannerManageLinks:{id:"J9wEBS",defaultMessage:"Manage Links"}}),h=(function(e){function t(t){var n=e.call(this,t)||this;return n.enableDowngradeBanner=function(){n.setState({showDowngradeBanner:!0})},n.hideDowngradeBanner=function(){n.setState({showDowngradeBanner:!1})},n.openLinkSettings=function(e){e.preventDefault(),n.props.actionHandler.openSharingSettingsModal("edit_link_settings")},n.state={showDowngradeBanner:!1},n}return n.__extends(t,e),t.prototype.render=function(){return s.default.createElement(d.ActionContainer,{header:this.getTitle(),headerSize:"small",banner:this.renderBanner(),showBorder:!0},s.default.createElement(l.SharingMemberList,n.__assign({},this.props.memberListProps,{showTsdAccessVisibility:this.props.showTsdAccessVisibility,onShowDowngradeBanner:this.enableDowngradeBanner})))},t.prototype.getTitle=function(){var e={fileName:i.Emstring.em_snippet(this.props.fileName,o.SNIPPET_SIZES.SHARE_ME_MANAGE_ACCESS_FILE_FOLDER_TITLE)};return this.props.showTsdAccessVisibility?r.intl.formatMessage({id:"IQ37US",defaultMessage:"Who can access <s>{fileName}</s>"},{fileName:e.fileName,s:function(e){return s.default.createElement("span",null,e)}}):r.intl.formatMessage({id:"ONiz97",defaultMessage:"People with access to <s>{fileName}</s>"},{fileName:e.fileName,s:function(e){return s.default.createElement("span",null,e)}})},t.prototype.noPermissionsSectionProps=function(){return{isFolder:this.props.isFolder,isTeamSharedFolder:this.props.isTeamSharedFolder,members:this.props.membership,teamName:this.props.ownerTeamName}},t.prototype.renderBanner=function(){return this.props.canInviteMembers?this.props.editLinkExists&&this.state.showDowngradeBanner?s.default.createElement(u.SharingModalDowngradeBanner,{header:r.intl.formatMessage(m.downgradeBannerHeader),subheader:r.intl.formatMessage(m.downgradeBannerSubheader),outlineButtonLabel:r.intl.formatMessage(m.downgradeBannerGotIt),transparentButtonLabel:r.intl.formatMessage(m.downgradeBannerManageLinks),onClickOutlineButton:this.hideDowngradeBanner,onClickTransparentButton:this.openLinkSettings}):void 0:s.default.createElement(c.SharingModalNoPermissionsSection,n.__assign({},this.noPermissionsSectionProps()))},t.displayName="MainSection",t})(s.default.Component);t.MainSection=h,t.ShareModalEvolutionManageAccessMainSection=a.requireCssWithComponent(h,["/static/css/sharing/share_modal_evolution-vflcXp9SS.css"])})),define("modules/clean/sharing/views/share_modal_evolution/manage/manage_access_page",["require","exports","tslib","react","modules/clean/react/components/css","modules/clean/sharing/views/share_modal_evolution/manage/header_section","modules/clean/sharing/views/share_modal_evolution/manage/main_section","modules/clean/sharing/views/share_modal_evolution/utils/context","spectrum-sharing/utils/logging"],(function(e,t,n,s,i,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageAccessModal=t.ManageAccessPage=t.baseClassName=void 0,s=n.__importDefault(s),t.baseClassName="share-modal-evolution__manage-access-page";var c=(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(i,e),i.prototype.componentDidMount=function(){this.context.logEvent(l.TiburonEventName.ViewManageAccessScreen)},i.prototype.render=function(){return s.default.createElement("div",{className:t.baseClassName},s.default.createElement(r.HeaderSection,{onBackButtonClick:this.props.onBackButtonClick,onCloseButtonClick:this.props.onCloseButtonClick,onSettingsButtonClick:this.props.onSettingsButtonClick}),s.default.createElement(a.MainSection,{canInviteMembers:this.props.canInviteMembers,fileName:this.props.fileName,isFolder:this.props.isFolder,isTeamSharedFolder:this.props.isTeamSharedFolder,memberListProps:this.props.memberListProps,membership:this.props.membership,ownerTeamName:this.props.ownerTeamName,showTsdAccessVisibility:this.props.showTsdAccessVisibility,actionHandler:this.props.actionHandler,editLinkExists:this.props.editLinkExists}))},i.displayName="ManageAccessModal",i.contextType=o.ShareModalEvolutionContext,i})(s.default.Component);t.ManageAccessPage=c,t.ManageAccessModal=i.requireCssWithComponent(c,["/static/css/sharing/share_modal_evolution-vflcXp9SS.css"])})),define("modules/clean/sharing/views/share_modal_evolution/share_modal_evolution",["require","exports","tslib","react","dig-components/layer","modules/clean/react/components/css","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/views/share_modal_evolution/utils/context","modules/clean/sharing/views/share_modal_evolution/utils/logging","modules/clean/sharing/views/share_modal_evolution/manage/manage_access_page","modules/clean/sharing/views/share_modal_evolution/share/share_screen"],(function(e,t,n,s,i,r,a,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalEvolution=t.ShareModalEvolutionComponent=void 0,s=n.__importDefault(s);var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleManageAccessClick=function(){t.props.showScreen(a.MANAGE_SCREEN)},t.handleBackButtonClick=function(){t.props.showScreen(a.SHARE_SCREEN)},t.handleLogEvent=function(e,s,i){var r=t.props,a=r.contentMetadata,o=r.user;t.props.logTiburonEvent(e,o.id,n.__assign(n.__assign({},l.buildExtraFromMetadata(a,s)),i))},t}return n.__extends(t,e),t.prototype.render=function(){return s.default.createElement(i.LayerContext.Provider,{value:1e3},s.default.createElement(o.ShareModalEvolutionContextProvider,{logEvent:this.handleLogEvent},s.default.createElement("div",{className:"share-modal-evolution"},this.renderActiveScreen())))},t.prototype.renderActiveScreen=function(){return this.props.currentScreen===a.MANAGE_SCREEN?s.default.createElement(c.ManageAccessModal,n.__assign({},this.manageAccessPageProps())):s.default.createElement(d.ShareScreen,n.__assign({},this.getShareScreenProps()))},t.prototype.manageAccessPageProps=function(){var e=this.props,t=e.isFolder,n=e.isTeamSharedFolder,s=e.onSettingsButtonClick,i=e.sharingInfo,r=e.onCloseButtonClick,a=e.actionHandler;return{canInviteMembers:i.permissionsObj().canInvite(),fileName:i.name(),isFolder:t,isTeamSharedFolder:n,memberListProps:this.props.memberListProps,membership:i.members(),onBackButtonClick:this.handleBackButtonClick,onCloseButtonClick:r,onSettingsButtonClick:s,ownerTeamName:this.props.ownerTeam?this.props.ownerTeam.name:void 0,showTsdAccessVisibility:i.getShowTsdAccessVisibility(),actionHandler:a,editLinkExists:!!i.editRighteousLink()}},t.prototype.getShareScreenProps=function(){return{actionHandler:this.props.actionHandler,contactsError:this.props.contactsError,contentMetadata:this.props.contentMetadata,isEmailSending:this.props.isEmailSending,handleManageAccessClick:this.handleManageAccessClick,handleMessageChanged:this.props.handleMessageChanged,initialTypeaheadTokens:this.props.initialTypeaheadTokens,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,onCloseButtonClick:this.props.onCloseButtonClick,onSettingsButtonClick:this.props.onSettingsButtonClick,recipientMessage:this.props.recipientMessage,sharingInfo:this.props.sharingInfo,user:this.props.user,guestMembers:this.props.guestMembers,linkMembers:this.props.linkMembers,showPassFileSettings:this.props.showPassFileSettings}},t.displayName="ShareModalEvolution",t})(s.default.Component);t.ShareModalEvolutionComponent=u,t.ShareModalEvolution=r.requireCssWithComponent(u,["/static/css/sharing/share_modal_evolution-vflcXp9SS.css","/static/css/dig-components/index.web-vflfsfj-g.css"])})),define("modules/clean/sharing/views/share_modal_evolution/share/footer_section",["require","exports","tslib","react","dig-components/typography","dig-components/tooltips","dig-components/buttons","modules/core/i18n","spectrum-sharing/components/sharing_modal_footer_link/index","modules/clean/sharing/sharing_questionnaire/util","modules/clean/growth/user_action/trackers/sharing_questionnaire_tracker","modules/clean/react/components/css"],(function(e,t,n,s,i,r,a,o,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FooterSection=void 0,s=n.__importDefault(s);var p=o.intl.formatMessage({id:"jSxg71",defaultMessage:"Show sharing options"}),m=o.intl.formatMessage({id:"e1es+b",defaultMessage:"Show sharing options"}),h=o.intl.formatMessage({id:"Kavfj2",defaultMessage:"Explore the different ways to share files and folders."}),f=o.intl.formatMessage({id:"MCymMg",defaultMessage:"Got it"}),g=function(e){var t=e.actionHandler,o=s.default.useState(!1),u=o[0],g=o[1],_=s.default.useRef(null);s.default.useEffect((function(){n.__awaiter(void 0,void 0,void 0,(function(){var e;return n.__generator(this,(function(t){switch(t.label){case 0:return[4,c.fetchHasPerformedSharingQuestionnaireAction(d.SharingQuestionnaireActions.SHARE_MODAL_TOOLTIP_VIEW)];case 1:return e=t.sent(),g(!e),[2]}}))}))}),[]);var S=s.default.createElement(s.default.Fragment,null,s.default.createElement(a.Button,{ref:_,variant:"transparent",onClick:function(){t.openSharingQuestionnaire()}},p),s.default.createElement(r.Tooltip.Control,{variant:"rich",open:u,triggerRef:_,onDisplayed:function(){c.trackSharingQuestionnaireAction(d.SharingQuestionnaireActions.SHARE_MODAL_TOOLTIP_VIEW)},placement:"left"},s.default.createElement(i.Title,{size:"standard",inverse:!0},m),s.default.createElement(i.Text,{tagName:"p",color:"standard",inverse:!0},h),s.default.createElement("div",{className:"share-modal-evolution-share-screen-footer__tooltip-dismiss-wrapper"},s.default.createElement(a.Button,{variant:"primary",inverse:!0,onClick:function(){g(!1)},autoFocus:!0},f))));return s.default.createElement(l.SharingModalFooterLink,{body:S,isIconHidden:!0})};g.displayName="FooterSectionComponent",t.FooterSection=u.requireCssWithComponent(g,["/static/css/sharing/share_modal_evolution-vflcXp9SS.css"])})),define("modules/clean/sharing/views/share_modal_evolution/share/header_section",["require","exports","tslib","react","dig-components/typography","spectrum-sharing/components/sharing_modal_header/index","spectrum-sharing/utils/sharing_constants","modules/clean/em_string","modules/clean/sharing/share_modal_icon","modules/core/i18n","modules/clean/sharing/views/share_modal_evolution/utils/context","spectrum-sharing/utils/logging"],(function(e,t,n,s,i,r,a,o,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderSection=void 0;var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSettingsButtonClick=function(e){e.preventDefault(),t.props.onSettingsButtonClick(e),t.context.logEvent(u.TiburonEventName.ClickSettingsGear,void 0,{screen:u.ScreenName.ShareScreen})},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.getSubTitle();return s.default.createElement(r.SharingModalHeaderTitle,{closeButtonVisible:!0,icon:this.getIcon(),subTitle:e,onClickCloseButton:this.props.onCloseButtonClick,onClickSettingsButton:this.handleSettingsButtonClick,settingsButtonVisible:this.props.contentInfo.isFolder()||this.props.showPassFileSettings,title:this.getHeaderTitle()})},t.prototype.getHeaderTitle=function(){return o.Emstring.em_snippet(this.props.sharingInfo.name(),a.SNIPPET_SIZES.FILENAME)},t.prototype.getIcon=function(){var e=this.props.contentInfo;return s.default.createElement(l.ShareModalIcon,{alt:"",filename:this.props.sharingInfo.name(),isSharedFolder:e.isSharedFolder(),isFolder:e.isFolder(),isTeamSharedFolder:this.props.isTeamSharedFolder,isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,isViewOnly:!this.props.canEdit,isConfidentialFolder:this.props.isConfidentialFolder,pathExists:e.pathExists()})},t.prototype.getNumberOfPeopleShared=function(){var e=this.props,t=e.membership,n=e.linkMembers,s=e.guestMembers;return(this.props.sharingInfo.memberCounts().total_unique_users||t.getTotalMemberCount([]))+n.length+s.length},t.prototype.canViewInheritedMembers=function(){return!this.props.contentInfo.isFile()||this.props.membership.hasInheritedUsers()},t.prototype.getHeaderSubTitleDescription=function(){var e=this.props.sharingInfo.memberCounts(),t=e&&e.exceeds_count,n=t?this.props.sharingInfo.memberNum():this.getNumberOfPeopleShared();return this.canViewInheritedMembers()?0===n||1===n?c.intl.formatMessage({id:"8yAvwd",defaultMessage:"Only you have access"}):c.intl.formatMessage({id:"McYFO5",defaultMessage:"{count, plural, one{1 person has access} other{{count} people have access}}"},{count:n+(t?"+":"")}):c.intl.formatMessage({id:"DlYP8J",defaultMessage:"Shared with other people"})},t.prototype.showManageAccessLink=function(){return this.getNumberOfPeopleShared()>1&&this.props.showManageAccessLink},t.prototype.getSubTitle=function(){var e=this,t=this.getHeaderSubTitleDescription();return s.default.createElement(i.Text,{color:"faint",size:"small"},this.showManageAccessLink()?s.default.createElement(i.Link,{href:"#",hasNoUnderline:!0,onClick:function(t){t.preventDefault(),e.props.onManageAccessClick()}},t):s.default.createElement("span",null,t))},t.displayName="HeaderSection",t.contextType=d.ShareModalEvolutionContext,t.defaultProps={showManageAccessLink:!0},t})((s=n.__importDefault(s)).default.Component);t.HeaderSection=p})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/email_share",["require","exports","tslib","react","classnames","spectrum-sharing/components/action_section/index","spectrum-sharing/components/form_validation_message/index","dig-components/tooltips","dig-components/buttons","modules/clean/sharing/ui_util","modules/clean/sharing/views/share_contacts_tokenizer","dig-components/text_fields","modules/core/i18n","modules/clean/sharing/views/share_modal_evolution/utils/context","spectrum-sharing/share_modal/sharing_settings/utils/index","spectrum-sharing/utils/logging","spectrum-sharing/components/checkbox_with_label/index","modules/clean/sharing/views/share_modal_evolution/share/main_section/copy_or_create_link_section"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_){"use strict";var S;Object.defineProperty(t,"__esModule",{value:!0}),t.EmailShare=t.baseClassName=void 0,s=n.__importDefault(s),i=n.__importDefault(i),t.baseClassName="share-modal-evolution-contacts-field";var E=((S={})[c.ContactsErrorLevel.Error]="error",S[c.ContactsErrorLevel.Warn]="warn",S.defaultLevel="default",S),v=(function(e){function S(t){var n=e.call(this,t)||this;return n.finishLogging=function(e){return n.shareContactsTokenizerRef.finishLogging(e)},n.onTypeaheadTokensChange=function(e){n.setState({typeaheadTokens:e}),n.props.emailCountChangeCallback(e.length)},n.setShareContactsTokenizerRef=function(e){n.shareContactsTokenizerRef=e},n.filterContacts=function(e){return n.props.isTeamSharedFolder?!!e.group_id:e.email!==n.props.user.email},n.footerContent=function(){var e=n.props.accessLevel,t=n.props.sharedLink,i=n.props.canCreateLink;return!n.props.isFolder||t||n.props.canCreateEditLinkForFolder||(e="viewer",t=n.props.viewLinkForFolder,i=n.props.canCreateViewLinkForFolder),s.default.createElement(s.default.Fragment,null,n.shouldRenderPostNoteAsComment()&&n.renderPostNoteAsComment(),s.default.createElement(_.CopyOrCreateLinkSection,{size:"standard",accessLevel:e,actionHandler:n.props.actionHandler,modalClose:n.props.modalClose,sharedLink:t,getEmailTokenCountFn:n.props.getEmailTokenCountFn,canCreateLink:i,isFolder:n.props.isFolder}))},n.onEmailLinkButtonClick=function(){return n.logClickShareButtonLinkSettingsStatus(),n.props.actionHandler.sendShare(n)},n.onCheckboxToggled=function(){n.props.actionHandler.changeCreateCommentCheckbox(!n.props.isPostNoteAsCommentChecked)},n.state={typeaheadTokens:[]},n}return n.__extends(S,e),S.prototype.getContacts=function(){return this.shareContactsTokenizerRef.getContacts()},S.prototype.getMessageType=function(){var e=this.props.contactsError.level||"defaultLevel";return E[e]},S.prototype.render=function(){var e=this.props,n=e.contactsError,a=e.disabledContactsInput,o=i.default([a?t.baseClassName+"__typeahead--disabled":t.baseClassName+"__typeahead",n&&n.level===c.ContactsErrorLevel.Error?"contacts-input-error":void 0]);return s.default.createElement(r.ActionSection,{footerContent:this.footerContent(),footerActions:s.default.createElement("span",{className:"scl-sharing-modal-footer"},s.default.createElement(l.Button,{disabled:this.shouldDisableShareButton(),onClick:this.onEmailLinkButtonClick,variant:"primary",className:"email-link-button","data-uxa-log":"sharing-modal-footer-button-send-email"},this.getShareButtonText())),isHeaderBold:!1},this.renderContactTokenizer(o),this.shouldRenderMessageField()&&this.renderMessageField())},S.prototype.shouldRenderMessageField=function(){return this.state.typeaheadTokens.length>0||this.props.recipientMessage.length>0},S.prototype.shouldDisableShareButton=function(){return this.props.isEmailSending||this.props.isTokenizerEmpty||this.props.contactsError&&this.props.contactsError.level===c.ContactsErrorLevel.Error},S.prototype.shouldRenderPostNoteAsComment=function(){return this.props.showPostNoteAsComment&&this.props.recipientMessage.length>0&&this.shouldRenderMessageField()},S.prototype.getTypeaheadPlaceholder=function(){return this.props.isTeamSharedFolder?p.intl.formatMessage({id:"VMGE6I",defaultMessage:"Group names"}):this.props.user.is_team?p.intl.formatMessage({id:"+nKRfb",defaultMessage:"Add an email, name, or group"}):p.intl.formatMessage({id:"bdV6O3",defaultMessage:"Add an email or name"})},S.prototype.getShareButtonText=function(){var e=p.intl.formatMessage({id:"vJGcTi",defaultMessage:"Share file"}),t=p.intl.formatMessage({id:"cHEg6H",defaultMessage:"Share folder"}),n=p.intl.formatMessage({id:"Qd1iC2",defaultMessage:"Sharing..."}),s=this.props.isFolder?t:e;return this.props.isEmailSending?n:s},S.prototype.renderContactTokenizer=function(e){var t=s.default.createElement(s.default.Fragment,null,s.default.createElement(d.ShareContactsTokenizer,{className:e,ref:this.setShareContactsTokenizerRef,actionHandler:this.props.actionHandler,disabledInput:this.props.disabledContactsInput,focusOnMount:!this.props.disabledContactsInput,initialTypeaheadTokens:this.props.initialTypeaheadTokens,typeaheadTokens:this.state.typeaheadTokens,onTypeaheadTokensChange:this.onTypeaheadTokensChange,shouldLogContactSearch:!0,typeaheadPlaceholder:this.getTypeaheadPlaceholder(),user:this.props.user,showContactImport:!this.props.isTeamSharedFolder,teamGroupInfo:this.props.teamGroupInfo,filterContacts:this.filterContacts}),s.default.createElement(a.FormValidationMessage,{message:this.props.contactsError.message,variant:this.getMessageType()}));return this.props.disabledContactsInput?s.default.createElement(o.Tooltip,{id:"tooltip-button",title:p.intl.formatMessage({id:"E3Ydgf",defaultMessage:"You can only copy this link"})},s.default.createElement("div",{id:"contact_tokenizer_with_tooltip"},t)):t},S.prototype.renderMessageField=function(){return s.default.createElement("div",null,s.default.createElement(u.TextArea,{placeholder:p.intl.formatMessage({id:"30bVmM",defaultMessage:"Add a note"}),"aria-label":p.intl.formatMessage({id:"30bVmM",defaultMessage:"Add a note"}),onChange:this.props.handleMessageChanged,value:this.props.recipientMessage}))},S.prototype.renderPostNoteAsComment=function(){var e=p.intl.formatMessage({id:"Jfn0Wa",defaultMessage:"Post this note as a comment"});return s.default.createElement(g.CheckboxWithLabel,{onCheckboxToggled:this.onCheckboxToggled,isChecked:this.props.isPostNoteAsCommentChecked,label:e,isCheckboxDisabled:""===this.props.recipientMessage,fontSize:"small"})},S.prototype.logClickShareButtonLinkSettingsStatus=function(){var e=!1,t=!1,n=!1;if(this.props.sharedLink){var s=h.getAudienceForLink(this.props.sharedLink.link_permissions);e=this.props.sharedLink.link_permissions.require_password||"password"===s,t=!!this.props.sharedLink.expires,n=!this.props.sharedLink.link_permissions.allow_download}this.context.logEvent(f.TiburonEventName.ClickShareButtonLinkSettingsStatus,this.props.sharedLink,{password:e,expiration:t,disable_download:n})},S.contextType=m.ShareModalEvolutionContext,S.displayName="EmailShare",S})(s.default.Component);t.EmailShare=v})),define("modules/clean/sharing/views/share_modal_evolution/share/share_screen",["require","exports","tslib","react","modules/clean/sharing/views/share_modal_evolution/share/header_section","modules/clean/sharing/views/share_modal_evolution/share/main_section/main_section","modules/clean/sharing/views/share_modal_evolution/share/footer_section","modules/clean/sharing/views/upsells/docsend_footer_section","modules/clean/react/components/css"],(function(e,t,n,s,i,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareScreen=void 0,s=n.__importDefault(s);var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shouldRenderFooter=function(){return"V1"===t.props.sharingInfo.coreO21nBetterTeamSharingVariant()&&t.props.sharingInfo.getShowSharingQuestionnaire()&&t.props.user.is_team},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.actionHandler,n=e.contactsError,l=e.contentMetadata,c=e.isEmailSending,d=e.handleManageAccessClick,u=e.handleMessageChanged,p=e.initialTypeaheadTokens,m=e.isTeamSharedFolder,h=e.isTokenizerEmpty,f=e.sharingInfo,g=e.showPassFileSettings,_=e.onCloseButtonClick,S=e.onSettingsButtonClick,E=e.recipientMessage,v=e.user,M=e.guestMembers,y=e.linkMembers;return s.default.createElement("div",{className:"share-modal-evolution-share-screen"},s.default.createElement(i.HeaderSection,{canEdit:f.permissionsObj().canEdit(),isConfidentialFolder:f.isConfidentialFolder(),isTeamSharedFolder:f.isTeamSharedFolder(),isFolderInsideTeamFolderTree:f.isFolderInsideTeamFolderTree(),showPassFileSettings:g,contentInfo:f.contentInfo(),guestMembers:M,linkMembers:y,membership:f.members(),onCloseButtonClick:_,onManageAccessClick:d,onSettingsButtonClick:S,sharingInfo:f}),s.default.createElement(r.MainSection,{actionHandler:t,closeModalHandler:_,contactsError:n,contentMetadata:l,isEmailSending:c,handleMessageChanged:u,initialTypeaheadTokens:p,isTeamSharedFolder:m,isTokenizerEmpty:h,onManageAccessClick:d,recipientMessage:E,sharingInfo:f,user:v,selectedAccessLevel:"writer"===this.props.sharingInfo.recipientAccess()?"editor":"viewer"}),this.shouldRenderFooter()&&s.default.createElement(a.FooterSection,{actionHandler:t}),s.default.createElement(o.DocsendFooterSection,{fileName:this.props.sharingInfo.name(),variant:this.props.sharingInfo.sharingPrefs().exp_pg_docsend_trial_sharing_modal_variant}))},t.displayName="ShareScreen",t})(s.default.Component);t.ShareScreen=l.requireCssWithComponent(c,["/static/css/sharing/share_modal_evolution-vflcXp9SS.css"])})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/access_level_dropdown",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/menu","dig-components/typography","modules/clean/sharing/views/share_modal_evolution/utils/access_level","modules/clean/sharing/views/share_modal_evolution/utils/audience"],(function(e,t,n,s,i,r,a,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessLevelDropdown=void 0,s=n.__importDefault(s),i=n.__importDefault(i);var d="share-modal-evolution-access-level-dropdown",u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderDropdownOptions=function(e){return e.map((function(e){return s.default.createElement(a.Menu.SelectItem,{key:e.label,value:e.link_access_level,selected:t.props.selectedAccessLevel===e.link_access_level,disabled:!e.allowed},l.getAccessLevelDescription(t.props.selectedAudience,e.link_access_level))}))},t.handleSelectedAccessLevelChange=function(e){t.props.selectedAccessLevel!==e&&t.props.onSelectedAccessLevelChange(e)},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.linkAccessLevelOptions,t=1===e.length?" ":": ",n=i.default([""+d,e.length>1?d+"__with-menu":void 0]);return s.default.createElement("div",{className:n},s.default.createElement(o.Text,{className:d+"__audience-text"},this.getAudienceText(),t),1===e.length?this.getCurrentAccessLevelText():this.renderAccessMenu(e))},t.prototype.getAudienceText=function(){var e=this.props,t=e.contentMetadata,n=e.selectedAudience;return c.getAudienceText(n,t.owner_team)},t.prototype.getCurrentAccessLevelText=function(){return s.default.createElement(o.Text,{className:d+"__audience-text",isBold:!0},l.getAccessLevelDescription(this.props.selectedAudience,this.props.selectedAccessLevel))},t.prototype.renderAccessMenu=function(e){var t=this;return s.default.createElement(a.Menu.Wrapper,{onSelection:this.handleSelectedAccessLevelChange,isPortaled:!1,className:d+"__unportaled-menu"},(function(i){var o=i.getContentProps,c=i.getTriggerProps;return s.default.createElement(s.default.Fragment,null,s.default.createElement(r.Button,n.__assign({},c(),{variant:"transparent",withDropdownIcon:!0}),l.getAccessLevelDescription(t.props.selectedAudience,t.props.selectedAccessLevel)),s.default.createElement(a.Menu.Content,n.__assign({},o(),{placement:"bottom-end"}),s.default.createElement(a.Menu.Segment,null,t.renderDropdownOptions(e))))}))},t.displayName="AccessLevelDropdown",t})(s.default.Component);t.AccessLevelDropdown=u})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/access_level_section",["require","exports","tslib","react","modules/core/i18n","dig-components/typography","modules/clean/sharing/views/share_modal_evolution/share/main_section/access_level_dropdown","modules/clean/sharing/views/share_modal_evolution/utils/audience","modules/clean/sharing/views/share_modal_evolution/utils/context","spectrum-sharing/components/action_section/index","spectrum-sharing/utils/logging"],(function(e,t,n,s,i,r,a,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessLevelSection=void 0;var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSettingsButtonClick=function(e){var n;e.preventDefault(),"editor"===t.props.selectedAccessLevel?(t.props.openSharingSettingsModal("edit_link_settings"),n=d.SettingsTabName.EditLinkSettingsTab):(t.props.openSharingSettingsModal("view_link_settings"),n=d.SettingsTabName.ViewLinkSettingsTab),t.context.logEvent(d.TiburonEventName.ClickSettingsText,t.props.sharedLink,{settings_tab:n})},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.canCreateLink,n=e.contentMetadata,i=e.linkAccessLevelOptions,l=e.onSelectedAccessLevelChange,d=e.selectedAccessLevel,u=e.selectedAudience,p=e.sharedLink,m=e.teamPolicy,h=this.enableSettingsButton();return s.default.createElement(c.ActionSection,{layout:"columns"},s.default.createElement(a.AccessLevelDropdown,{selectedAccessLevel:d,linkAccessLevelOptions:i,contentMetadata:n,selectedAudience:o.getSelectedAudience(t,u,p,m,n.policy),onSelectedAccessLevelChange:l}),s.default.createElement(r.Text,{size:"standard",color:h?"standard":"disabled"},this.renderSettingsButton(h)))},t.prototype.enableSettingsButton=function(){return this.props.canCreateLink||void 0!==this.props.sharedLink},t.prototype.renderSettingsButton=function(e){var t=i.intl.formatMessage({id:"Q8t9EL",defaultMessage:"Settings"});return e?s.default.createElement(r.Link,{href:"#",hasNoUnderline:!0,onClick:this.handleSettingsButtonClick,"aria-label":i.intl.formatMessage({id:"5Uwag4",defaultMessage:"Link Settings"})},t):s.default.createElement(s.default.Fragment,null,t)},t.displayName="AccessLevelSection",t.contextType=l.ShareModalEvolutionContext,t})((s=n.__importDefault(s)).default.Component);t.AccessLevelSection=u})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/copy_link_section",["require","exports","tslib","react","modules/core/i18n","modules/clean/clipboard_v2","dig-components/typography","dig-components/icons/src","modules/clean/sharing/ui_notifications_util","dig-components/icons","spectrum-sharing/share_modal_evolution/copy_link/copy_link_education_tooltip","modules/clean/sharing/views/share_modal_evolution/utils/context","spectrum-sharing/utils/logging","spectrum-sharing/share_modal_evolution/utils/link_description","spectrum-sharing/share_modal/sharing_settings/utils/index"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyLinkSection=void 0;var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.linkRef=s.default.createRef(),t.copyToClipboard=function(e){var n=document.createElement("input");n.value=e,document.body.appendChild(n),n.select(),t.clipboard.do_copy(),document.body.removeChild(n)},t.handleCopyLinkClicked=function(e){e.preventDefault();var n=t.props.getEmailTokenCountFn();t.context.logEvent(p.TiburonEventName.CopySharedLink,t.props.sharedLink,{tokenized_contact_count:n}),t.copyToClipboard(t.props.sharedLink.url),t.props.exp_afterCopy&&t.props.exp_afterCopy()},t.renderCopyLink=function(e){return s.default.createElement("div",{className:"sharing-modal-footer-link-div"},s.default.createElement(d.CopyLinkEducationTooltip,{key:"copy-link-education-tooltip",intl:i.intl,sharedLink:t.props.sharedLink,linkRef:t.linkRef},s.default.createElement(a.Text,{size:t.props.size},s.default.createElement(a.Link,{key:"linkCopyToClipboard",href:"#",hasNoUnderline:!0,className:"copy-link-button",onClick:t.handleCopyLinkClicked,isBold:!0,ref:t.linkRef,"data-uxa-log":"sharing-modal-footer-copy-link"},s.default.createElement(c.UIIcon,{src:o.LinkLine,size:t.props.size,"aria-label":""}),e))),t.renderBanner())},t.renderBanner=function(){var e=t.getLinkRestrictions();return e?s.default.createElement(a.Text,{color:"faint"},s.default.createElement("span",{className:"sharing-modal-footer-link-margin"},e),s.default.createElement("span",{className:"sharing-modal-footer-restrictions-margin"},"·"),s.default.createElement(a.Link,{className:"sharing-modal-footer-restrictions-text",inverse:!0,href:"#",onClick:t.props.handleSettingsButtonClick},m.getModifyText(i.intl))):""},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.setupCopy()},t.prototype.componentDidUpdate=function(){this.setupCopy()},t.prototype.render=function(){var e=i.intl.formatMessage({id:"t0Frp1",defaultMessage:"Copy link"});return this.renderCopyLink(e)},t.prototype.setupCopy=function(){var e=this;this.clipboard=new r.ClipboardV2((function(){return e.props.modalClose(),l.showCopyLinkSuccessSnackbar(e.props.sharedLink.url,e.props.accessLevel,e.props.exp_copySnackbarProps)}),(function(){e.context.logEvent(p.TiburonEventName.CopySharedLinkFailure,e.props.sharedLink,{tokenized_contact_count:e.props.getEmailTokenCountFn(),error:"failed_copy_to_clipboard"}),l.showCopyLinkErrorSnackbar(e.props.sharedLink.url,e.props.accessLevel)}))},t.prototype.getLinkRestrictions=function(){var e=this.props.sharedLink,t=h.getAudienceForLink(e.link_permissions),n=e.link_permissions.require_password||"password"===t,s=e.expires;return n&&s?m.getRestrictionsApplyText(i.intl):n?m.getPasswordRequiredText(i.intl):s?m.getExpirationEnabledText(i.intl,e):void 0},t.displayName="CopyLinkSection",t.contextType=u.ShareModalEvolutionContext,t})((s=n.__importDefault(s)).default.Component);t.CopyLinkSection=f})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/create_link_section",["require","exports","tslib","react","modules/core/i18n","dig-components/typography","dig-components/icons/src","dig-components/icons","spectrum-sharing/components/sharing_spinner/index","modules/clean/sharing/views/share_modal_evolution/share/main_section/create_link_help_text"],(function(e,t,n,s,i,r,a,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateLinkSection=void 0;var d=(function(e){function t(t){var n=e.call(this,t)||this;return n.handleCreateLinkClick=function(e){e.preventDefault(),n.setState({isCreatingLink:!0},(function(){n.props.onCreateLinkClick().catch((function(){n.setState({isCreatingLink:!1})}))}))},n.state={isCreatingLink:!1},n}return n.__extends(t,e),t.prototype.render=function(){return this.state.isCreatingLink?this.renderCreatingLinkLoading():this.renderCreateLink()},t.prototype.renderCreatingLinkLoading=function(){return s.default.createElement(l.SharingSpinner,{ariaValue:"Loading xsmall",message:i.intl.formatMessage({id:"g7It2O",defaultMessage:"Creating link..."}),textSize:this.props.size})},t.prototype.renderCreateLink=function(){var e=this;return this.props.canCreateLink?s.default.createElement(r.Text,{size:this.props.size,isBold:!0},s.default.createElement(o.UIIcon,{src:a.LinkLine,size:this.props.size,"aria-label":""}),i.intl.formatMessage({id:"M7I8En",defaultMessage:"<link>Create</link> then copy link"},{link:function(t){return s.default.createElement(r.Link,{key:"toCreateALink",href:"#",hasNoUnderline:!0,onClick:e.handleCreateLinkClick,"aria-label":i.intl.formatMessage({id:"6zzZgm",defaultMessage:"Create link"}),"data-uxa-log":"sharing-modal-footer-create-link"},t)}})):s.default.createElement(c.CreateLinkHelpText,{size:this.props.size})},t.displayName="CreateLinkSection",t})((s=n.__importDefault(s)).default.Component);t.CreateLinkSection=d})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/create_link_help_text",["require","exports","tslib","react","modules/core/i18n","dig-components/icons","dig-components/icons/src","dig-components/typography","spectrum-sharing/components/help_info/index"],(function(e,t,n,s,i,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateLinkHelpText=void 0,s=n.__importDefault(s),t.CreateLinkHelpText=function(e){return s.default.createElement(o.Text,{size:e.size,color:"disabled",isBold:!0},s.default.createElement(r.UIIcon,{src:a.LinkLine,size:e.size,"aria-label":""}),i.intl.formatMessage({id:"t0Frp1",defaultMessage:"Copy link"}),s.default.createElement(l.HelpInfo,{id:"cannotCopyLinkInfo",text:i.intl.formatMessage({id:"CqPhXv",defaultMessage:"You can only email this link"})}))}})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/copy_or_create_link_section",["require","exports","tslib","react","modules/clean/sharing/views/share_modal_evolution/share/main_section/copy_link_section","modules/clean/sharing/views/share_modal_evolution/share/main_section/create_link_section","modules/clean/stormcrow/stormcrow_exposure_logger","spectrum-sharing/utils/logging","modules/clean/sharing/views/share_modal_evolution/utils/context"],(function(e,t,n,s,i,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyOrCreateLinkSection=void 0;var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCreateLinkClick=function(){t.props.isFolder&&"editor"===t.props.accessLevel&&(new a.StormcrowExposureLogger).logExposure("create_edit_folder_link","ON");return t.props.actionHandler.createSharedLink(t.props.accessLevel,t.props.selectedAudience)},t.handleSettingsButtonClick=function(e){var n;e.preventDefault(),"editor"===t.props.accessLevel?(t.props.actionHandler.openSharingSettingsModal("edit_link_settings"),n=o.SettingsTabName.EditLinkSettingsTab):(t.props.actionHandler.openSharingSettingsModal("view_link_settings"),n=o.SettingsTabName.ViewLinkSettingsTab),t.context.logEvent(o.TiburonEventName.OpenLinkSettingsModal,t.props.sharedLink,{settings_tab:n})},t}return n.__extends(t,e),t.prototype.render=function(){var e,t,n=this;return this.props.sharedLink?s.default.createElement(i.CopyLinkSection,{accessLevel:this.props.accessLevel,modalClose:this.props.modalClose,sharedLink:this.props.sharedLink,getEmailTokenCountFn:this.props.getEmailTokenCountFn,size:this.props.size,handleSettingsButtonClick:this.handleSettingsButtonClick,exp_afterCopy:function(){var e,t;return null===(t=(e=n.props.actionHandler).exp_afterCopy)||void 0===t?void 0:t.call(e)},exp_copySnackbarProps:null===(t=(e=this.props.actionHandler).exp_getCopySnackbarProps)||void 0===t?void 0:t.call(e)}):s.default.createElement(r.CreateLinkSection,{onCreateLinkClick:this.handleCreateLinkClick,canCreateLink:this.props.canCreateLink,size:this.props.size})},t.defaultProps={size:"small"},t.contextType=l.ShareModalEvolutionContext,t.displayName="CopyOrCreateLinkSection",t})((s=n.__importDefault(s)).default.Component);t.CopyOrCreateLinkSection=c})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/share_link_section",["require","exports","tslib","react","modules/clean/sharing/views/share_modal_evolution/share/main_section/email_share","modules/clean/sharing/views/share_modal_evolution/utils/context"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareLinkSection=void 0;var a=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={numEmailTokens:n.props.initialTypeaheadTokens.length},n}return n.__extends(t,e),t.prototype.render=function(){return s.default.createElement(i.EmailShare,{actionHandler:this.props.actionHandler,contactsError:this.props.contactsError,isEmailSending:this.props.isEmailSending,disabledContactsInput:!this.props.canInviteByEmail,handleMessageChanged:this.props.handleMessageChanged,modalClose:this.props.modalClose,recipientMessage:this.props.recipientMessage,sharedLink:this.props.sharedLink,showPostNoteAsComment:this.props.showPostNoteAsComment,isFolder:this.props.isFolder,isPostNoteAsCommentChecked:this.props.isPostNoteAsCommentChecked,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,initialTypeaheadTokens:this.props.initialTypeaheadTokens,user:this.props.user,emailCountChangeCallback:this.updateEmailTokenCount.bind(this),accessLevel:this.props.accessLevel,getEmailTokenCountFn:this.getEmailTokenCount.bind(this),canCreateLink:this.props.canCreateLink,canCreateViewLinkForFolder:this.props.canCreateViewLinkForFolder,canCreateEditLinkForFolder:this.props.canCreateEditLinkForFolder,viewLinkForFolder:this.props.viewLinkForFolder})},t.prototype.updateEmailTokenCount=function(e){this.setState({numEmailTokens:e})},t.prototype.getEmailTokenCount=function(){return this.state.numEmailTokens},t.displayName="ShareLinkSection",t.contextType=r.ShareModalEvolutionContext,t})((s=n.__importDefault(s)).default.Component);t.ShareLinkSection=a})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/link_section",["require","exports","tslib","react","modules/clean/sharing/views/share_modal_evolution/share/main_section/share_link_section","modules/clean/sharing/views/share_modal_evolution/utils/context"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkSection=void 0;var a=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={isUpdatingAccess:!1},n}return n.__extends(t,e),t.prototype.render=function(){return s.default.createElement(i.ShareLinkSection,{key:"shareLinkSection",accessLevel:this.props.accessLevel,actionHandler:this.props.actionHandler,canCreateLink:this.props.canCreateLink,canInviteByEmail:this.props.canInviteByEmail,contactsError:this.props.contactsError,isEmailSending:this.props.isEmailSending,handleMessageChanged:this.props.handleMessageChanged,modalClose:this.props.modalClose,recipientMessage:this.props.recipientMessage,sharedLink:this.props.sharedLink,isPostNoteAsCommentChecked:this.props.isPostNoteAsCommentChecked,isFolder:this.props.isFolder,showPostNoteAsComment:this.props.showPostNoteAsComment,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,initialTypeaheadTokens:this.props.initialTypeaheadTokens,user:this.props.user,canCreateViewLinkForFolder:this.props.canCreateViewLinkForFolder,canCreateEditLinkForFolder:this.props.canCreateEditLinkForFolder,viewLinkForFolder:this.props.viewLinkForFolder})},t.displayName="LinkSection",t.contextType=r.ShareModalEvolutionContext,t})((s=n.__importDefault(s)).default.Component);t.LinkSection=a})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/main_section",["require","exports","tslib","react","spectrum-sharing/components/action_container/index","modules/clean/sharing/access_level","modules/clean/sharing/views/share_modal_evolution/share/main_section/link_section","modules/clean/sharing/views/share_modal_evolution/share/main_section/no_permissions_banner","spectrum-sharing/components/info_box/index","modules/core/i18n","modules/clean/sharing/views/share_modal_evolution/utils/context","spectrum-sharing/utils/logging","modules/clean/sharing/views/share_modal_evolution/share/main_section/access_level_section","modules/clean/static_urls","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_util"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainSection=void 0;var f=(function(e){function t(t){var n=e.call(this,t)||this;return n.onTabSelected=function(e){n.props.actionHandler.changeRecipientAccess("editor"===e?r.ACCESS_LEVEL.WRITER:r.ACCESS_LEVEL.READER);var t="editor"===e?u.ShareTabName.EditTab:u.ShareTabName.ViewTab;n.context.logEvent(u.TiburonEventName.ViewShareTab,void 0,{share_tab:t})},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){var e="editor"===this.props.selectedAccessLevel?u.ShareTabName.EditTab:u.ShareTabName.ViewTab;this.context.logEvent(u.TiburonEventName.ViewShareScreen,void 0,{share_tab:e}),this.context.logEvent(u.TiburonEventName.ViewShareTab,void 0,{share_tab:e})},t.prototype.render=function(){var e=this.props,t=e.actionHandler,n=e.contentMetadata,r=e.selectedAccessLevel,a=e.sharingInfo;return 0===this.getLinkAccessLevelOptions().length?s.default.createElement(l.InfoBox,{imgPath:m.static_url("/static/images/sharing/share_modal/no_access-vflRKAkm7.png"),imgAlt:c.intl.formatMessage({id:"jLOGFI",defaultMessage:"No permissions to share"}),title:c.intl.formatMessage({id:"XGWBlY",defaultMessage:"You can view, but not share"}),message:this.getNoPermissionsMessage()}):s.default.createElement(i.ActionContainer,{header:this.getHeaderDescription()},s.default.createElement(p.AccessLevelSection,{selectedAccessLevel:r,canCreateLink:this.canCreateLink(r),contentMetadata:n,linkAccessLevelOptions:this.getLinkAccessLevelOptions(),selectedAudience:a.getSelectedAudienceByAccessLevel(r),sharedLink:this.getSharedLinkByAccessLevel(r),teamPolicy:a.teamPolicy(),onSelectedAccessLevelChange:this.onTabSelected,openSharingSettingsModal:t.openSharingSettingsModal}),"editor"===this.props.selectedAccessLevel?this.renderLinkSection("editor"):this.renderLinkSection("viewer"))},t.prototype.getSharedLinkByAccessLevel=function(e){var t;return"editor"===e?t=this.props.sharingInfo.editRighteousLink():"viewer"===e&&(t=this.props.sharingInfo.viewRighteousLink()||this.props.sharingInfo.shmodelLink()),t},t.prototype.canInvite=function(e){var t=this.props.sharingInfo.permissionsObj();switch(e){case"editor":return t.canInviteEditor();case"viewer":return t.canInviteViewer();default:return!1}},t.prototype.canCreateLink=function(e){var t=this.props,n=t.sharingInfo,s=t.isTeamSharedFolder,i=this.props.sharingInfo.permissionsObj();return h.canCreateLink(e,n.isCloudDoc(),n.isFolder(),s,n.isConfidentialFolder(),n.sharingPrefs().can_create_edit_folder_link,i.canInviteEditor(),n.canShareLink(),i.canCreateViewLink(),i.canCreateEditLink())},t.prototype.validateAccessLevel=function(e){return this.canInvite(e)||this.canCreateLink(e)||void 0!==this.getSharedLinkByAccessLevel(e)},t.prototype.renderLinkSection=function(e){var t=this.props,n=t.actionHandler,i=t.sharingInfo;return this.validateAccessLevel(e)?s.default.createElement(a.LinkSection,{accessLevel:e,actionHandler:n,canCreateLink:this.canCreateLink(e),canInviteByEmail:this.canInvite(e),contactsError:this.props.contactsError,contentMetadata:this.props.contentMetadata,isEmailSending:this.props.isEmailSending,handleMessageChanged:this.props.handleMessageChanged,initialTypeaheadTokens:this.props.initialTypeaheadTokens,isPostNoteAsCommentChecked:i.isShareMessageAsCommentChecked(),isTokenizerEmpty:this.props.isTokenizerEmpty,isTeamSharedFolder:this.props.isTeamSharedFolder,onManageAccessClick:this.props.onManageAccessClick,recipientMessage:this.props.recipientMessage,user:this.props.user,sharedLink:this.getSharedLinkByAccessLevel(e),modalClose:this.props.closeModalHandler,isFolder:i.isFolder(),teamPolicy:i.teamPolicy(),showPostNoteAsComment:i.permissionsObj().canShareMessageAsComment(),canCreateViewLinkForFolder:this.canCreateLink("viewer"),canCreateEditLinkForFolder:this.props.sharingInfo.sharingPrefs().can_create_edit_folder_link,viewLinkForFolder:i.shmodelLink()}):s.default.createElement(o.NoPermissionsBanner,{accessLevel:e,isFolder:i.isFolder()})},t.prototype.getHeaderDescription=function(){return this.props.sharingInfo.isFolder()?c.intl.formatMessage({id:"hMjxKh",defaultMessage:"Share this folder"}):c.intl.formatMessage({id:"8fJdJ4",defaultMessage:"Share this file"})},t.prototype.getLinkAccessLevelOptions=function(){var e=[];return e.push({link_access_level:"viewer",allowed:this.validateAccessLevel("viewer"),label:"can view"}),e.push({link_access_level:"editor",allowed:this.validateAccessLevel("editor"),label:"can edit"}),e.filter((function(e){return e.allowed}))},t.prototype.getNoPermissionsMessage=function(){return this.props.sharingInfo.isFolder()?c.intl.formatMessage({id:"fpgILd",defaultMessage:"To share this folder, ask someone else for access to edit."}):c.intl.formatMessage({id:"m4b4bb",defaultMessage:"To share this file, ask someone else for access to edit."})},t.displayName="MainSection",t.contextType=d.ShareModalEvolutionContext,t})((s=n.__importDefault(s)).default.Component);t.MainSection=f})),define("modules/clean/sharing/views/share_modal_evolution/share/main_section/no_permissions_banner",["require","exports","tslib","react","modules/core/i18n","dig-components/typography","spectrum-sharing/components/banner/index"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoPermissionsBanner=void 0;var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return s.default.createElement(a.Banner,{variant:"transparent-left"},s.default.createElement(r.Text,null,this.getNoPermissionsText()))},t.prototype.getNoPermissionsText=function(){return"editor"===this.props.accessLevel?this.props.isFolder?i.intl.formatMessage({id:"dooCWY",defaultMessage:"You can only share a link for viewing for this folder."}):i.intl.formatMessage({id:"XbAqHv",defaultMessage:"You can only share a link for viewing for this type of file."}):i.intl.formatMessage({id:"X+IYXP",defaultMessage:"This link type isn’t supported."})},t.displayName="NoPermissionsBanner",t})((s=n.__importDefault(s)).default.Component);t.NoPermissionsBanner=o})),define("modules/clean/sharing/views/share_modal_evolution/utils/access_level",["require","exports","modules/core/i18n"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessLevelDescription=void 0;var s=n.intl.formatMessage({id:"jAzCAz",defaultMessage:"can edit"}),i=n.intl.formatMessage({id:"GKgRRt",defaultMessage:"can edit"}),r=n.intl.formatMessage({id:"wZejJ8",defaultMessage:"can view"}),a=n.intl.formatMessage({id:"eCFw0p",defaultMessage:"can view"});t.getAccessLevelDescription=function(e,t){return"public"===e?"editor"===t?s:r:"editor"===t?i:a}})),define("modules/clean/sharing/views/share_modal_evolution/utils/audience",["require","exports","modules/clean/sharing/api/types/metadata","modules/core/i18n","spectrum-sharing/share_modal/sharing_settings/utils/index","modules/clean/em_string","spectrum-sharing/utils/sharing_constants"],(function(e,t,n,s,i,r,a){"use strict";function o(e,t,n){return t&&"members"===t.shared_link_policy?"no_one":e&&"default_public"!==e.shared_link_create_policy?"team":n||"public"}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedAudience=t.getDefaultAudienceOptions=t.getDefaultAudience=t.getAudienceText=void 0,t.getAudienceText=function(e,t){switch(e){case"public":return s.intl.formatMessage({id:"vAFlk4",defaultMessage:"Anyone with this link"});case"team":return t?s.intl.formatMessage({id:"tOfnIZ",defaultMessage:"{team_name} members with this link"},{team_name:r.Emstring.em_snippet(t.name,a.SNIPPET_SIZES.COMPANY_NAME,1)}):s.intl.formatMessage({id:"wrE9Wi",defaultMessage:"Team Members with this link"});case"password":return s.intl.formatMessage({id:"QI5Jkq",defaultMessage:"People with the password for this link"});case"no_one":return s.intl.formatMessage({id:"SnIjdP",defaultMessage:"Only people invited"})}},t.getDefaultAudience=o,t.getDefaultAudienceOptions=function(e,t,s){var i=[],r=t&&"team_only"===t.shared_link_create_policy;return i.push(new n.LinkAudienceOption({audience:"public",allowed:!r,disallowed_reason:r?n.LinkAudienceDisallowedReason.RestrictedByTeam:null})),i.push(new n.LinkAudienceOption({audience:"team",allowed:e.is_team,disallowed_reason:e.is_team?null:n.LinkAudienceDisallowedReason.UserNotOnTeam})),i.push(new n.LinkAudienceOption({audience:"no_one",allowed:!0})),s&&"members"===s.shared_link_policy?i.map((function(e){return new n.LinkAudienceOption({audience:e.audience,allowed:!1,disallowed_reason:n.LinkAudienceDisallowedReason.RestrictedBySharedFolder})})):i},t.getSelectedAudience=function(e,t,n,s,r,a){return t||(n?i.getAudienceForLink(n.link_permissions):e?o(s,r,a):"no_one")}})),define("modules/clean/sharing/views/share_modal_evolution/utils/context",["require","exports","tslib","react"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalEvolutionContextProvider=t.ShareModalEvolutionContext=void 0,s=n.__importDefault(s),t.ShareModalEvolutionContext=s.default.createContext({logEvent:function(){}});var i=(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(i,e),i.prototype.render=function(){return s.default.createElement(t.ShareModalEvolutionContext.Provider,{value:this.props},this.props.children)},i.displayName="ShareModalEvolutionContextProvider",i})(s.default.Component);t.ShareModalEvolutionContextProvider=i})),define("modules/clean/sharing/views/constants",["require","exports","tslib","lodash","modules/core/i18n"],(function(e,t,n,s,i){"use strict";var r,a,o;Object.defineProperty(t,"__esModule",{value:!0}),t.CONTENT_NAME_MESSAGE_LEVEL_VALUES=t.BANNER_VALUES=t.MODE_VALUES=t.CONTENT_NAME_EMPTY_TOOLTIP=t.NS_LIMIT_ERROR=t.LINK_ONLY_REASON=t.MODES=t.LinkabilityStates=t.FETCH_METADATA_STATUS=t.CONTENT_NAME_MESSAGE_LEVELS=t.BANNERS=void 0,s=n.__importStar(s),(function(e){e[e.NO_MEMBERS=0]="NO_MEMBERS",e[e.INPUT_CONTENT_NAME=1]="INPUT_CONTENT_NAME"})(r=t.BANNERS||(t.BANNERS={})),(function(e){e[e.INFO=0]="INFO",e[e.ERROR=1]="ERROR"})(a=t.CONTENT_NAME_MESSAGE_LEVELS||(t.CONTENT_NAME_MESSAGE_LEVELS={})),(function(e){e[e.FETCHING=0]="FETCHING",e[e.SUCCESS=1]="SUCCESS",e[e.FAIL=2]="FAIL"})(t.FETCH_METADATA_STATUS||(t.FETCH_METADATA_STATUS={})),(function(e){e.CAN_LINK="CAN_LINK",e.INVITE_NO_LINK="INVITE_NO_LINK",e.NO_INVITE_NO_LINK="NO_INVITE_NO_LINK",e.CANT_LINK_TEAM_FOLDER="CANT_LINK_TEAM_FOLDER",e.ERROR_FETCHING_LINK_INFO="ERROR_FETCHING_LINK_INFO"})(t.LinkabilityStates||(t.LinkabilityStates={})),(function(e){e.LINK_ONLY="link-only",e.LOADING="loading",e.MEMBERSHIP="membership",e.POINTER="pointer",e.SHARE="share",e.SHARE_SENDING="share-sending",e.EVOLUTION="evolution"})(o=t.MODES||(t.MODES={})),(function(e){e.INSIDE_SHARED_FOLDER="inside_shared_folder",e.CONTAINS_SHARED_FOLDER="contains_shared_folder",e.LINKS_PAGE="links_page",e.TOTAL_MOUNTS_EXCEEDED="total_mounts_exceeded",e.HOME_MOUNTS_EXCEEDED="home_mounts_exceeded",e.TREE_SIZE_EXCEEDED="tree_size_exceeded"})(t.LINK_ONLY_REASON||(t.LINK_ONLY_REASON={})),(function(e){e.TOTAL_MOUNTS_EXCEEDED="total_mounts_exceeded",e.HOME_MOUNTS_EXCEEDED="home_mounts_exceeded",e.TREE_SIZE_EXCEEDED="tree_size_exceeded"})(t.NS_LIMIT_ERROR||(t.NS_LIMIT_ERROR={})),t.CONTENT_NAME_EMPTY_TOOLTIP=i.intl.formatMessage({id:"mYGncD",defaultMessage:"Name your shared folder"}),t.MODE_VALUES=s.values(o),t.BANNER_VALUES=s.values(r),t.CONTENT_NAME_MESSAGE_LEVEL_VALUES=s.values(a)})),define("modules/clean/sharing/views/inherited_members",["require","exports","tslib","classnames","react","modules/clean/em_string","modules/clean/react/snackbar","modules/clean/react/sprite","modules/clean/sharing/access_level","modules/clean/sharing/api/types/metadata","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/views/inherited_members_helpers","modules/clean/web_user_action_logger","modules/clean/web_user_action_events","modules/core/i18n","spectrum/icon_content/index","spectrum/button/index","spectrum/modal/index","modules/clean/sharing/ui_notifications_util"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleInheritedUserAccessChangeModal=t.SetInheritedMembersUIConfidentialModal=t.InheritedMembers=void 0,s=n.__importDefault(s),i=n.__importDefault(i),S=n.__importStar(S);var E=(function(e){function t(t){var n=e.call(this,t)||this;return n.onToggleShowMemberList=function(){0!==n.props.members.length&&n.setState({areMembersExpanded:!n.state.areMembersExpanded})},n.handleToggleInheritanceClick=function(e){n.props.actionHandler.handleSetConfidentialClick(!1,n.props.ownerTeamName)},n.state={areMembersExpanded:!1},n}return n.__extends(t,e),t.prototype.renderMembersList=function(){return this.state.areMembersExpanded?i.default.createElement("div",null,i.default.createElement("div",{className:"u-mar-top-xs u-mar-horizontal-xs u-pad-top-xs inherited-member-list__divider"}),i.default.createElement("div",null,i.default.createElement("ul",{className:"u-pad-horizontal-s u-pad-vertical-xs inherited-member-list__member"},this.props.children))):void 0},t.prototype.renderRemoveButton=function(){return this.props.canUpdateConfidentiality?i.default.createElement(g.Button,{className:"inherited-member-list__remove-button button-as-link",onClick:this.handleToggleInheritanceClick,variant:"styleless"},h.intl.formatMessage({id:"aPhz2c",defaultMessage:"Remove"})):void 0},t.prototype.renderTriangle=function(){return 0===this.props.members.length?i.default.createElement("div",{className:"u-pad-horizontal-xs"}):i.default.createElement(g.Button,{className:"u-pad-horizontal-xxs o-flag__fix inherited-member-list__triangle button-as-link",onClick:this.onToggleShowMemberList,variant:"styleless"},i.default.createElement(o.Sprite,{alt:h.intl.formatMessage({id:"Bcpu+z",defaultMessage:"Toggle whether inherited members are displayed or hidden"}),group:"web",name:this.state.areMembersExpanded?"triangle_open_1x":"triangle_closed_1x"}))},t.prototype.render=function(){var e,t=this.props.actionHandler.getSharingInfo().parentFolderName();if(""===t)if(this.props.showTsdAccessVisibility){var n=this.props.members[0].access_type;e=n===l.ACCESS_LEVEL.READER||n===l.ACCESS_LEVEL.READER_NO_COMMENT?h.intl.formatMessage({id:"zOWNAj",defaultMessage:"Everyone at {team_name} can read"},{team_name:r.Emstring.em_snippet(this.props.ownerTeamName,d.SNIPPET_SIZES.DISPLAY_NAME)}):h.intl.formatMessage({id:"aZmBj5",defaultMessage:"Everyone at {team_name} can edit"},{team_name:r.Emstring.em_snippet(this.props.ownerTeamName,d.SNIPPET_SIZES.DISPLAY_NAME)})}else e=h.intl.formatMessage({id:"HHHqnX",defaultMessage:"Members of {team_name} shared workspace"},{team_name:r.Emstring.em_snippet(this.props.ownerTeamName,d.SNIPPET_SIZES.DISPLAY_NAME)});else e=this.props.showTsdAccessVisibility?h.intl.formatMessage({id:"U5hJI+",defaultMessage:"People with access to “{folder_name}” folder"},{folder_name:r.Emstring.em_snippet(t,d.SNIPPET_SIZES.FILENAME)}):h.intl.formatMessage({id:"UfHHBh",defaultMessage:"Members of “{folder_name}” folder"},{folder_name:r.Emstring.em_snippet(t,d.SNIPPET_SIZES.FILENAME)});var a=0,o=null;this.props.memberCounts&&(o=this.props.contentInfo.isSharedFolder()?this.props.memberCounts.total_unique_inherited_members:this.props.memberCounts.total_unique_users),null!=o?a=o:this.props.members.forEach((function(e){e instanceof c.GroupMembershipInfo?a+=e.member_count:a++}));var u=h.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:a}),p=s.default([{"u-mar-bottom-xs":!0,"inherited-member-list__outer-expanded":this.state.areMembersExpanded,"inherited-member-list__outer-closed":!this.state.areMembersExpanded,"inherited-member-list__outer-spectrum":!0}]),m=s.default([{"inherited-member-list__inner":!this.state.areMembersExpanded}]);return i.default.createElement("div",{className:p},i.default.createElement("div",{className:m},i.default.createElement("div",{className:"o-flag inherited-member-list__toggle-show-member",onClick:this.onToggleShowMemberList},this.renderTriangle(),i.default.createElement("div",{className:"o-flag__flex u-pad-vertical-xs u-pad-right-s"},i.default.createElement("div",{className:"o-flag"},i.default.createElement("div",{className:"o-flag__fix"},i.default.createElement(f.IconContent,{name:"folder_shared-small"})),i.default.createElement("div",{className:"o-flag__flex u-pad-left-s"},i.default.createElement("div",{className:"inherited-member-list__member-str u-font-strong"},e),i.default.createElement("div",{className:"inherited-member-list__member-count-str u-font-meta"},u)),i.default.createElement("div",{className:"o-flag__fix u-pad-right-xxs"},this.renderRemoveButton())))),i.default.createElement("div",null,this.renderMembersList())))},t.displayName="InheritedMembers",t})(i.default.Component);t.InheritedMembers=E;var v=(function(e){function t(t){var n=e.call(this,t)||this;n._onToggleConfidentialFolderFalse=function(){n._onToggleConfidentialFolder(!1)},n.state={isAccepting:!1};var s=t.actionHandler.getSharingInfo().displayPath(),i=t.actionHandler.getSharingInfo().parentFolderName();return n.contentGenerator=new u.SetInheritedMembersUIConfidentialModalContentGenerator(t.initialIsConfidentialFolder,s,t.teamName,i),n}return n.__extends(t,e),t.prototype._onToggleConfidentialFolder=function(e){var t=this,n=!e,s=e===this.props.initialIsConfidentialFolder;e||this.setState({isAccepting:!0});var r=this.props,o=r.actionHandler,l=r.contentInfo;a.Snackbar.sync(this.contentGenerator.syncSnackMessage(s),!0,"share-folder-notification");var c=l.isSharedFolder();return o.handleSetConfidential(s).then((function(e){o.fetchDataAndShowShareModal(),s&&p.WebUserActionLog.log(t.props.userId,n?m.WebUserActionLogEvent.CONF_BY_MANAGE_ACCESS:m.WebUserActionLogEvent.CONF_BY_UNDO_AFTER_RESTORE_ACCESS,{ns_id:e.shared_folder_id,original_folder_type:c?m.WebUserActionLogExtraValue.SHARED_FOLDER:m.WebUserActionLogExtraValue.FILE_FOLDER})})).then((function(){var e=t.contentGenerator.completeSnackMessage(s);n?a.Snackbar.show(i.default.createElement(a.Snackbar,{title:e,timeoutDelayMs:1e4,actionButtonText:h.intl.formatMessage({id:"OfxyEk",defaultMessage:"Undo"}),onActionClick:function(){return t._onToggleConfidentialFolder(!0)},closeButtonText:h.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),variant:"complete",id:"share-folder-notification"})):a.Snackbar.complete(e,"share-folder-notification")})).catch((function(e){return u.handleApiError(e,t.contentGenerator.failSnackMessage(s),(function(){return t.setState({isAccepting:!1})}),"share-folder-notification")}))},t.prototype.render=function(){return i.default.createElement(_.UtilityModal,{ariaLabel:this.contentGenerator.getTitleContent(),title:this.contentGenerator.getTitleContent(),overlayClickClose:!0,primaryAction:this.contentGenerator.getActionString(),secondaryAction:h.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onPrimaryAction:this._onToggleConfidentialFolderFalse,onSecondaryAction:this.props.onCancel,open:!0,onRequestClose:this.props.onCancel,overlayClassName:"file-viewer-modal-overlay"},this.contentGenerator.getBodyContent())},t.displayName="SetInheritedMembersUIConfidentialModal",t})(i.default.Component);t.SetInheritedMembersUIConfidentialModal=v;var M=(function(e){function t(t){var n=e.call(this,t)||this;n.actionCompleteCallback=function(){var e=n.props.actionHandler;S.sharingNotificationSuccess(n.contentGenerator.getSnackBarCompleteString()),n.setState({removing:!1}),e.fetchDataAndShowShareModal()},n.removeTheSelectedMember=function(){var e=n.props,t=e.member,s=e.actionHandler,i=e.isUserSelf,r=s.getContentInfo().id;return i?s.relinquishMembershipSimple(r,!1):s.removeMemberSimple(r,t.memberId(),!1)},n.changeAccessOfSelectedMember=function(){var e=n.props,t=e.newAccessLevel,s=e.actionHandler,i=e.member,r=t;return s.changeMemberAccessSimple(s.getContentInfo().id,i.memberId(),r)},n.changeConfidentialAccess=function(){var e=n.props,t=e.actionHandler,s=e.userId,i=e.isSharedFolder,r=e.isDowngrading;n.setState({removing:!0});return t.shareIfFileFolder(n.contentGenerator.getSnackBarRemovingString()).then((function(){return t.handleSetConfidential(!0,!0).then((function(){return n.logWebUserAction(s,r,t.getContentInfo().id,i)}))})).then((function(){return r?n.changeAccessOfSelectedMember():n.removeTheSelectedMember()})).then(n.actionCompleteCallback).catch((function(e){return u.handleApiError(e,n.contentGenerator.getSnackBarFailString(),(function(){return n.setState({removing:!1})}))}))},n.state={removing:!1};var s=n.props,i=s.member,r=s.teamName,a=s.parentFolderName,o=s.currentFolderName,l=s.isDowngrading,d=s.isUserSelf;return n.contentGenerator=new u.SingleInheritedUserAccessChangeModalContentGenerator(l,r,a,o,i.displayName()||"",i instanceof c.GroupMembershipInfo,d),n}return n.__extends(t,e),t.prototype.render=function(){return i.default.createElement(_.UtilityModal,{ariaLabel:this.contentGenerator.getConfirmModalTitleString(),title:this.contentGenerator.getConfirmModalTitleString(),overlayClickClose:!0,primaryAction:this.contentGenerator.getButtonText(),secondaryAction:h.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onPrimaryAction:this.changeConfidentialAccess,onSecondaryAction:this.props.actionHandler.openShareModal,open:!0,onRequestClose:this.props.actionHandler.openShareModal,overlayClassName:"file-viewer-modal-overlay"},this.renderBody())},t.prototype.renderBody=function(){return i.default.createElement("div",null,i.default.createElement("div",{className:"confirmation-modal__content"},this.contentGenerator.getConfirmModalContent()),i.default.createElement("br",null))},t.prototype.logWebUserAction=function(e,t,n,s){p.WebUserActionLog.log(e,t?m.WebUserActionLogEvent.CONF_BY_DOWNGRADE_MEMBER:m.WebUserActionLogEvent.CONF_BY_REMOVE_MEMBER,{ns_id:n,original_folder_type:s?m.WebUserActionLogExtraValue.SHARED_FOLDER:m.WebUserActionLogExtraValue.FILE_FOLDER})},t.displayName="SingleInheritedUserAccessChangeModal",t})(i.default.Component);t.SingleInheritedUserAccessChangeModal=M})),define("modules/clean/sharing/views/inherited_members_helpers",["require","exports","tslib","react","react-intl","api_v2/error","modules/clean/em_string","modules/clean/filepath/filepath","modules/clean/react/components/modal","modules/clean/react/snackbar","spectrum-sharing/utils/sharing_constants","modules/core/i18n","modules/core/notify"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleInheritedUserAccessChangeModalContentGenerator=t.SetInheritedMembersUIConfidentialModalContentGenerator=t.handleApiError=void 0,s=n.__importDefault(s),o=n.__importStar(o);t.handleApiError=function(e,t,n,s){r.catchApiError((function(){return n&&n(),c.Snackbar.close(s),e instanceof r.ServerError?c.Snackbar.fail(t):l.Modal.close(),p.Notify.error(e.message||u.intl.formatMessage({id:"EQfnGr",defaultMessage:"We were unable to complete your request."})),e}))(e)};var m=(function(){function e(e,t,n,s){this.initialIsConfidentialFolder=e,this.teamName=n,this.folderName=o.filename(t),this.parentFolderName=s,this.topMostLevelFolder=""===s,this.folderSnippet=a.Emstring.em_snippet(this.folderName,15),this.parentFolderSnippet=a.Emstring.em_snippet(this.parentFolderName,15),this.teamSnippet=a.Emstring.em_snippet(this.teamName,d.SNIPPET_SIZES.DISPLAY_NAME)}return e.prototype.getActionString=function(){var e=a.Emstring.em_snippet(this.teamName,d.SNIPPET_SIZES.DISPLAY_NAME),t=this.topMostLevelFolder?u.intl.formatMessage({id:"xbrdNQ",defaultMessage:"Share with {team_name}"},{team_name:e}):u.intl.formatMessage({id:"CcpVyl",defaultMessage:"Share"});return this.initialIsConfidentialFolder?t:u.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"})},e.prototype.getTitleContent=function(){return this.initialIsConfidentialFolder?this.topMostLevelFolder?u.intl.formatMessage({id:"XmdmiQ",defaultMessage:"Share “{folder_name}” with everyone at {team_name}?"},{folder_name:this.folderSnippet,team_name:this.teamSnippet}):u.intl.formatMessage({id:"o2uL8S",defaultMessage:"Share “{folder_name}” with everyone who can access “{parent_folder_name}”?"},{folder_name:this.folderSnippet,parent_folder_name:this.parentFolderSnippet}):this.topMostLevelFolder?u.intl.formatMessage({id:"fYJ2Zy",defaultMessage:"Remove members of {team_name}?"},{team_name:this.teamSnippet}):u.intl.formatMessage({id:"qioX4z",defaultMessage:"Remove members of “{folder_name}” folder?"},{folder_name:this.parentFolderSnippet})},e.prototype.getBodyContent=function(){var e;return e=this.initialIsConfidentialFolder?this.topMostLevelFolder?u.intl.formatMessage({id:"+yGlTj",defaultMessage:"<strong>{folder_name}</strong> won’t be shared privately any more. Everyone at {team_name} will have access to this folder."},{team_name:this.teamSnippet,folder_name:this.folderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}}):u.intl.formatMessage({id:"qc2+KU",defaultMessage:"Everyone who can access <strong>{parent_folder_name}</strong> will be able to access this folder."},{parent_folder_name:this.parentFolderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}}):this.topMostLevelFolder?u.intl.formatMessage({id:"EFGwFd",defaultMessage:"Members of {team_name} won’t be able to access <strong>{folder_name}</strong>."},{team_name:this.teamSnippet,folder_name:this.folderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}}):u.intl.formatMessage({id:"8x9N0T",defaultMessage:"Members of <strong>{parent_folder_name}</strong> folder won’t be able to access <strong>{folder_name}</strong>."},{parent_folder_name:this.parentFolderSnippet,folder_name:this.folderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}}),s.default.createElement("div",null,s.default.createElement("div",{className:"confirmation-modal__content"},e),s.default.createElement("br",null))},e.prototype.syncSnackMessage=function(e){return e?u.intl.formatMessage({id:"YFmCHZ",defaultMessage:"Removing members from <strong>{folder_name}</strong>…"},{folder_name:this.folderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}}):this.topMostLevelFolder?u.intl.formatMessage({id:"4xzuPe",defaultMessage:"Sharing <strong>{folder_name}</strong> with everyone…"},{folder_name:this.folderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}}):u.intl.formatMessage({id:"DI9fEf",defaultMessage:"Sharing <strong>{folder_name}</strong> with members of <strong>{parent_folder_name}</strong>…"},{folder_name:this.folderSnippet,parent_folder_name:this.parentFolderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}})},e.prototype.completeSnackMessage=function(e){return e?u.intl.formatMessage({id:"r445sC",defaultMessage:"Members removed from <strong>{folder_name}</strong>."},{folder_name:this.folderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}}):this.topMostLevelFolder?u.intl.formatMessage({id:"a5EQjJ",defaultMessage:"<strong>{folder_name}</strong> shared with everyone."},{folder_name:this.folderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}}):u.intl.formatMessage({id:"67McYW",defaultMessage:"<strong>{folder_name}</strong> shared with members of <strong>{parent_folder_name}</strong>."},{folder_name:this.folderSnippet,parent_folder_name:this.parentFolderSnippet,strong:function(e){return s.default.createElement("strong",{style:{fontWeight:500}},e)}})},e.prototype.failSnackMessage=function(e){return e?u.intl.formatMessage({id:"otsE6R",defaultMessage:"Too many members to restrict access. Try adding specific people to a new folder."}):u.intl.formatMessage({id:"Z4c55e",defaultMessage:"Couldn’t share folder. Try sharing again."})},e})();t.SetInheritedMembersUIConfidentialModalContentGenerator=m;var h=function(e,t,n,r,a,o,l){var c=this;this.getButtonText=function(){return c.isDowngrading?u.intl.formatMessage({id:"/sfVvH",defaultMessage:"Change access"}):c.isTsdPlusOne?u.intl.formatMessage({id:"g7vg1d",defaultMessage:"Remove everyone"}):u.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"})},this.getConfirmModalTitleString=function(){return c.isRelinquishment?u.intl.formatMessage({id:"amnrJj",defaultMessage:"Remove yourself from “{parent_folder}”?"},{parent_folder:c.parentFolderName}):c.isDowngrading?u.intl.formatMessage({id:"x01mJ5",defaultMessage:"Change how members can access “{current_folder}”?"},{current_folder:c.currentFolderName}):c.isTsdPlusOne?u.intl.formatMessage({id:"sSJ+PD",defaultMessage:"Remove everyone at {team_name}?"},{team_name:c.teamName}):u.intl.formatMessage({id:"F23jdQ",defaultMessage:"Remove a member of “{parent_folder}”?"},{parent_folder:c.parentFolderName})},this.getConfirmModalTitle=function(){var e,t={current_folder:c.currentFolderName,parent_folder:c.parentFolderName,team_name:c.teamName,b:function(e){return s.default.createElement("b",{style:{fontWeight:500}},e)}};return e=c.isRelinquishment?i.defineMessage({id:"ANxsmU",defaultMessage:"<b>Remove yourself from “{parent_folder}”?</b>"}):c.isDowngrading?i.defineMessage({id:"fG6HZx",defaultMessage:"<b>Change how members can access “{current_folder}”?</b>"}):c.isTsdPlusOne?i.defineMessage({id:"7gnJT/",defaultMessage:"<b>Remove everyone at {team_name}?</b>"}):i.defineMessage({id:"tAFtaB",defaultMessage:"<b>Remove a member of “{parent_folder}”?</b>"}),u.intl.formatMessage(e,t)},this.getConfirmModalContent=function(){var e,t={member_name:c.memberName,parent_folder:c.parentFolderName,current_folder:c.currentFolderName,team_name:c.teamName,b:function(e){return s.default.createElement("b",{style:{fontWeight:500}},e)},br:s.default.createElement("br",null)};return e=c.isRelinquishment?i.defineMessage({id:"cnygcw",defaultMessage:"You won’t be able to see future changes to this shared folder, and new members of <b>{parent_folder}</b> won’t have access to this folder automatically."}):c.isTsdPlusOne?c.isDowngrading?i.defineMessage({id:"vEpMWb",defaultMessage:"{member_name} will only be able to view this folder, and new {team_name} members won’t be able to access it automatically.{br}To add more people to this folder in the future, you’ll need to invite them directly."}):i.defineMessage({id:"Zhhud8",defaultMessage:"{team_name} members won’t be able to see future changes to <b>{current_folder}</b> automatically.{br}To give people access to this folder in the future, you’ll need to invite them directly."}):c.isDowngrading?i.defineMessage({id:"oAiPnw",defaultMessage:"{member_name} will only be able to view this folder, and new members of <b>{parent_folder}</b> won’t be able to access it automatically.{br}To add more people to this folder in the future, you’ll need to invite them directly."}):i.defineMessage({id:"TioE81",defaultMessage:"{member_name} and new members of the <b>{parent_folder}</b> folder, won’t be able to see future changes to this shared folder.{br}To add more people to this folder in the future, you’ll need to invite them directly."}),u.intl.formatMessage(e,t)},this.getSnackBarRemovingString=function(){var e={b:function(e){return s.default.createElement("b",{style:{fontWeight:500}},e)},current_folder:c.currentFolderName},t=c.isDowngrading?i.defineMessage({id:"0Lmb+Y",defaultMessage:"Changing access for <b>{current_folder}</b>…"}):c.memberIsGroup?i.defineMessage({id:"hpOZFA",defaultMessage:"Removing members from <b>{current_folder}</b>…"}):i.defineMessage({id:"tbN3jw",defaultMessage:"Removing member from <b>{current_folder}</b>…"});return u.intl.formatMessage(t,e)},this.getSnackBarCompleteString=function(){var e={b:function(e){return s.default.createElement("b",{style:{fontWeight:500}},e)},current_folder:c.currentFolderName},t=c.isDowngrading?i.defineMessage({id:"srndH4",defaultMessage:"Access changed for <b>{current_folder}</b>."}):c.memberIsGroup?i.defineMessage({id:"bnI+zs",defaultMessage:"Members removed from <b>{current_folder}</b>."}):i.defineMessage({id:"GWzQpn",defaultMessage:"Member removed from <b>{current_folder}</b>."});return u.intl.formatMessage(t,e)},this.getSnackBarFailString=function(){return c.isDowngrading?u.intl.formatMessage({id:"5Yzfj9",defaultMessage:"Couldn’t change access. Try changing access again."}):c.memberIsGroup?u.intl.formatMessage({id:"NCQATi",defaultMessage:"Couldn’t remove members. Try removing them again."}):u.intl.formatMessage({id:"jHXRss",defaultMessage:"Couldn’t remove member. Try removing them again."})},this.isDowngrading=e,this.teamName=t,this.parentFolderName=n,this.currentFolderName=r,this.memberName=a,this.isTsdPlusOne=""===n,this.memberIsGroup=o,this.isRelinquishment=l};t.SingleInheritedUserAccessChangeModalContentGenerator=h})),define("modules/clean/sharing/views/member_list",["require","exports","tslib","immutable","classnames","react","modules/clean/sharing/access_level","modules/clean/sharing/api/types/metadata","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/views/inherited_members","modules/clean/sharing/views/member_list_item","modules/clean/sharing/views/viewer_info","modules/clean/sharing/ui_util","modules/clean/viewer","modules/core/i18n","modules/clean/sharing/views/wrapped_group_viewers_maker","modules/clean/react/pass/store","modules/clean/integrations/data/store","react-redux","modules/clean/sharing/ui_util","spectrum-sharing/utils/logging"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingMemberList=void 0,i=n.__importDefault(i);var M=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderMembersListItem=function(e,n,s){var i=e.memberKey(),o=t.isLinkVisitor(e,n),c=t.props.groupSeenStateInfo[e.memberId()]?t.renderWrappedGroupViewersElement(e):void 0,u=t.props.canUpdateConfidentiality&&e.is_inherited,p=!!u||t.props.canRelinquishMembership;return r.default.createElement(d.SharingMemberListItem,{hasLinkMetadata:t.props.hasLinkMetadata,canInviteMembers:t.props.canInviteMembers,canRelinquishMembership:p,contentInfo:t.props.contentInfo,wrappedGroupViewersElement:c,isInheritedMember:s,isMemberActionPending:t.props.pendingMemberAction.has(i),isPresent:t.props.shouldShowPassUI&&t.isMemberCurrentlyViewing(e),key:i,member:e,user:t.props.user,onAccessChangeInBubbleMenu:function(n){var s=n===l.MEMBER_ACTION.REMOVE,i=n===l.MEMBER_ACTION.MANAGE_LINK_ACCESS,r=!s&&a.isLowerAccess(e.access_type,n),c=t.props.contentInfo.isSharedFolder()?e.inherited_access_type:e.access_type,d=s||r&&c&&a.isLowerAccess(c,n);if(r&&t.props.onShowDowngradeBanner&&t.props.onShowDowngradeBanner(),u&&d){var p=t.props.ownerTeamName,m={new_access:n,old_access:e.access_type,inherited_access:c};return E.logTiburonEvent(t.props.contentInfo,t.props.user.id,v.TiburonEventName.SelectChangeMemberPermission,m),t.props.actionHandler.handleInheritedMemberAccessChange(e,p,r,r?n:void 0)}if(i&&o){var h="writer"===e.access_type?"editor":"viewer";m={access_level:h};return E.logTiburonEvent(t.props.contentInfo,t.props.user.id,v.TiburonEventName.ClickManageAccess,m),t.props.actionHandler.handleLinkSettingsClick({isLinkOnly:!1,linkAccessLevel:h})}return t.props.actionHandler.handleMemberAccessChange(e,n)},isLinkVisitor:o})},t}return n.__extends(t,e),t.prototype.render=function(){var e=p.makeMemberSortCmp(this.props.user,this.props.presentAccountIds||s.Set(),this.shouldSortUsingPassRules()),t=this.membersByInheritance(),n=t.get(!1);n&&(n=n.sort(e));var i=t.get(!0);i&&(i=i.sort(e));var a=null;return this.props.areMembersFullyLoaded||(a=r.default.createElement("div",{className:"sharing-member-list__loading c-loader u-mar-horizontal-auto u-l-b"},h.intl.formatMessage({id:"A0CVFo",defaultMessage:"Loading more members..."}))),r.default.createElement(S.Provider,{store:_.initStoreForIntegration(this.props.user.id)},r.default.createElement("div",{className:"sharing-member-list"},this.renderInheritedUI(n,i),a))},t.prototype.shouldSortUsingPassRules=function(){var e=g.passStore.getPassPermissions(this.props.contentInfo.extras.fileId);return null!=e&&(e.canReadPresence||e.canReadSeenState)},t.prototype.renderInheritedUI=function(e,t){var n=this,a=s.Set(this.getLinkVisitors()),o=this.renderInheritedMembers(a,t),l=null;e&&e.count()>0&&(l=r.default.createElement("div",null,e.map((function(e){return n.renderMembersListItem(e,a)})).toArray()));var c=i.default({"o-list-ui":!0});return r.default.createElement("ul",{className:c},o,l)},t.prototype.renderInheritedMembers=function(e,t){var n=this,s=this.props,i=s.isConfidentialFolder,a=s.ownerTeamName;if(this.shouldShowInherited()&&a&&!i)return r.default.createElement(c.InheritedMembers,{actionHandler:this.props.actionHandler,canUpdateConfidentiality:this.props.canUpdateConfidentiality,contentInfo:this.props.contentInfo,memberCounts:this.props.memberCounts,members:t?t.toArray():[],ownerTeamName:a,showTsdAccessVisibility:this.props.showTsdAccessVisibility},t&&t.map((function(t){return n.renderMembersListItem(t,e,!0)})))},t.prototype.getLinkVisitors=function(){return this.props.linkMembers.concat(this.props.guestMembers)},t.prototype.isLinkVisitor=function(e,t){return e instanceof o.UserMembershipInfo&&t.contains(e)},t.prototype.isMemberCurrentlyViewing=function(e){return!this.memberIsAssumed(e)&&(e instanceof o.UserMembershipInfo&&this.props.presentAccountIds&&this.props.presentAccountIds.has(e.account_id))},t.prototype.memberIsAssumed=function(e){return e instanceof o.UserMembershipInfo&&e.account_id===this.props.user.account_id&&m.Viewer.get_viewer().is_assume_user_session},t.prototype.dedupUsersAndLinkVisitors=function(e,t){var n=s.Map();return t.forEach((function(e){n=n.set(e.memberKey(),e)})),n.merge(e)},t.prototype.membersByInheritance=function(){var e=this,t=this.getLinkVisitors(),n=function(t){return e.shouldShowInherited()&&t.is_inherited},i=this.props.membership;if(!i)return t.length>0?s.List(t).groupBy(n):s.Map();var r=i.groups,a=i.invitees,o=i.users,l=this.dedupUsersAndLinkVisitors(o,t);return r.valueSeq().concat(a.valueSeq(),l.valueSeq()).groupBy(n)},t.prototype.shouldShowInherited=function(){var e=this.props.actionHandler.getSharingInfo(),t=!!e.parentSharedFolderId();return e.isUserOnOwnerTeam()&&t},t.prototype.extractGroupSeenStateAndViewers=function(e){var t=this,n=this.props.groupSeenStateInfo[e.memberId()],s=[];return this.props.presentAccountIds&&(s=n.map((function(e){return new u.ViewerInfo(e)})).filter((function(e){return null!=e.time_last_seen||t.props.presentAccountIds.has(e.account_id)}))),{singleGroupSeenStateInfo:n,viewers:s}},t.prototype.renderWrappedGroupViewersElement=function(e){var t=this.extractGroupSeenStateAndViewers(e).viewers;return t.length?f.WrappedGroupViewersMaker.make(t,this.props.presentAccountIds):{element:null,elementText:""}},t.displayName="SharingMemberList",t.defaultProps={disabled:!1,groupSeenStateInfo:{},guestMembers:[],linkMembers:[]},t})((r=n.__importDefault(r)).default.Component);t.SharingMemberList=M})),define("modules/clean/sharing/views/member_list_item",["require","exports","tslib","classnames","react","modules/clean/avatar/avatar_with_default","modules/clean/em_string","modules/clean/avatar/initials_avatar","modules/clean/avatar/size","spectrum-sharing/utils/sharing_constants","modules/clean/datetime/datetime","modules/clean/react/pass/utils","modules/clean/react/title_bubble","modules/clean/sharing/share_modal_dropdown_util","modules/clean/sharing/api/types/metadata","modules/clean/static_urls","modules/core/i18n","modules/core/user_i18n","spectrum-sharing/components/member_row/index","modules/clean/sharing/access_level","modules/clean/sharing/strings","spectrum-sharing/utils/sharing_constants","modules/clean/integrations/profile_card_popover","modules/clean/integrations/integration_popover","modules/clean/integrations/data/store","react-redux","typescript/component_libraries/deep-integrations/src/async","spectrum/button/index","modules/clean/integrations/data/selectors","modules/clean/react/sticky_position"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v,M,y,C,b,I,T,k,w,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingMemberListItem=t.SharingMemberListItemElement=void 0,s=n.__importDefault(s),i=n.__importDefault(i),r=n.__importDefault(r),_=n.__importStar(_);var N=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popoverGroup=new C.IntegrationPopoverGroup,t.onMemberRowChange=function(e,n){t.props.onAccessChangeInBubbleMenu(n)},t.openProfileCard=function(){t.popoverRef&&t.popoverRef.openProfileCard()},t}return n.__extends(t,e),t.prototype.shouldLinkToGroup=function(){return this.props.member instanceof h.GroupMembershipInfo&&(!!this.props.member.same_team&&(!!this.props.user.is_team_admin||!!this.props.member.is_member&&this.props.member.group_management_type!==h.GroupManagementType.system_managed))},t.prototype.linkToGroup=function(e,t,n){var r="/team#groups/"+e.group_id,a=s.default({"u-font-meta":!n,"sharing-member-info__group-name-link":!0,"sharing-member-info__display-name-title":n});return i.default.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:a,title:e.group_name},t)},t.prototype.renderAvatar=function(e,t){var n=this,s=this.props.member.displayName()||"",a=this.getAvatarInitials(),c=t?"SQUARE":"CIRCLE",d=this.props,p=d.member,m=d.user,f=d.contentInfo,_=d.isPresent,S=d.isProfileCardEnabled,E=u.AnonymousViewerUtils.isAnonymousUserId(p.memberId())?p.memberId():s,M=i.default.createElement("div",{className:"o-flag__fix"},i.default.createElement(r.default,{dimension:l.AvatarSize.MEDIUM,photoUrl:e,shape:c,defaultAvatar:i.default.createElement(o.InitialsAvatarWithColorDerivedFromName,{dimension:l.AvatarSize.MEDIUM,shape:c,initials:a,name:E,alt:""})}));if(S){var C=b.initStoreForIntegration(this.props.user.id),I=void 0,w=void 0;if(p instanceof h.GroupMembershipInfo){var A=p,N="";this.shouldRenderGroupCount()&&(N=g.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:p.member_count})),I={avatarType:"group",targetGroup:{gid:A.group_id,groupName:A.displayName(),message:N}}}else if(p instanceof h.InviteeMembershipInfo){var L=p;I={avatarType:"invited_person",targetUser:{accountId:L.contact,displayName:L.displayName(),familiarName:L.displayName(),accessType:v.ACCESS_NAME[L.access_type],email:L.contact,photoUrl:e||void 0}}}else if(p instanceof h.UserMembershipInfo){var P=p;I={avatarType:"joined_member",targetUser:{accountId:P.account_id,displayName:P.displayName()||P.email()||"",familiarName:P.displayName(),accessType:v.ACCESS_NAME[P.access_type],isViewer:P.account_id===this.props.user.account_id,email:P.email(),photoUrl:e||void 0}},w=P.time_last_seen}var F={".tag":f.isFolder()?"folder":"file",id:T.fulfilled(f.idForLink()),name:f.name()};if(I)return i.default.createElement(y.ProfileCardPopover,{popoverRef:function(e){return n.popoverRef=e},popoverGroup:this.popoverGroup,integrationStore:C,avatarInfo:I,entryPoint:"share_sheet",file:this.props.hasLinkMetadata?F:void 0,seenState:_?this.getPresentText():this.getLastSeenText(w),viewerId:m.id,positioning:"right",upsellPositioning:"right",portalParentElement:document.querySelector("body")||void 0,maxCalendarEventsToRender:1,autoRePosition:!0},i.default.createElement(k.Button,{variant:"circular"},M))}return M},t.prototype.getDisplayName=function(e,t){var n;this.props.member.displayName()&&(n=this.props.member.displayName()),n=void 0!==n?n:"";var s=this.getLastSeenText(e);this.props.isPresent?s=this.getPresentText():e&&(s=this.getLastSeenText(e));var i=this.getDisabledMessage(t),r=0,o=0;s&&(r=new a.Emstring("  ·  "+s).length),i&&(o=new a.Emstring("  ·  "+i).length);var l=c.SNIPPET_SIZES.DISPLAY_NAME-r-o,d=a.Emstring.em_snippet(n,l);return this.shouldLinkToGroup()&&!this.shouldRenderGroupCount()?this.linkToGroup(this.props.member,d,!0):d},t.prototype.getAvatarInitials=function(){var e=this.props.member.displayName()||"";return _.getInitials(e)},t.prototype.getPresentText=function(){return g.intl.formatMessage({id:"BMhlbR",defaultMessage:"Viewing now"})},t.prototype.getLastSeenText=function(e){var t="";return e&&(t=g.intl.formatMessage({id:"uIg+ju",defaultMessage:"Viewed {time_str}"},{time_str:d.ago(e)})),t},t.prototype.getDisabledMessage=function(e){var t="";return e&&e.disabled&&(t=g.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"})),t},t.prototype.getOffTeamMessage=function(e){var t="",n=e&&!e.email;return!this.props.user.is_team||this.props.member.same_team||n||(t=g.intl.formatMessage({id:"x48gqV",defaultMessage:"Outside your Dropbox team"})),t},t.prototype.getMemberDetails=function(e,t){var n;return e?n=this.shouldLinkToGroup()?this.linkToGroup(this.props.member,e,!1):e:t&&t.email&&t.email_verified&&(n=t.email),n},t.prototype.isAllowedToRelinquishMembership=function(){return this.props.member.memberId()===this.props.user.account_id&&this.props.canRelinquishMembership},t.prototype.getOptionGroup=function(){for(var e=[],t="",n=v.ACCESS_NAME[this.props.member.access_type],s=0,i=m.getMemberActionInfo(this.isAllowedToRelinquishMembership());s<i.length;s++){var r=i[s],a=r[0],o=r[1];this.props.member.access_type===o.value&&(t=o.value);var l=this.getOptionGroupOption(a,o);l&&e.push(l)}var c=e.find((function(e){return e.apiId===M.MEMBER_ACTION.MANAGE_LINK_ACCESS}));return c&&(e=[c]),{id:"optionGroup"+this.props.member.memberId(),label:n,options:e,selectedApiId:t,enabled:!this.props.isMemberActionPending}},t.prototype.getOptionGroupOption=function(e,t){if(t.value===M.MEMBER_ACTION.MANAGE_LINK_ACCESS&&this.props.isLinkVisitor)return{apiId:t.value,label:t.title,tooltip:g.intl.formatMessage({id:"Ja6XYU",defaultMessage:"Change or remove their access in link settings"}),disabled:!1};if(m.shouldShowMemberAction(e,t.value,this.props.member.access_type,this.props.member.permissions,this.isAllowedToRelinquishMembership())){var n=this.props.contentInfo.isFolder()?t.folder_description:t.file_description,s=t.value===M.MEMBER_ACTION.REMOVE?"red":t.value===E.ACCESS_LEVEL.READER?"border":"default";return{apiId:t.value,label:t.title,tooltip:n||"",variant:s}}},t.prototype.renderSeenStateInfo=function(e,t){var n=g.intl.formatDate(t,{day:"numeric",month:"short",year:"numeric"}),s=g.intl.formatTime(t,{hour:"numeric",minute:"numeric"});return i.default.createElement(p.TitleBubble,{content:i.default.createElement("div",null,n,s&&i.default.createElement("br",null),s),className:"timestamp-tooltip",children:i.default.createElement("span",null,e),position:A.StickyPosition.BOTTOM,isTargetPositionFixed:!0})},t.prototype.shouldRenderGroupCount=function(){return this.props.member instanceof h.GroupMembershipInfo&&this.props.member.member_count},t.prototype.render=function(){var e,t,n=this.props.member,s=void 0,r=!1,a=void 0,o=void 0,l="";if(n instanceof h.UserMembershipInfo){if(l=n.account_id,!(s=n.account))return null;a=s.profile_photo_url,e=n.time_last_seen}else n instanceof h.GroupMembershipInfo&&(l=n.group_id,r=!0,"team"===n.group_type&&(a=f.static_url("/static/images/icons/team_24@2x-vflR8kGKs.png")),this.shouldRenderGroupCount()&&(o=g.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:n.member_count})));return this.props.wrappedGroupViewersElement&&this.props.wrappedGroupViewersElement.element?t=this.props.wrappedGroupViewersElement.element:this.props.isPresent?t=this.getPresentText():e&&(t=this.renderSeenStateInfo(this.getLastSeenText(e),e)),i.default.createElement(S.MemberRow,{id:l,avatarUrl:a||"",avatarElement:this.renderAvatar(a,r),initialAvatarShape:r?"square":"circle",displayName:this.getDisplayName(e,s),disabledMessage:this.getDisabledMessage(s),description:this.getMemberDetails(o,s),passString:t,offTeamMessage:this.getOffTeamMessage(s),present:this.props.isPresent,initials:this.getAvatarInitials(),loadingSpinnerVisible:this.props.isMemberActionPending,optionGroup:this.getOptionGroup(),onChange:this.onMemberRowChange,variant:this.props.isInheritedMember?"borderless":"default",onClickDetails:this.props.isProfileCardEnabled?this.openProfileCard:void 0,onClickDisplayName:this.props.isProfileCardEnabled?this.openProfileCard:void 0})},t.displayName="SharingMemberListItemElement",t.defaultProps={canInviteMembers:!1,canRelinquishMembership:!1,disabled:!1,isPresent:!1,isViewOnly:!1},t})(i.default.Component);t.SharingMemberListItemElement=N,t.SharingMemberListItem=I.connect((function(e){return{isProfileCardEnabled:w.isProfileCardInShareSheetEnabled(e)}}))(N)})),define("modules/clean/sharing/views/modal_content_spectrum",["require","exports","tslib","modules/core/browser","classnames","react","modules/clean/analytics","modules/clean/contacts/util","modules/clean/filepath/filepath","modules/clean/react/bubble_dropdown_v2","modules/clean/react/components/css","ts-keycode-enum","modules/clean/react/async/loadable","modules/clean/react/pass/constants","modules/clean/sharing/ui_util","modules/clean/sharing/gating_util","modules/clean/sharing/content_manager","modules/clean/sharing/views/constants","modules/clean/sharing/views/share_modal_header_section","modules/clean/sharing/views/member_list","modules/clean/sharing/views/share_modal_contacts_section","modules/clean/sharing/views/share_modal_footer_link_section","modules/clean/sharing/views/share_modal_pointer_mode","modules/clean/web_timing_logger","modules/clean/sharing/views/share_modal/contacts_error_banner","modules/clean/sharing/views/share_modal/sharing_modal_no_permissions_section","modules/core/i18n","spectrum-sharing/components/confidential_folder_section/index","modules/clean/sharing/views/share_modal/inform_owner_update_section","spectrum-sharing/components/sharing_modal_banner/index","spectrum-sharing/components/sharing_modal_message_field/index","spectrum-sharing/components/scooter_loader/index","spectrum-sharing/utils/logging","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/views/share_modal_evolution/share_modal_evolution","modules/clean/sharing/access_level","modules/clean/sharing/ui_util"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v,M,y,C,b,I,T,k,w,A,N,L,P,F,O,R,x){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODES=t.ShareModalContentSpectrum=void 0,s=n.__importStar(s),i=n.__importDefault(i),r=n.__importDefault(r),o=n.__importDefault(o),l=n.__importStar(l),C=n.__importStar(C),Object.defineProperty(t,"MODES",{enumerable:!0,get:function(){return _.MODES}});var D=p.Loadable({loader:function(){return new Promise((function(t,n){e(["modules/clean/sharing/views/comments_integrated_footer_section"],t,n)})).then(n.__importStar).then((function(e){return e.CommentsIntegratedFooterSection}))}}),U=(function(t){function c(){var s=null!==t&&t.apply(this,arguments)||this;return s.isGoldenGateTeamOverLimit=function(){return h.shouldEnforceMemberLimits(s.props.user,s.props.isTeamSharedFolder,s.props.isFolderInsideTeamFolderTree)&&(null!=s.props.memberCounts?s.props.memberCounts.total_unique_users:0)>=f.GoldenGate.SHARING_TOTAL_LIMIT},s.handleCheckChanged=function(e){s.props.actionHandler.changeCreateCommentCheckbox(e)},s.handleLogTiburonEvent=function(e,t,i){var r=s.props.contentInfo.extras,o=r.modalSessionId,l=r.origin;a.ShareTibEventLogger.log(t,e,l,n.__assign(n.__assign({},i),{modal_session_id:o}))},s.handleMessageChanged=function(e){s.props.actionHandler.changeRecipientMessage(e.target.value)},s.linkSectionProps=function(){return{actionHandler:s.props.actionHandler,contentInfo:s.props.contentInfo,mode:s.props.mode,user:s.props.user,onLinkSettingsClick:s.props.onLinkSettingsClick,closeModalHandler:s.props.onModalCloseClick,isLinkMetadataLoaded:s.props.isLinkMetadataLoaded,isTeamSharedFolder:s.props.isTeamSharedFolder,canShareLink:s.props.canShareLink,permissions:s.props.sharingPermissions}},s._addEveryoneGroup=function(){return s.contactsSection.addExternalContacts([o.default.teamGroupInfoToContact(s.props.teamGroupInfo)])},s.headerSectionProps=function(){return{ref:s.setHeaderSectionRef,actionHandler:s.props.actionHandler,contentInfo:s.props.contentInfo,contentNameMessage:s.props.contentNameMessage,contentNameMessageLevel:s.props.contentNameMessageLevel,canEdit:s.props.canEdit,isTeamSharedFolder:s.props.isTeamSharedFolder,isFolderInsideTeamFolderTree:s.props.isFolderInsideTeamFolderTree,isInContentManager:s.props.isInContentManager,isConfidentialFolder:s.props.isConfidentialFolder,isContentNameFocused:s.props.isContentNameFocused,isCreatingNewFolder:s.props.isCreatingNewFolder,isMetadataLoaded:s.props.isMetadataLoaded,initialContentName:s.props.initialContentName,onModalCloseClick:s.props.onModalCloseClick,onSettingsButtonClick:s.props.onSettingsClick,onContentNameInputChange:s.handleContentNameInputChange,onContentNameInputKeyUp:s.handleContentNameInputKeyUp,ownerTeam:s.props.ownerTeam,sharingInfo:s.props.actionHandler.getSharingInfo(),showPassFileSettings:s.props.showPassFileSettings,user:s.props.user}},s.contactsSectionProps=function(){return{ref:s.setContactsSectionRef,actionHandler:s.props.actionHandler,contentInfo:s.props.contentInfo,canInviteEditor:s.props.sharingPermissions.canInviteEditor(),canInviteViewer:s.props.sharingPermissions.canInviteViewer(),context:"spectrum",focusOnMount:s.props.focusOnMount&&s.props.contentInfo.pathExists(),initialTypeaheadTokens:s.getInitialTypeaheadTokens(),isFolderInsideTeamFolderTree:s.props.isFolderInsideTeamFolderTree,isInContentManager:s.props.isInContentManager,isTeamSharedFolder:s.props.isTeamSharedFolder,memberCountWithRecipients:s.props.memberCountWithRecipients,ownerTeam:s.props.ownerTeam,shouldLogContactSearch:!0,typeaheadPlaceholder:s.getTypeaheadPlaceholder(),user:s.props.user,showContactImport:!s.props.isTeamSharedFolder,teamGroupInfo:s.props.isTeamSharedFolder?s.props.teamGroupInfo:void 0}},s.handleContentNameInputChange=function(e){s.props.actionHandler.handleContentNameChange(e.currentTarget.value)},s.handleContentNameInputKeyUp=function(e){e.keyCode===u.Key.Enter&&s.contactsSection&&s.contactsSection.focusTypeaheadInput()},s.handleShareButtonClick=function(t){return n.__awaiter(s,void 0,void 0,(function(){var s,i,r,a,o,l,c,d;return n.__generator(this,(function(u){switch(u.label){case 0:if(s=this.props,i=s.actionHandler,r=s.recipientMessage,a=s.user,!this.props.isCreatingNewFolder)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,i.setContentNameAndSendShare(this.contactsSection)];case 2:return[2,u.sent()];case 3:return o=u.sent(),this.headerSection.selectContentNameInput(),this.props.onSetContentNameAndSendShareFail&&this.props.onSetContentNameAndSendShareFail(o),[3,4];case 4:return[3,10];case 5:return(l=r&&i.getSharingInfo().isShareMessageAsCommentChecked()&&!i.getSharingInfo().permissionsObj().canShareMessageAsComment())?[4,this.extractUserContacts()]:[3,7];case 6:return d=u.sent(),[3,8];case 7:d=[],u.label=8;case 8:return c=d,[4,i.sendShare(this.contactsSection)];case 9:if(u.sent(),l)return[2,new Promise((function(t,n){e(["modules/clean/sharing/actions/comments2_integration"],t,n)})).then(n.__importStar).then((function(e){(0,e.processAndDispatchAddCommentAction)(t,a,r,c)}))];u.label=10;case 10:return[2]}}))}))},s.setContactsSectionRef=function(e){s.contactsSection=e},s.setHeaderSectionRef=function(e){s.headerSection=e},s}return n.__extends(c,t),c.prototype.componentDidMount=function(){this.logTTI()},c.prototype.componentDidUpdate=function(e,t){return this.logTTI()},c.prototype.logTTI=function(){return this.props.contentInfo.extras.origin===F.SHARE_ACTION_ORIGIN_TYPE.GRANT_ACCESS&&this.props.mode!==_.MODES.LOADING&&C.mark_time_to_interactive(),this.props.mode===_.MODES.LINK_ONLY&&this.props.isLinkMetadataLoaded?this.props.actionHandler.logIfHaventBefore(P.TiburonEventName.ViewLinkOnlyModal):(this.props.mode!==_.MODES.LOADING&&this.props.actionHandler.logIfHaventBefore(P.TiburonEventName.ViewShareModal),this.props.mode===_.MODES.MEMBERSHIP?this.props.actionHandler.logIfHaventBefore(P.TiburonEventName.MemberListLoaded,{member_count:this.props.actionHandler.getSharingInfo().memberNum()}):void 0)},c.prototype.render=function(){var e=""+this.props.mode;this.props.mode===_.MODES.MEMBERSHIP&&(this._shouldRenderMainMembershipMode()||(e="no-main-membership"));var t=i.default("unified-share-modal","unified-share-modal--"+e,"unified-share-modal--two-link",{"unified-share-modal--loading":e===_.MODES.LOADING});switch(this.props.mode){case _.MODES.LINK_ONLY:return r.default.createElement("div",{className:t},r.default.createElement(S.ShareModalHeaderSection,n.__assign({},this.headerSectionProps())),this.props.linkOnlyReason!==_.LINK_ONLY_REASON.LINKS_PAGE&&this.renderLinkOnlyNoPermissionSection(),this.renderLinkOnlyFooter());case _.MODES.POINTER:return r.default.createElement(y.ShareModalPointerMode,{className:t,sharingInfo:this.props.sharingInfo,onClickCloseButton:this.props.onModalCloseClick});case _.MODES.LOADING:return r.default.createElement("div",{className:t},r.default.createElement(S.ShareModalHeaderSection,n.__assign({},this.headerSectionProps(),{isLoading:!0})),this._renderMainLoading());case _.MODES.EVOLUTION:return r.default.createElement("div",{className:t},r.default.createElement(O.ShareModalEvolution,n.__assign({},this.shareModalEvolutionProps())));default:return r.default.createElement("div",{className:t},r.default.createElement(S.ShareModalHeaderSection,n.__assign({},this.headerSectionProps())),this._renderToSection(),r.default.createElement(b.ContactsErrorBanner,n.__assign({},this.props.contactsError)),this.shouldRenderConfidentialFolderSection()&&r.default.createElement(k.ConfidentialFolderSection,n.__assign({},this.confidentialFolderSectionProps())),this.shouldRenderInformOwnerUpdateSection()&&r.default.createElement(w.InformOwnerUpdateSection,null),this._renderMainSection(),this.shouldRenderFooterSection()&&this.renderFooterSection())}},c.prototype._renderToSection=function(){return this.props.showContentManagerBridge?this._renderContentManagerBridge():this.props.sharingPermissions.canInvite()?this.isGoldenGateTeamOverLimit()?this._renderOverLimitSection():r.default.createElement(v.ShareModalContactsSection,n.__assign({},this.contactsSectionProps())):r.default.createElement(I.SharingModalNoPermissionsSection,n.__assign({},this.noPermissionsSectionProps()))},c.prototype.noPermissionsSectionProps=function(){return{isFolder:this.props.contentInfo.isFolder(),isTeamSharedFolder:this.props.isTeamSharedFolder,members:this.props.members,teamName:this.props.ownerTeam&&this.props.ownerTeam.name}},c.prototype.shouldRenderContentSettingsShareButton=function(){return this.props.contentInfo.isFolder()&&this.props.contentInfo.pathExists()||this.props.contentInfo.isFile()&&this.props.showPassFileSettings||this.inShareMode()||this.props.isInContentManager},c.prototype.inShareMode=function(){return[_.MODES.SHARE,_.MODES.SHARE_SENDING].includes(this.props.mode)},c.prototype.shouldRenderFooterSection=function(){return!!this.props.isMetadataLoaded&&(this.shouldRenderLinkRowInFooter()||this.shouldRenderContentSettingsShareButton())},c.prototype.renderFooterSection=function(){var e=i.default(["unified-share-modal__section","unified-share-modal__section--footer"]);return r.default.createElement("div",{className:e},this.shouldRenderLinkRowInFooter()?this.renderLinkRowContent():this.renderRegularFooterContent())},c.prototype.shareButtonProps=function(){return{mode:this.props.mode,contentInfo:this.props.contentInfo,contactsError:this.props.contactsError,contentNameMessage:this.props.contentNameMessage,isInContentManager:this.props.isInContentManager,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,onShareButtonClick:this.handleShareButtonClick,shareButtonLabelOverride:this.props.shareButtonLabelOverride}},c.prototype.renderRegularFooterContent=function(){return r.default.createElement(D,n.__assign({sharingInfo:this.props.sharingInfo,onCheckChanged:this.handleCheckChanged,hasRecipientMessage:this.props.recipientMessage.length>0},this.shareButtonProps()))},c.prototype._shouldRenderMainMembershipMode=function(){return this.props.sharingPermissions.canInvite()||this._showSharingMemberList()},c.prototype._renderMainSection=function(){switch(this.props.mode){case _.MODES.MEMBERSHIP:return this._shouldRenderMainMembershipMode()?this._renderMainMembership():null;case _.MODES.SHARE:case _.MODES.SHARE_SENDING:return this._renderMainShare();default:return null}},c.prototype.confidentialFolderSectionProps=function(){var e=this.props,t=e.ownerTeam,n=e.contentInfo,s=e.actionHandler,i=e.sharingInfo;return{intl:T.intl,teamName:t?t.name:"",parentFolderName:s.getSharingInfo().parentFolderName(),isRestoreAccessEnabled:n.pathExists(),onRestoreAccessClick:s.handleSetConfidentialClick,showTsdAccessVisibility:i.getShowTsdAccessVisibility()}},c.prototype.shouldRenderConfidentialFolderSection=function(){return this.props.isConfidentialFolder&&this.props.canUpdateConfidentiality},c.prototype.hasOwnersThatAreNotCurrentUser=function(){var e=this,t=this.props.members;return null!=t&&t.users.filter((function(t){return t.access_type===R.ACCESS_LEVEL.OWNER&&t.team_member_id!==e.props.user.team_member_id})).size>0},c.prototype.shouldRenderInformOwnerUpdateSection=function(){return!!this.props.sharingInfo.metadata()&&(this.props.isInContentManager&&this.props.contentInfo.isFolder()&&!this.props.isTeamSharedFolder&&!this.props.isFolderInsideTeamFolderTree&&this.hasOwnersThatAreNotCurrentUser())},c.prototype._renderContentManagerBridge=function(){var e=this.props.actionHandler.getSharingInfo(),t=l.parent_dir(e.displayPath()),n=e.name(),s=g.genContentManagerBridgeUri({containingFolder:t,filenameToSelect:n}),i=r.default.createElement("span",null,T.intl.formatMessage({id:"EpLafK",defaultMessage:"You can manage access in the <link>admin console</link>."},{link:function(e){return r.default.createElement("a",{href:s.toString(),target:"_blank",rel:"noreferrer"},e)}}));return r.default.createElement(A.SharingModalBanner,{message:i})},c.prototype._renderOverLimitSection=function(){var e=T.intl.formatMessage({id:"JSd+J1",defaultMessage:"This folder is over its {member_limit}-member limit."},{member_limit:f.GoldenGate.SHARING_TOTAL_LIMIT}),t=r.default.createElement("div",null,r.default.createElement("div",null,e),r.default.createElement("div",null,T.intl.formatMessage({id:"wFsjaI",defaultMessage:"Please remove some members."})," ",r.default.createElement("a",{href:"/help/9292",target:"_blank",rel:"noopener"},T.intl.formatMessage({id:"epmnB3",defaultMessage:"Learn more."}))));return r.default.createElement(A.SharingModalBanner,{message:t})},c.prototype._renderMainLoading=function(){return r.default.createElement("div",{className:i.default(["unified-share-modal__main","unified-share-modal__section","unified-share-modal__section--no-border",this.shouldRenderFooterSection()?void 0:"unified-share-modal__main--no-footer-spectrum"])},r.default.createElement("div",{className:"unified-share-modal__loader-wrapper"},r.default.createElement("div",{className:"c-loader"},T.intl.formatMessage({id:"/DGYJM",defaultMessage:"Loading..."}))))},c.prototype.renderLinkOnlyFooter=function(){return r.default.createElement("div",{className:i.default(["unified-share-modal__section","unified-share-modal__section--footer"])},this.props.isLinkMetadataLoaded?this.renderLinkRowContent():this.renderLinkOnlyLoading())},c.prototype.renderLinkRowContent=function(){if(!this.props.isInContentManager)return r.default.createElement(M.ShareModalFooterLinkSection,n.__assign({},this.linkSectionProps()))},c.prototype.getLinkOnlyReasonMessage=function(){switch(this.props.linkOnlyReason){case _.LINK_ONLY_REASON.INSIDE_SHARED_FOLDER:return r.default.createElement("span",null,T.intl.formatMessage({id:"vApw15",defaultMessage:"This folder can only be shared as a link because it’s in a shared folder."})," ",r.default.createElement("a",{href:"/help/1931",target:"_blank",rel:"noopener noreferrer"},T.intl.formatMessage({id:"bjsWDZ",defaultMessage:"Learn more"})));case _.LINK_ONLY_REASON.CONTAINS_SHARED_FOLDER:return r.default.createElement("span",null,T.intl.formatMessage({id:"0er2Ve",defaultMessage:"This folder can only be shared as a link because it contains a shared folder."})," ",r.default.createElement("a",{href:"/help/1931",target:"_blank",rel:"noopener noreferrer"},T.intl.formatMessage({id:"bjsWDZ",defaultMessage:"Learn more"})));case _.LINK_ONLY_REASON.TOTAL_MOUNTS_EXCEEDED:return r.default.createElement("span",null,x.getTotalMountsExceededMsg());case _.LINK_ONLY_REASON.HOME_MOUNTS_EXCEEDED:return r.default.createElement("span",null,x.getHomeMountsExceededMsg());case _.LINK_ONLY_REASON.TREE_SIZE_EXCEEDED:return r.default.createElement("span",null,x.getTreeSizeExceededMsg());default:return T.intl.formatMessage({id:"RSBaM6",defaultMessage:"This folder can only be shared as a link."})}},c.prototype.renderLinkOnlyNoPermissionSection=function(){var e;return e=this.props.actionHandler.getSharingInfo().isOSXPackage()?T.intl.formatMessage({id:"vJ3Igb",defaultMessage:"This package file can only be shared as a link."}):this.getLinkOnlyReasonMessage(),r.default.createElement(A.SharingModalBanner,{message:e})},c.prototype.renderLinkOnlyLoading=function(){return r.default.createElement("div",{className:"unified-share-modal__link-info--loading"},r.default.createElement(L.ScooterLoader,{"aria-label":T.intl.formatMessage({id:"qxfDnR",defaultMessage:"Loading..."})}))},c.prototype._showSharingMemberList=function(){return!!this.props.sharingInfo.hasNonSelfMembers()||(this.props.isFolderInsideTeamFolderTree?1===this.props.members.users.size||!this.props.isConfidentialFolder:this.props.guestMembers.length>0||this.props.linkMembers.length>0)},c.prototype._renderMemberList=function(){return r.default.createElement("div",{className:i.default(["unified-share-modal__section","unified-share-modal__section--no-padding","unified-share-modal__section--no-border"])},r.default.createElement(E.SharingMemberList,n.__assign({},this.memberListProps())))},c.prototype.shareModalEvolutionProps=function(){return{actionHandler:this.props.actionHandler,contactsError:this.props.contactsError,contentMetadata:this.props.metadata,currentScreen:this.props.currentScreen,isEmailSending:this.props.sharingInfo.uiMode()===_.MODES.SHARE_SENDING,handleMessageChanged:this.handleMessageChanged,initialTypeaheadTokens:this.getInitialTypeaheadTokens(),isFolder:this.props.contentInfo.isFolder(),isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,logTiburonEvent:this.handleLogTiburonEvent,memberListProps:this.memberListProps(),onCloseButtonClick:this.props.onModalCloseClick,onSettingsButtonClick:this.props.onSettingsClick,ownerTeam:this.props.ownerTeam,recipientMessage:this.props.recipientMessage,sharingInfo:this.props.sharingInfo,showScreen:this.props.actionHandler.showScreen,user:this.props.user,guestMembers:this.props.guestMembers,linkMembers:this.props.linkMembers,showPassFileSettings:this.props.showPassFileSettings}},c.prototype.memberListProps=function(){return{actionHandler:this.props.actionHandler,areMembersFullyLoaded:this.props.areMembersFullyLoaded,canInviteMembers:this.props.sharingPermissions.canInvite(),hasLinkMetadata:this.props.isLinkMetadataLoaded,canRelinquishMembership:this.props.canRelinquishMembership,canUpdateConfidentiality:this.props.canUpdateConfidentiality,contentInfo:this.props.contentInfo,disabled:this.props.showContentManagerBridge,groupSeenStateInfo:this.props.groupSeenStateInfo,guestMembers:this.props.guestMembers,isConfidentialFolder:this.props.isConfidentialFolder,linkMembers:this.props.linkMembers,memberCounts:this.props.memberCounts,membership:this.props.members,ownerTeamName:this.props.ownerTeam?this.props.ownerTeam.name:void 0,pendingMemberAction:this.props.pendingMemberAction,presentAccountIds:this.props.presentAccountIds,shouldShowPassUI:this.props.isPassEnabled&&m.fetchingStatusIsSuccessful(this.props.passFetchingStatus),user:this.props.user}},c.prototype._renderTeamSharedFolderBanner=function(){var e;return e=null!=this.props.teamGroupInfo?[r.default.createElement("p",{className:"u-mar-top-xxl"},r.default.createElement("a",{onClick:this._addEveryoneGroup},T.intl.formatMessage({id:"DnaiNC",defaultMessage:"Add everyone at {team_name}"},{team_name:this.props.ownerTeam.name}))),r.default.createElement("p",null,T.intl.formatMessage({id:"ix7pHj",defaultMessage:"Or, add groups to this team folder."})+" ",r.default.createElement("a",{onClick:this.props.onCreateGroupCallback},T.intl.formatMessage({id:"tthwuJ",defaultMessage:"Create a group"})))]:r.default.createElement("p",{className:"u-mar-top-xxl"},T.intl.formatMessage({id:"IjevGW",defaultMessage:"Add groups to this team folder."})+" ",r.default.createElement("a",{onClick:this.props.onCreateGroupCallback},T.intl.formatMessage({id:"tthwuJ",defaultMessage:"Create a group"}))),r.default.createElement("div",{className:i.default(["unified-share-modal__section","unified-share-modal__section--no-border"])},r.default.createElement("div",{className:i.default(["unified-share-modal__no-members-banner","u-font-center","u-font-meta","u-font-center","u-font-meta"])},e))},c.prototype._renderMainMembership=function(){var e=i.default(["unified-share-modal__main",this._isPassInfoLoaded()?"unified-share-modal__main--pass-loaded":void 0]);return this._showSharingMemberList()?r.default.createElement("div",{className:e},this._renderMemberList()):this.props.isTeamSharedFolder?r.default.createElement("div",{className:e},this._renderTeamSharedFolderBanner()):r.default.createElement("div",{className:e},r.default.createElement(N.SharingModalMessageField,n.__assign({},this.messageFieldProps())))},c.prototype.messageFieldProps=function(){return{placeholder:T.intl.formatMessage({id:"LQgYei",defaultMessage:"Add a message (optional)"}),onChange:this.handleMessageChanged,value:this.props.recipientMessage}},c.prototype._renderMainShare=function(){return r.default.createElement("div",{className:"unified-share-modal__main"},!this.props.isTeamSharedFolder&&r.default.createElement(N.SharingModalMessageField,n.__assign({},this.messageFieldProps())))},c.prototype._isPassInfoLoaded=function(){return m.fetchingStatusIsComplete(this.props.passFetchingStatus)},c.prototype.shouldRenderLinkRowInFooter=function(){return this.props.mode!==_.MODES.SHARE&&this.props.mode!==_.MODES.SHARE_SENDING&&!this.props.isInContentManager},c.prototype.getInitialTypeaheadTokens=function(){var e=this.props,t=e.recipientTokens,n=e.initialRecipientTokens;return t?n.concat(t):n},c.prototype.getTypeaheadPlaceholder=function(){return this.props.isTeamSharedFolder?T.intl.formatMessage({id:"GLQxt4",defaultMessage:"Group names"}):this.props.user.is_team?T.intl.formatMessage({id:"BoLL3S",defaultMessage:"Email, name, or group"}):T.intl.formatMessage({id:"EUp7Eo",defaultMessage:"Email or name"})},c.prototype.extractUserContacts=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return[4,this.props.actionHandler.recipientsChange(this.contactsSection.getContacts())];case 1:return e.sent(),[2,this.contactsSection.getContacts().filter((function(e){var t=e.dbx_account_id,n=e.email;return void 0!==t||void 0!==n})).map((function(e){var t=e.dbx_account_id,n=e.email,s=e.name;return t?{accountId:t,displayName:s}:{email:n,displayName:s}}))]}}))}))},c.displayName="ShareModalContentSpectrum",c.defaultProps={headerId:"unified-share-modal-title",initialRecipientTokens:[],isTeamSharedFolder:!1,mode:_.MODES.MEMBERSHIP,onFolderSettingsClick:null,guestMembers:[],linkMembers:[],onCreateGroupCallback:function(){s.redirect("/team#groups/newgroup")}},c})(r.default.Component),B=d.requireCssWithComponent(U,["/static/css/spectrum/index.web-vfliw9181.css","/static/js/spectrum-sharing/index.web-vflGwppdS.css","/static/css/react/contacts_tokenizer-vfl6f1mr3.css","/static/css/scooter/scooter-scoped-vflpl9JSl.css","/static/css/sharing/share_modal-vflViKRiT.css","/static/css/modal-vflp8UKYY.css"],[c.BubbleDropdown]);t.ShareModalContentSpectrum=B})),define("modules/clean/sharing/views/righteous_modal_link_info",["require","exports","tslib","modules/core/i18n","classnames","react","modules/clean/clipboard_v2","modules/clean/sharing/views/constants","modules/clean/react/util","spectrum-sharing/components/sharing_modal_footer_link/index","spectrum-sharing/components/scooter_loader/index","spectrum/button/index","spectrum/icon_acl/index","spectrum/colorized_icon/index","modules/clean/sharing/ui_notifications_util","modules/clean/sharing/link_description","modules/clean/sharing/views/share_modal/sharing_modal_upsell_premium_sharing","modules/clean/sharing/ui_util","spectrum-sharing/utils/sharing_constants","spectrum-sharing/utils/logging","spectrum-sharing/utils/logging","modules/clean/sharing/views/share_modal_evolution/utils/logging"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v,M){"use strict";function y(e){var t=S.COLORS.COLOR_INK_60;switch(e){case"editor":return r.default.createElement(m.ColorizedIcon,{color:t},r.default.createElement(p.IconAcl,{name:"link-edit"}));default:return r.default.createElement(m.ColorizedIcon,{color:t},r.default.createElement(p.IconAcl,{name:"link-view"}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.RighteousModalLinkInfo=t.getSpectrumLinkIcon=void 0,i=n.__importDefault(i),r=n.__importDefault(r),s.intl.formatMessage({id:"tyzuDO",defaultMessage:"Link copied. Allows editing."}),s.intl.formatMessage({id:"6z63dh",defaultMessage:"Link copied. Allows viewing."}),t.getSpectrumLinkIcon=y;var C=(function(e){function t(t){var n=e.call(this,t)||this;return n.getSpectrumLinkText=function(e){switch(e){case"editor":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),r.default.createElement("br",null),n.renderLinkDescription());case"viewer":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),r.default.createElement("br",null),n.renderLinkDescription());default:return n.renderLinkDescription()}},n.setTextInputRef=function(e){return n.urlField=e,e},n.getSpectrumNoLinkText=function(e){switch(e){case"editor":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),r.default.createElement("br",null),s.intl.formatMessage({id:"QfMy5I",defaultMessage:"No link created yet."}));case"viewer":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),r.default.createElement("br",null),s.intl.formatMessage({id:"QfMy5I",defaultMessage:"No link created yet."}));default:return s.intl.formatMessage({id:"le+3CZ",defaultMessage:"No link created yet"})}},n.onClickButtonCreateLink=function(){n.setState({creatingLink:!0},(function(){return n.handleCreateLinkClicked()}))},n.handleCreateLinkClicked=function(){n.props.actionHandler&&n.props.actionHandler.createSharedLink(n.props.linkAccessLevel)},n.getSpectrumLoadingText=function(e){switch(e){case"editor":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),r.default.createElement("br",null),s.intl.formatMessage({id:"d3Gvwr",defaultMessage:"Creating edit link..."}),r.default.createElement(d.ScooterLoader,null));case"viewer":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),r.default.createElement("br",null),s.intl.formatMessage({id:"rnuyM8",defaultMessage:"Creating view link..."}),r.default.createElement(d.ScooterLoader,null));default:return}},n.handleCopyLinkClicked=function(){if(!n.state.showingUrl){var e={};if(n.props.linkMetadata){e.visibility=n.props.linkMetadata.link_permissions.resolved_visibility,e.expiration=n.props.linkMetadata.expires;var t=M.getLinkKey(n.props.linkMetadata.url);t.kind!==v.LinkKeyTypes.NONE&&(e[t.kind]=t.val,e.link_type=t.link_type)}n.props.contentInfo&&(_.logTiburonEvent(n.props.contentInfo,n.props.user.id,E.TiburonEventName.ClickTibCopyLink,e),_.logTiburonEvent(n.props.contentInfo,n.props.user.id,E.TiburonEventName.CopySharedLink,e))}return l.setStatePromise(n,{showingUrl:!n.state.showingUrl,creatingLink:!1}).then((function(){if(n.urlField){var e=n.urlField;e.focus(),e.select(),n.clipboard.do_copy()}}))},n.state={showingUrl:!1,creatingLink:!1},n.clipboard=null,n}return n.__extends(t,e),t.prototype.getLinkabilityState=function(){var e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo(),t=this.props.permissions;return e&&e.isCloudDoc()?this.getLinkabilityStateForCloudDoc():this.props.isTeamSharedFolder?o.LinkabilityStates.CANT_LINK_TEAM_FOLDER:(e.isFolder()||!e.isMetadataLoaded()||t.canCreateViewLink())&&(this.props.canShareLink||this.props.mode===o.MODES.LINK_ONLY)?o.LinkabilityStates.CAN_LINK:t.canInvite()?o.LinkabilityStates.INVITE_NO_LINK:o.LinkabilityStates.NO_INVITE_NO_LINK},t.prototype.getLinkabilityStateForCloudDoc=function(){var e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();return this.props.linkMetadata?o.LinkabilityStates.CAN_LINK:"editor"===this.props.linkAccessLevel&&e.permissionsObj().canCreateEditLink()?o.LinkabilityStates.CAN_LINK:"viewer"===this.props.linkAccessLevel&&e.permissionsObj().canCreateViewLink()?o.LinkabilityStates.CAN_LINK:o.LinkabilityStates.NO_INVITE_NO_LINK},t.prototype.componentWillMount=function(){var e=this;this.clipboard=new a.ClipboardV2((function(){return e.props.modalClose(),h.showCopyLinkSuccessSnackbar(e.props.linkMetadata.url,e.props.linkAccessLevel)}),(function(){h.sharingNotificationError(s.intl.formatMessage({id:"YHoriR",defaultMessage:"Unable to copy the link, please copy manually"}))}))},t.prototype.spectrumClassNames=function(){return i.default("scl-sharing-modal-footer-link--no-border")},t.prototype.render=function(){var e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo(),t=this.getLinkabilityState();if(t===o.LinkabilityStates.NO_INVITE_NO_LINK)return this.renderSpectrumCantLinkOrShare();if(t===o.LinkabilityStates.INVITE_NO_LINK)return this.renderSpectrumCantLinkCDM();if(t===o.LinkabilityStates.CANT_LINK_TEAM_FOLDER)return this.renderSpectrumCantLinkTeamFolder();if(this.props.linkMetadata){var n=void 0;return n=this.state.showingUrl?this.renderSpectrumCopyLink():this.renderSpectrumLink(),r.default.createElement(r.default.Fragment,null,n,e.hasCreatedLink()&&this.renderUpsellPremiumSharing())}return this.state.creatingLink?r.default.createElement(r.default.Fragment,null,this.renderSpectrumLoading(),this.renderUpsellPremiumSharing()):t===o.LinkabilityStates.CAN_LINK?this.renderSpectrumNoLink():null},t.prototype.getSpectrumLinkNoAvailableCloudDocText=function(e){switch(e){case"editor":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),r.default.createElement("br",null),s.intl.formatMessage({id:"5tpMRl",defaultMessage:"Link not available"}));case"viewer":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),r.default.createElement("br",null),s.intl.formatMessage({id:"5tpMRl",defaultMessage:"Link not available"}));default:return s.intl.formatMessage({id:"5tpMRl",defaultMessage:"Link not available"})}},t.prototype.renderSpectrumCantLinkOrShare=function(){return r.default.createElement(c.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:y(this.props.linkAccessLevel),body:this.getSpectrumLinkNoAvailableCloudDocText(this.props.linkAccessLevel)})},t.prototype.getSpectrumCantLinkCDMCloudDocText=function(e){switch(e){case"editor":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),r.default.createElement("br",null),s.intl.formatMessage({id:"3VVFir",defaultMessage:"Link not available. To share, invite specific people."}));case"viewer":return r.default.createElement("span",null,r.default.createElement("b",null,s.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),r.default.createElement("br",null),s.intl.formatMessage({id:"3VVFir",defaultMessage:"Link not available. To share, invite specific people."}));default:return s.intl.formatMessage({id:"3VVFir",defaultMessage:"Link not available. To share, invite specific people."})}},t.prototype.renderSpectrumCantLinkCDM=function(){var e=r.default.createElement("a",{href:"/help/business/team-folders",target:"_blank",rel:"noopener noreferrer"},s.intl.formatMessage({id:"sGKSF8",defaultMessage:"Learn more"}));return r.default.createElement(c.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:y(this.props.linkAccessLevel),body:this.getSpectrumCantLinkCDMCloudDocText(this.props.linkAccessLevel),actions:e})},t.prototype.renderSpectrumCantLinkTeamFolder=function(){var e=r.default.createElement("a",{href:"/help/business/team-folders",target:"_blank",rel:"noopener noreferrer"},s.intl.formatMessage({id:"sGKSF8",defaultMessage:"Learn more"}));return r.default.createElement(c.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:y(this.props.linkAccessLevel),body:this.getSpectrumLinkNoAvailableCloudDocText(this.props.linkAccessLevel),actions:e})},t.prototype.renderLinkDescription=function(){var e;if(this.props.linkMetadata){var t=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();e=f.formatLinkDescriptionPlainText(this.props.linkMetadata,t.isUserOnOwnerTeam(),!0)}return e},t.prototype.renderSpectrumLink=function(){var e=r.default.createElement("span",{className:"copy-link-button"},s.intl.formatMessage({id:"DhomU6",defaultMessage:"Copy link"}));return r.default.createElement(c.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:y(this.props.linkAccessLevel),body:this.getSpectrumLinkText(this.props.linkAccessLevel),actions:r.default.createElement(u.Button,{className:"button-as-link copy-link-container",key:"copy",variant:"borderless",onClick:this.handleCopyLinkClicked},e)})},t.prototype.renderSpectrumCopyLink=function(){var e=null!=this.props.linkMetadata?this.props.linkMetadata.url:"";return r.default.createElement(c.SharingModalFooterLinkCopy,{className:this.spectrumClassNames(),icon:y(this.props.linkAccessLevel),sharedLinkUrl:e,labelSharedLinkUrl:s.intl.formatMessage({id:"9s4M13",defaultMessage:"Shared link URL"}),textButton:s.intl.formatMessage({id:"CgREwE",defaultMessage:"Hide link"}),textInputRef:this.setTextInputRef,onClickButton:this.handleCopyLinkClicked})},t.prototype.renderSpectrumNoLink=function(){return r.default.createElement(c.SharingModalFooterLinkCreate,{className:this.spectrumClassNames(),icon:y(this.props.linkAccessLevel),statusNoLinkCreated:this.getSpectrumNoLinkText(this.props.linkAccessLevel),textButtonCreateLink:s.intl.formatMessage({id:"/nFZR2",defaultMessage:"Create link"}),onClickButtonCreateLink:this.onClickButtonCreateLink})},t.prototype.renderSpectrumLoading=function(){return r.default.createElement(c.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:y(this.props.linkAccessLevel),body:this.getSpectrumLoadingText(this.props.linkAccessLevel)})},t.prototype.renderUpsellPremiumSharing=function(){var e=this,t=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();return t.isShareModalUpsellPremiumSharing()&&t.shareModalUpsellPremiumSharingVariant()&&!t.isCloudDoc()?r.default.createElement(g.SharingModalUpsellPremiumSharing,{user:this.props.user,contentInfo:this.props.contentInfo,variant:t.shareModalUpsellPremiumSharingVariant(),hasIncrementedCounter:t.hasIncrementedUpsellCounter(),hasSeenCounter:t.hasSeenUpsellCounter(),onSetSeenCounter:function(t){e.props.actionHandler&&e.props.actionHandler.setSeenUpsellCounterPref(t)}}):void 0},t.displayName="RighteousModalLinkInfo",t})(r.default.Component);t.RighteousModalLinkInfo=C})),define("modules/clean/sharing/views/share_modal_contacts_section",["require","exports","tslib","react","spectrum-sharing/components/sharing_modal_contacts_field/index","modules/clean/sharing/access_level","modules/clean/sharing/views/share_contacts_tokenizer","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/strings","modules/core/i18n"],(function(e,t,n,s,i,r,a,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalContactsSection=void 0;var d=(function(e){function t(t){var n=e.call(this,t)||this;return n.finishLogging=function(e){return n.shareContactsTokenizerRef.finishLogging(e)},n.setShareContactsTokenizerRef=function(e){n.shareContactsTokenizerRef=e},n.onTypeaheadTokensChange=function(e){n.setState({typeaheadTokens:e})},n.handleAccessTypeChange=function(e){n.props.actionHandler.changeRecipientAccess(e)},n.filterContacts=function(e){return n.props.isTeamSharedFolder?!!e.group_id:n.props.isInContentManager||e.email!==n.props.user.email},n.state={typeaheadTokens:[]},n}return n.__extends(t,e),t.prototype.getContacts=function(){return this.shareContactsTokenizerRef.getContacts()},t.prototype.focusTypeaheadInput=function(){return this.shareContactsTokenizerRef.focusTypeaheadInput()},t.prototype.addExternalContacts=function(e){return this.shareContactsTokenizerRef.addExternalContacts(e)},t.prototype.render=function(){var e=this.props.isTeamSharedFolder?c.intl.formatMessage({id:"aTEm56",defaultMessage:"Add groups:"}):c.intl.formatMessage({id:"bLfZ53",defaultMessage:"To:"}),t=c.intl.formatMessage({id:"CIbq3r",defaultMessage:"This file type can only be shared with view access"});return s.default.createElement(i.SharingModalContactsField,{contactsField:this.renderContactsField(),labelledAccessTypes:this.getAccessTypes(),onAccessTypeChange:this.handleAccessTypeChange,selectedAccessType:this.getSelectedAccessType(),toLabel:e,showNoEditTooltip:this.props.contentInfo.isFile()&&!this.props.canInviteEditor,noEditText:t})},t.prototype.getAccessTypes=function(){var e=[],t=function(e){return c.intl.formatMessage({id:"+f5spv",defaultMessage:"change permission for users to {label}"},{label:e})},n=l.ACCESS_NAME,s=this.props.contentInfo&&this.props.contentInfo.isFolder()?l.MEMBER_ACTION_FOLDER:this.props.actionHandler.getSharingInfo().isCloudDoc()?l.MEMBER_ACTION_CLOUD_DOC:l.MEMBER_ACTION_FILE;return this.props.canInviteEditor&&e.push({apiId:r.ACCESS_LEVEL.WRITER,ariaLabel:t(r.ACCESS_LEVEL.WRITER),label:n[r.ACCESS_LEVEL.WRITER],details:s[o.MEMBER_ACTION.MAKE_EDITOR]}),this.props.canInviteViewer&&e.push({apiId:r.ACCESS_LEVEL.READER,ariaLabel:t(r.ACCESS_LEVEL.READER),label:n[r.ACCESS_LEVEL.READER],details:s[o.MEMBER_ACTION.MAKE_VIEWER]}),e},t.prototype.getSelectedAccessType=function(){for(var e,t=this.props.actionHandler.getSharingInfo(),n=0,s=this.getAccessTypes();n<s.length;n++){var i=s[n];i.apiId===t.recipientAccess()&&(e=i)}return e},t.prototype.renderContactsField=function(){return s.default.createElement(a.ShareContactsTokenizer,{ref:this.setShareContactsTokenizerRef,actionHandler:this.props.actionHandler,typeaheadTokens:this.state.typeaheadTokens,onTypeaheadTokensChange:this.onTypeaheadTokensChange,context:this.props.context,focusOnMount:this.props.focusOnMount,initialTypeaheadTokens:this.props.initialTypeaheadTokens,typeaheadPlaceholder:this.props.typeaheadPlaceholder,user:this.props.user,filterContacts:this.filterContacts,shouldLogContactSearch:this.props.shouldLogContactSearch,showContactImport:this.props.showContactImport,teamGroupInfo:this.props.teamGroupInfo})},t.displayName="ShareModalContactsSection",t})((s=n.__importDefault(s)).default.Component);t.ShareModalContactsSection=d})),define("modules/clean/sharing/views/share_contacts_tokenizer",["require","exports","tslib","react","modules/core/browser","modules/clean/contacts/config","modules/clean/analytics","modules/clean/static_urls","modules/clean/react/flag","modules/clean/react/image","spectrum-sharing/components/sharing_contact_token/index","spectrum-sharing/utils/index","spectrum-sharing/components/member_row/index","spectrum/typeahead/index","modules/clean/contacts/data_v2","modules/clean/contacts/contact","modules/clean/contacts/util","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/clean/profile_services/popup_handler","modules/clean/teams/admin/widgets/groups/util","modules/core/assert","modules/core/notify","modules/core/i18n","react-dom","modules/core/user_i18n"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E,v,M,y,C,b,I){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareContactsTokenizer=t.ThirdPartyImport=t.ExpandImport=void 0,s=n.__importStar(s),i=n.__importStar(i),r=n.__importStar(r),g=n.__importDefault(g),_=n.__importDefault(_),b=n.__importStar(b),I=n.__importStar(I);var T=u.ContactsTokenizer(f.Contact),k=(function(){function e(){}return e.prototype.getKey=function(){return"expand-importer"},e})();t.ExpandImport=k;var w=(function(){function e(e){var t=e.provider,n=e.connected;this.provider=t,this.connected=n}return e.prototype.getKey=function(){return"third-party-import"+this.provider},e})();t.ThirdPartyImport=w;var A=function(e){return e instanceof k?s.createElement("div",{className:"typeahead-option"},s.createElement(l.Flag,{leftAttachment:s.createElement(c.Image,{className:"u-pad-right-s",src:o.static_url("/static/images/icons/icon-import-vflOL9sCs.png"),srcHiRes:o.static_url("/static/images/icons/icon-import@2x-vfluE8TBO.png")})},s.createElement("div",{className:"option-primary option-only"},C.intl.formatMessage({id:"H3lmrv",defaultMessage:"Import contacts"})))):e instanceof w?(t=e,s.createElement(P,{import:t})):(function(e){var t=e.name||e.email,n=e.group_id?v.getInitials(e.name):I.getInitials(t),i=e.group_id?C.intl.formatMessage({id:"XMHn5C",defaultMessage:"{count, plural, one{# member} other{# members}}"},{count:e.group_size||0}):e.email;return s.createElement(p.MemberRow,{id:e.getKey(),initials:n,avatarUrl:e.photo_url,description:i,displayName:t,tag:"div",variant:"narrow"})})(e);var t},N=(function(e){function t(t){var n=e.call(this,t)||this;return n.updateRecipientData=function(){n.props.actionHandler.recipientsChange(n.props.typeaheadTokens,n.typeaheadInput.value)},n.filterContacts=function(e){return n.props.filterContacts?n.props.filterContacts(e):e.email!==n.props.user.email},n.handleTypeaheadOnChange=function(e){var t=T.tokenizeDelimitedInputs(e);if(t.length>0)return n.validateAndAddTokens(t),void n.typeahead.setState({inputValue:""});n.showSuggestions(e),n.updateRecipientData()},n.handleExpandImport=function(){n.tokenizeRawInput();var e=[];Array.from(_.default.importable_contact_services()).map((function(t){if(n.profile_services){var s=new w({provider:t,connected:n.profile_services.service_is_connected(t)});e.push(s)}})),n.setState({typeaheadSuggestions:e})},n.handleThirdPartyImport=function(e){var t;if(M.assert((t=e.provider,Array.from(_.default.importable_contact_services()).includes(t)),"invalid party contact provider "+e.provider),!n.profile_services||!n.profile_services.service_is_connected(e.provider))return n.link_handler.auth_service_with_user(e.provider,n.props.user.id,(function(e){return S.ProfileServicesLinkingHandler.show_import_notifications(e)}));var s=C.intl.formatMessage({id:"D/rjjz",defaultMessage:"You’re already connected to {service_name}"},{service_name:_.default.to_name(e.provider)});y.Notify.success(s)},n.handleTypeaheadSelect=function(e,t,s){if(e||s)if(e instanceof k)n.handleExpandImport();else if(e instanceof w)n.handleThirdPartyImport(e);else{e&&n._logTokenSelect(e,t,s);var i=e?[e]:T.tokenizeAllRawInputs(s);n.validateAndAddTokens(i),n.setState({typeaheadSuggestions:[]})}},n.handleTypeaheadRemoveToken=function(e){var t=n.props.typeaheadTokens.filter((function(t){return t!==e}));n._logTokenChangeEvent(e,!0),n.props.onTypeaheadTokensChange(t)},n.renderTypeaheadTokenContent=function(e){var t=e.name||e.email;n._logTokenChangeEvent(e,!1,{did_select_suggestion:!1});var i=n._getValidation(e);return s.createElement(d.SharingContactToken,{avatarUrl:e.photo_url,displayName:t,validation:i})},n.setTypeaheadRef=function(e){n.typeahead=e},n.setTypeaheadInputRef=function(e){n.typeaheadInput=e},n.finishLogging=function(e){var t=n.contactsDataSource.getStats().numLocalContacts;if(n._flush_unfinished_queries_cache(),n.shouldLogSearch())return n.contact_search_logger.log_records(n.props.user.id,e,t)},n._logTokenSelect=function(e,t,s){var i={search_expr:s,selected_pos:t||0,num_query_results:n.state.typeaheadSuggestions.length,did_select_suggestion:!0};n._logTokenChangeEvent(e,!1,i)},n._logTokenChangeEvent=function(e,t,s){if(void 0===t&&(t=!1),void 0===s&&(s={}),n.contact_search_logger&&e){if(!t){var r={context:n._getLoggingContext(),contact_type:e.type,contact_id:e.getContactID(),contact_name:e.name,sort_variant:null,event_ts:L(i.performance(),"now",(function(e){return e.now()}))};for(var a in s)s[a]&&(r[a]=s[a]);return n.contact_search_logger.add_record(r)}var o=e.getContactID();return o?n.contact_search_logger.flag_record_as_removed(o):void 0}},n._logSearchComplete=function(e,t,s){if(void 0===s&&(s=!0),n.shouldLogSearch()&&e){var r=i.performance().now(),a=n.unfinished_contact_search_queries[e];if(a){var o=a.begin_time;!("ttfr"in a)&&t>0&&(a.ttfr=Math.floor(r-o)),s?(a.local_duration=Math.floor(r-o),a.num_local_results=t):(a.remote_duration=Math.floor(r-o),a.num_additional_remote_results=t),a.num_results+=t;return n.contactsDataSource.isSearchLocalOnly()&&s||!s?(a=n._prepareSearchStatsForLogging(a,e,r,!0),n.contact_search_logger.add_timing_record(a),n.contact_search_logger.count_search(a.is_slow),delete n.unfinished_contact_search_queries[e]):void 0}}},n._logSearchBegin=function(e){if(n.shouldLogSearch()&&e){var t=i.performance().now();return n._flush_unfinished_queries_cache(t),n.unfinished_contact_search_queries[e]={begin_time:t,num_results:0}}},n._flush_unfinished_queries_cache=function(e){if(n.shouldLogSearch()){for(var t in null==e&&(e=i.performance().now()),n.unfinished_contact_search_queries)if(n.unfinished_contact_search_queries[t]){var s=n.unfinished_contact_search_queries[t];e&&e-s.begin_time<r.CONTACTS_SEARCH_PREEMPTED_THRESHOLD&&(s.is_preempted=!0),s=n._prepareSearchStatsForLogging(s,t,e,!1),n.contact_search_logger.add_timing_record(s),n.contact_search_logger.count_search(s.is_slow)}return n.unfinished_contact_search_queries={}}},n._prepareSearchStatsForLogging=function(e,t,s,i){var r=e.begin_time;e.duration=Math.floor(s-r),"ttfr"in e?e.is_slow=e.ttfr>100:i&&0===e.num_results?e.is_slow=!1:e.is_slow=e.duration>100;var a=n.contactsDataSource.getStats().localContactsDownloadedTime;return e.started_before_download=null==a||r<a,"is_preempted"in e||(e.is_preempted=!1),e.context=n._getLoggingContext(),e.query_length=t.length,e.is_finished=i,e},n._getLoggingContext=function(){var e="spectrum_tokenizer";return null!=n.props.context&&(e+="_"+n.props.context),e},n.state={typeaheadSuggestions:[]},n.link_handler=new S.ProfileServicesLinkingHandler,n.profile_services=null,n.props.teamGroupInfo||n.props.showContactImport&&n.props.user&&(n.profile_services=S.LinkedProfileServices.get_linked_profile_services_for_user(n.props.user.id)),n}return n.__extends(t,e),t.prototype.getContacts=function(){return this.tokenizeRawInput(),this.props.typeaheadTokens},t.prototype.focusTypeaheadInput=function(){b.findDOMNode(this.typeaheadInput).focus()},t.prototype.addExternalContacts=function(e){this.validateAndAddTokens(e)},t.prototype.componentDidMount=function(){this.contactsDataSource=this.initContactsDataSource(this.props.user,this.filterContacts),this.props.shouldLogContactSearch&&(this.contact_search_logger=new a.ContactSearchLogger(this._getLoggingContext(),this.contactsDataSource.searchModeName),this.unfinished_contact_search_queries={}),this.props.initialTypeaheadTokens&&this.props.initialTypeaheadTokens.length>0&&this.validateAndAddTokens(this.props.initialTypeaheadTokens),this.props.focusOnMount&&this.focusTypeaheadInput(),this.props.actionHandler.suggestTargets({query:"fake",force_refresh:!0})},t.prototype.componentDidUpdate=function(e,t){if(this.contactsDataSource=this.initContactsDataSource(this.props.user,this.filterContacts),this.state.typeaheadSuggestions.length>0){var n=this.state.typeaheadSuggestions[0]instanceof k;t.typeaheadSuggestions===this.state.typeaheadSuggestions||n?n&&this.typeahead.setState({suggestionsListSelectedIndex:-1}):this.typeahead.setState({suggestionsListSelectedIndex:0})}e.typeaheadTokens!==this.props.typeaheadTokens&&this.updateRecipientData()},t.prototype.tokenizeRawInput=function(){var e=this.typeaheadInput.value;if(""!==e){var t=T.tokenizeAllRawInputs(e);this.validateAndAddTokens(t),this.typeahead.setState({inputValue:""})}},t.prototype.getSuggestionRenderer=function(){return this.props.renderTypeaheadSuggestion},t.prototype.getSuggestions=function(){return this.state.typeaheadSuggestions},t.prototype.render=function(){return s.createElement(m.Typeahead,{ref:this.setTypeaheadRef,className:this.props.className,height:160,inputProps:{ref:this.setTypeaheadInputRef,disabled:this.props.disabledInput,placeholder:this.props.typeaheadPlaceholder,"aria-label":C.intl.formatMessage({id:"rQOIK5",defaultMessage:"Contact name"})},listItemHeight:48,onChange:this.handleTypeaheadOnChange,onRemoveToken:this.handleTypeaheadRemoveToken,onSelect:this.handleTypeaheadSelect,renderSuggestion:this.getSuggestionRenderer(),renderTokenContent:this.renderTypeaheadTokenContent,suggestions:this.getSuggestions(),suggestionsBuffer:0,tokens:this.createTypeaheadTokenObjects()})},t.prototype.initContactsDataSource=function(e,t){return new h.ContactsDataSourceV2(e,t,!1)},t.prototype._getValidation=function(e){var t=this.props.actionHandler.getSharingInfo().recipientAccess(),n=this.props.actionHandler.getSharingInfo().recipientValidation()[t]||{},s=e.getKey();return n[s]?n[s]:{state:"pending",msg:null}},t.prototype.getVariantForTypeaheadToken=function(e){var t=this._getValidation(e);return"invalid"===t.state?"error":"warn"===t.state?"warning":"default"},t.prototype.createTypeaheadTokenObjects=function(){var e=this;return this.props.typeaheadTokens.map((function(t){return{key:t.getKey(),variant:e.getVariantForTypeaheadToken(t),content:t}}))},t.prototype.filterExistingTokens=function(e){if(!e)return[];var t=this.props.typeaheadTokens.map((function(e){return e.getKey()}));return e.filter((function(e){return!t.includes(e.getKey())}))},t.prototype.suggestSharingTargets=function(e){var t=this;this.props.actionHandler.suggestTargets({query:e}).then((function(e){e?t.setSuggestions(t.filterExistingTokens(e.filter((function(e){return t.filterContacts(e)})))):t.typeahead.setState({suggestionsListSelectedIndex:-1})}))},t.prototype.is_server_side_contact_search_on=function(){return"ON"===this.props.actionHandler.getSharingInfo().sharingPrefs().in_server_side_contact_search_settings},t.prototype.showSuggestions=function(e){var t=this;if(this.is_server_side_contact_search_on())return this.suggestSharingTargets(e);this._logSearchBegin(e);var n=[];this.contactsDataSource.search(e,(function(s){n.push.apply(n,t.filterExistingTokens(s)),t.setSuggestions(n),t._logSearchComplete(e,(null!=s?s.length:void 0)||0,!0)}),(function(s){var i=t.filterExistingTokens(s);e===t.typeaheadInput.value&&i.length>0&&(n[n.length-1]instanceof k?n.push.apply(n,i.concat(n.pop())):n.push.apply(n,i),t.setState({typeaheadSuggestions:n})),t._logSearchComplete(e,s.length,!1)}))},t.prototype.setSuggestions=function(e){var t=e;this.props.teamGroupInfo?t.push(g.default.teamGroupInfoToContact(this.props.teamGroupInfo)):this.props.showContactImport&&t.push(new k),this.setState({typeaheadSuggestions:t})},t.prototype.validateAndAddTokens=function(e){var t=this,n=e.reduce((function(e,t){return t.pending&&t.query&&e.push(t.query),e}),[]),s=function(n){for(var s=t.props,i=s.onTypeaheadTokensChange,r=s.typeaheadTokens,a=[],o=r.map((function(e){return e.getKey()})),l=0,c=e;l<c.length;l++){var d=c[l];if(d.pending&&d.query){var u=t.contactsDataSource.normalizeQuery(d.query),p=t.determineQueryMatch(u,n[u]);p&&(d=p)}var m=d.getKey();o.includes(m)||(o.push(m),a.push(d))}i(r.concat(a))};if(!this.is_server_side_contact_search_on())return this.contactsDataSource.searchBatch(n,s,s);for(var i=this.props.typeaheadTokens.map((function(e){return e.getKey()})),r=[],a=0,o=e;a<o.length;a++){var l=o[a],c=l.getKey();i.includes(c)||(i.push(c),r.push(l))}this.props.onTypeaheadTokensChange(this.props.typeaheadTokens.concat(r))},t.prototype.determineQueryMatch=function(e,t){if(!t||!e)return null;for(var n={email:[],name:[]},s=0,i=t;s<i.length;s++){var r=i[s],a=r.email?this.contactsDataSource.normalizeQuery(r.email):null,o=r.name?this.contactsDataSource.normalizeQuery(r.name):null;e===a?n.email.push(r):e===o&&n.name.push(r)}for(var l=0,c=["email","name"];l<c.length;l++){var d=c[l];if(1===n[d].length)return n[d][0]}return null},t.prototype.shouldLogSearch=function(){return!this.is_server_side_contact_search_on()&&this.props.shouldLogContactSearch&&null!=this.contact_search_logger&&null!=(e=i.performance(),t=function(e){return e.now},null!=e?t(e):void 0);var e,t},t.displayName="ShareContactsTokenizer",t.defaultProps={disabledInput:!1,shouldLogContactSearch:!1,renderTypeaheadSuggestion:A},t})(s.Component);function L(e,t,n){return null!=e&&"function"==typeof e[t]?n(e,t):void 0}t.ShareContactsTokenizer=N;var P=(function(e){function t(t){var n=e.call(this,t)||this;return n.show_contact_import_spinner=function(e){if(n.props.import.provider===e.provider)return n.setState({showLoading:!0})},n.state={showLoading:!1},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){return this.authCompleteListenerToken=E.addAuthCompleteListener(this.show_contact_import_spinner)},t.prototype.componentWillUnmount=function(){return E.removeAuthCompleteListener(this.authCompleteListenerToken)},t.prototype.render=function(){var e=this.props.import,t=e.provider,n=e.connected,i=_.default.to_img_legacy(t),r=_.default.to_name(t);!n&&this.state.showLoading&&(r=C.intl.formatMessage({id:"MeFKtq",defaultMessage:"Importing {service_name} Contacts"},{service_name:r}));var a=n?C.intl.formatMessage({id:"2/+46g",defaultMessage:"Connected"}):"";return s.createElement("div",{className:"typeahead-option"},s.createElement(l.Flag,{leftAttachment:s.createElement(c.Image,{className:"u-pad-right-s",src:o.static_url(i[0]),srcHiRes:o.static_url(i[1])})},s.createElement("div",{className:"option-primary"},r),s.createElement("div",{className:"option-secondary u-font-meta"},a)))},t.displayName="ThirdPartyImportOption",t})(s.PureComponent)})),define("modules/clean/sharing/views/share_modal_footer_section",["require","exports","tslib","react","lodash","modules/clean/sharing/ui_util","modules/clean/sharing/views/constants","spectrum-sharing/components/sharing_modal_footer_inband/index","modules/core/i18n"],(function(e,t,n,s,i,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalFooterSection=void 0,s=n.__importDefault(s),i=n.__importStar(i);var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.isInbandFooterDisabled=function(){return this.props.isTokenizerEmpty||this.props.contactsError&&this.props.contactsError.level===r.ContactsErrorLevel.Error||!!this.props.contentNameMessage},t.prototype.render=function(){var e=this.props,t=e.mode,n=e.children,r=e.shareButtonLabelOverride;switch(t){case a.MODES.SHARE:return s.default.createElement(o.SharingModalFooterInband,{isButtonShareDisabled:this.isInbandFooterDisabled(),textButtonShare:r||(this.props.isTeamSharedFolder?l.intl.formatMessage({id:"YcxVqg",defaultMessage:"Add"}):l.intl.formatMessage({id:"CcpVyl",defaultMessage:"Share"})),onClickButtonShare:this.props.onShareButtonClick},n);case a.MODES.SHARE_SENDING:return s.default.createElement(o.SharingModalFooterInband,{isButtonShareDisabled:!0,textButtonShare:r||(this.props.isTeamSharedFolder?l.intl.formatMessage({id:"JowGoo",defaultMessage:"Adding..."}):l.intl.formatMessage({id:"WyW2Um",defaultMessage:"Sharing..."})),onClickButtonShare:i.noop},n);case a.MODES.MEMBERSHIP:return this.props.isInContentManager&&!this.props.contentInfo.pathExists()?s.default.createElement(o.SharingModalFooterInband,{isButtonShareDisabled:!1,textButtonShare:r||(this.props.isTeamSharedFolder?l.intl.formatMessage({id:"YcxVqg",defaultMessage:"Add"}):l.intl.formatMessage({id:"CcpVyl",defaultMessage:"Share"})),onClickButtonShare:this.props.onShareButtonClick}):null;default:return null}},t.displayName="ShareModalFooterSection",t})(s.default.PureComponent);t.ShareModalFooterSection=c})),define("modules/clean/sharing/views/share_modal_footer_link_section",["require","exports","tslib","react","modules/core/i18n","classnames","spectrum/button/index","modules/clean/sharing/views/righteous_modal_link_info","spectrum-sharing/components/sharing_modal_footer_link_list/index","modules/clean/sharing/views/constants"],(function(e,t,n,s,i,r,a,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalFooterLinkSection=void 0,s=n.__importDefault(s),r=n.__importDefault(r);var d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickButtonLinkSettings=function(){t.props.mode===c.MODES.LINK_ONLY?t.props.actionHandler.handleLinkSettingsClick():t.props.onLinkSettingsClick()},t}return n.__extends(t,e),t.prototype.renderSharedLinks=function(){var e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();if(e.isCloudDoc()){var t=void 0,n=void 0;return e&&e.sharedLinks()&&(t=e.editRighteousLink(),(n=e.viewRighteousLink())||(n=e.shmodelLink())),[this.renderModalLinkInfo(t,"editor"),this.renderModalLinkInfo(n,"viewer")]}var s=e.shmodelLink();return this.renderModalLinkInfo(s,"viewer")},t.prototype.renderModalLinkInfo=function(e,t){return s.default.createElement(o.RighteousModalLinkInfo,{key:t,actionHandler:this.props.actionHandler,contentInfo:this.props.contentInfo,linkMetadata:e,linkAccessLevel:t,mode:this.props.mode,user:this.props.user,isLinkMetadataLoaded:this.props.isLinkMetadataLoaded,isTeamSharedFolder:this.props.isTeamSharedFolder,canShareLink:this.props.canShareLink,permissions:this.props.permissions,modalClose:this.props.closeModalHandler})},t.prototype.renderActions=function(){var e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();if(e.sharedLinks()&&e.sharedLinks().length>0&&(!e.isCloudDoc()||e.permissionsObj().canCreateEditLink()||e.permissionsObj().canCreateViewLink()))return s.default.createElement(a.Button,{variant:"borderless",onClick:this.onClickButtonLinkSettings},i.intl.formatMessage({id:"zxECIJ",defaultMessage:"Link settings"}))},t.prototype.render=function(){var e=this,t=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();return s.default.createElement("div",{className:r.default({"unified-share-modal-two-link-model":!0,"unified-share-modal-two-link-model--upsell-enabled":t.isShareModalUpsellPremiumSharing()})},e.props.isLinkMetadataLoaded?s.default.createElement(l.SharingModalFooterLinkList,{className:r.default({"scl-sharing-modal-footer-link-list--no-border":e.props.mode===c.MODES.LINK_ONLY}),title:i.intl.formatMessage({id:"Ao5Pwf",defaultMessage:"Share a link instead"}),actions:e.renderActions()},e.renderSharedLinks()):void 0)},t.displayName="ShareModalFooterLinkSection",t})(s.default.Component);t.ShareModalFooterLinkSection=d})),define("modules/clean/sharing/views/share_modal_header_section",["require","exports","tslib","classnames","react","react-dom","spectrum-sharing/components/sharing_modal_header/index","modules/clean/react/bubble","modules/clean/sharing/views/constants","modules/clean/em_string","modules/core/i18n","modules/clean/react/icon/folder_icon","modules/clean/sharing/share_modal_icon","spectrum-sharing/utils/sharing_constants"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalHeaderSection=void 0,s=n.__importDefault(s),i=n.__importDefault(i),r=n.__importStar(r),o=n.__importDefault(o);var h=(function(e){function t(t){var n=e.call(this,t)||this;return n.handleContentNameFocus=function(){n.setState({isFocusOnContentName:!0})},n.handleContentNameBlur=function(){n.setState({isFocusOnContentName:!1})},n.setHeaderInputRef=function(e){n.headerInput=e},n.state={isFocusOnContentName:n.props.isContentNameFocused},n}return n.__extends(t,e),t.prototype.selectContentNameInput=function(){this.headerInput&&r.findDOMNode(this.headerInput.input).select()},t.prototype.render=function(){return this.props.isCreatingNewFolder&&!this.props.initialContentName?i.default.createElement(a.SharingModalHeaderInput,{inputAutoFocus:!0,ref:this.setHeaderInputRef,icon:i.default.createElement(u.SharedFolderIcon,null),inputAriaLabel:this.props.contentNameMessage,inputPlaceholder:this.state.isFocusOnContentName?void 0:d.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),onClickCloseButton:this.props.onModalCloseClick,onInputChange:this.props.onContentNameInputChange,onInputFocus:this.handleContentNameFocus,onInputBlur:this.handleContentNameBlur,onInputKeyUp:this.props.onContentNameInputKeyUp},this.shouldShowContentNameBubble()&&this.renderContentNameBubble()):i.default.createElement(a.SharingModalHeaderTitle,{closeButtonVisible:!0,icon:this.getIcon(),subTitle:!this.props.isLoading&&(this.props.subTitle||this.getMemberCountsString()),onClickCloseButton:this.props.onModalCloseClick,onClickSettingsButton:this.props.onSettingsButtonClick,settingsButtonVisible:this.props.isMetadataLoaded&&this.isContentSettingsEnabled(),title:this.getHeaderTitle()})},t.prototype.getHeaderTitle=function(){return this.props.initialContentName?this.props.initialContentName:c.Emstring.em_snippet(this.props.sharingInfo.name(),m.SNIPPET_SIZES.FILENAME)},t.prototype.isContentNameInputError=function(){return this.props.contentNameMessageLevel===l.CONTENT_NAME_MESSAGE_LEVELS.ERROR},t.prototype.shouldShowContentNameBubble=function(){return this.props.contentNameMessage&&(this.state.isFocusOnContentName||this.isContentNameInputError())},t.prototype.renderContentNameBubble=function(){return i.default.createElement(o.default,{arrow:o.default.ARROW.TOP,className:s.default("unified-share-modal__content-name__tooltip","u-pad-xs","u-font-strong",{"unified-share-modal__content-name__tooltip-error":this.isContentNameInputError()})},this.props.contentNameMessage)},t.prototype.getIcon=function(){var e=this.props.contentInfo;if(e.isFolder()){if(!e.extras.exists)return i.default.createElement(u.SharedFolderIcon,null);if(!this.props.isMetadataLoaded)return i.default.createElement(u.SimpleFolderIcon,null)}return i.default.createElement(p.ShareModalIcon,{alt:"",className:"unified-share-modal__title-icon",filename:this.props.sharingInfo.name(),isSharedFolder:e.isSharedFolder(),isFolder:e.isFolder(),isTeamSharedFolder:this.props.isTeamSharedFolder,isFolderInsideTeamFolderTree:!0===this.props.isFolderInsideTeamFolderTree,isViewOnly:!this.props.canEdit,isConfidentialFolder:this.props.isInContentManager&&this.props.isConfidentialFolder,pathExists:e.pathExists()})},t.prototype.getOutsideTeamString=function(){var e=this.props.sharingInfo,t=e.memberCounts();if(e.hasOutsideTeamMembers())return d.intl.formatMessage({id:"LrSVy3",defaultMessage:"{count, plural, one{{count} outside your Dropbox team} other{{count} outside your Dropbox team}}"},{count:t.users_outside_team})},t.prototype.getMemberCountsString=function(){var e=this.props.sharingInfo.memberNum();if(e&&!this.props.isSendingForSignature){var t=this.props.sharingInfo.memberCounts(),n=this.getOutsideTeamString(),s=t&&t.exceeds_count;return n?s?d.intl.formatMessage({id:"Ys93fl",defaultMessage:"{count, plural, one{{count}+ member ({outside_team_string})} other{{count}+ members ({outside_team_string})}}"},{count:e,outside_team_string:n}):d.intl.formatMessage({id:"JPk+XA",defaultMessage:"{count, plural, one{{count} member ({outside_team_string})} other{{count} members ({outside_team_string})}}"},{count:e,outside_team_string:n}):s?d.intl.formatMessage({id:"eaJeP5",defaultMessage:"{count, plural, one{{count}+ member} other{{count}+ members}}"},{count:e}):d.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:e})}},t.prototype.isContentSettingsEnabled=function(){return this.props.contentInfo.isFolder()&&this.props.contentInfo.pathExists()||this.props.contentInfo.isFile()&&this.props.showPassFileSettings},t.defaultProps={isLoading:!1},t.displayName="ShareModalHeaderSection",t})(i.default.Component);t.ShareModalHeaderSection=h})),define("modules/clean/sharing/views/share_modal_pointer_mode",["require","exports","tslib","react","modules/core/i18n","modules/clean/clipboard_v2","modules/clean/sharing/ui_util","modules/clean/sharing/ui_notifications_util","spectrum-sharing/utils/logging","spectrum/icon_content/index","spectrum-sharing/components/sharing_modal_header/index","spectrum-sharing/components/sharing_modal_footer_link/index"],(function(e,t,n,s,i,r,a,o,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalPointerMode=void 0;var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCopyLinkClicked=function(){t.urlInput.focus(),t.urlInput.select(),t.clipboard.do_copy(),t.logCopyEvent()},t.setTextInputRef=function(e){return t.urlInput=e,e},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.setupCopy()},t.prototype.componentDidUpdate=function(){this.setupCopy()},t.prototype.render=function(){var e=this.props,t=e.className,n=e.sharingInfo,r=e.onClickCloseButton;return s.default.createElement("div",{className:t},s.default.createElement(d.SharingModalHeaderTitle,{closeButtonVisible:!0,icon:s.default.createElement(c.IconContent,{name:"dlink-small"}),onClickCloseButton:r,title:n.name()}),s.default.createElement(u.SharingModalFooterLinkCopy,{labelSharedLinkUrl:i.intl.formatMessage({id:"vLmOAd",defaultMessage:"Shared link URL"}),isIconHidden:!0,inputProps:{autoFocus:!1},onClickButton:this.handleCopyLinkClicked,sharedLinkUrl:this.getLinkUrl(),textButton:i.intl.formatMessage({id:"L4Tupd",defaultMessage:"Copy link"}),textInputRef:this.setTextInputRef}))},t.prototype.getLinkUrl=function(){return this.props.sharingInfo.isLinkMetadataLoaded()?this.props.sharingInfo.sharedLinks()[0].url:""},t.prototype.setupCopy=function(){this.props.sharingInfo.isLinkMetadataLoaded()&&(this.clipboard=new r.ClipboardV2((function(){return o.sharingNotificationSuccess(i.intl.formatMessage({id:"z1RKgB",defaultMessage:"Link copied to clipboard"}))}),(function(){return o.sharingNotificationError(i.intl.formatMessage({id:"zMYKz7",defaultMessage:"Unable to copy the link, please copy manually"}))})))},t.prototype.logCopyEvent=function(){var e=this.props.sharingInfo.user(),t=this.props.sharingInfo.contentInfo();a.logTiburonEvent(t,e.id,l.TiburonEventName.CopySharedLink,{type:"pointer"})},t.displayName="ShareModalPointerMode",t})((s=n.__importDefault(s)).default.Component);t.ShareModalPointerMode=p})),define("modules/clean/sharing/views/sharing_settings_file_folder_policy_view",["require","exports","tslib","react","modules/core/i18n","modules/clean/sharing/sharing_settings_util","modules/clean/sharing/views/sharing_settings_policy_view","modules/clean/em_string","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants"],(function(e,t,n,s,i,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsFileFolderPolicyView=void 0,s=n.__importDefault(s);var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return this.renderPolicies()},t.prototype.renderPolicies=function(){var e=this,t=this.props.policies.map((function(t){var n=e.getPolicyDict(t);return e.renderPolicy(t,n)}));return s.default.createElement("div",null,t)},t.prototype.renderPolicy=function(e,t){var n,s,i,a,o=this;s=(n=r.getEffectivePolicyValue(e,this.props.policyUpdate,this.props.currentPolicy,this.props.showContentManagerBridge,this.props.teamPolicy,this.props.permissions))[0],i=n[1];var c=Object.keys(t.optionsDict);if(s&&!c.includes(s))throw new Error("Invalid Policy: "+s);if(t.type===l.DROPDOWN){a=this.renderDropdown(e,s,t.optionsDict,c,(function(t){o.props.onPolicyUpdate(e,t)}),!i)}else if(t.type===l.TOGGLE){a=this.renderToggle(e,s,t.optionsDict,(function(n,s){for(var i=0,r=c;i<r.length;i++){var a=r[i];t.optionsDict[a].value===n&&o.props.onPolicyUpdate(e,a)}}),!i)}return this.renderPolicyRow(e,t,i,a)},t.prototype.isTeamMemberFolder=function(){return!this.isTeamFolderTree()&&this.props.ownerTeam},t.prototype.isTeamFolderTree=function(){return this.props.isTeamSharedFolder||this.props.isFolderInsideTeamFolderTree},t.prototype.getMemberPolicyQuestion=function(){return this.isTeamFolderTree()?i.intl.formatMessage({id:"+JxbQ8",defaultMessage:"Limit who can be added as a member of folders."}):i.intl.formatMessage({id:"lUdY7W",defaultMessage:"Limit who can be added as a member of this folder."})},t.prototype.getAclUpdatePolicyQuestion=function(){return this.isTeamFolderTree()?i.intl.formatMessage({id:"8eiYiI",defaultMessage:"Choose who can add people to folders."}):i.intl.formatMessage({id:"d2BniZ",defaultMessage:"Choose who can add people to this folder."})},t.prototype.getViewerInfoPolicyDescription=function(){return this.props.ownerTeam?this.props.isFolder?i.intl.formatMessage({id:"9Ihzjr",defaultMessage:"Show who viewed files in this folder to team members and people who can edit."}):i.intl.formatMessage({id:"pPFsa4",defaultMessage:"Show who viewed this file to team members and people who can edit."}):this.props.isFolder?i.intl.formatMessage({id:"FquCbz",defaultMessage:"Show who’s viewing files in this folder to people who can edit."}):i.intl.formatMessage({id:"VloA8O",defaultMessage:"Show who’s viewing this file to people who can edit."})},t.prototype.getPolicyDict=function(e){switch(e){case l.MEMBER_POLICY:return{title:i.intl.formatMessage({id:"Z0CQak",defaultMessage:"Folder membership"}),description:this.getMemberPolicyQuestion(),optionsDict:{anyone:{label:i.intl.formatMessage({id:"m1ZBqW",defaultMessage:"Anyone"})},team:{label:i.intl.formatMessage({id:"flkJcx",defaultMessage:"Only team members"})}},type:l.DROPDOWN};case l.ACL_UPDATE_POLICY:return{title:i.intl.formatMessage({id:"qG3VMJ",defaultMessage:"Manage access"}),description:this.getAclUpdatePolicyQuestion(),optionsDict:{editors:{label:this.isTeamFolderTree()||this.isTeamMemberFolder()?i.intl.formatMessage({id:"KBoyON",defaultMessage:"Team members who can edit"}):i.intl.formatMessage({id:"CyxyyA",defaultMessage:"Folder members"}),description:this.isTeamFolderTree()||this.isTeamMemberFolder()?i.intl.formatMessage({id:"rY7b9W",defaultMessage:"Team members with edit access can add people."}):i.intl.formatMessage({id:"U8/o8J",defaultMessage:"Members with edit access can add people."})},owner:{label:this.isTeamFolderTree()?i.intl.formatMessage({id:"FRQa4i",defaultMessage:"Only Team Admins"}):i.intl.formatMessage({id:"svCMOP",defaultMessage:"Only the owner"}),description:this.isTeamFolderTree()?i.intl.formatMessage({id:"kmb+og",defaultMessage:"Only Team Admins."}):i.intl.formatMessage({id:"mNi7Xx",defaultMessage:"Only the owner can add people."})}},type:l.DROPDOWN};case l.VIEWER_INFO_POLICY:return{title:i.intl.formatMessage({id:"OFgJ+q",defaultMessage:"Viewer info"}),description:this.getViewerInfoPolicyDescription(),optionsDict:{enabled:{label:i.intl.formatMessage({id:"4ASaZl",defaultMessage:"On"}),value:!0},disabled:{label:i.intl.formatMessage({id:"495asM",defaultMessage:"Off"}),value:!1}},type:l.TOGGLE};case l.FOLDER_LINK_AUDIENCE_POLICY:if(!this.props.ownerTeam)throw new Error("Policy only valid for teams");return"team"===this.props.currentPolicy[l.FOLDER_LINK_AUDIENCE_POLICY]?this.renderFolderLinkPolicyDropdown():{title:i.intl.formatMessage({id:"dpUA0F",defaultMessage:"Link restrictions"}),description:i.intl.formatMessage({id:"ZnIqIh",defaultMessage:"Prevent non-members from accessing this folder via link."}),optionsDict:{members:{label:i.intl.formatMessage({id:"4ASaZl",defaultMessage:"On"}),value:!0},anyone:{label:i.intl.formatMessage({id:"495asM",defaultMessage:"Off"}),value:!1}},type:l.TOGGLE};default:throw new Error("Policy name not found")}},t.prototype.renderFolderLinkPolicyDropdown=function(){if(!this.props.ownerTeam)throw new Error("Policy only valid for teams");return{title:i.intl.formatMessage({id:"dpUA0F",defaultMessage:"Link restrictions"}),description:i.intl.formatMessage({id:"W3KUO0",defaultMessage:"Limits who can access this folder via a link."}),optionsDict:{anyone:{label:i.intl.formatMessage({id:"xkdOhD",defaultMessage:"No restrictions"}),description:i.intl.formatMessage({id:"cLesiI",defaultMessage:"Show all access options for links."})},members:{label:i.intl.formatMessage({id:"Tj12s5",defaultMessage:"Invite-only"}),description:i.intl.formatMessage({id:"02i0Sa",defaultMessage:"Show “Only invited members” only."})},team:{label:i.intl.formatMessage({id:"axkOyT",defaultMessage:"Team only"}),description:i.intl.formatMessage({id:"chneWK",defaultMessage:"Show “Only people at {team_name}”."},{team_name:o.Emstring.em_snippet(this.props.ownerTeam.name,12)})}},type:l.DROPDOWN}},t})(a.SharingSettingsPolicyView);t.SharingSettingsFileFolderPolicyView=c})),define("modules/clean/sharing/views/sharing_settings_link_policy_view",["require","exports","tslib","react","modules/core/i18n","modules/clean/filepath/filepath","modules/clean/sharing/sharing_settings_util","spectrum-sharing/components/sharing_modal_banner/index","spectrum-sharing/share_modal/sharing_settings/sharing_settings_expire","spectrum-sharing/share_modal/sharing_settings/sharing_settings_audience","spectrum-sharing/share_modal/sharing_settings/sharing_settings_download"],(function(e,t,n,s,i,r,a,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsLinkPolicyView=void 0,s=n.__importDefault(s);var u=function(e){window.open(e,"_blank")},p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getPolicyDict=function(e){return t.props.getPolicyDict(e,t.props.isFolder)},t.renderCannotPreviewBanner=function(){if(a.shouldRenderNoPreviewFileWarning(!t.props.isFolder,t.props.linkMetadata)){var e=r.file_extension(t.props.linkMetadata.name).toUpperCase();return s.default.createElement(o.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:i.intl.formatMessage({id:"7E5yD4",defaultMessage:"{file_extension} files can’t be previewed. Downloads must be enabled to share."},{file_extension:"."+e})})}},t.handleMultiplePolicyUpdate=function(e){var n=t.props.linkPolicy.merge(e);t.props.onPolicyUpdate(t.props.linkMetadata,n)},t.handlePolicyUpdate=function(e,n){var s=t.props.linkPolicy.set(e,n);t.props.onPolicyUpdate(t.props.linkMetadata,s)},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.readOnlyPolicy;return s.default.createElement("div",null,s.default.createElement(c.SharingSettingsAudience,{intl:i.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),s.default.createElement(l.SharingSettingsExpire,{intl:i.intl,linkMetadata:this.props.linkMetadata,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),s.default.createElement(d.SharingSettingsDownload,{intl:i.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handlePolicyUpdate,onLinkClicked:u,banner:this.renderCannotPreviewBanner(),readOnlyPolicy:e,isEditFolderLink:!1}))},t.displayName="SharingSettingsLinkPolicyView",t})(s.default.Component);t.SharingSettingsLinkPolicyView=p})),define("modules/clean/sharing/views/sharing_settings_link_policies",["require","exports","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_link_policies","modules/core/i18n"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRLPolicyDict=t.getShmodelInMultipleLinksPolicyDict=void 0;var i=n.SharingSettingsLinkPolicies(s.intl);t.getShmodelInMultipleLinksPolicyDict=i.getShmodelInMultipleLinksPolicyDict,t.getRLPolicyDict=i.getRLPolicyDict})),define("modules/clean/sharing/views/sharing_settings_link_section",["require","exports","tslib","react","spectrum/button/index","spectrum-sharing/components/card/index","modules/clean/sharing/views/sharing_settings_link_policy_view","modules/clean/sharing/views/sharing_settings_righteous_link_policy_view","modules/clean/sharing/sharing_settings_util","modules/clean/sharing/delete_link_modal","modules/clean/sharing/views/righteous_modal_link_info","modules/clean/sharing/views/sharing_settings_link_policies","modules/core/i18n","spectrum-sharing/components/scooter_loader/index","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_util"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsLinkActions=t.SharingSettingsLinkSection=void 0;var f=(function(e){function t(t){var n=e.call(this,t)||this;return n.onClickButtonCreateLink=function(e){"editor"===e?n.setState({creatingEditLink:!0},(function(){return n.handleCreateLinkClicked(e)})):n.setState({creatingViewLink:!0},(function(){return n.handleCreateLinkClicked(e)}))},n.handleCreateLinkClicked=function(e){n.props.actionHandler&&n.props.actionHandler.createSharedLink(e)},n.handleClickDeleteLink=function(e){c.deleteLinkWithConfirm({client:n.props.client,url:e.url,contentName:e.name,onDeleteLink:function(){n.props.onDeleteLink(e)},onCancel:n.props.onCancelDeleteLink,actionHandler:n.props.actionHandler})},n.state={creatingEditLink:!1,creatingViewLink:!1},n}return n.__extends(t,e),t.prototype.render=function(){var e=void 0;"editor"===this.props.accessLevel?e=this.props.sharingInfo.editRighteousLink():(e=this.props.sharingInfo.viewRighteousLink())||(e=this.props.sharingInfo.shmodelLink());var t=this.renderLinkPolicy(this.props.accessLevel,e);return s.default.createElement("div",{className:"scl-sharing-settings-links-section"},t)},t.prototype.emptyLinkCreateActions=function(e,t){return t?this.renderCreateLinkLoading(e):this.renderEmptyLinkPolicy(e)},t.prototype.renderLinkPolicy=function(e,t){if(!t)return"editor"===e?this.emptyLinkCreateActions(e,this.state.creatingEditLink):this.emptyLinkCreateActions(e,this.state.creatingViewLink);var n,i=this.props.updatedLinkPolicies[t.url],c=l.getLinkPolicy(t),p=h.isReadOnlyPolicy(c,t.link_permissions);return n=t.isRighteousLink()?s.default.createElement(o.SharingSettingsRighteousLinkPolicyView,{linkPolicy:i||c,linkMetadata:t,onPolicyUpdate:this.props.onPolicyUpdate,readOnlyPolicy:p}):s.default.createElement(a.SharingSettingsLinkPolicyView,{linkPolicy:i||c,linkMetadata:t,isFolder:t.isFolder(),onPolicyUpdate:this.props.onPolicyUpdate,getPolicyDict:u.getShmodelInMultipleLinksPolicyDict,readOnlyPolicy:p}),s.default.createElement(r.Card,{key:t.url||e,icon:d.getSpectrumLinkIcon(e),title:this.renderTitle(e),actions:this.renderLinkActions(t)},n)},t.prototype.renderLinkActions=function(e){return s.default.createElement(g,{linkMetadata:e,onClickDeleteLink:this.handleClickDeleteLink})},t.prototype.renderEmptyLinkPolicy=function(e){var t,n=this,a=this.props,o=a.sharingInfo,l=a.sharingPrefs,c=this.props.sharingInfo.permissionsObj();return t=h.canCreateLink(e,o.isCloudDoc(),o.isFolder(),o.isTeamSharedFolder(),o.isConfidentialFolder(),l.can_create_edit_folder_link,c.canInviteEditor(),o.canShareLink(),c.canCreateViewLink(),c.canCreateEditLink())?s.default.createElement("div",null,this.getEmptyLinkMessage(e)," ",s.default.createElement(i.Button,{variant:"borderless",onClick:function(){return n.onClickButtonCreateLink(e)}},p.intl.formatMessage({id:"F7gl6q",defaultMessage:"Create link"}))):p.intl.formatMessage({id:"DhAXrs",defaultMessage:"Link not available."}),s.default.createElement(r.Card,{key:e,icon:d.getSpectrumLinkIcon(e),title:this.renderTitle(e)},s.default.createElement("div",{className:"sharing-settings-modal__link-policy"},s.default.createElement("div",{className:"sharing-settings-modal__link-policy-text"},t)))},t.prototype.getEmptyLinkMessage=function(e){return"editor"===e?p.intl.formatMessage({id:"K79TJX",defaultMessage:"There isn’t a link for editing."}):p.intl.formatMessage({id:"B3RLyV",defaultMessage:"There isn’t a link for viewing."})},t.prototype.renderCreateLinkLoading=function(e){var t,n=p.intl.formatMessage({id:"MnjJiE",defaultMessage:"Creating link"});return t=s.default.createElement("span",null,n,s.default.createElement(m.ScooterLoader,null)),s.default.createElement(r.Card,{key:e,icon:d.getSpectrumLinkIcon(e),title:this.renderTitle(e)},s.default.createElement("div",{className:"sharing-settings-modal__link-policy"},s.default.createElement("div",{className:"sharing-settings-modal__link-policy-text"},t)))},t.prototype.renderTitle=function(e){return"editor"===e?p.intl.formatMessage({id:"jN5OfV",defaultMessage:"People with this link can edit"}):p.intl.formatMessage({id:"xLAQNV",defaultMessage:"People with this link can view"})},t.displayName="SharingSettingsLinkSection",t})((s=n.__importDefault(s)).default.Component);t.SharingSettingsLinkSection=f;var g=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickDelete=function(e){e.preventDefault(),t.props.onClickDeleteLink(t.props.linkMetadata)},t}return n.__extends(t,e),t.prototype.render=function(){return this.canDeleteLink()?s.default.createElement(i.Button,{variant:"borderless",onClick:this.handleClickDelete},p.intl.formatMessage({id:"lDhFjo",defaultMessage:"Delete link"})):null},t.prototype.canDeleteLink=function(){return this.props.linkMetadata.link_permissions.can_revoke},t.displayName="SharingSettingsLinkActions",t})(s.default.Component);t.SharingSettingsLinkActions=g})),define("modules/clean/sharing/views/sharing_settings_righteous_link_policy_view",["require","exports","tslib","react","modules/clean/sharing/views/sharing_settings_link_policies","modules/core/i18n","spectrum-sharing/share_modal/sharing_settings/sharing_settings_audience","spectrum-sharing/share_modal/sharing_settings/sharing_settings_password","spectrum-sharing/share_modal/sharing_settings/sharing_settings_expire","spectrum-sharing/share_modal/sharing_settings/sharing_settings_download"],(function(e,t,n,s,i,r,a,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsRighteousLinkPolicyView=void 0,s=n.__importDefault(s);var d=function(e){window.open(e,"_blank")},u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getPolicyDict=function(e){var n=t.props.linkMetadata.link_permissions;return i.getRLPolicyDict(e,n.link_access_level,t.props.linkMetadata.isFolder())},t.handleMultiplePolicyUpdate=function(e){var n=t.props.linkPolicy.merge(e);t.props.onPolicyUpdate(t.props.linkMetadata,n)},t.handlePolicyUpdate=function(e,n){var s=t.props.linkPolicy.set(e,n);t.props.onPolicyUpdate(t.props.linkMetadata,s)},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.readOnlyPolicy;return s.default.createElement("div",null,s.default.createElement(a.SharingSettingsAudience,{intl:r.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),s.default.createElement(o.SharingSettingsPassword,{intl:r.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),s.default.createElement(l.SharingSettingsExpire,{intl:r.intl,linkMetadata:this.props.linkMetadata,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),s.default.createElement(c.SharingSettingsDownload,{intl:r.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handlePolicyUpdate,onLinkClicked:d,readOnlyPolicy:e,isEditFolderLink:this.props.linkMetadata.isFolder(),banner:s.default.createElement(c.DisableDownloadsBanner,{intl:r.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy})}))},t.displayName="SharingSettingsRighteousLinkPolicyView",t})(s.default.Component);t.SharingSettingsRighteousLinkPolicyView=u})),define("modules/clean/sharing/views/sharing_settings_policy_view",["require","exports","tslib","react","spectrum/toggle/index","spectrum-sharing/components/sharing_modal_settings_row/index","modules/clean/sharing/sharing_settings_dropdown"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsPolicyView=void 0;var o=(function(e){function t(t){var n=e.call(this,t)||this;return n.sharingModalSettingsRowLinkClicked=function(e){window.open(e,"_blank")},n.renderPolicyRow=function(e,t,i,a,o){return s.default.createElement(r.SharingModalSettingsRow,{policyFieldName:e,key:t.title,displayName:t.title,displayNameTitle:t.title,description:t.description,descriptionLinkUrl:t.descriptionLinkUrl,descriptionLinkText:t.descriptionLinkText,descriptionLinkOnClicked:n.sharingModalSettingsRowLinkClicked,rightSideElement:a,bottomElement:o})},n}return n.__extends(t,e),t.prototype.renderDropdown=function(e,t,n,i,r,o){return s.default.createElement(a.SettingDropdown,{currentValue:t,valuesList:i,optionsDict:n,onValueSelected:r,disabled:o})},t.prototype.renderToggle=function(e,t,n,r,a){var o=a?function(e,t){}:r;return s.default.createElement(i.Toggle,{ariaLabel:"toggle",className:"sharing-settings-modal__toggle",labelContent:n[t].label,checked:n[t].value,interactive:!a,disabled:a,onCheckedChange:o})},t.displayName="SharingSettingsPolicyView",t})((s=n.__importDefault(s)).default.Component);t.SharingSettingsPolicyView=o})),define("modules/clean/sharing/views/viewer_info",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewerInfo=void 0;var n=(function(){function e(e){e.when_last_seen&&(this.time_last_seen=new Date(1e3*e.when_last_seen));var t=e.seen_state_user;this.account_id=t.user_id,this.display_name=t.display_name,this.email=t.email,this.photo_circle_url=t.photo_circle_url,this.same_team=!0}return e.prototype.displayName=function(){return this.display_name},e.prototype.memberId=function(){return this.account_id},e})();t.ViewerInfo=n})),define("modules/clean/sharing/views/wrapped_group_viewers_maker",["require","exports","tslib","react","modules/clean/datetime/datetime","modules/clean/em_string","modules/clean/react/title_bubble","spectrum-sharing/utils/sharing_constants","modules/core/i18n","modules/clean/react/sticky_position"],(function(e,t,n,s,i,r,a,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedGroupViewersMaker=void 0,s=n.__importDefault(s);(function(e){function t(e,t){var n=t.has(e.account_id)?l.intl.formatMessage({id:"BMhlbR",defaultMessage:"Viewing now"}):i.ago(e.time_last_seen);return[s.default.createElement("tr",null,s.default.createElement("td",{className:"group-tooltip__viewers-table-cell group-tooltip__member-name"},r.Emstring.em_snippet(e.displayName(),o.SNIPPET_SIZES.DISPLAY_NAME)),s.default.createElement("td",{className:"group-tooltip__viewers-table-cell dot"},"·"),s.default.createElement("td",{className:"group-tooltip__viewers-table-cell group-tooltip__seen-string"},n))]}e.make=function(e,n){for(var i=l.intl.formatMessage({id:"4joFvJ",defaultMessage:"{count, plural, one{{count} viewer} other{{count} viewers}}"},{count:e.length}),r=e.length<=10,o=r?e.length:9,d=t(e[0],n),u=1;u<o;u++)d=d.concat(t(e[u],n));if(!r){var p=e.length-o,m=l.intl.formatMessage({id:"6gF5ZF",defaultMessage:"{count, plural, one{and {count} other} other{and {count} others}}"},{count:p});d=d.concat(s.default.createElement("tr",null,s.default.createElement("td",{className:"group-tooltip__viewers-table-cell group-tooltip__member-name"},m)))}return{element:s.default.createElement(a.TitleBubble,{content:s.default.createElement("table",{className:"group-tooltip__viewers-table"},s.default.createElement("tbody",null,d)),className:"group-tooltip",children:s.default.createElement("span",{className:"u-font-meta sharing-member-info__viewer-count-text"},i),position:c.StickyPosition.BOTTOM,isTargetPositionFixed:!0}),elementText:i}}})(t.WrappedGroupViewersMaker||(t.WrappedGroupViewersMaker={}))})),define("modules/clean/sharing/views/wrapped_sharing_modal_checkbox_row",["require","exports","tslib","react","modules/clean/sharing/views/hover_close_button","modules/core/i18n","spectrum-sharing/components/sharing_modal_checkbox_row/index"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedSharingModalCheckboxRow=void 0,s=n.__importDefault(s),i=n.__importDefault(i);var o=function(e){var t;e.showShareAsCommentOnboarding&&(t={className:"checkbox-row-tooltip",content:s.default.createElement("div",{className:"content"},s.default.createElement("div",{className:"text-content"},s.default.createElement("div",{className:"header"},r.intl.formatMessage({id:"5q97ZA",defaultMessage:"Let everyone know"})),r.intl.formatMessage({id:"pbYebK",defaultMessage:"Check this box so others can see your message when viewing this file."})),s.default.createElement("div",null,s.default.createElement(i.default,{className:"c-coach-mark__x",onClick:e.onCloseShareAsCommentOnboarding}))),alwaysShow:!0});return s.default.createElement(a.SharingModalCheckboxRow,n.__assign({},e,{tooltipData:t}))};o.displayName="WrappedSharingModalCheckboxRowInternal",t.WrappedSharingModalCheckboxRow=s.default.memo(o),t.WrappedSharingModalCheckboxRow.displayName="WrappedSharingModalCheckboxRow"})),define("modules/clean/teams/admin/widgets/groups/util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitials=void 0,t.getInitials=function(e){var t=e.toUpperCase().split(" ");return""+t[0][0]+(t.length>1?t[t.length-1][0]:"")}})),define("modules/clean/teams/modals/create_team_prompt_modal_v2",["require","exports","tslib","classnames","react","react-intl","dig-components/buttons","dig-components/controls","dig-components/modal","dig-components/typography","dig-components/typography","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/analytics","modules/clean/react/components/css","modules/clean/sharing/api/types/metadata","modules/clean/static_urls","modules/constants/page_load","modules/core/browser","modules/core/i18n","modules/core/uri"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g,_,S,E){"use strict";var v;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateTeamPromptModalV2=t.logClick=t.ClickAction=void 0,s=n.__importDefault(s),i=n.__importDefault(i),u=n.__importStar(u),_=n.__importStar(_),(function(e){e[e.CLICK_CREATE=0]="CLICK_CREATE",e[e.DISMISS=1]="DISMISS",e[e.CLICK_NEXT_TIME=2]="CLICK_NEXT_TIME"})(v=t.ClickAction||(t.ClickAction={})),t.logClick=function(e){p.TeamsWebActionsLogger.log("share_crt_team_modal",{clicked_create:e===v.CLICK_CREATE,clicked_nxt_time:e===v.CLICK_NEXT_TIME,dismissed:e===v.DISMISS})};var M=(function(e){function m(n){var s=e.call(this,n)||this;return s.onClickCreate=function(){var e=s.props.variant===h.BrowsePiscesBizBasicVariant.V1_ADVANCED?"adv":"std",n=new E.URI({path:"/business/try",query:{_tk:"p_upsell",sku:e}});_.redirect(n.toString()),t.logClick(v.CLICK_CREATE)},s.onClickCancel=function(){s.setState({isModalOpen:!1}),t.logClick(v.CLICK_NEXT_TIME)},s.onCheckboxChange=function(e){s.setState({isAgreementChecked:e.target.checked})},s.onRequestClose=function(){u.WebRequest({url:"/team/stop_show_create_team_modal"}),t.logClick(v.DISMISS),s.setState({isModalOpen:!1})},s.state={isAgreementChecked:!1,isModalOpen:!0},s}return n.__extends(m,e),m.prototype.componentDidMount=function(){p.TeamsWebActionsLogger.log("share_crt_team_modal_shown")},m.prototype.render=function(){l.Modal.setAppElement(document.getElementById("embedded-app")||document.body);var e=!["en","en_GB"].includes(g.USER_LOCALE);return i.default.createElement(r.RawIntlProvider,{value:S.intl},i.default.createElement(l.Modal,{width:"large",withCloseButton:S.intl.formatMessage({id:"wcu7vq",defaultMessage:"Close"}),open:this.state.isModalOpen,onRequestClose:this.onRequestClose,className:s.default("ctpm__container",{"ctpm__container--large":e})},i.default.createElement(l.Modal.Header,{hasBottomSpacing:"title-standard",className:"ctpm__snap-left"},i.default.createElement(c.Title,null,S.intl.formatMessage({id:"+msE7t",defaultMessage:"Customize instant access to a team workspace"}))),i.default.createElement(l.Modal.Body,{className:"ctpm__content"},i.default.createElement("div",{className:"ctpm__left"},i.default.createElement(c.Text,null,i.default.createElement(r.FormattedMessage,{id:"qFSjFH",defaultMessage:"Try Dropbox Standard <bold>free</bold> for 30 days - no credit card required.",values:{bold:function(e){return i.default.createElement("b",null,e)}}})),i.default.createElement("ul",{className:"ctpm__list"},i.default.createElement("li",null,i.default.createElement(c.Text,null,S.intl.formatMessage({id:"KHnObD",defaultMessage:"Invite team members to access and add to your shared 5TB library"}))),i.default.createElement("li",null,i.default.createElement(c.Text,null,i.default.createElement(r.FormattedMessage,{id:"Zgzay7",defaultMessage:"Restrict access to sensitive folders with powerful admin controls"}))),i.default.createElement("li",null,i.default.createElement(c.Text,null,i.default.createElement(r.FormattedMessage,{id:"mlqeI5",defaultMessage:"Keep shared files organized, up to date, and secure"})))),i.default.createElement("div",{className:"ctpm__agreement"},i.default.createElement(o.Checkbox,{id:"ctpm-agreement",onChange:this.onCheckboxChange}),i.default.createElement(d.Label,{htmlFor:"ctpm-agreement"},i.default.createElement(c.Text,null,i.default.createElement(r.FormattedMessage,{id:"kPvGgb",defaultMessage:"I agree to the <link>Dropbox Business Agreement</link>",values:{link:function(e){return i.default.createElement(c.Link,{href:"/business_agreement",target:"_blank",rel:"noopener noreferrer",variant:"monochromatic"},e)}}}))))),i.default.createElement("div",{className:"ctpm__right"},i.default.createElement("img",{role:"presentation",src:f.static_url("/static/images/pisces-biz-basic/v1-abstract-vflXg8HQI.png")}))),i.default.createElement(l.Modal.Footer,{className:"ctpm__snap-left ctpm__footer"},i.default.createElement(a.Button,{variant:"transparent",onClick:this.onClickCancel},i.default.createElement(r.FormattedMessage,{id:"uzLWdB",defaultMessage:"Ask me later"})),i.default.createElement(a.Button,{variant:"primary",onClick:this.onClickCreate,disabled:!this.state.isAgreementChecked},i.default.createElement(r.FormattedMessage,{id:"7wbXbV",defaultMessage:"Start free trial"})))))},m.displayName="CreateTeamPromptModal",m})(i.default.Component);t.CreateTeamPromptModalV2=m.requireCssWithComponent(M,["/static/css/dig-components/index.web-vflfsfj-g.css","/static/css/growth/create_team_prompt_modal-vfl7YmPtW.css"])})),define("modules/clean/previews/data/store",["require","exports","modules/clean/react/file_viewer/data/store","modules/clean/previews/data/actions"],(function(e,t,n,s){"use strict";function i(e,t,n){e.dispatch(s.fetchPreviewData(t,n))}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPreviewDataUpdateStore=t.hydratePreviewStore=t.hydrateFileStoreAndPreviewStore=void 0,t.hydrateFileStoreAndPreviewStore=function(e,t,s){n.hydrateFileStore(e,t),i(e,t,s)},t.hydratePreviewStore=i,t.fetchPreviewDataUpdateStore=function(e,t,n,i){e.dispatch(s.fetchPreviewData(t,n,i))}})),define("modules/clean/sharing/upsells/family_upsell_modal",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/modal","dig-components/typography","modules/clean/react/components/css","modules/core/i18n","modules/clean/ux_analytics/utils"],(function(e,t,n,s,i,r,a,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateFamilyUpsellModal=void 0;var u=(function(e){function t(t){var n=e.call(this,t)||this;return n.onClickCancel=function(){n.setState({isModalOpen:!1})},n.state={isModalOpen:!0},n}return n.__extends(t,e),t.prototype.render=function(){return a.Modal.setAppElement(document.getElementById("embedded-app")||document.body),s.default.createElement(i.RawIntlProvider,{value:c.intl},s.default.createElement(a.Modal,{width:"standard",open:this.state.isModalOpen,className:"uxa-modal",id:"family-sharing-upsell-modal",onAfterOpen:function(){return d.dispatchModalOpened()},onAfterClose:function(){return d.dispatchModalClosed()}},s.default.createElement("img",{role:"presentation",src:"/static/images/product_growth/visual-identity-system-photos-1-vflo7MMGP.png",className:"cfsum__hero_image"}),s.default.createElement(a.Modal.Body,null,s.default.createElement(o.Title,{className:"cfsum__title"},c.intl.formatMessage({id:"9z+sIf",defaultMessage:"Share Dropbox with family and save money"})),s.default.createElement(o.Text,null,s.default.createElement(i.FormattedMessage,{id:"apZcyM",defaultMessage:"For less than the price of two Plus plans, Dropbox Family lets up to six people share 2 TB (2,000 GB) of space. Everyone has their own account and private storage, plus a Family Room for sharing photos and files with each other."}))),s.default.createElement(a.Modal.Footer,{className:"cfsum__footer"},s.default.createElement(r.Button,{variant:"transparent",onClick:this.onClickCancel,"data-uxa-log":"family-sharing-upsell-cancel"},s.default.createElement(i.FormattedMessage,{id:"myX3dP",defaultMessage:"Not now"})),s.default.createElement(r.Button,{href:"/plans?trigger=nr",target:"_blank",variant:"primary","data-uxa-log":"family-sharing-upsell-continue"},s.default.createElement(i.FormattedMessage,{id:"ewzgz2",defaultMessage:"Compare plans"})))))},t.displayName="CreateFamilyUpsellModalNoStyles",t})((s=n.__importDefault(s)).default.Component);t.CreateFamilyUpsellModal=l.requireCssWithComponent(u,["/static/css/dig-components/index.web-vflfsfj-g.css","/static/css/growth/create_family_sharing_upsell_modal-vflMAFYnt.css"])})),define("modules/clean/sharing/views/upsells/docsend_footer_section",["require","exports","tslib","react","dig-components/buttons","dig-components/tooltips","dig-components/icons","dig-components/icons/src","dig-components/typography","modules/clean/react/components/css","modules/clean/analytics","modules/clean/filepath/filepath","modules/clean/react/image","modules/clean/static_urls","modules/core/i18n","spectrum-sharing/components/sharing_modal_footer_link/index","modules/clean/react/growth/util"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m,h,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocsendFooterSection=void 0,s=n.__importDefault(s);var _=h.intl.formatMessage({id:"JLlegV",defaultMessage:"Try DocSend"}),S=[h.intl.formatMessage({id:"wQq3pa",defaultMessage:"Real-time analytics"}),h.intl.formatMessage({id:"tnI8r8",defaultMessage:"Advanced security controls"}),h.intl.formatMessage({id:"2abOuj",defaultMessage:"Virtual data rooms"})],E=h.intl.formatMessage({id:"1ExIqQ",defaultMessage:"Looking for analytics and advanced document controls?"}),v=h.intl.formatMessage({id:"/8ciBe",defaultMessage:"Track activity with DocSend"}),M=h.intl.formatMessage({id:"puU8Es",defaultMessage:"Other ways to share"}),y=h.intl.formatMessage({id:"UcSXEq",defaultMessage:"Learn more"}),C=function(e,t){return{V1:""+e+t+"v1",V2:""+e+t+"v2"}},b="https://docsend.com/signup/dropbox?utm_source=Dropbox%20Referral&utm_medium=Referral&utm_campaign=sh-modal-v1&signup_source=sh-modal-v1",I="https://docsend.com/signup/dropbox?utm_source=Dropbox%20Referral&utm_medium=Referral&utm_campaign=sh-modal-v2&signup_source=sh-modal-v2",T="https://docsend.com/signup/dropbox?utm_source=Dropbox%20Referral&utm_medium=Referral&utm_campaign=sh-modal-v1-tooltip&signup_source=sh-modal-v1-tooltip",k="https://docsend.com/signup/dropbox?utm_source=Dropbox%20Referral&utm_medium=Referral&utm_campaign=sh-modal-v2-tooltip&signup_source=sh-modal-v2-tooltip",w=C("share-modal-docsend-footer-exp-learn-more","-"),A=C("share-modal-docsend-footer-exp-cta","-"),N=C("share-modal-docsend-footer-exp-upsell","-"),L=C("share-modal-docsend-footer-exp-tooltip","-"),P=function(e){return s.default.useEffect((function(){return d.ProEventsLogger.log(e.impressionLogName)}),[]),s.default.createElement("div",{className:"share-modal-evolution-docsend-footer-tooltip"},s.default.createElement(p.Image,{src:m.static_url("/static/images/product_growth/docsend_upsell/sharing_tooltip_banner-vflvhlwXQ.png"),srcHiRes:m.static_url("/static/images/product_growth/docsend_upsell/sharing_tooltip_banner@2x-vflrUwTbo.png")}),s.default.createElement("ul",{className:"share-modal-evolution-docsend-footer-tooltip__features"},S.map((function(e,t){return s.default.createElement("li",{key:t},e)}))),s.default.createElement(l.Link,{href:e.learnMoreHref,inverse:!0,"data-uxa-log":e.uxaLogName,target:"_blank",rel:"noreferrer"},y))},F=function(){s.default.useEffect((function(){return d.ProEventsLogger.log(N.V1)}),[]);var e=s.default.createElement(s.default.Fragment,null,s.default.createElement(l.Text,{tagName:"p",color:"standard"},E)),t=s.default.createElement(s.default.Fragment,null,s.default.createElement(i.Button,{variant:"transparent",href:b,"data-uxa-log":A.V1,target:"_blank",rel:"noreferrer"},_),s.default.createElement(r.Toggletip,{placement:"right",iconButtonSize:"standard",title:s.default.createElement(P,{learnMoreHref:T,uxaLogName:w.V1,impressionLogName:L.V1})}));return s.default.createElement("div",{className:"share-modal-evolution-share-screen-docsend-footer-v1"},s.default.createElement(f.SharingModalFooterLink,{body:e,actions:t,isIconHidden:!0}))},O=function(){s.default.useEffect((function(){return d.ProEventsLogger.log(N.V2)}),[]);var e=s.default.createElement("div",{className:"share-modal-evolution-share-screen-docsend-footer-v2"},s.default.createElement(l.Text,{variant:"label",isBold:!0},M),s.default.createElement("div",{className:"share-modal-evolution-share-screen-docsend-footer-v2__text-tip-container"},s.default.createElement(l.Link,{className:"share-modal-evolution-share-screen-docsend-footer-v2__cta-link",href:I,hasNoUnderline:!0,isBold:!0,"data-uxa-log":A.V2,target:"_blank",rel:"noreferrer"},s.default.createElement(a.UIIcon,{src:o.AnalyticsLine}),v),s.default.createElement(r.Toggletip,{placement:"right",iconButtonSize:"standard",title:s.default.createElement(P,{learnMoreHref:k,uxaLogName:w.V2,impressionLogName:L.V2})})));return s.default.createElement(f.SharingModalFooterLink,{body:e,isIconHidden:!0})};t.DocsendFooterSection=c.requireCssWithComponent((function(e){var t=e.variant,n=e.fileName;return g.DOCSEND_FILE_EXTENSIONS.has(u.file_extension(n))?s.default.createElement(s.default.Fragment,null,"V1"===t?s.default.createElement(F,null):"V2"===t?s.default.createElement(O,null):null):null}),["/static/css/sharing/share_modal_evolution-vflcXp9SS.css"])})),define("modules/clean/sharing/upsells/docsend_upsell_message",["require","exports","tslib","react","modules/core/i18n","dig-components/buttons","dig-components/tooltips","dig-components/typography","dig-components/icons","dig-components/icons/src","modules/clean/analytics","modules/clean/react/image","modules/clean/static_urls","modules/clean/sharing/upsells/util"],(function(e,t,n,s,i,r,a,o,l,c,d,u,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocsendUpsellMessageV2=t.DocsendUpsellMessageV1=void 0,s=n.__importDefault(s);var h=i.intl.formatMessage({id:"JLlegV",defaultMessage:"Try DocSend"}),f=[i.intl.formatMessage({id:"ji4jjE",defaultMessage:"Real-time document analytics"}),i.intl.formatMessage({id:"i4Mfa3",defaultMessage:"Single link for multiple documents"}),i.intl.formatMessage({id:"rCF5ax",defaultMessage:"Passcode and email verification"}),i.intl.formatMessage({id:"M3UT9e",defaultMessage:"Approved viewer and domain lists"})],g=i.intl.formatMessage({id:"rUJJV3",defaultMessage:"Learn more"}),_=i.intl.formatMessage({id:"KUsDmi",defaultMessage:"Interested in analytics and advanced sharing controls?"}),S=i.intl.formatMessage({id:"Vi5KfG",defaultMessage:"With DocSend you can control document versions, track activity with analytics, and share multiple documents with a single link."}),E=function(e,t){return{V1:""+e+t+"v1",V2:""+e+t+"v2"}},v="https://docsend.com/signup/dropbox?utm_source=Dropbox%20Referral&utm_medium=Referral&utm_campaign=sh-settings-v1&signup_source=sh-settings-v1",M="https://docsend.com/signup/dropbox?utm_source=Dropbox%20Referral&utm_medium=Referral&utm_campaign=sh-settings-v2&signup_source=sh-settings-v2",y="https://docsend.com/signup/dropbox?utm_source=Dropbox%20Referral&utm_medium=Referral&utm_campaign=sh-settings-v1-tooltip&signup_source=sh-settings-v1-tooltip",C="https://docsend.com/signup/dropbox?utm_source=Dropbox%20Referral&utm_medium=Referral&utm_campaign=sh-settings-v2-tooltip&signup_source=sh-settings-v2-tooltip",b=E("sharing-settings-docsend-exp-tooltip","-"),I=E("sharing-settings-docsend-exp-learn-more","-"),T=E("sharing-settings-docsend-exp-cta","-"),k=E("sharing-settings-docsend-exp-impression","-"),w=function(e){return s.default.useEffect((function(){return d.ProEventsLogger.log(e.impressionLogName)}),[]),s.default.createElement("div",{className:"sharing-settings-modal--docsend_upsell_tooltip"},s.default.createElement(u.Image,{src:p.static_url("/static/images/product_growth/docsend_upsell/sharing_tooltip_banner-vflvhlwXQ.png"),srcHiRes:p.static_url("/static/images/product_growth/docsend_upsell/sharing_tooltip_banner@2x-vflrUwTbo.png")}),s.default.createElement("ul",{className:"sharing-settings-modal--docsend_upsell_tooltip__features"},f.map((function(e,t){return s.default.createElement("li",{key:t},e)}))),s.default.createElement(o.Link,{href:e.learnMoreHref,inverse:!0,"data-uxa-log":e.uxaLogName,target:"_blank",rel:"noreferrer"},g))};t.DocsendUpsellMessageV1=function(e){return s.default.useEffect((function(){return d.ProEventsLogger.log(k.V1,{tab_name:e.tabName})}),[e.tabName]),s.default.createElement(s.default.Fragment,null,s.default.createElement("span",{className:"sharing-settings-modal--docsend_upsell__message"},_," ",s.default.createElement(o.Link,{href:v,"data-uxa-log":T.V1,target:"_blank",rel:"noreferrer"},h)),s.default.createElement(a.Toggletip,{placement:"right",iconButtonSize:"standard",title:s.default.createElement(w,{learnMoreHref:y,impressionLogName:b.V1,uxaLogName:I.V1})}))},t.DocsendUpsellMessageV2=function(e){s.default.useEffect((function(){return d.ProEventsLogger.log(k.V2,{tab_name:e.tabName})}),[e.tabName]);return s.default.createElement("div",{className:"sharing-settings-modal--docsend_upsell__container_v2"},s.default.createElement("div",{className:"sharing-settings-modal--docsend_upsell__close_button"},s.default.createElement(r.IconButton,{type:"button",variant:"transparent",onClick:function(){new m.DocsendUpsellUserActionTracker(e.userId).track(m.DocsendUpsellUserAction.DOCSEND_UPSELL_SHARING_LINK_DISMISSED_ACTION),e.onDismiss()},"data-uxa-log":"sharing-settings-docsend-exp-v2-dismiss"},s.default.createElement(l.UIIcon,{src:c.CloseLine,"aria-label":"close"}))),s.default.createElement(o.Text,{variant:"label",isBold:!0,tagName:"h3"},_),s.default.createElement(o.Text,{tagName:"p"},S),s.default.createElement("div",{className:"sharing-settings-modal--docsend_upsell__action_row"},s.default.createElement(r.Button,{type:"button",variant:"outline","data-uxa-log":T.V2,href:M,target:"_blank",rel:"noreferrer"},h),s.default.createElement(a.Toggletip,{placement:"right",iconButtonSize:"standard",title:s.default.createElement(w,{learnMoreHref:C,impressionLogName:b.V2,uxaLogName:I.V2})})))}})),define("spectrum-sharing/components/back_button/index",["require","exports","tslib","spectrum-sharing/components/back_button/back_button"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/back_button/back_button",["require","exports","tslib","react","dig-components/buttons","dig-components/icons"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackButton=void 0,s=n.__importStar(s);var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return s.createElement("div",{className:"scl-back-button__wrapper"},s.createElement("span",{className:"scl-back-button__icon"},s.createElement(r.UIIcon,{src:this.props.icon,size:"small","aria-label":this.props.label,onClick:this.props.onBackButtonClick})),s.createElement("span",{className:"scl-back-button__label"},s.createElement(i.Button,{autoFocus:this.props.autoFocus,size:"small",variant:"transparent",onClick:this.props.onBackButtonClick,hasNoUnderline:!0},this.props.label)))},t})(s.Component);t.BackButton=a,a.displayName="BackButton"})),define("spectrum-sharing/components/action_container/index",["require","exports","tslib","spectrum-sharing/components/action_container/action_container"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/action_container/action_container",["require","exports","tslib","react","classnames","dig-components/typography"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionContainer=void 0,s=n.__importStar(s),i=n.__importDefault(i);var a="scl-action-container",o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.banner,o=t.footer,l=t.children,c=t.className,d=t.header,u=t.headerSize,p=t.showBorder,m=i.default(c,a,((e={})[a+"--bordered"]=p,e));return s.createElement("div",{className:m},d&&s.createElement("div",{className:a+"__header"},s.createElement(r.Title,{size:u,isBold:!0},d)),n&&s.createElement("div",{className:a+"__banner"},n),s.createElement("div",{className:a+"__children"},l),o&&s.createElement("div",{className:a+"__footer"},o))},t})(s.Component);t.ActionContainer=o,o.displayName="ActionContainer",o.defaultProps={showBorder:!1}})),define("spectrum-sharing/components/action_section/index",["require","exports","tslib","spectrum-sharing/components/action_section/action_section"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/action_section/action_section",["require","exports","tslib","react","classnames","dig-components/typography"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionSection=void 0,s=n.__importStar(s),i=n.__importDefault(i);var a="scl-action-section",o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.children,o=t.className,l=t.layout,c=t.header,d=t.footerContent,u=t.footerActions,p=t.isHeaderBold,m=i.default(o,a,((e={})[a+"--"+l]=!!l,e));return s.createElement("div",{className:m},c&&s.createElement(r.Text,{className:a+"__header",tagName:"div",size:"small",isBold:p},c),s.createElement("div",{className:a+"__children"},n),s.createElement("div",{className:a+"__footer"},d&&s.createElement("div",{className:a+"__footer-content"},d),u&&s.createElement("div",{className:a+"__footer-actions"},u)))},t})(s.Component);t.ActionSection=o,o.displayName="ActionSection",o.defaultProps={isHeaderBold:!0,layout:"rows"}})),define("spectrum-sharing/components/checkbox_with_label/index",["require","exports","tslib","spectrum-sharing/components/checkbox_with_label/checkbox_with_label"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/checkbox_with_label/checkbox_with_label",["require","exports","tslib","react","classnames","dig-components/controls","dig-components/typography"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxWithLabel=void 0,s=n.__importStar(s),i=n.__importDefault(i);var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.fontSize,o=e.isChecked,l=e.isCheckboxDisabled,c=e.onCheckboxToggled,d=e.className,u=i.default(d,"scl-checkbox-with-label");return s.createElement("span",{className:u},s.createElement(r.Checkbox,{"aria-label":t,onChange:c,checked:o,disabled:l,id:"checkbox"}),s.createElement(a.Text,{className:"scl-checkbox-with-label__text",tagName:"label",size:n,htmlFor:"checkbox"},t))},t})(s.Component);t.CheckboxWithLabel=o,o.displayName="CheckboxWithLabel"})),define("spectrum-sharing/components/card/index",["require","exports","tslib","spectrum-sharing/components/card/card"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/card/card",["require","exports","tslib","classnames","react"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Card=t.baseClassName=void 0,s=n.__importDefault(s),i=n.__importStar(i),t.baseClassName="scl-card";var r=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.render=function(){var e=this.props.className,n=s.default(t.baseClassName,e);return i.createElement("div",{className:n},this.renderHeader(),this.renderBody())},r.prototype.renderHeader=function(){if(this.props.icon||this.props.title||this.props.actions)return i.createElement("div",{className:t.baseClassName+"__header"},this.props.icon&&i.createElement("div",{className:t.baseClassName+"__icon"},this.props.icon),this.props.title&&i.createElement("div",{className:t.baseClassName+"__title"},this.props.title),this.props.actions&&i.createElement("div",{className:t.baseClassName+"__actions"},this.props.actions))},r.prototype.renderBody=function(){return i.createElement("div",{className:t.baseClassName+"__body"},this.props.children)},r})(i.PureComponent);t.Card=r,r.displayName="Card"})),define("spectrum-sharing/components/confidential_folder_section/index",["require","exports","tslib","spectrum-sharing/components/confidential_folder_section/confidential_folder_section"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/confidential_folder_section/confidential_folder_section",["require","exports","tslib","react","spectrum-sharing/components/sharing_modal_banner/index","dig-components/buttons","spectrum-sharing/utils/sharing_constants","spectrum-sharing/utils/em_string"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfidentialFolderSection=void 0;var l=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.restoreAccessToConfidentialFolder=function(){var e=t.props,n=e.teamName;(0,e.onRestoreAccessClick)(!0,n)},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.intl,n=e.teamName,l=e.parentFolderName,c=e.isRestoreAccessEnabled,d=e.showTsdAccessVisibility,u=t.formatMessage({id:"J1aoBw",defaultMessage:"<b>Invite only.</b> Members of parent folders can’t access."},{b:function(e){return s.createElement("b",null,e)}}),p=t.formatMessage({id:"HxBVSR",defaultMessage:"Restore access"});""!==l?d?(u=t.formatMessage({id:"V1N9tG",defaultMessage:'This folder isn’t shared with everyone who has access to parent folder "{parent}".'},{parent:o.Emstring.em_snippet(l,a.SNIPPET_SIZES.FILENAME)}),p=t.formatMessage({id:"R+Gy+p",defaultMessage:"Share with everyone"})):(u=t.formatMessage({id:"iJfsyD",defaultMessage:"Access restricted. Not shared with all members of <b>{parent}</b>."},{parent:o.Emstring.em_snippet(l,a.SNIPPET_SIZES.FILENAME),b:function(e){return s.createElement("b",null,e)}}),p=t.formatMessage({id:"pOQued",defaultMessage:"Share with members"})):d?(u=t.formatMessage({id:"z87QTd",defaultMessage:"This folder isn’t shared with everyone on {team_name}."},{team_name:o.Emstring.em_snippet(n,a.SNIPPET_SIZES.DISPLAY_NAME)}),p=t.formatMessage({id:"R+Gy+p",defaultMessage:"Share with everyone"})):(u=t.formatMessage({id:"rmYhno",defaultMessage:"Access restricted. Not shared with everyone at {team_name}."},{team_name:o.Emstring.em_snippet(n,a.SNIPPET_SIZES.DISPLAY_NAME)}),p=t.formatMessage({id:"R+Gy+p",defaultMessage:"Share with everyone"}));var m=s.createElement("div",{className:"confidential-folder-section"},u," ",c&&s.createElement(r.Button,{className:"button-as-link","aria-label":p,key:"restore access",variant:"transparent",size:"small",hasNoUnderline:!0,onClick:this.restoreAccessToConfidentialFolder},p));return s.createElement(i.SharingModalBanner,{type:"dark",message:m})},t})((s=n.__importStar(s)).Component);t.ConfidentialFolderSection=l})),define("spectrum-sharing/components/fixed_tabbed_container/index",["require","exports","tslib","spectrum-sharing/components/fixed_tabbed_container/fixed_tabbed_container"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/fixed_tabbed_container/fixed_tabbed_container",["require","exports","tslib","classnames","react","spectrum/tabbed_header/index"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedTabbedContainer=void 0,s=n.__importDefault(s);var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.activeTabId,n=e.className,a=e.onTabSelected,o=e.tabs,l=s.default("scl-fixed-tabbed-container",n);return i.createElement("div",{className:l},i.createElement("div",{className:"scl-fixed-tabbed-container__tabbed-header"},i.createElement(r.TabbedHeader,{onSelection:a,activeTabId:t},o.map((function(e){return i.createElement(r.Tab,{active:t===e.id,className:"sharing-settings-modal__tab-header",id:e.id,key:e.id},e.label)})))),i.createElement("div",{className:"scl-fixed-tabbed-container__content"},this.props.children))},t})((i=n.__importStar(i)).PureComponent);t.FixedTabbedContainer=a,a.displayName="FixedTabbedContainer"})),define("spectrum-sharing/components/form_validation_message/index",["require","exports","tslib","spectrum-sharing/components/form_validation_message/form_validation_message"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/form_validation_message/form_validation_message",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","dig-components/typography"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormValidationMessage=void 0,s=n.__importStar(s);t.FormValidationMessage=function(e){var t=e.message,n=e.variant;if(!t)return null;var o="error"===n?"error":"standard";return s.createElement("div",{className:"scl-form-validation-message"},"warn"===n&&s.createElement(i.UIIcon,{src:r.WarningPictogram,size:"small"}),s.createElement("div",{className:"scl-form-validation-message__text"},s.createElement(a.Text,{size:"small",color:o},t)))}})),define("spectrum-sharing/components/help_info/index",["require","exports","tslib","spectrum-sharing/components/help_info/help_info"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/help_info/help_info",["require","exports","tslib","react","classnames","dig-components/icons","dig-components/icons/src","dig-components/tooltips"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HelpInfo=void 0,s=n.__importStar(s),i=n.__importDefault(i);var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.className,l=e.text,c=e.placement,d=e.iconSize,u=e.children,p=i.default(n,"scl-help-info");return s.createElement(o.Tooltip,{className:p,id:t,placement:c,title:l},s.createElement("span",{className:"scl-help-info"},u,s.createElement(r.UIIcon,{src:a.HelpLine,className:"scl-help-info__icon",size:d,"aria-label":""})))},t})(s.PureComponent);t.HelpInfo=l,l.displayName="HelpInfo",l.defaultProps={placement:"top",iconSize:"small"}})),define("spectrum-sharing/components/icons/icon_dropdown_caret",["require","exports","tslib","react"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconDropdownCaretBlueWeb=t.IconDropdownCaretWeb=t.IconDropdownCaretWin=t.IconDropdownCaretOsx=void 0,s=n.__importStar(s),t.IconDropdownCaretOsx=function(e){var t=e.className,n=e.variant,i=void 0===n?"default":n;return s.createElement("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"9",height:"5",viewBox:"0 0 9 5"},s.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"highlighted"===i?"#0269D9":"#3E3E3E",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M8 1L4.5 4 1 1"}))},t.IconDropdownCaretWin=function(e){var t=e.className,n=e.variant,i=void 0===n?"default":n;return s.createElement("svg",{className:t,width:"12px",height:"6px",viewBox:"0 0 12 6",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{stroke:"highlighted"===i?"#0269D9":"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fillOpacity:"0.8"},s.createElement("g",{fill:"#000000"},s.createElement("polygon",{points:"6 5.01369863 11.4626866 0 12 0.493150685 6 6 0 0.493150685 0.537313433 0"}))))},t.IconDropdownCaretWeb=function(e){var t=e.className;return s.createElement("svg",{className:t,width:"7px",height:"4px",viewBox:"0 0 7 4",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(-509.000000, -24.000000)",fill:"#637282"},s.createElement("g",{transform:"translate(444.000000, 16.000000)"},s.createElement("polygon",{points:"65 8 72 8 68.5 12"})))))},t.IconDropdownCaretBlueWeb=function(e){var t=e.className;return s.createElement("svg",{className:t,width:"7px",height:"4px",viewBox:"0 0 7 4",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(-509.000000, -128.000000)",fill:"#007AF5"},s.createElement("polygon",{id:"Arrow",points:"509 128 516 128 512.5 132"}))))},t.IconDropdownCaretOsx.displayName="IconDropdownCaretOsx",t.IconDropdownCaretWin.displayName="IconDropdownCaretWin",t.IconDropdownCaretWeb.displayName="IconDropdownCaretWeb",t.IconDropdownCaretBlueWeb.displayName="IconDropdownCaretBlueWeb"})),define("spectrum-sharing/components/icons/icon_dropdown_selected",["require","exports","tslib","react"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconDropdownSelectedBlue=t.IconDropdownSelected=void 0,s=n.__importStar(s),t.IconDropdownSelected=function(e){var t=e.className;return s.createElement("svg",{className:t,width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{fill:"#3E3E3E",fillRule:"nonzero"},s.createElement("path",{d:"M2.25927473,6.3493149 C1.89985258,5.92998906 1.2685526,5.88142752 0.849226756,6.24084967\n                  C0.429900914,6.60027182 0.381339377,7.2315718 0.740761528,7.65089765 L3.65485393,11.0506721\n                  C3.75823486,11.1606625 3.75823486,11.1606625 3.87986598,11.2500569 C4.38534754,11.5870446\n                  5.06830382,11.4504534 5.40529152,10.9449718 L11.3320684,2.05480647 C11.6384209,1.59527778\n                  11.514247,0.974408438 11.0547183,0.668055979 C10.5951896,0.36170352 9.97432029,0.485877389\n                  9.66796784,0.945406077 L4.40019879,8.84705964 L2.25927473,6.3493149 Z"}))))},t.IconDropdownSelected.displayName="IconDropdownSelected",t.IconDropdownSelectedBlue=function(e){var t=e.className;return s.createElement("svg",{className:t,width:"14px",height:"11px",viewBox:"0 0 14 11",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(-3.000000, -5.000000)",fill:"#0070E0"},s.createElement("path",{d:"M11,13 L11,3 L13,3 L13,13 L13,15 L7,15 L7,13 L11,13 Z",id:"Icon",transform:"translate(10.000000, 9.000000) rotate(-315.000000) translate(-10.000000, -9.000000) "}))))},t.IconDropdownSelectedBlue.displayName="IconDropdownSelectedBlue"})),define("spectrum-sharing/components/icons/icon_link",["require","exports","tslib","react"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconLink=void 0,s=n.__importStar(s);var i={default:"transparent",active:"#D0D4D9",edit:"transparent",view:"transparent"},r=function(){return s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(-24.000000, -8.000000)"},s.createElement("g",null,s.createElement("g",{transform:"translate(24.000000, 8.000000)"},s.createElement("circle",{stroke:"#D0D4D9",strokeWidth:"1.32",cx:"16",cy:"16",r:"15.34"}),s.createElement("path",{d:"M21.0859375,13.1015625 L20.0195312,14.1679688 L17.8320312,11.9804688\n                L18.8984375,10.9140625 C19.007813,10.804687 19.1445304,10.75 19.3085938,10.75\n                C19.4726571,10.75 19.6093745,10.804687 19.71875,10.9140625 L21.0859375,12.28125\n                C21.195313,12.3906255 21.25,12.5273429 21.25,12.6914062 C21.25,12.8554696\n                21.195313,12.992187 21.0859375,13.1015625 Z M10.75,19.0625 L17.203125,12.609375\n                L19.390625,14.796875 L12.9375,21.25 L10.75,21.25 L10.75,19.0625 Z",fill:"#6A7C8F"})))))},a=function(){return s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(-24.000000, -8.000000)"},s.createElement("g",null,s.createElement("g",{transform:"translate(24.000000, 8.000000)"},s.createElement("circle",{stroke:"#D0D4D9",strokeWidth:"1.32",cx:"16",cy:"16",r:"15.34"}),s.createElement("path",{d:"M14.7695312,14.7695312 C15.1158871,14.4231754 15.5260393,14.25 16,14.25\n                  C16.4739607,14.25 16.8841129,14.4231754 17.2304688,14.7695312 C17.5768246,\n                  15.1158871 17.75,15.5260393 17.75,16 C17.75,16.4739607 17.5768246,16.8841129\n                  17.2304688,17.2304688 C16.8841129,17.5768246 16.4739607,17.75 16,17.75 C15.5260393,\n                  17.75 15.1158871,17.5768246 14.7695312,17.2304688 C14.4231754,16.8841129 14.25,\n                  16.4739607 14.25,16 C14.25,15.5260393 14.4231754,15.1158871 14.7695312,14.7695312\n                  Z M13.921875,18.078125 C14.5052113,18.643232 15.1979127,18.9257812 16,18.9257812\n                  C16.8020873,18.9257812 17.4902315,18.6386747 18.0644531,18.0644531 C18.6386747,\n                  17.4902315 18.9257812,16.8020873 18.9257812,16 C18.9257812,15.1979127 18.6386747,\n                  14.5097685 18.0644531,13.9355469 C17.4902315,13.3613253 16.8020873,13.0742188 16,\n                  13.0742188 C15.1979127,13.0742188 14.5097685,13.3613253 13.9355469,13.9355469\n                  C13.3613253,14.5097685 13.0742188,15.1979127 13.0742188,16 C13.0742188,16.8020873\n                  13.356768,17.4947887 13.921875,18.078125 Z M12.0898438,12.828125 C13.2565163,\n                  12.0260377 14.5598886,11.625 16,11.625 C17.4401114,11.625 18.7434837,12.0260377\n                  19.9101562,12.828125 C21.0768288,13.6302123 21.915362,14.6874934 22.4257812,16\n                  C21.915362,17.3125066 21.0768288,18.3697877 19.9101562,19.171875 C18.7434837,\n                  19.9739623 17.4401114,20.375 16,20.375 C14.5598886,20.375 13.2565163,19.9739623\n                  12.0898438,19.171875 C10.9231712,18.3697877 10.084638,17.3125066 9.57421875,\n                  16 C10.084638,14.6874934 10.9231712,13.6302123 12.0898438,12.828125 Z",fill:"#667C91"})))))},o=function(){return s.createElement("g",{fill:"#6A7C8F",transform:"translate(16.071068, 16.071068) rotate(-315.000000)\n                  translate(-16.071068, -16.071068) translate(13.071068, 9.071068)"},s.createElement("path",{d:"M5.98487348,4.76239943 L4.58487348,4.76239943 L4.58487348,3.36107038\n                      C4.58487348,2.58309388 3.95807213,1.96239943 3.18487348,1.96239943\n                      C2.40628423,1.96239943 1.78487348,2.58860575 1.78487348,3.36107038\n                      L1.78487348,6.16372849 C1.78487348,6.94170499 2.41167483,7.56239943\n                      3.18487348,7.56239943 L3.18487348,8.96239943 C1.63847618,8.96239943\n                      0.384873479,7.70483456 0.384873479,6.16532106 L0.384873479,3.3594778\n                      C0.384873479,1.81469408 1.64162279,0.562399434 3.18487348,0.562399434\n                      C4.73127078,0.562399434 5.98487348,1.81996431 5.98487348,3.3594778\n                      L5.98487348,4.76239943 Z"}),s.createElement("path",{d:"M0.384873479,9.66239943 L1.78487348,9.66239943 L1.78487348,11.0637285\n                      C1.78487348,11.841705 2.41167483,12.4623994 3.18487348,12.4623994\n                      C3.96346273,12.4623994 4.58487348,11.8361931 4.58487348,11.0637285\n                      L4.58487348,8.26107038 C4.58487348,7.48309388 3.95807213,6.86239943\n                      3.18487348,6.86239943 L3.18487348,5.46239943 C4.73127078,5.46239943\n                      5.98487348,6.71996431 5.98487348,8.2594778 L5.98487348,11.0653211\n                      C5.98487348,12.6101048 4.72812417,13.8623994 3.18487348,13.8623994\n                      C1.63847618,13.8623994 0.384873479,12.6048346 0.384873479,11.0653211\n                      L0.384873479,9.66239943 Z"}))};t.IconLink=function(e){var t=e.className,n=e.variant;return s.createElement("svg",{className:t,width:"32px",height:"32px",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("circle",{stroke:"#D0D4D9",strokeWidth:"1.32",cx:"16",cy:"16",r:"15.34",fill:i[n||"default"]}),(function(e){switch(e){case"edit":return r();case"view":return a();default:return o()}})(n||"default")))}})),define("spectrum-sharing/components/icons/icon_settings_gear",["require","exports","tslib","react"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconSettingsGear=void 0,s=n.__importStar(s);t.IconSettingsGear=function(){return s.createElement("svg",{width:"24",height:"24",viewBox:"-4 -4 24 24"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(-8.000000, -8.000000)",fill:"#6A7C8F"},s.createElement("path",{d:"M24,15.2 L24,17.1428571 L21.4857143,17.1428571 C21.2888229,17.8170566 21.0206419,\n            18.4683533 20.6857143,19.0857143 L22.0571429,21.0285714 L20.6857143,22.4 L18.8571429,\n            21.0285714 C18.2754139,21.325336 17.6619932,21.5553687 17.0285714,21.7142857 L16.8,24\n            L14.8571429,24 L14.5142857,21.8285714 C13.8530915,21.7734369 13.2201272,21.5360752\n            12.6857143,21.1428571 L10.8571429,22.5142857 L9.6,21.1428571 L10.9714286,19.0857143\n            C10.6251458,18.4858566 10.3926725,17.8271824 10.2857143,17.1428571 L8,17.0285714\n            L8,14.9714286 L10.2857143,14.7428571 C10.4547526,14.0951222 10.7247251,13.4780422\n            11.0857143,12.9142857 L9.6,11.0857143 L10.9714286,9.6 L12.8,10.9714286 C13.3973396,\n            10.711597 14.0076729,10.4827221 14.6285714,10.2857143 L14.9714286,8 L16.9142857,8\n            17.2571429,10.2857143 C17.9212591,10.4043389 18.5478652,10.678479 19.0857143,11.0857143\n            L20.9142857,9.6 L22.2857143,10.9714286 L20.9142857,12.9142857 C21.3270172,13.533851\n            21.5999981,14.2358018 21.7142857,14.9714286 L24,15.2 Z M16,19.4285714 C17.8935477,\n            19.4285714 19.4285714,17.8935477 19.4285714,16 C19.4285714,14.1064523 17.8935477,\n            12.5714286 16,12.5714286 C14.1064523,12.5714286 12.5714286,14.1064523 12.5714286,16\n            C12.5714286,17.8935477 14.1064523,19.4285714 16,19.4285714 Z"}))))}})),define("spectrum-sharing/components/input/index",["require","exports","tslib","spectrum-sharing/components/input/input"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/input/input",["require","exports","tslib","classnames","react","spectrum/input/index"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0,s=n.__importDefault(s),i=n.__importStar(i);var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.variant,o=n.__rest(e,["className","variant"]),l=s.default("scl-input",t,"scl-input--"+a),c="borderless"===a?"default":a;return i.createElement(r.Input,Object.assign({className:l,variant:c},o))},t})(i.PureComponent);t.Input=a,a.displayName="Input"})),define("spectrum-sharing/components/member_row/index",["require","exports","tslib","spectrum-sharing/components/member_row/member_row"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/member_row/member_row",["require","exports","tslib","classnames","react","spectrum/avatar/index","spectrum-sharing/components/scooter_loader/index","spectrum-sharing/components/sharing_avatar_initials/index","spectrum-sharing/components/sharing_portal_dropdown/index"],(function(e,t,n,s,i,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemberRow=void 0,s=n.__importDefault(s);var c=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.handleDropdownChange=function(e){var n=t.props,s=n.id,i=n.onChange,r=n.optionGroup;!i||r&&r.selectedApiId===e||i(s,e)},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.variant,r=void 0===n?"default":n,a=e.position,o=void 0===a?"default":a,l=e.tag||"li",c=s.default(t,{"scl-member-row":!0,"scl-member-row-borderless":"borderless"===r,"scl-member-row-default":"default"===r,"scl-member-row-narrow":"narrow"===r},{"scl-member-row-positioned":"bottom"===o||"middle"===o,"scl-member-row-bottom":"bottom"===o});return i.createElement(l,{className:c},i.createElement("div",{className:"scl-member-row-outer"},this.renderAvatar(),i.createElement("div",{className:"scl-member-row-info"},this.renderDisplayName(),this.renderMemberDetails())),this.renderRightSideElement())},t.prototype.renderAvatar=function(){var e=this.props,t=e.avatarHidden,n=e.avatarUrl,s=e.avatarElement,a=e.displayName,l=e.id,c=e.initials,d=e.initialAvatarShape;return t?i.createElement("div",{className:"scl-member-row-avatar-empty"}):s||(n?i.createElement(r.Avatar,{src:n,className:"scl-member-row-avatar"}):i.createElement(o.SharingAvatarInitials,{avatarSize:32,backgroundColor:r.avatarColorForUserIdentifier(a||l),className:"scl-member-row-avatar",shape:d},c))},t.prototype.renderRightSideElement=function(){var e=this.props,t=e.id,n=e.loadingSpinnerVisible,s=e.optionGroup;return n?i.createElement(a.ScooterLoader,null):s?1===s.options.length&&s.selectedApiId===s.options[0].apiId?i.createElement("div",null," ",s.label," "):i.createElement(l.SharingPortalDropdown,{id:t,optionGroup:s,onSelection:this.handleDropdownChange}):null},t.prototype.renderDisabledMessage=function(){return this.props.disabledMessage?[i.createElement("span",{key:0,className:"u-font-meta dot"}," · "),i.createElement("span",{key:1,className:"u-font-danger"}," ",this.props.disabledMessage)]:null},t.prototype.renderNameTitleAndText=function(){return i.createElement("span",{className:"scl-member-row-info-display-name-title",title:this.props.displayName},this.props.truncatedDisplayName||this.props.displayName)},t.prototype.renderPASSDot=function(){return this.props.passString?i.createElement("span",{className:"scl-member-row-dot"}," · "):null},t.prototype.renderOffTeamDot=function(){return this.props.offTeamMessage&&this.props.description?i.createElement("span",{className:"u-font-meta"}," · "):null},t.prototype.renderPASS=function(){var e=this.props,t=e.present,n=e.passString;if(n){var r=s.default({"scl-member-row-last-seen":!0,"scl-member-row-last-seen-not-present":!t});return i.createElement("span",{className:r},n)}return null},t.prototype.renderDisplayName=function(){return i.createElement("div",{className:"scl-member-row-display-name"},i.createElement("span",{className:this.props.onClickDisplayName?"scl-member-row-pointer":"",onClick:this.props.onClickDisplayName},this.renderNameTitleAndText(),this.renderDisabledMessage(),this.renderPASSDot(),this.renderPASS()))},t.prototype.renderOffTeamMessage=function(e){return e?i.createElement("span",{className:"u-font-meta"},e):null},t.prototype.renderMemberDetails=function(){var e=this.props,t=e.description,n=e.offTeamMessage,s=e.truncatedDescription;return i.createElement("div",{className:"scl-member-row-details"},i.createElement("span",{className:this.props.onClickDetails?"scl-member-row-pointer":"",onClick:this.props.onClickDetails},i.createElement("span",{className:"scl-member-row-details-span",title:t},s||t),this.renderOffTeamDot(),this.renderOffTeamMessage(n)))},t})((i=n.__importStar(i)).PureComponent);t.MemberRow=c,c.displayName="MemberRow"})),define("spectrum-sharing/components/scooter_loader/index",["require","exports","tslib","spectrum-sharing/components/scooter_loader/scooter_loader"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/scooter_loader/scooter_loader",["require","exports","tslib","classnames","react"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScooterLoader=void 0,s=n.__importDefault(s),i=n.__importStar(i),t.ScooterLoader=function(e){var t=e.className,r=n.__rest(e,["className"]);return i.createElement("div",Object.assign({className:s.default("scl-scooter-loader",t)},r),i.createElement("div",{className:"scl-scooter-loader-animation"}))},t.ScooterLoader.displayName="ScooterLoader"})),define("spectrum-sharing/components/sharing_contact_token/index",["require","exports","tslib","spectrum-sharing/components/sharing_contact_token/sharing_contact_token"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_contact_token/sharing_contact_token",["require","exports","tslib","react","spectrum/avatar/index","spectrum/tooltip/index"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingContactToken=void 0;var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.avatarUrl,n=e.displayName,a=e.validation,o=s.createElement("div",{style:{display:"flex",maxWidth:"200px"}},t&&s.createElement(i.Avatar,{size:16,src:t}),s.createElement("div",{style:{flex:"auto",marginLeft:"5px",minWidth:"0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},n));return a&&"invalid"===a.state?s.createElement(r.Tooltip,{tooltipContent:a.msg?a.msg:""},o):o},t})((s=n.__importStar(s)).PureComponent);t.SharingContactToken=a,a.displayName="SharingContactToken"})),define("spectrum-sharing/components/sharing_dropdown_menu/index",["require","exports","tslib","spectrum-sharing/components/sharing_dropdown_menu/sharing_dropdown_menu","spectrum-sharing/components/sharing_dropdown_menu/sharing_dropdown_menu_button","spectrum-sharing/components/sharing_dropdown_menu/sharing_dropdown_menu_item"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t),n.__exportStar(i,t),n.__exportStar(r,t)})),define("spectrum-sharing/components/sharing_dropdown_menu/sharing_dropdown_menu",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingDropdownMenu=t.baseClassName=void 0,s=n.__importDefault(s),i=n.__importStar(i),t.baseClassName="scl-sharing-dropdown-menu",t.SharingDropdownMenu=function(e){var a,o=e.position,l=e.className,c=n.__rest(e,["position","className"]),d=s.default(t.baseClassName,l,((a={})[t.baseClassName+"--right"]="right"===o,a));return i.createElement(r.DropdownMenu,Object.assign({className:d},c))},t.SharingDropdownMenu.displayName="SharingDropdownMenu"})),define("spectrum-sharing/components/sharing_dropdown_menu/sharing_dropdown_menu_button",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index","spectrum-sharing/components/icons/icon_dropdown_caret"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingDropdownMenuButton=void 0,s=n.__importDefault(s),i=n.__importStar(i);var o="scl-sharing-dropdown-menu-button",l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.children,l=e.className,c=n.__rest(e,["children","className"]),d=s.default(o,l);return i.createElement(r.DropdownMenuButton,Object.assign({className:d},c),t,i.createElement(a.IconDropdownCaretOsx,{className:o+"__icon "+o+"__icon--osx"}),i.createElement(a.IconDropdownCaretWin,{className:o+"__icon "+o+"__icon--win"}))},t})(i.PureComponent);t.SharingDropdownMenuButton=l,l.displayName="SharingDropdownMenuButton"})),define("spectrum-sharing/components/sharing_dropdown_menu/sharing_dropdown_menu_item",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index","spectrum-sharing/components/icons/icon_dropdown_selected"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingDropdownMenuItem=void 0,s=n.__importDefault(s),i=n.__importStar(i);var o="scl-sharing-dropdown-menu-item";t.SharingDropdownMenuItem=function(e){var t,l=e.description,c=e.label,d=e.selected,u=e.value,p=n.__rest(e,["description","label","selected","value"]);return i.createElement(r.MenuItem,Object.assign({className:o,key:u,value:u,text:c,selected:d},p),d&&i.createElement(a.IconDropdownSelected,{className:o+"__selected-icon"}),i.createElement("div",{className:s.default(o+"__wrapper",(t={},t[o+"__wrapper-selected"]=d,t))},i.createElement("div",{className:o+"__label"},c),l&&i.createElement("div",{className:o+"__description"},l)))},t.SharingDropdownMenuItem.displayName="SharingDropdownMenuItem"})),define("spectrum-sharing/components/sharing_modal_checkbox_row/index",["require","exports","tslib","spectrum-sharing/components/sharing_modal_checkbox_row/sharing_modal_checkbox_row"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_modal_checkbox_row/sharing_modal_checkbox_row",["require","exports","tslib","classnames","react","spectrum/checkbox/index","spectrum/tooltip/index","spectrum/util/uuid_generator"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalCheckboxRow=void 0,s=n.__importDefault(s);var l=(function(e){function t(t){var n=e.call(this,t)||this;return n.onCheckChanged=function(e){n.props.onCheckChanged("checked"===e)},n.checkboxId=o.generateUUID("scl-sharing-modal-checkbox-row"),n}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,n=e.className,o=e.disabled,l=e.labelText,c=e.tooltipData,d=s.default("scl-sharing-modal-checkbox-row",n,{"scl-sharing-modal-checkbox-row--disabled":o}),u=i.createElement(r.Checkbox,{id:this.checkboxId,checked:t?"checked":"unchecked",disabled:o,onChange:this.onCheckChanged}),p=!(!c||!c.alwaysShow),m=c?i.createElement(a.Tooltip,{className:c.className,tooltipContent:c.content,isShowInitially:p,showOnMouseMove:!p,closeOnBlur:!p,positioning:c.positioning},u):u;return i.createElement("div",{className:d},m,i.createElement("label",{className:"scl-sharing-modal-checkbox-row__label",htmlFor:this.checkboxId},l))},t})((i=n.__importStar(i)).PureComponent);t.SharingModalCheckboxRow=l})),define("spectrum-sharing/components/sharing_modal_contacts_field/index",["require","exports","tslib","spectrum-sharing/components/sharing_modal_contacts_field/sharing_modal_contacts_field"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_modal_contacts_field/sharing_modal_contacts_field",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index","spectrum/tooltip/index","spectrum-sharing/components/sharing_dropdown_menu/index"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalContactsField=t.baseClassName=void 0,s=n.__importDefault(s),i=n.__importStar(i),t.baseClassName="scl-sharing-modal-contacts-field";var l=(function(e){function l(t){var n=e.call(this,t)||this;return n.renderDropdown=function(){var e=n.props,t=(e.className,e.labelledAccessTypes),s=e.selectedAccessType,l=e.showNoEditTooltip,c=e.noEditText,d=s?s.label:void 0,u=i.createElement(o.SharingDropdownMenu,{position:"right",onSelection:n.handleChange},i.createElement(o.SharingDropdownMenuButton,{disabled:l},d),i.createElement(r.Menu,null,i.createElement(i.Fragment,null,t.map((function(e){return i.createElement(o.SharingDropdownMenuItem,{"aria-label":e.ariaLabel,description:e.details,key:e.apiId,label:e.label,selected:s&&s.apiId===e.apiId,value:e.apiId})})))));return l?i.createElement(a.Tooltip,{positioning:"below",tooltipContent:c},u):u},n.handleChange=function(e){n.props.onAccessTypeChange&&n.props.onAccessTypeChange(e)},n}return n.__extends(l,e),l.prototype.render=function(){var e=this.props,n=e.className,r=e.toLabel,a=s.default(t.baseClassName,n);return i.createElement("div",{className:a},i.createElement("div",{className:t.baseClassName+"__left"},i.createElement("div",{className:t.baseClassName+"__to-label"},r),i.createElement("div",{className:t.baseClassName+"__input"},this.props.contactsField)),i.createElement("div",{className:t.baseClassName+"__right"},this.renderDropdown()))},l})(i.Component);t.SharingModalContactsField=l})),define("spectrum-sharing/components/sharing_modal_footer_inband/index",["require","exports","tslib","spectrum-sharing/components/sharing_modal_footer_inband/sharing_modal_footer_inband"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_modal_footer_inband/sharing_modal_footer_inband",["require","exports","tslib","classnames","react","spectrum/button/index"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterInband=void 0,s=n.__importDefault(s),i=n.__importStar(i);var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,a=e.textButtonShare,o=e.isButtonShareDisabled,l=e.onClickButtonShare,c=s.default("scl-sharing-modal-footer-inband",t,"scl-sharing-modal-footer");return i.createElement("div",{className:c},n,i.createElement("div",{className:"scl-sharing-modal-footer-inband__spacer"}),i.createElement(r.Button,{variant:"primary",className:"scl-sharing-modal-footer-inband__button","aria-label":a,onClick:l,disabled:o},a))},t})(i.PureComponent);t.SharingModalFooterInband=a,a.defaultProps={isButtonShareDisabled:!1}})),define("spectrum-sharing/components/sharing_modal_footer_link/index",["require","exports","tslib","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_create","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_disabled","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_loading","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_options","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_copy"],(function(e,t,n,s,i,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t),n.__exportStar(i,t),n.__exportStar(r,t),n.__exportStar(a,t),n.__exportStar(o,t),n.__exportStar(l,t)})),define("spectrum-sharing/components/sharing_modal_footer_link_list/index",["require","exports","tslib","spectrum-sharing/components/sharing_modal_footer_link_list/sharing_modal_footer_link_list"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_modal_footer_link_list/sharing_modal_footer_link_list",["require","exports","tslib","classnames","react"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkList=t.baseClassName=void 0,s=n.__importDefault(s),i=n.__importStar(i),t.baseClassName="scl-sharing-modal-footer-link-list";var r=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.render=function(){var e=s.default(t.baseClassName,this.props.className);return i.createElement("div",{className:e},i.createElement("div",{className:t.baseClassName+"__header"},i.createElement("div",{className:t.baseClassName+"__title"},this.props.title),i.createElement("div",{className:t.baseClassName+"__actions"},this.props.actions)),i.createElement("div",{className:t.baseClassName+"__items"},this.props.children))},r})(i.PureComponent);t.SharingModalFooterLinkList=r})),define("spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link",["require","exports","tslib","classnames","react","spectrum-sharing/components/icons/icon_link"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLink=t.baseClassName=void 0,s=n.__importDefault(s),i=n.__importStar(i),t.baseClassName="scl-sharing-modal-footer-link";var a=(function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(a,e),a.prototype.render=function(){var e=s.default(t.baseClassName,this.props.className);return i.createElement("div",{className:e},!0!==this.props.isIconHidden&&i.createElement("div",{className:t.baseClassName+"__icon"},this.props.icon?this.props.icon:i.createElement(r.IconLink,null)),i.createElement("div",{className:t.baseClassName+"__body"},this.props.body),i.createElement("div",{className:t.baseClassName+"__actions"},this.props.actions))},a})(i.PureComponent);t.SharingModalFooterLink=a})),define("spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_copy",["require","exports","tslib","react","classnames","spectrum/button/index","spectrum-sharing/components/icons/icon_link","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkCopy=void 0,s=n.__importStar(s),i=n.__importDefault(i);t.SharingModalFooterLinkCopy=function(e){var t=i.default(o.baseClassName,o.baseClassName+"--copy",e.className);return s.createElement(o.SharingModalFooterLink,{className:t,icon:e.icon?e.icon:s.createElement(a.IconLink,{variant:"active"}),isIconHidden:e.isIconHidden,body:s.createElement("input",Object.assign({readOnly:!0,autoFocus:!0,value:e.sharedLinkUrl,onClick:l,onFocus:l,"aria-label":e.labelSharedLinkUrl,ref:e.textInputRef},e.inputProps)),actions:s.createElement(r.Button,{variant:"borderless",onClick:e.onClickButton},e.textButton)})};var l=function(e){e.currentTarget.select()}})),define("spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_create",["require","exports","tslib","react","spectrum/button/index","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkCreate=void 0,s=n.__importStar(s);t.SharingModalFooterLinkCreate=function(e){return s.createElement(r.SharingModalFooterLink,{className:e.className,icon:e.icon,body:e.statusNoLinkCreated,actions:s.createElement(i.Button,{variant:"borderless",onClick:e.onClickButtonCreateLink},e.textButtonCreateLink)})}})),define("spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_disabled",["require","exports","tslib","react","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkDisabled=void 0,s=n.__importStar(s);t.SharingModalFooterLinkDisabled=function(e){return s.createElement(i.SharingModalFooterLink,{className:e.className,icon:e.icon,body:s.createElement("div",null,e.statusDisabledLink)})}})),define("spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_loading",["require","exports","tslib","classnames","react","spectrum-sharing/components/scooter_loader/index","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkLoading=void 0,s=n.__importDefault(s),i=n.__importStar(i);t.SharingModalFooterLinkLoading=function(e){var t=s.default(a.baseClassName,a.baseClassName+"--loading",e.className);return i.createElement(a.SharingModalFooterLink,{className:t,icon:e.icon,body:i.createElement("div",{className:a.baseClassName+"--loading-body"},i.createElement("span",null,e.statusCreatingLink),i.createElement(r.ScooterLoader,null))})}})),define("spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link_options",["require","exports","tslib","react","spectrum/button/index","spectrum-sharing/components/sharing_modal_footer_link/sharing_modal_footer_link","spectrum-sharing/components/icons/icon_link"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkOptions=void 0,s=n.__importStar(s);t.SharingModalFooterLinkOptions=function(e){return s.createElement(r.SharingModalFooterLink,{className:e.className,icon:e.icon?e.icon:s.createElement(a.IconLink,{variant:"active"}),body:e.statusLinkCreated,actions:s.createElement("div",null,s.createElement(i.Button,{key:"settings",variant:"borderless",onClick:e.onClickButtonLinkSettings},e.textButtonLinkSettings),s.createElement("span",{key:"separator",className:"scl-sharing-modal-footer-link__sep"},"•"),s.createElement(i.Button,{className:e.buttonCopyClassName,key:"copy",variant:"borderless",onClick:e.onClickButtonCopyLink},e.textButtonCopyLink))})}})),define("spectrum-sharing/components/sharing_modal_header/index",["require","exports","tslib","spectrum-sharing/components/sharing_modal_header/sharing_modal_header","spectrum-sharing/components/sharing_modal_header/sharing_modal_header_title","spectrum-sharing/components/sharing_modal_header/sharing_modal_header_input","spectrum-sharing/components/sharing_modal_header/sharing_modal_header_with_back_button"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t),n.__exportStar(i,t),n.__exportStar(r,t),n.__exportStar(a,t)})),define("spectrum-sharing/components/sharing_modal_header/sharing_modal_header",["require","exports","tslib","classnames","react","spectrum/button/index","spectrum/icon_form/index","spectrum-sharing/components/icons/icon_settings_gear"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalHeader=t.baseClassName=void 0,s=n.__importDefault(s),i=n.__importStar(i),t.baseClassName="scl-sharing-modal-header";var l=(function(e){function l(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(l,e),l.prototype.render=function(){var e=this.props,n=e.children,r=e.className,a=e.closeButtonVisible,o=e.icon,l=e.settingsButtonVisible,c=s.default(t.baseClassName,r);return i.createElement("div",{className:c},i.createElement("div",{className:t.baseClassName+"__icon"},o),i.createElement("div",{className:t.baseClassName+"__children"},n),l&&this.renderSettingsButton(),a&&this.renderCloseButton())},l.prototype.renderSettingsButton=function(){return i.createElement(r.Button,{"aria-label":"settings",className:t.baseClassName+"__settings",onClick:this.props.onClickSettingsButton,variant:"styleless"},i.createElement(o.IconSettingsGear,null))},l.prototype.renderCloseButton=function(){return i.createElement(r.Button,{"aria-label":"close",className:t.baseClassName+"__close",onClick:this.props.onClickCloseButton,variant:"styleless"},i.createElement(a.IconForm,{name:"cancel"}))},l})(i.PureComponent);t.SharingModalHeader=l,l.defaultProps={closeButtonVisible:!1,settingsButtonVisible:!1}})),define("spectrum-sharing/components/sharing_modal_header/sharing_modal_header_input",["require","exports","tslib","react","spectrum-sharing/components/input/index","spectrum-sharing/components/sharing_modal_header/sharing_modal_header"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalHeaderInput=void 0;var a=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.setInputRef=function(e){t.input=e},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.inputAriaLabel,a=e.inputAutoFocus,o=e.inputPlaceholder,l=e.onInputBlur,c=e.onInputChange,d=e.onInputFocus,u=e.onInputKeyUp,p=n.__rest(e,["inputAriaLabel","inputAutoFocus","inputPlaceholder","onInputBlur","onInputChange","onInputFocus","onInputKeyUp"]);return s.createElement(r.SharingModalHeader,Object.assign({closeButtonVisible:!0},p),s.createElement(i.Input,{ref:this.setInputRef,className:r.baseClassName+"__input",variant:"borderless","aria-label":t,autoFocus:a,onChange:c,onFocus:d,onBlur:l,onKeyUp:u,placeholder:o}),this.props.children)},t})((s=n.__importStar(s)).PureComponent);t.SharingModalHeaderInput=a,a.displayName="SharingModalHeaderInput"})),define("spectrum-sharing/components/sharing_modal_header/sharing_modal_header_title",["require","exports","tslib","react","spectrum-sharing/components/sharing_modal_header/sharing_modal_header"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalHeaderTitle=void 0;var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.title,r=e.subTitle,a=n.__rest(e,["title","subTitle"]);return s.createElement(i.SharingModalHeader,Object.assign({},a),s.createElement("div",{className:i.baseClassName+"__title"},t),r&&s.createElement("div",{className:i.baseClassName+"__sub-title"},r))},t})((s=n.__importStar(s)).PureComponent);t.SharingModalHeaderTitle=r,r.displayName="SharingModalHeaderTitle"})),define("spectrum-sharing/components/sharing_modal_header/sharing_modal_header_with_back_button",["require","exports","tslib","react","spectrum-sharing/components/back_button/index","dig-components/icons/src","spectrum-sharing/components/sharing_modal_header/sharing_modal_header"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalHeaderWithBackButton=void 0;var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=a.baseClassName+"--with-back-button";return s.createElement(a.SharingModalHeader,Object.assign({className:e},this.props),s.createElement(i.BackButton,{autoFocus:this.props.autoFocus,onBackButtonClick:this.props.onClickBackButton,label:this.props.label,icon:r.ChevronLeftLine}))},t})((s=n.__importStar(s)).PureComponent);t.SharingModalHeaderWithBackButton=o,o.displayName="SharingModalHeaderWithBackButton"})),define("spectrum-sharing/components/sharing_modal_message_field/index",["require","exports","tslib","spectrum-sharing/components/sharing_modal_message_field/sharing_modal_message_field"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_modal_message_field/sharing_modal_message_field",["require","exports","tslib","classnames","react"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalMessageField=void 0,s=n.__importDefault(s);var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=e.onChange,a=e.value,o=e.placeholder,l=s.default("scl-sharing-modal-message-field",t);return i.createElement("div",{className:l},i.createElement("textarea",{"aria-label":o,className:"scl-textarea",placeholder:o,onChange:r,value:a}),n)},t})((i=n.__importStar(i)).PureComponent);t.SharingModalMessageField=r,r.displayName="SharingModalMessageField"})),define("spectrum-sharing/components/sharing_modal_settings_row/index",["require","exports","tslib","spectrum-sharing/components/sharing_modal_settings_row/sharing_modal_settings_row"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_modal_settings_row/sharing_modal_settings_row",["require","exports","tslib","classnames","react"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalSettingsRow=void 0,s=n.__importDefault(s);var r=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.handleLinkClicked=function(e){e.preventDefault(),t.props.descriptionLinkOnClicked&&t.props.descriptionLinkUrl&&t.props.descriptionLinkOnClicked(t.props.descriptionLinkUrl)},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.rightSideElement,r=e.bottomElement,a=s.default("scl-sharing-modal-settings-row",t);return i.createElement("div",{className:a},i.createElement("div",{className:"scl-sharing-modal-settings-row-outer"},i.createElement("div",{className:"scl-sharing-modal-settings-row-info"},i.createElement("div",{className:"scl-sharing-modal-settings-row-display-name"},i.createElement("span",{className:"scl-sharing-modal-settings-row-info-display-name-title",title:this.props.displayNameTitle},this.props.displayName)),i.createElement("div",{className:"scl-sharing-modal-settings-row-details"},i.createElement("span",{className:"scl-sharing-modal-settings-row-details-span",title:this.props.description},this.props.description,this.props.descriptionLinkUrl&&this.props.descriptionLinkText&&i.createElement("span",null," ",i.createElement("a",{className:"scl-sharing-modal-settings-row-description-link",href:"#",onClick:this.handleLinkClicked},this.props.descriptionLinkText))))),n&&i.createElement("div",{className:"scl-sharing-modal-settings-right-element"},n)),r&&i.createElement("div",{className:"scl-sharing-modal-settings-bottom-element"},r))},t})((i=n.__importStar(i)).PureComponent);t.SharingModalSettingsRow=r,r.displayName="SharingModalSettingsRow"})),define("spectrum-sharing/components/sharing_modal_downgrade_banner/index",["require","exports","tslib","spectrum-sharing/components/sharing_modal_downgrade_banner/sharing_modal_downgrade_banner"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_modal_downgrade_banner/sharing_modal_downgrade_banner",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/typography"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalDowngradeBanner=void 0,s=n.__importStar(s);var l="scl-sharing-modal-downgrade-banner",c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.subheader,n=e.header,r=e.onClickOutlineButton,a=e.onClickTransparentButton,c=e.outlineButtonLabel,d=e.transparentButtonLabel,u=e.showCloseButton;return s.createElement("div",{className:l+" dig-Theme---VIS"},s.createElement("div",{className:l+"__header"},s.createElement(o.Text,{isBold:!0,size:"large"},n),u&&this.renderCloseButton()),s.createElement("div",{className:l+"__subheader"},s.createElement(o.Text,null,t)),s.createElement("div",{className:l+"__buttons"},s.createElement(i.Button,{variant:"outline",onClick:r},c),s.createElement(i.Button,{variant:"transparent",onClick:a},d)))},t.prototype.renderCloseButton=function(){return s.createElement(i.IconButton,{variant:"transparent","aria-label":"close",className:l+"__close",onClick:this.props.onClickCloseButton,size:"standard"},s.createElement(r.UIIcon,{src:a.CloseLine}))},t})(s.PureComponent);t.SharingModalDowngradeBanner=c})),define("spectrum-sharing/share_modal/sharing_settings/restricted_visibility_banner",["require","exports","tslib","react","spectrum-sharing/utils/sharing_constants","spectrum-sharing/utils/em_string","spectrum-sharing/components/sharing_modal_banner/index","spectrum-sharing/share_modal/sharing_settings/utils/link_metadata_types"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestrictedVisibilityBanner=void 0,s=n.__importStar(s),i=n.__importStar(i);var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.linkPermissions.resolved_visibility,t=this.props.linkPermissions.audience_options[0].disallowed_reason;return"restricted_by_shared_folder"!==t&&"delete_and_recreate"!==t?null:s.createElement(a.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:s.createElement("span",null,s.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-text"},this.audienceDisallowedText(e))," ",s.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-advice u-font-meta"},this.audienceDisallowedAdviceText(t)))})},t.prototype.audienceDisallowedText=function(e){if(e===o.ResolvedVisibilityPolicy.shared_folder_only){var t=this.props.linkPermissions.restricting_shared_folder_path;return t=r.Emstring.em_snippet(t,i.SNIPPET_SIZES.FILENAME),this.props.intl.formatMessage({id:"Wzk4tW",defaultMessage:"Only members of the shared folder “{shared_folder_name}” can view this link."},{shared_folder_name:t})}return e===o.ResolvedVisibilityPolicy.only_you?this.props.intl.formatMessage({id:"kp9e20",defaultMessage:"Only you can view this link."}):void 0},t.prototype.audienceDisallowedAdviceText=function(e){return"restricted_by_shared_folder"===e?this.props.intl.formatMessage({id:"D2VN2I",defaultMessage:"To change who can access the link, go to the shared folder options."}):"delete_and_recreate"===e?this.props.intl.formatMessage({id:"HbDkss",defaultMessage:"To change who can access the link, delete this link and create a new one."}):void 0},t})(s.Component);t.RestrictedVisibilityBanner=l})),define("spectrum-sharing/share_modal/sharing_settings/sharing_settings_dropdown",["require","exports","tslib","react","spectrum/dropdown_menu/index","spectrum/dropdown_menu/index","spectrum-sharing/components/sharing_dropdown_menu/index"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingDropdown=void 0;var o=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.handleSelection=function(e){t.props.onValueSelected(e)},t}return n.__extends(t,e),t.prototype.render=function(){return s.createElement(a.SharingDropdownMenu,{disabled:this.props.disabled,onSelection:this.handleSelection,position:"right"},this.renderButton(),s.createElement(r.Menu,null,s.createElement(s.Fragment,null,this.renderMenuItems())))},t.prototype.renderButton=function(){return s.createElement(i.DropdownMenuButton,{className:"sharing-settings-dropdown__button",disabled:this.props.disabled},this.props.optionsDict[this.props.currentValue].label)},t.prototype.renderMenuItems=function(){var e=this;return this.props.valuesList.map((function(t){return s.createElement(a.SharingDropdownMenuItem,{key:t,value:t,label:e.props.optionsDict[t].label,description:e.props.optionsDict[t].description,selected:t===e.props.currentValue})}))},t})((s=n.__importStar(s)).Component);t.SettingDropdown=o})),define("spectrum-sharing/share_modal/sharing_settings/sharing_settings_audience",["require","exports","tslib","react","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants","spectrum-sharing/share_modal/sharing_settings/sharing_settings_dropdown","spectrum-sharing/share_modal/sharing_settings/sharing_settings_policy_view","spectrum-sharing/share_modal/sharing_settings/sharing_settings_password","spectrum-sharing/share_modal/sharing_settings/restricted_visibility_banner","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_util","spectrum-sharing/utils/sharing_util"],(function(e,t,n,s,i,r,a,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsAudience=t.AudienceDropdown=void 0,s=n.__importStar(s);function u(e){var n="password"===e.linkPolicy.audience;return s.createElement("div",null,s.createElement(t.AudienceDropdown,Object.assign({},e)),n&&s.createElement(o.PasswordInput,Object.assign({},e)))}t.AudienceDropdown=function(e){var t=e.linkPermissions,n=e.linkPolicy,a=(e.getPolicyDict,e.onPolicyUpdate),o=n.audience||"",l=t.audience_options.filter((function(e){return!(function(e,t){return"public"===e&&c.isPasswordPolicyEnforcedByAdmin(t)&&!d.isRighteousLink(t)})(e.audience,t)&&e.allowed})).map((function(e){return e.audience})),u=e.getPolicyDict(i.AUDIENCE),p=l.length>1;return s.createElement(r.SettingDropdown,{currentValue:o,valuesList:l,optionsDict:u.optionsDict,onValueSelected:function(e){var s={audience:e};(function(e,t,n,s){if(c.isExternalAudience(e)){if(c.isExpirationPolicySetByAdmin(t)){var i=new Date,r=new Date(i.getFullYear(),i.getMonth(),i.getDate()+c.daysExpirationPolicyToNumber[t.days_to_expire_policy]);(!n.expires||n.expires>r)&&(s.expires=r,s.display_expiration_warning=!0)}c.isPasswordPolicyEnforcedByAdmin(t)&&!n.require_password&&(s.require_password=!0,"public"===e&&(s.display_password_warning=!0))}else s.display_expiration_warning=!1,s.display_password_warning=!1})(e,t,n,s),a(s)},disabled:!p||e.readOnlyPolicy})},t.SharingSettingsAudience=function(e){var t,n=e.intl,r=e.linkPermissions;r.audience_options.filter((function(e){return e.allowed})).length>1||(t=s.createElement(l.RestrictedVisibilityBanner,{intl:n,linkPermissions:r}));var o=e.getPolicyDict(i.AUDIENCE),c=s.createElement(u,Object.assign({},e));return s.createElement(a.SettingPolicyRow,{policyName:i.AUDIENCE,policyDict:o,selector:c,extra:t})}})),define("spectrum-sharing/share_modal/sharing_settings/sharing_settings_password",["require","exports","tslib","react","spectrum/input/index","spectrum-sharing/share_modal/sharing_settings/sharing_settings_policy_view","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_util"],(function(e,t,n,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsPassword=t.PasswordInput=void 0,s=n.__importStar(s);var l=function(e,t){return o.isPasswordPolicyEnforcedByAdmin(e)&&o.isExternalAudience(t)};function c(e,t){return t.link_password||""===t.link_password?t.link_password:o.hasLinkPassword(e)?"123456":""}t.PasswordInput=function(e){var t=e.intl,n=e.linkPolicy,r=e.linkPermissions,a=e.onPolicyUpdate;return s.createElement(i.Input,{role:"textbox",autoFocus:!0,className:"password-input__input sharing-settings-modal__input",disabled:!o.canModifyPassword(r)||e.readOnlyPolicy,placeholder:t.formatMessage({id:"um5odk",defaultMessage:"Set password"}),name:"link_password",onChange:function(e){var t;a(((t={})[e.target.name]=e.target.value,t))},type:"password",variant:n.link_password?"default":"invalid",value:c(r,n)})},t.SharingSettingsPassword=function(e){var n=e.getPolicyDict,i=e.linkPolicy,c=n(a.REQUIRE_PASSWORD),d=s.createElement("div",null,(function(e){var t=e.linkPolicy,n=e.linkPermissions,i=e.getPolicyDict,c=e.onPolicyUpdate,d=i(a.REQUIRE_PASSWORD).optionsDict,u=t.require_password?"enabled":"disabled";return s.createElement(r.SettingsToggle,{currentValue:u,optionsDict:d,onOptionChange:function(e,t){c({require_password:e})},disabled:!o.canTogglePassword(n)||l(n,t.audience)||e.readOnlyPolicy})})(e),(i.require_password||l(e.linkPermissions,i.audience)&&!e.readOnlyPolicy)&&s.createElement(t.PasswordInput,Object.assign({},e)));return s.createElement(r.SettingPolicyRow,{policyName:a.REQUIRE_PASSWORD,policyDict:c,selector:d})}})),define("spectrum-sharing/share_modal/sharing_settings/sharing_settings_expire",["require","exports","tslib","react","spectrum/datepicker/index","spectrum-sharing/utils/datetime_util","spectrum-sharing/share_modal/sharing_settings/sharing_settings_policy_view","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_util","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants"],(function(e,t,n,s,i,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsExpire=void 0,s=n.__importStar(s);var c=function(e){var t=e.linkMetadata,n=e.linkPolicy,s=new Date,i=void 0;if(o.isExternalAudience(n.audience)){var r=t.link_permissions.days_to_expire_policy;o.isExpirationPolicyEnforcedByAdmin(t.link_permissions)&&(i=new Date(s.getFullYear(),s.getMonth(),s.getDate()+o.daysExpirationPolicyToNumber[r]))}return{before:new Date(s.getFullYear(),s.getMonth(),s.getDate()+1),after:i}},d=function(e){var t=e.intl,n=e.linkMetadata,a=e.linkPolicy,l=e.onPolicyUpdate;return s.createElement(i.DatepickerInput,{disabled:!o.canModifyExpire(n)||e.readOnlyPolicy,disabledDays:c(e),selectedDay:a.expires,onDayClick:function(e){l({expires:e,display_expiration_warning:!1})},placeholder:t.formatMessage({id:"J5Qx8E",defaultMessage:"mm/dd/yyyy"}),localization:r.getDatePickerLocalization(t)})},u=function(e){var t=e.linkPolicy,n=e.linkMetadata,i=e.getPolicyDict,c=e.onPolicyUpdate,d=i(l.EXPIRES),u=null!=e.linkPolicy.expires?"enabled":"disabled",m=n.link_permissions.days_to_expire_policy;return s.createElement(a.SettingsToggle,{currentValue:u,optionsDict:d.optionsDict,onOptionChange:function(e,s){var i=null;e&&(i=t.expires,t.expires||(i=r.daysAfterToday(o.isExternalAudience(t.audience)&&o.isExpirationPolicySetByAdmin(n.link_permissions)?o.daysExpirationPolicyToNumber[m]:30))),c({expires:i,display_expiration_warning:!1})},disabled:p(n,t)||e.readOnlyPolicy})},p=function(e,t){return!o.canToggleExpire(e)||o.isExternalAudience(t.audience)&&o.isExpirationPolicyEnforcedByAdmin(e.link_permissions)};t.SharingSettingsExpire=function(e){var t=e.getPolicyDict(l.EXPIRES),n=function(t){t&&t.expires instanceof Date&&(t.expires.setHours(23),t.expires.setMinutes(59),t.expires.setSeconds(59)),e.onPolicyUpdate(t)},i=null!=e.linkPolicy.expires,r=s.createElement(u,Object.assign({},e,{onPolicyUpdate:n})),o=s.createElement("div",null,r,i&&s.createElement(d,Object.assign({},e,{onPolicyUpdate:n})));return s.createElement(a.SettingPolicyRow,{policyName:l.EXPIRES,policyDict:t,selector:o})}})),define("spectrum-sharing/share_modal/sharing_settings/sharing_settings_download",["require","exports","tslib","react","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants","spectrum-sharing/components/sharing_modal_banner/index","spectrum-sharing/share_modal/sharing_settings/sharing_settings_policy_view"],(function(e,t,n,s,i,r,a){"use strict";function o(e){return Boolean(e&&e.allow_download?e.can_disallow_download:e.can_allow_download)}Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsDownload=t.DisableDownloadsBanner=void 0,s=n.__importStar(s),t.DisableDownloadsBanner=function(e){var t=e.intl,n=e.linkPolicy,i=e.linkPermissions;return!n.allow_download&&i.can_disallow_download?s.createElement(r.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"warn",message:t.formatMessage({id:"+EZZAD",defaultMessage:"This applies only within Dropbox."})}):null};var l=function(e){var t=e.linkPolicy,n=e.onPolicyUpdate,r=e.getPolicyDict,l=e.linkPermissions,c=t.allow_download?"disabled":"enabled",d=r(i.ALLOW_DOWNLOAD);return s.createElement(a.SettingsToggle,{currentValue:c,optionsDict:d.optionsDict,onOptionChange:function(e,t){n(i.ALLOW_DOWNLOAD,!e)},disabled:!o(l)||e.readOnlyPolicy})};t.SharingSettingsDownload=function(e){var t=e.getPolicyDict(i.ALLOW_DOWNLOAD),n=e.isEditFolderLink?void 0:s.createElement(l,Object.assign({},e)),r=e.isEditFolderLink?"setting-disabled":"";return s.createElement(a.SettingPolicyRow,{policyName:i.ALLOW_DOWNLOAD,policyDict:t,selector:n,onLinkClicked:e.onLinkClicked,extra:e.banner,className:r})}})),define("spectrum-sharing/share_modal/sharing_settings/sharing_settings_policy_view",["require","exports","tslib","react","spectrum/toggle/index","spectrum-sharing/components/sharing_modal_settings_row/index"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsToggle=t.SettingPolicyRow=void 0,s=n.__importStar(s),t.SettingPolicyRow=function(e){var t=e.policyName,n=e.policyDict,i=e.selector,a=e.onLinkClicked,o=e.extra,l=e.className;return s.createElement(r.SharingModalSettingsRow,{policyFieldName:t,key:n.title,displayName:n.title,displayNameTitle:n.title,description:n.description,descriptionLinkUrl:n.descriptionLinkUrl,descriptionLinkText:n.descriptionLinkText,descriptionLinkOnClicked:a,rightSideElement:i,bottomElement:o,className:l})},t.SettingsToggle=function(e){var t=e.currentValue,n=e.optionsDict,r=e.onOptionChange,a=e.disabled,o=a?function(e,t){}:r;return s.createElement(i.Toggle,{ariaLabel:n[t].label,className:"sharing-settings-modal__toggle",labelContent:n[t].label,checked:n[t].value,interactive:!a,disabled:a,onCheckedChange:o})}})),define("spectrum-sharing/components/sharing_avatar_initials/index",["require","exports","tslib","spectrum-sharing/components/sharing_avatar_initials/sharing_avatar_initials"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_avatar_initials/sharing_avatar_initials",["require","exports","tslib","classnames","react"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingAvatarInitials=void 0,s=n.__importDefault(s),i=n.__importStar(i),t.SharingAvatarInitials=function(e){var t=e.children,r=e.className,a=e.backgroundColor,o=e.avatarSize,l=void 0===o?32:o,c=e.variant,d=e.shape,u=n.__rest(e,["children","className","backgroundColor","avatarSize","variant","shape"]),p=s.default("scl-sharing-avatar-initials-"+l+"-"+d,{"scl-avatar-text-inactive":"inactive"===c,"scl-sharing-avatar-text":!0},r),m={background:""+a,border:"1px solid "+a,borderRadius:"square"===d?"12%":"50%",height:l+"px",width:l+"px"};return i.createElement("div",Object.assign({className:p,style:m},u),t)},t.SharingAvatarInitials.displayName="SharingAvatarInitials"})),define("spectrum-sharing/components/sharing_menu/index",["require","exports","tslib","spectrum-sharing/components/sharing_menu/sharing_menu","spectrum-sharing/components/sharing_menu/sharing_menu_item"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t),n.__exportStar(i,t)})),define("spectrum-sharing/components/sharing_menu/sharing_menu",["require","exports","tslib","react","classnames","spectrum/dropdown_menu/index"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingMenu=void 0,s=n.__importStar(s),i=n.__importDefault(i),t.SharingMenu=function(e){var t=e.className,a=n.__rest(e,["className"]),o=i.default(t,"scl-sharing-menu");return s.createElement(r.Menu,Object.assign({className:o},a))},t.SharingMenu.displayName="SharingMenu"})),define("spectrum-sharing/components/sharing_menu/sharing_menu_item",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index","spectrum-sharing/components/icons/icon_dropdown_selected"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingMenuItem=void 0,s=n.__importDefault(s),i=n.__importStar(i);t.SharingMenuItem=function(e){var t=e.value,o=e.label,l=e.description,c=e.selected,d=e.variant,u=void 0===d?"default":d,p=n.__rest(e,["value","label","description","selected","variant"]);return i.createElement(r.MenuItem,Object.assign({className:s.default({"scl-sharing-menu-item-border":"border"===u}),key:t,value:t,text:o,selected:c},p),c&&i.createElement(a.IconDropdownSelectedBlue,{className:"scl-sharing-menu-item-selected-icon"}),i.createElement("div",{className:s.default("scl-sharing-menu-item-wrapper",{"scl-sharing-menu-item-wrapper-selected":c})},i.createElement("div",{className:s.default("scl-sharing-menu-item-label",{"scl-sharing-menu-item-label-default":"default"===u,"scl-sharing-menu-item-label-red":"red"===u})},o),i.createElement("div",{className:"scl-sharing-menu-item-description"},l)))}})),define("spectrum-sharing/components/sharing_portal_dropdown/index",["require","exports","tslib","spectrum-sharing/components/sharing_portal_dropdown/sharing_portal_dropdown"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/sharing_portal_dropdown/sharing_portal_dropdown",["require","exports","tslib","classnames","react","react-dom","react-aria-menubutton","spectrum/util/uuid_generator","spectrum/positioned_portal/index","spectrum/button/index","spectrum-sharing/components/icons/icon_dropdown_caret","spectrum-sharing/components/sharing_menu/index"],(function(e,t,n,s,i,r,a,o,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingPortalDropdown=void 0,s=n.__importDefault(s),i=n.__importStar(i),r=n.__importStar(r);var p=(function(e){function t(t){var n=e.call(this,t)||this;return n.dropdownId=o.generateUUID("portalDropdown"),n.handleResizeEvent=function(){n.state.isOpen&&n.resolvePortalPosition()},n.handleScrollEvent=function(){n.state.isOpen&&n.resolvePortalPosition()},n.onMenuToggle=function(e){var t=e.isOpen;t||n.positionedPortalEl.hidePortal(),n.setState({isOpen:t})},n.handlePortalDidShow=function(){a.openMenu(n.dropdownId,{focusMenu:!0})},n.state={isOpen:!1},n}return n.__extends(t,e),t.prototype.componentDidUpdate=function(e,t){this.state.isOpen&&this.positionedPortalEl?(this.mountListeners(),this.resolvePortalPosition()):this.positionedPortalEl&&this.unMountListeners()},t.prototype.componentWillUnmount=function(){this.unMountListeners()},t.prototype.mountListeners=function(){document.addEventListener("scroll",this.handleScrollEvent,!1),window.addEventListener("resize",this.handleResizeEvent,!1)},t.prototype.unMountListeners=function(){document.removeEventListener("scroll",this.handleScrollEvent,!1),window.removeEventListener("resize",this.handleResizeEvent,!1)},t.prototype.resolvePortalPosition=function(){if(this.positionedPortalEl&&this.positionedPortalEl.portalInstance.portalContentElementRef){var e=r.findDOMNode(this.positionedPortalEl);if(!(e instanceof Element))throw new Error("Unable to find PositionedPortal DOM node - check if this SharingPortalDropdown is still mounted");var t=e.getElementsByClassName("scl-sharing-portal-dropdown-button");if(!t.length)throw new Error("Unable to find SharingPortalDropdownButton - check if this SharingPortalDropdown is still mounted");var n=t[0],s=this.positionedPortalEl.portalInstance.portalContentElementRef,i=n.getBoundingClientRect(),a=s.getBoundingClientRect(),o={top:0,left:0};o=i.bottom+a.height>window.innerHeight?{top:i.top-a.height-10,left:i.left+i.width-a.width}:{top:i.top+i.height+10,left:i.left+i.width-a.width},s.style.top=o.top+"px",s.style.left=o.left+"px"}},t.prototype.render=function(){var e=this,t=this.props,n=t.optionGroup,r=t.onSelection;t.id;return i.createElement(l.PositionedPortal,{closeOnBlur:!1,ref:function(t){return e.positionedPortalEl=t},renderContent:function(){return i.createElement(a.Wrapper,{id:e.dropdownId,onSelection:r,onMenuToggle:e.onMenuToggle},i.createElement(a.Button,{className:"scl-sharing-portal-dropdown-button-invisible"},n.label),i.createElement(u.SharingMenu,{className:"scl-sharing-portal-menu"},i.createElement(i.Fragment,null,n.options.map((function(e){return i.createElement(u.SharingMenuItem,{description:e.tooltip,key:e.apiId,label:e.label,selected:n.selectedApiId===e.apiId,value:e.apiId,variant:e.variant,disabled:e.disabled})})))))},role:"sharing-dropdown",showOnMouseMove:!1,showOnClick:!0,onDidShow:this.handlePortalDidShow},i.createElement(c.Button,{className:s.default("scl-sharing-portal-dropdown-button",{"scl-sharing-portal-dropdown-button-expanded":this.state.isOpen}),variant:"styleless"},n.label,e.state.isOpen?i.createElement(d.IconDropdownCaretBlueWeb,{className:"scl-sharing-portal-dropdown-icon scl-sharing-portal-dropdown-icon-web"}):i.createElement(d.IconDropdownCaretWeb,{className:"scl-sharing-portal-dropdown-icon scl-sharing-portal-dropdown-icon-web"})))},t})(i.PureComponent);t.SharingPortalDropdown=p})),define("spectrum-sharing/components/info_box/index",["require","exports","tslib","spectrum-sharing/components/info_box/info_box"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/info_box/info_box",["require","exports","tslib","react","dig-components/typography"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoBox=void 0,s=n.__importStar(s);var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout((function(){(new Image).src=e.props.imgPath}),200)},t.prototype.render=function(){var e=this.props,t=e.imgPath,n=e.imgAlt,r=e.title,a=e.message;return s.createElement("div",{className:"scl-info-box"},s.createElement("img",{src:t,className:"scl-info-box__img",alt:n}),s.createElement("div",{className:"scl-info-box__text"},s.createElement(i.Title,{size:"small",isBold:!0},r),s.createElement(i.Text,{size:"small"},a)))},t})(s.Component);t.InfoBox=r,r.displayName="InfoBox"})),define("spectrum-sharing/components/banner/index",["require","exports","tslib","spectrum-sharing/components/banner/banner"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/components/banner/banner",["require","exports","tslib","classnames","react"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Banner=t.baseClassName=void 0,s=n.__importDefault(s),i=n.__importStar(i),t.baseClassName="scl-banner";var r=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.render=function(){var e=this.props,n=e.variant,r=void 0===n?"default":n,a=e.className,o=e.showTopCaret,l=e.children,c=s.default(t.baseClassName,a,{"scl-banner--transparent-left":"transparent-left"===r});return i.createElement("div",{className:c},o&&i.createElement("div",{className:t.baseClassName+"__caret-up"}),i.createElement("div",{className:t.baseClassName+"__container"},l))},r})(i.PureComponent);t.Banner=r})),define("spectrum-sharing/utils/index",["require","exports","tslib","spectrum-sharing/utils/contacts_tokenizer/index","spectrum-sharing/utils/logging"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t),n.__exportStar(i,t)})),define("spectrum-sharing/utils/datetime_util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDateToString=t.daysAfterToday=t.getDatePickerLocalization=t.DAY_OF_WEEK_BY_LOCALE=t.DOW_MONDAY=t.DOW_SUNDAY=void 0,t.DOW_SUNDAY=0,t.DOW_MONDAY=1,t.DAY_OF_WEEK_BY_LOCALE={"da-DK":t.DOW_MONDAY,de:t.DOW_MONDAY,en:t.DOW_SUNDAY,"en-US":t.DOW_SUNDAY,"en-GB":t.DOW_MONDAY,es:t.DOW_MONDAY,"es-ES":t.DOW_MONDAY,fr:t.DOW_MONDAY,id:t.DOW_SUNDAY,it:t.DOW_MONDAY,ja:t.DOW_SUNDAY,ko:t.DOW_MONDAY,ms:t.DOW_MONDAY,"nb-NO":t.DOW_MONDAY,"nl-NL":t.DOW_MONDAY,pl:t.DOW_MONDAY,"pt-BR":t.DOW_SUNDAY,ru:t.DOW_MONDAY,"sv-SE":t.DOW_MONDAY,"th-TH":t.DOW_MONDAY,"uk-UA":t.DOW_MONDAY,"zh-CN":t.DOW_MONDAY,"zh-TW":t.DOW_MONDAY},t.getDatePickerLocalization=function(e){var n=t.DAY_OF_WEEK_BY_LOCALE[e.locale];return{firstDayOfWeek:void 0===n?t.DOW_MONDAY:n,months:[e.formatDate(new Date(2019,0,1),{month:"long"}),e.formatDate(new Date(2019,1,1),{month:"long"}),e.formatDate(new Date(2019,2,1),{month:"long"}),e.formatDate(new Date(2019,3,1),{month:"long"}),e.formatDate(new Date(2019,4,1),{month:"long"}),e.formatDate(new Date(2019,5,1),{month:"long"}),e.formatDate(new Date(2019,6,1),{month:"long"}),e.formatDate(new Date(2019,7,1),{month:"long"}),e.formatDate(new Date(2019,8,1),{month:"long"}),e.formatDate(new Date(2019,9,1),{month:"long"}),e.formatDate(new Date(2019,10,1),{month:"long"}),e.formatDate(new Date(2019,11,1),{month:"long"})],weekdaysLong:[e.formatDate(new Date(2019,8,1),{weekday:"long"}),e.formatDate(new Date(2019,8,2),{weekday:"long"}),e.formatDate(new Date(2019,8,3),{weekday:"long"}),e.formatDate(new Date(2019,8,4),{weekday:"long"}),e.formatDate(new Date(2019,8,5),{weekday:"long"}),e.formatDate(new Date(2019,8,6),{weekday:"long"}),e.formatDate(new Date(2019,8,7),{weekday:"long"})],weekdaysShort:[e.formatDate(new Date(2019,8,1),{weekday:"narrow"}),e.formatDate(new Date(2019,8,2),{weekday:"narrow"}),e.formatDate(new Date(2019,8,3),{weekday:"narrow"}),e.formatDate(new Date(2019,8,4),{weekday:"narrow"}),e.formatDate(new Date(2019,8,5),{weekday:"narrow"}),e.formatDate(new Date(2019,8,6),{weekday:"narrow"}),e.formatDate(new Date(2019,8,7),{weekday:"narrow"})]}};t.daysAfterToday=function(e){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),(function(e,t,n,s,i,r){return null==t&&(t=0),null==n&&(n=0),null==s&&(s=0),null==i&&(i=0),null==r&&(r=0),e.setFullYear(e.getFullYear()+t),e.setMonth(e.getMonth()+n),e.setDate(e.getDate()+s),e.setHours(e.getHours()+i),e.setMinutes(e.getMinutes()+r),e})(t,0,0,e)},t.formatDateToString=function(e){return e.toISOString().split(".")[0]+"Z"}})),define("spectrum-sharing/utils/em_string",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emstring=void 0;var n=(function(){function e(t){if(!(this instanceof e))return new e(t);this.s=t,this.info=this.widthInfo(),this.length=t.length?this.info[this.s.length-1]:0}return e.initClass=function(){this.ACCURACY=2,this.CODEPOINT_TO_WIDTH={32:38,33:25,34:42,35:67,36:58,37:92,38:75,39:25,40:33,41:33,42:58,43:58,44:25,45:33,46:25,47:42,48:58,49:58,50:58,51:58,52:58,53:58,54:58,55:58,56:58,57:58,58:25,59:25,60:58,61:58,62:58,63:50,64:100,65:67,66:67,67:67,68:75,69:58,70:58,71:75,72:83,73:33,74:25,75:67,76:58,77:100,78:83,79:83,80:67,81:83,82:67,83:58,84:58,85:75,86:67,87:100,88:67,89:58,90:58,91:33,92:42,93:33,94:58,95:50,96:67,97:58,98:67,99:50,100:67,101:58,102:33,103:58,104:67,105:25,106:25,107:58,108:25,109:100,110:67,111:67,112:67,113:67,114:42,115:50,116:42,117:67,118:58,119:83,120:58,121:58,122:50,123:42,124:58,125:42,126:58,161:25,162:58,163:58,164:58,165:58,166:58,167:58,168:67,169:92,170:42,171:50,172:58,174:92,175:58,176:50,177:58,178:42,179:42,180:67,181:67,182:75,183:25,184:25,185:42,186:42,187:50,188:83,189:83,190:83,191:50,192:67,193:67,194:67,195:67,196:67,197:67,198:92,199:67,200:58,201:58,202:58,203:58,204:33,205:33,206:33,207:33,208:75,209:83,210:83,211:83,212:83,213:83,214:83,215:58,216:83,217:75,218:75,219:75,220:75,221:58,222:67,223:67,224:58,225:58,226:58,227:58,228:58,229:58,230:92,231:50,232:58,233:58,234:58,235:58,236:25,237:25,238:25,239:25,240:67,241:67,242:67,243:67,244:67,245:67,246:67,247:58,248:67,249:67,250:67,251:67,252:67,253:58,254:67,255:58,256:75,257:67,258:75,259:67,260:75,261:67,262:75,263:58,264:75,265:58,266:75,267:58,268:75,269:58,270:83,271:83,272:83,273:75,274:67,275:67,276:67,277:67,278:67,279:67,280:67,281:67,282:67,283:67,284:83,285:75,286:83,287:75,288:83,289:75,290:83,291:75,292:83,293:75,294:92,295:75,296:33,297:33,298:33,299:33,300:33,301:33,302:33,303:33,304:33,305:25,306:67,307:67,308:42,309:33,310:75,311:67,312:67,313:58,314:33,315:58,316:33,317:58,318:42,319:58,320:50,321:67,322:42,323:83,324:75,325:83,326:75,327:83,328:75,329:83,330:83,331:75,332:92,333:67,334:92,335:67,336:92,337:67,338:100,339:100,340:75,341:50,342:75,343:50,344:75,345:50,346:67,347:58,348:67,349:58,350:67,351:58,352:67,353:58,354:75,355:42,356:75,357:42,358:75,359:42,360:83,361:75,362:83,363:75,364:83,365:75,366:83,367:75,368:83,369:75,370:83,371:75,372:100,373:92,374:75,375:58,376:75,377:67,378:67,379:67,380:67,381:67,382:67,383:42,384:75,385:83,386:67,387:75,388:75,389:67,390:75,391:83,392:58,393:83,394:100,395:67,396:75,397:67,398:67,399:75,400:58,401:58,402:75,403:83,404:75,405:100,406:50,407:50,408:75,409:67,410:50,411:67,412:117,413:83,414:75,415:92,416:92,417:75,418:117,419:100,420:75,421:75,422:75,423:67,424:58,425:67,426:58,427:42,428:75,429:42,430:75,431:83,432:75,433:92,434:83,435:75,436:75,437:67,438:67,439:67,440:67,441:58,442:58,443:75,444:75,445:58,446:50,447:67,448:33,449:50,450:50,451:33,452:142,453:142,454:133,455:100,456:92,457:67,458:117,459:117,460:100,461:75,462:67,463:33,464:33,465:92,466:67,467:83,468:75,469:83,470:75,471:83,472:75,473:83,474:75,475:83,476:75,477:67,478:75,479:67,480:75,481:67,482:100,483:100,484:92,485:75,486:83,487:75,488:75,489:67,490:92,491:67,492:92,493:67,494:67,495:58,496:33,497:142,498:142,499:133,500:83,501:75,502:117,503:67,504:83,505:75,506:75,507:67,508:100,509:100,510:92,511:67,512:75,513:67,514:75,515:67,516:67,517:67,518:67,519:67,520:33,521:33,522:33,523:33,524:92,525:67,526:92,527:67,528:75,529:50,530:75,531:50,532:83,533:75,534:83,535:75,536:67,537:58,538:75,539:42,540:58,541:58,542:83,543:75,544:83,545:100,546:92,547:67,548:67,549:67,550:75,551:67,552:67,553:67,554:92,555:67,556:92,557:67,558:92,559:67,560:92,561:67,562:75,563:58,564:67,565:100,566:67,567:33,568:100,569:100,570:75,571:75,572:58,573:58,574:67,575:58,576:58,577:67,578:50,579:75,580:75,581:75,582:75,583:58,584:58,585:25,586:83,587:58,588:75,589:33,590:75,591:58,880:67,881:50,882:67,883:50,884:33,885:33,886:75,887:67,888:108,889:108,890:67,891:58,892:58,893:58,894:42,895:108,896:108,897:108,898:108,899:108,900:67,901:67,902:75,903:42,904:83,905:100,906:58,907:108,908:100,909:108,910:100,911:100,912:42,913:75,914:67,915:58,916:83,917:67,918:67,919:83,920:92,921:33,922:75,923:75,924:100,925:83,926:75,927:92,928:83,929:67,930:108,931:67,932:75,933:75,934:83,935:75,936:83,937:92,938:33,939:75,940:83,941:58,942:75,943:42,944:67,945:83,946:67,947:67,948:67,949:58,950:75,951:75,952:67,953:42,954:67,955:67,956:75,957:67,958:67,959:67,960:92,961:67,962:67,963:75,964:67,965:67,966:92,967:67,968:92,969:100,970:42,971:67,972:67,973:67,974:100,975:108,976:58,977:75,978:75,979:100,980:75,981:92,982:100,983:67,984:92,985:67,986:75,987:58,988:58,989:58,990:67,991:58,992:75,993:92,994:100,995:92,996:75,997:58,998:75,999:58,1e3:75,1001:75,1002:67,1003:67,1004:83,1005:58,1006:50,1007:42,1008:67,1009:67,1010:58,1011:33,1012:92,1013:58,1014:58,1015:67,1016:67,1017:75,1018:100,1019:83,1020:58,1021:75,1022:75,1023:75,1024:67,1025:67,1026:92,1027:58,1028:75,1029:67,1030:33,1031:33,1032:42,1033:108,1034:108,1035:83,1036:75,1037:83,1038:75,1039:83,1040:75,1041:67,1042:67,1043:58,1044:83,1045:67,1046:92,1047:67,1048:83,1049:83,1050:75,1051:83,1052:100,1053:83,1054:92,1055:83,1056:67,1057:75,1058:75,1059:75,1060:83,1061:75,1062:83,1063:75,1064:108,1065:108,1066:75,1067:92,1068:67,1069:75,1070:108,1071:75,1072:67,1073:67,1074:58,1075:58,1076:75,1077:67,1078:83,1079:58,1080:75,1081:75,1082:67,1083:67,1084:83,1085:75,1086:67,1087:75,1088:75,1089:58,1090:58,1091:58,1092:92,1093:67,1094:75,1095:58,1096:92,1097:100,1098:67,1099:83,1100:58,1101:58,1102:92,1103:58,1104:67,1105:67,1106:75,1107:58,1108:58,1109:58,1110:33,1111:33,1112:42,1113:92,1114:92,1115:75,1116:67,1117:75,1118:58,1119:75,1120:100,1121:75,1122:75,1123:67,1124:83,1125:83,1126:75,1127:67,1128:100,1129:92,1130:92,1131:83,1132:117,1133:108,1134:67,1135:67,1136:83,1137:83,1138:92,1139:67,1140:83,1141:67,1142:83,1143:67,1144:133,1145:125,1146:92,1147:67,1148:100,1149:75,1150:100,1151:75,1152:75,1153:58,1154:75,1155:0,1156:0,1157:0,1158:0,1159:108,1160:0,1161:0,1162:83,1163:75,1164:67,1165:58,1166:67,1167:75,1168:58,1169:58,1170:67,1171:58,1172:75,1173:67,1174:100,1175:92,1176:67,1177:58,1178:75,1179:67,1180:83,1181:75,1182:75,1183:67,1184:83,1185:75,1186:83,1187:75,1188:100,1189:83,1190:117,1191:100,1192:92,1193:75,1194:75,1195:58,1196:75,1197:58,1198:75,1199:58,1200:75,1201:58,1202:75,1203:75,1204:100,1205:83,1206:75,1207:67,1208:75,1209:67,1210:75,1211:58,1212:92,1213:75,1214:92,1215:75,1216:33,1217:92,1218:83,1219:75,1220:67,1221:83,1222:67,1223:83,1224:75,1225:83,1226:75,1227:75,1228:58,1229:100,1230:83,1231:25,1232:75,1233:67,1234:75,1235:67,1236:100,1237:100,1238:67,1239:67,1240:75,1241:67,1242:75,1243:67,1244:92,1245:83,1246:67,1247:58,1248:67,1249:58,1250:83,1251:75,1252:83,1253:75,1254:92,1255:67,1256:92,1257:67,1258:92,1259:67,1260:75,1261:58,1262:75,1263:58,1264:75,1265:58,1266:75,1267:58,1268:75,1269:58,1270:58,1271:42,1272:92,1273:83,1274:58,1275:42,1276:75,1277:58,1278:75,1279:58,2026:67,19977:108,65403:58},this._ELLIPSIS_LENGTH=new e("…").length},e.em_snippet=function(t,n,s){return null==n&&(n=50),null==s&&(s=.75),new e(t.toString()).snippet(n,s).toString()},e.prototype.widthInfo=function(){for(var e={"-1":0},t=0,n=this.s.length,s=0<=n;s?t<n:t>n;s?t++:t--)e[t]=e[t-1]+this.ems(this.s.charAt(t));return e},e.prototype.findSpot=function(e){var t;if(!e)return 0;for(var n=0,s=this.s.length;n<=s;){t=Math.floor(n/2+s/2);var i=this.info[t-1];if(i>e)s=t-1;else{if(!(i<e))return t;n=t+1}}return n>t?n:t},e.prototype.ems=function(t){var n=t.charCodeAt(0),s=e.CODEPOINT_TO_WIDTH[n];return s?s/Math.pow(10,e.ACCURACY):768<=n&&n<=879?0:65377<=n&&n<=65500?.58:11904<=n&&n<=40911||44032<=n&&n<=55215||4352<=n&&n<=4607||63744<=n&&n<=64255||65280<=n&&n<=65535||131072<=n&&n<=196607?1.08:.65},e.prototype.substr=function(t,n){var s=this.findSpot(t);if(null!=n){var i=this.findSpot(t+n);if(i-s<this.s.length){var r=this.s.charCodeAt(i-s);65024<=r&&r<=65039&&i--}return new e(this.s.substr(s,i-s))}return new e(this.s.substr(s))},e.prototype.toString=function(){return this.s},e.prototype.snippet=function(t,n){if(void 0===t&&(t=50),void 0===n&&(n=.75),this.length<=t)return this;var s=(t-=e._ELLIPSIS_LENGTH)*n,i=t-s,r=this.length-i,a=this.substr(0,s),o=this.substr(r);return new e(a.toString()+"…"+o.toString())},e})();t.Emstring=n,n.initClass()})),define("spectrum-sharing/utils/contacts_tokenizer/index",["require","exports","tslib","spectrum-sharing/utils/contacts_tokenizer/contacts_tokenizer_util"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t)})),define("spectrum-sharing/utils/contacts_tokenizer/contacts_tokenizer_util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactsTokenizer=void 0;var n=/['&A-Za-z0-9\._%+-]+@[A-Za-z0-9-][A-Za-z0-9\.-]*\.[A-Za-z]{2,15}/gi,s=/[,|;>]+/;t.ContactsTokenizer=function(e){return{tokenizeAllRawInputs:function(t){var n=this.tokenizeValidRawInputs(t);return n.length>0?n:[e.buildFromRawEmail(t)]},tokenizeValidRawInputs:function(t){return(t.match(n)||[]).map(e.buildFromRawEmail)},tokenizeDelimitedInputs:function(e){return s.test(e)?this.tokenizeValidRawInputs(e):[]}}}})),define("spectrum-sharing/share_modal/sharing_settings/utils/index",["require","exports","tslib","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_link_policies","spectrum-sharing/share_modal/sharing_settings/utils/link_metadata_types","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_util"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(s,t),n.__exportStar(i,t),n.__exportStar(r,t),n.__exportStar(a,t)})),define("spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIEW_LINK_SETTINGS=t.EDIT_LINK_SETTINGS=t.FOLDER_SETTINGS=t.FILE_SETTINGS=t.TEXT=t.TOGGLE=t.DROPDOWN=t.ACL_UPDATE_POLICY=t.DISPLAY_EXPIRATION_WARNING=t.REQUIRE_PASSWORD=t.AUDIENCE=t.REQUESTED_VISIBILITY=t.ALLOW_DOWNLOAD=t.EXPIRES=t.FOLDER_LINK_AUDIENCE_POLICY=t.ACCESS_LEVEL_POLICY=t.VIEWER_INFO_POLICY=t.MEMBER_POLICY=void 0,t.MEMBER_POLICY="member_policy",t.VIEWER_INFO_POLICY="viewer_info_policy",t.ACCESS_LEVEL_POLICY="access_level",t.FOLDER_LINK_AUDIENCE_POLICY="shared_link_policy",t.EXPIRES="expires",t.ALLOW_DOWNLOAD="allow_download",t.REQUESTED_VISIBILITY="requested_visibility",t.AUDIENCE="audience",t.REQUIRE_PASSWORD="require_password",t.DISPLAY_EXPIRATION_WARNING="display_expiration_warning",t.ACL_UPDATE_POLICY="acl_update_policy",t.DROPDOWN="dropdown",t.TOGGLE="toggle",t.TEXT="text",t.FILE_SETTINGS="file_settings",t.FOLDER_SETTINGS="folder_settings",t.EDIT_LINK_SETTINGS="edit_link_settings",t.VIEW_LINK_SETTINGS="view_link_settings"})),define("spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_link_policies",["require","exports","spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_constants"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsLinkPolicies=void 0,t.SharingSettingsLinkPolicies=function(e){return{getShmodelInMultipleLinksPolicyDict:function(t,s){switch(t){case n.AUDIENCE:return{title:e.formatMessage({id:"uCVAxq",defaultMessage:"Who has access"}),description:s?e.formatMessage({id:"4HZCOQ",defaultMessage:"Control who can view the folder with this link."}):e.formatMessage({id:"xb28qW",defaultMessage:"Control who can view the file with this link."}),optionsDict:{public:{label:e.formatMessage({id:"JWcJZ7",defaultMessage:"Anyone with link"}),description:s?e.formatMessage({id:"ysL13U",defaultMessage:"Anyone with this link can view the folder."}):e.formatMessage({id:"oxZeg7",defaultMessage:"Anyone with this link can view the file."})},team:{label:e.formatMessage({id:"i9dq7T",defaultMessage:"Team members"}),description:s?e.formatMessage({id:"AvhnVi",defaultMessage:"Team members with this link can view the folder."}):e.formatMessage({id:"YTZEp1",defaultMessage:"Team members with this link can view the file."})},password:{label:e.formatMessage({id:"DDCDRp",defaultMessage:"People with password"}),description:s?e.formatMessage({id:"uos+ms",defaultMessage:"Password protect this link for viewing the folder."}):e.formatMessage({id:"oPivFQ",defaultMessage:"Password protect this link for viewing the file."})},no_one:{label:e.formatMessage({id:"kuFRq0",defaultMessage:"Only people invited"}),description:e.formatMessage({id:"+ZBQS4",defaultMessage:"The link is off and does not grant additional access to anyone."})}},type:n.DROPDOWN};case n.EXPIRES:return{title:e.formatMessage({id:"HIIRnD",defaultMessage:"Expiration"}),description:e.formatMessage({id:"92TP40",defaultMessage:"Disable this link on a specific date."}),optionsDict:{enabled:{label:e.formatMessage({id:"J8zY2i",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"w6dVgn",defaultMessage:"Off"}),value:!1}},type:n.TOGGLE};case n.ALLOW_DOWNLOAD:return{title:e.formatMessage({id:"d8lth0",defaultMessage:"Disable downloads"}),description:e.formatMessage({id:"B5ygR1",defaultMessage:"Prevent people with this link from downloading."}),descriptionLinkUrl:"/help/files-folders/set-link-permissions",descriptionLinkText:e.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),optionsDict:{enabled:{label:e.formatMessage({id:"47AlCD",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"0oEiHx",defaultMessage:"Off"}),value:!1}},type:n.TOGGLE};default:throw new Error("Policy name not found")}},getRLPolicyDict:function(t,s,i){var r="editor"===s;switch(t){case n.AUDIENCE:return{title:e.formatMessage({id:"uCVAxq",defaultMessage:"Who has access"}),description:r?i?e.formatMessage({id:"inMOXx",defaultMessage:"Control who can edit the folder with this link."}):e.formatMessage({id:"/1cHLH",defaultMessage:"Control who can edit the file with this link."}):e.formatMessage({id:"xb28qW",defaultMessage:"Control who can view the file with this link."}),optionsDict:{public:{label:e.formatMessage({id:"JWcJZ7",defaultMessage:"Anyone with link"}),description:r?i?e.formatMessage({id:"w/+tle",defaultMessage:"Anyone with this link can edit the folder."}):e.formatMessage({id:"a3Sd0R",defaultMessage:"Anyone with this link can edit the file."}):e.formatMessage({id:"oxZeg7",defaultMessage:"Anyone with this link can view the file."})},team:{label:e.formatMessage({id:"i9dq7T",defaultMessage:"Team members"}),description:r?i?e.formatMessage({id:"qUcOUf",defaultMessage:"Team members with this link can edit the folder."}):e.formatMessage({id:"dyCqAa",defaultMessage:"Team members with this link can edit the file."}):e.formatMessage({id:"YTZEp1",defaultMessage:"Team members with this link can view the file."})},no_one:{label:e.formatMessage({id:"kuFRq0",defaultMessage:"Only people invited"}),description:e.formatMessage({id:"+ZBQS4",defaultMessage:"The link is off and does not grant additional access to anyone."})}},type:n.DROPDOWN};case n.REQUIRE_PASSWORD:return{title:e.formatMessage({id:"8stY8L",defaultMessage:"Require password"}),description:i?e.formatMessage({id:"1Syz7Y",defaultMessage:"Set a password to limit access to the folder via link."}):e.formatMessage({id:"AH/PXS",defaultMessage:"Set a password to limit access to the file via link."}),optionsDict:{enabled:{label:e.formatMessage({id:"oUP+qL",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"h58mvf",defaultMessage:"Off"}),value:!1}},type:n.TOGGLE};case n.ALLOW_DOWNLOAD:var a=r&&i;return{title:e.formatMessage({id:"d8lth0",defaultMessage:"Disable downloads"}),description:a?e.formatMessage({id:"RQ2sAU",defaultMessage:"To disable downloads, share the link for viewing."}):e.formatMessage({id:"B5ygR1",defaultMessage:"Prevent people with this link from downloading."}),descriptionLinkUrl:"/help/files-folders/set-link-permissions",descriptionLinkText:a?void 0:e.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),optionsDict:{enabled:{label:e.formatMessage({id:"47AlCD",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"0oEiHx",defaultMessage:"Off"}),value:!1}},type:n.TOGGLE};case n.EXPIRES:return{title:e.formatMessage({id:"HIIRnD",defaultMessage:"Expiration"}),description:e.formatMessage({id:"92TP40",defaultMessage:"Disable this link on a specific date."}),optionsDict:{enabled:{label:e.formatMessage({id:"J8zY2i",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"w6dVgn",defaultMessage:"Off"}),value:!1}},type:n.TOGGLE};default:throw new Error("Policy name not found")}}}}})),define("spectrum-sharing/share_modal/sharing_settings/utils/sharing_settings_util",["require","exports","spectrum-sharing/share_modal/sharing_settings/utils/link_metadata_types","spectrum-sharing/utils/datetime_util"],(function(e,t,n,s){"use strict";function i(e){return e.requested_visibility===n.RequestedVisibilityPolicy.password||e.require_password}function r(e){return e.audience_options.filter((function(e){return"password"===e.audience&&e.allowed})).length>0}function a(e){if(e.effective_audience)return e.effective_audience;switch(e.resolved_visibility){case"public":case"password":case"no_one":return e.resolved_visibility;case"team_only":return"team";case"team_and_password":return"password";case"shared_folder_only":case"only_you":return"no_one"}}function o(e){return["public","password"].includes(e)}function l(e){return!!e.days_to_expire_policy&&"none"!==e.days_to_expire_policy}function c(e){return!!e.enforce_shared_link_password_policy&&"required"===e.enforce_shared_link_password_policy}function d(e){return l(e)&&!!e.change_shared_link_expiration_policy&&"not_allowed"===e.change_shared_link_expiration_policy}function u(e,t){return o(e.audience)&&(!e.expires&&d(t)||!i(t)&&c(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.canCreateLink=t.getLinkControlPolicyWarningText=t.isReadOnlyPolicy=t.isExpirationPolicyEnforcedByAdmin=t.isPasswordPolicyEnforcedByAdmin=t.isExpirationPolicySetByAdmin=t.isExternalAudience=t.daysExpirationPolicyToFormattedString=t.daysExpirationPolicyToNumber=t.SharingSettingsUtil=t.getAudienceForLink=t.canModifyExpire=t.canToggleExpire=t.canModifyPassword=t.canChangeShmodelPassword=t.canTogglePassword=t.hasLinkPassword=void 0,t.hasLinkPassword=i,t.canTogglePassword=function(e){return Boolean(e&&e.require_password?e.can_remove_password:e.can_set_password)||r(e)},t.canChangeShmodelPassword=r,t.canModifyPassword=function(e){return Boolean(e&&e.can_set_password)||r(e)},t.canToggleExpire=function(e){var t=e.link_permissions;return Boolean(null!=e.expires?t.can_remove_expiry:t.can_set_expiry)},t.canModifyExpire=function(e){var t=e.link_permissions;return Boolean(t.can_set_expiry)},t.getAudienceForLink=a,t.SharingSettingsUtil=function(e){return{getLinkPolicy:function(e){return{link_password:i(e.link_permissions)?void 0:"",expires:e.expires,allow_download:e.link_permissions.allow_download,audience:a(e.link_permissions),require_password:e.link_permissions.require_password}},getModifiedSettings:function(t,n,i){if(n!==i){var r={},a=null!=t.expires&&null==n.expires;if(n.audience!==i.audience&&(r.audience=n.audience),n.allow_download!==i.allow_download&&(r.allow_download=n.allow_download),n.expires&&t.link_permissions.can_set_expiry&&(r.expires=s.formatDateToString(n.expires)),n.require_password!==i.require_password&&(r.require_password=n.require_password),"password"===n.audience||n.require_password)if(n.link_password)r.require_password=!0,r.link_password=n.link_password;else if(""===n.link_password)return{error:e.formatMessage({id:"wFrAfD",defaultMessage:"Password can’t be empty"})};if(!(Object.keys(r).length<=0)||a)return{url:t.url,settings:r,remove_expiration:a}}}}},t.daysExpirationPolicyToNumber={day_1:1,day_3:3,day_7:7,day_30:30,day_90:90,day_180:180,year_1:365},t.daysExpirationPolicyToFormattedString={day_1:"1 day",day_3:"3 days",day_7:"7 days",day_30:"30 days",day_90:"90 days",day_180:"180 days",year_1:"1 year"},t.isExternalAudience=o,t.isExpirationPolicySetByAdmin=l,t.isPasswordPolicyEnforcedByAdmin=c,t.isExpirationPolicyEnforcedByAdmin=d,t.isReadOnlyPolicy=u,t.getLinkControlPolicyWarningText=function(e,n,s,i){var r="",a="allowed"===s.change_shared_link_expiration_policy?" You can change or remove this expiration.":"";if(u(e,s)){var o=d(s),l=c(s);r=i.formatMessage({id:"RKcgo5",defaultMessage:"Your admin requires {requirements} for links shared outside the team. To change the link setting, delete the link and create it again."},{requirements:o&&l?"an expiration and a password":l?"a password":"an expiration"})}else n.display_expiration_warning&&n.display_password_warning?r=i.formatMessage({id:"DhK9nV",defaultMessage:"Your admin requires a password and has set an expiration for all links shared outside the team. This link will expire in {days_to_expire}.{changeExpirationAllowed}"},{days_to_expire:t.daysExpirationPolicyToFormattedString[s.days_to_expire_policy],changeExpirationAllowed:a}):n.display_expiration_warning?r=i.formatMessage({id:"6AZ9fF",defaultMessage:"Your admin has set an expiration for all links shared outside the team. This link will expire in {days_to_expire}.{changeExpirationAllowed}"},{days_to_expire:t.daysExpirationPolicyToFormattedString[s.days_to_expire_policy],changeExpirationAllowed:a}):n.display_password_warning&&(r=i.formatMessage({id:"lcVbzE",defaultMessage:"Your admin requires to set a password for links shared outside the team."}));return r},t.canCreateLink=function(e,t,n,s,i,r,a,o,l,c){switch(e){case"editor":return n?r&&a&&!s&&!i:!s&&c;case"viewer":return t?l:!s&&l||o;default:return!1}}})),define("spectrum-sharing/share_modal/sharing_settings/utils/link_metadata_types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvedVisibilityPolicy=t.RequestedVisibilityPolicy=void 0,t.RequestedVisibilityPolicy={policy_name:"requested_visibility",password:"password",public:"public",team_only:"team_only"},t.ResolvedVisibilityPolicy={policy_name:"resolved_visibility",only_you:"only_you",password:"password",public:"public",shared_folder_only:"shared_folder_only",team_and_password:"team_and_password",team_only:"team_only",no_one:"no_one"}})),define("spectrum-sharing/share_modal_evolution/copy_link/copy_link_education_tooltip",["require","exports","tslib","react","dig-components/tooltips","spectrum-sharing/share_modal_evolution/utils/link_description"],(function(e,t,n,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyLinkEducationTooltip=t.baseClassName=void 0,s=n.__importStar(s),t.baseClassName="scl-copy-link-education-tooltip";var a=(function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(a,e),a.prototype.render=function(){return this.shouldRenderCopyLinkEducationTooltip()?s.createElement(i.Tooltip,{triggerRef:this.props.linkRef,placement:"top",className:t.baseClassName,title:this.renderLinkSettingsTooltipContent()},this.props.children):this.props.children},a.prototype.renderLinkSettingsTooltipContent=function(){var e=r.getLinkDescriptions(this.props.intl,this.props.sharedLink),t=e.length;return s.createElement(s.Fragment,null,r.getCopyLinkEducationTooltipTitle(this.props.intl),t>1?this.renderListOfSettings(e):this.renderOneSetting(e))},a.prototype.renderOneSetting=function(e){return s.createElement(s.Fragment,null," ",s.createElement("span",null,e[0]))},a.prototype.renderListOfSettings=function(e){var t=[];return e.forEach((function(e){t.push(s.createElement("li",null,e))})),s.createElement(s.Fragment,null,s.createElement("ul",null,t))},a.prototype.shouldRenderCopyLinkEducationTooltip=function(){return r.getLinkDescriptions(this.props.intl,this.props.sharedLink).length>0},a})(s.Component);t.CopyLinkEducationTooltip=a,a.displayName="CopyLinkEducationTooltip"})),define("spectrum-sharing/share_modal_evolution/utils/link_description",["require","exports","spectrum-sharing/share_modal/sharing_settings/utils/index"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.daysTilExpires=t.getLinkDescriptions=t.getExpirationEnabledText=t.getDownloadDisabledText=t.getPasswordRequiredText=t.getRestrictionsApplyText=t.getModifyText=t.getCopyLinkEducationTooltipTitle=void 0,t.getCopyLinkEducationTooltipTitle=function(e){return e.formatMessage({id:"LLktNG",defaultMessage:"Link settings:"})},t.getModifyText=function(e){return e.formatMessage({id:"BypDcT",defaultMessage:"Modify"})},t.getRestrictionsApplyText=function(e){return e.formatMessage({id:"RVzGyv",defaultMessage:"Restrictions apply"})},t.getPasswordRequiredText=function(e){return e.formatMessage({id:"K/i5x+",defaultMessage:"Password required"})},t.getDownloadDisabledText=function(e){return e.formatMessage({id:"KjJiVt",defaultMessage:"Download disabled"})},t.getExpirationEnabledText=function(e,t){var n=this.daysTilExpires(t);return e.formatMessage({id:"fp7TGs",defaultMessage:"{count, plural, one{Expires in a day} other{Expires in {count} days}}"},{count:n})},t.getLinkDescriptions=function(e,t){var s=[],i=n.getAudienceForLink(t.link_permissions),r=t.link_permissions.require_password||"password"===i,a=t.expires,o=!t.link_permissions.allow_download;return r&&s.push(this.getPasswordRequiredText(e)),a&&s.push(this.getExpirationEnabledText(e,t)),o&&s.push(this.getDownloadDisabledText(e)),s},t.daysTilExpires=function(e){var t=e.expires?e.expires.getTime():0;if(null!=e.expires){var n=t-(new Date).getTime();return n<0&&(n=0),Math.floor(n/864e5)}return-1}})),define("spectrum/icon_acl/index",["require","exports","tslib","react","spectrum/icon_templates/stateless/index","spectrum/svg_icon_bundle/index","spectrum/icon_acl/bundle"],(function(e,t,n,s,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconAcl=t.ICONS=void 0,s=n.__importStar(s),Object.defineProperty(t,"ICONS",{enumerable:!0,get:function(){return a.ICONS}}),t.IconAcl=function(e){var t=e.name,n=s.createElement(r.SvgIconBundle,{focusable:"false",icon:a.ICONS[t]});return s.createElement(i.Component,Object.assign({icon:n},e))},t.IconAcl.displayName="IconAcl"})),define("spectrum/icon_acl/bundle",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICONS=void 0,t.ICONS=JSON.parse('\n    {"link-edit":{"attrs":{"width":"32","height":"32","viewBox":"0 0 32 32"},"dangerouslySetInnerIconHtml":"<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M19.9 9.17l1.377-1.377a1 1 0 0 1 1.415 0l1.364 1.364a1 1 0 0 1 0 1.414l-1.377 1.377L19.9 9.17zM9.653 19.415l9.193-9.192 2.779 2.779-9.193 9.192-2.779-2.779zM8.6 20.441l2.778 2.779-3.219 1.073a.5.5 0 0 1-.632-.633L8.6 20.441z\\" fill=\\"#000\\"></path>"},"link-small":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><path d=\\"M5 12c0-1.657 1.347-3 2.997-3h3.006A3 3 0 0 1 14 12v3H7.997A3 3 0 0 1 5 12zm1.5 0c0 .834.672 1.5 1.5 1.5h1.5V15H14v-2.5h-1.5v-.505c0-.818-.67-1.495-1.499-1.495H8c-.834 0-1.499.672-1.499 1.5z\\" fill=\\"#637282\\"></path><path d=\\"M19 12c0 1.657-1.347 3-2.997 3h-3.006A3 3 0 0 1 10 12V9h6.003A3 3 0 0 1 19 12zm-1.5 0c0-.834-.672-1.5-1.5-1.5h-1.5V9H10v2.5h1.5v.505c0 .818.67 1.495 1.499 1.495H16c.834 0 1.499-.672 1.499-1.5z\\" fill=\\"#637282\\"></path></g>"},"link-view":{"attrs":{"width":"32","height":"32","viewBox":"0 0 32 32"},"dangerouslySetInnerIconHtml":"<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M16 22c3.524 0 6.612-2.572 8.324-4.348a2.354 2.354 0 0 0 0-3.304C22.612 12.572 19.524 10 16 10s-6.612 2.572-8.324 4.348a2.354 2.354 0 0 0 0 3.304C9.388 19.428 12.476 22 16 22zm0-2c2.153 0 3.899-1.79 3.899-4S18.153 12 16 12s-3.899 1.79-3.899 4 1.746 4 3.899 4z\\" fill=\\"#000\\"></path><path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M16 18.5c1.346 0 2.437-1.12 2.437-2.5S17.346 13.5 16 13.5c-1.346 0-2.437 1.12-2.437 2.5s1.091 2.5 2.437 2.5z\\" fill=\\"#000\\"></path>"},"link":{"attrs":{"width":"32","height":"32","viewBox":"0 0 32 32"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><g fill=\\"#637282\\"><path d=\\"M6 16c0-2.21 1.794-4 4.007-4h4.986A4.006 4.006 0 0 1 19 16v4h-8.993A4.006 4.006 0 0 1 6 16zm2 0c0 1.112.898 2 2.005 2H13v2h6v-3h-2v-.999c0-1.1-.894-2.001-1.997-2.001H9.997A2 2 0 0 0 8 16z\\"></path><path d=\\"M26 16c0 2.21-1.794 4-4.007 4h-4.986A4.006 4.006 0 0 1 13 16v-4h8.993A4.006 4.006 0 0 1 26 16zm-2 0c0-1.112-.898-2-2.005-2H19v-2h-6v3h2v.999c0 1.1.894 2.001 1.997 2.001h5.006A2 2 0 0 0 24 16z\\"></path></g></g>"}}\n  ')}));
//# sourceMappingURL=pkg-sharing.min.js-vfl1ev_sZ.map