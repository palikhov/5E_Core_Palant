define(["require","exports","tslib","react","react-redux","file-viewer/core/data/actions","file-viewer/core/data/selectors","file-viewer/watermarking/edit_plugin/plugin","dig-components/menu","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","file-viewer/watermarking/plugin/selectors","dig-components/tooltips"],(function(e,t,i,n,r,a,o,l,s,c,u,d,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWaterMarkingActionPluginLoader=t.WATERMARKING_ACTION_PLUGIN_ID=void 0,n=i.__importStar(n),t.WATERMARKING_ACTION_PLUGIN_ID="watermarking_overflow_action";var m=function(e){var t=e.fileViewerId,i=e.intl,m=e.ext,I=e.readOnly,_=r.useDispatch(),v=r.useSelector((function(e){return o.getCurrentFile(e,t)})).previewKey,y=n.useCallback((function(){_(a.setActiveEditPlugin({previewKey:v,fileViewerId:t,pluginId:l.WATER_MARKING_PLUGIN_ID,sourceContext:"toolbar"}))}),[v,t,_]),w=n.useMemo((function(){return{nodeType:"dropdown",actionType:d.ActionBarActionTypes.CUSTOM_ACTION,menuItem:{handler:y}}}),[y]),g=f.isSupportedPreviewType(m),A=n.default.createElement(s.Menu.ActionItem,{key:l.WATER_MARKING_PLUGIN_ID,value:w,withLeftAccessory:n.default.createElement(c.UIIcon,{src:u.StampLine}),disabled:!g||I},i.formatMessage({id:"MqyPTe",defaultMessage:"Watermark"}));return g?A:n.default.createElement(p.Tooltip,{title:i.formatMessage({id:"loGKPD",defaultMessage:"Watermarking is available on PDFs, PNGs, JPEGs, and BMPs."})},n.default.createElement("span",{style:{display:"inline-block"},tabIndex:0},A))};t.makeWaterMarkingActionPluginLoader=function(e){return function(t){var i=(function(){function i(e){var t=this;this.lifecycle={previewDidInitialize:function(){t.actionDefinitions.alwaysInOverflow=[t.actionToDisplay()]}},this.actionDefinitions={alwaysInOverflow:[[]]},this.context=e}return i.prototype.actionToDisplay=function(){var i=e().file;return i&&"read_only"in i?[{overflowItem:n.default.createElement(m,{fileViewerId:this.context.fileViewerId,intl:t.intl,readOnly:i.read_only,ext:i.ext})}]:[]},i})();return Promise.resolve(i)}}}));
//# sourceMappingURL=action_plugin.min.js-vfltP8xT1.map