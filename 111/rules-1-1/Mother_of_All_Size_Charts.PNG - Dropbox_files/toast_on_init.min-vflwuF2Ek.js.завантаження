define(["require","exports","tslib","modules/core/notify","modules/core/html","modules/core/cookies","modules/clean/security/csrf_hmac","modules/clean/csrf"],(function(e,o,t,r,n,s,i,u){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.decodeToastCookie=o.showToastFromCookie=void 0;function a(e,o){return t.__awaiter(this,void 0,Promise,(function(){var r;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,i.readHmacCookieToken(e,o)];case 1:if(null==(r=t.sent()))return[2,null];if(r.startsWith("er:"))return[2,[!0,r.substring(3)]];if(r.startsWith("ok:"))return[2,[!1,r.substring(3)]];throw new Error("unrecognized format of message in toast cookie")}}))}))}o.showToastFromCookie=function(){var o;return t.__awaiter(this,void 0,void 0,(function(){var i,c,l,d,f,m,h;return t.__generator(this,(function(k){switch(k.label){case 0:return(i=s.Cookies.read("toast"))?[4,a(i,null!==(o=u.readCsrfToken())&&void 0!==o?o:void 0)]:[3,3];case 1:return null==(c=k.sent())?[3,3]:(l=c[0],d=c[1],[4,new Promise((function(o,t){e(["dompurify"],o,t)})).then(t.__importStar)]);case 2:f=k.sent().sanitize,m=f(d),null!=(h=document.getElementById("flash"))&&(h.innerHTML=m,h.style.display="block"),setTimeout((function(){return s.Cookies.delete("toast")}),2e3),l?r.Notify.error(new n.HTML(m),10):r.Notify.success(new n.HTML(m),10),k.label=3;case 3:return[2]}}))}))},o.decodeToastCookie=a}));
//# sourceMappingURL=toast_on_init.min.js-vflZs7piA.map