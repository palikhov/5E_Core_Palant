define(["require","exports","tslib","dig-components/icons/src","dig-components/icons","react","react-intl","file-viewer/core/index","react-redux","file-viewer/core/data/selectors","classnames","dig-components/buttons","file-viewer/core/data/actions","dig-components/typography"],(function(e,t,a,n,l,o,i,r,s,c,d,u,m,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeatballMenu=void 0,o=a.__importStar(o),d=a.__importDefault(d);var _="meatballMenuOverlay__1fY3Vs_ekg__mobile_web",g="meatballMenuContainer__3jABD-nnAP__mobile_web",b="meatballMenuContainerVisible__3jaVpyYN4Y__mobile_web",p="signInButton__tdSqSpVoUe__mobile_web",w="metadata__3J6JK0lbdt__mobile_web",M="actions__1_ZaLAXyiH__mobile_web",v="actionRow__14diFLkdCP__mobile_web",E="footer__yw1eDM6e0p__mobile_web",I="icon__2So_HUU00B__mobile_web";t.MeatballMenu=function(e){var t,a,C=e.sharedLinkInfo,k=e.size,y=e.showAuthModal,N=e.fileViewerId,x=e.previewKey,h=s.useSelector((function(e){return c.getIsMobileMeatballMenuOpen(e,x,N)})),L=i.useIntl(),T=s.useDispatch(),D=k?r.formatBytes(k,L):0,U=s.useSelector(c.getCurrentUser),z=o.useRef(null);function S(){T(m.toggleMobileMeatballMenu({isOpen:!1,previewKey:x,fileViewerId:N}))}return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{onClick:S,className:d.default((t={},t[_]=h,t))}),o.default.createElement("div",{onTouchStart:function(e){h&&(z.current=e.changedTouches[0].clientY)},onTouchEnd:function(e){("number"==typeof z.current&&e.changedTouches[0].clientY-z.current)>=150&&h&&(S(),z.current=null)},className:d.default(g,(a={},a[b]=h,a))},o.default.createElement("div",{className:w},o.default.createElement("div",{className:I}),o.default.createElement("div",null,o.default.createElement(f.Text,{variant:"label",size:"standard",tagName:"p",isBold:!0},null==C?void 0:C.displayName),o.default.createElement(f.Text,null,L.formatMessage({id:"nu8jK0",defaultMessage:"{formatted_size}, file owner: {owner_name}"},{formatted_size:D,owner_name:null==C?void 0:C.ownerName})))),o.default.createElement("div",{className:M},o.default.createElement(f.Text,{className:v,onClick:function(){T(r.downloadFile({fileViewerId:N,previewKey:x,sourceContext:U?"mobile_web_footer":"mobile_web_footer_logged_out"}))}},o.default.createElement(l.UIIcon,{size:"large",src:n.DownloadLine}),L.formatMessage({id:"ogWgkE",defaultMessage:"Download"})),o.default.createElement(f.Text,{className:v,onClick:function(){U||null==y||y({mode:1,kind:"immediate"})}},o.default.createElement(l.UIIcon,{size:"large",src:n.DropboxLine}),L.formatMessage({id:"Y7LMlZ",defaultMessage:"Save to Dropbox"})),o.default.createElement(f.Text,{className:v,onClick:function(){}},o.default.createElement(l.UIIcon,{size:"large",src:n.LinkLine}),L.formatMessage({id:"HTAvDi",defaultMessage:"Copy Link"})),o.default.createElement(f.Text,{className:v,onClick:function(){U||null==y||y({mode:1,kind:"immediate"})}},o.default.createElement(l.UIIcon,{size:"large",src:n.CommentLine}),L.formatMessage({id:"Y3uqW1",defaultMessage:"Comment"})),o.default.createElement(f.Text,{className:v,onClick:function(){var e=window.location&&encodeURIComponent(window.location.href);window.open("https://www.dropbox.com/report_abuse?ssu="+e)}},o.default.createElement(l.UIIcon,{size:"large",src:n.FlagLine}),L.formatMessage({id:"awDFu9",defaultMessage:"Report issue"}))),!U&&o.default.createElement("div",{className:p},o.default.createElement(u.Button,{onClick:function(){null==y||y({mode:0,kind:"immediate"})},variant:"opacity"},o.default.createElement(l.UIIcon,{src:n.PersonCircleLine}),o.default.createElement("span",null,L.formatMessage({id:"49n66u",defaultMessage:"Sign in"})))),o.default.createElement("div",{className:E},o.default.createElement("span",{onClick:function(){var e;return null===(e=document.getElementById("consent-iframe").contentWindow)||void 0===e?void 0:e.postMessage({message_type:"OPEN_OPTIONS_DIALOG"},"https://consent.dropbox.com/")}},L.formatMessage({id:"FqzxYC",defaultMessage:"Cookie preferences"})),o.default.createElement("a",{href:"https://dropbox.com/privacy"},L.formatMessage({id:"+1tXlk",defaultMessage:"Privacy and Legal"})))))}}));
//# sourceMappingURL=meatball_menu.min.js-vflTrGMdl.map