define(["require","exports","@reduxjs/toolkit"],(function(e,t,a){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.openChooser=t.setTotalPages=t.clearSelectedPages=t.removeSelectedPage=t.addSelectedPage=t.pageActionsSlice=t.insertPages=t.deletePages=t.rotatePages=void 0;function c(e){return 0===e.length?"":e.sort()[0].toString()}t.rotatePages=a.createAsyncThunk("pageActions/rotatePage",(function(e,t){var a=t.getState(),s=Object.keys(a.pageActions.selectedPages).map(Number).sort(),c={pages:Array.from(s.values()),rotation:e};t.dispatch({type:"message_bus_action/rotate_document_pages_action",payload:c})})),t.deletePages=a.createAsyncThunk("pageActions/deletePage",(function(e,a){var s,c=a.getState(),o=Object.keys(c.pageActions.selectedPages).map(Number).sort(),r=0!==(s=o)[0]?s[0]-1:0,d={pages:Array.from(o.values())};return o.length>=e?Promise.reject(new Error("Cannot delete all pages")):(a.dispatch({type:"message_bus_action/remove_document_pages_action",payload:d}),a.dispatch(t.clearSelectedPages()),a.dispatch(t.addSelectedPage(r)),Promise.resolve())})),t.insertPages=a.createAsyncThunk("pageActions/insertPage",(function(e,a){var s=a.getState(),c=Object.keys(s.pageActions.selectedPages).map(Number).sort(),o=Object.keys(s.pageActions.selectedPages).map(Number).sort()[0],r={documentData:e,afterPage:o};a.dispatch({type:"message_bus_action/insert_document_action",payload:r}),c.length>1&&(a.dispatch(t.clearSelectedPages()),a.dispatch(t.addSelectedPage(o)))})),t.pageActionsSlice=a.createSlice({name:"pageActions",initialState:{totalPages:0,selectedPages:{},firstSelectedPage:""},reducers:{addSelectedPage:function(e,t){e.selectedPages[t.payload]=!0,e.firstSelectedPage=c(Object.keys(e.selectedPages).map(Number))},removeSelectedPage:function(e,t){delete e.selectedPages[t.payload],e.firstSelectedPage=c(Object.keys(e.selectedPages).map(Number))},clearSelectedPages:function(e){e.selectedPages={},e.firstSelectedPage=""},setTotalPages:function(e,t){e.totalPages=t.payload},openChooser:function(e){}}}),t.addSelectedPage=(s=t.pageActionsSlice.actions).addSelectedPage,t.removeSelectedPage=s.removeSelectedPage,t.clearSelectedPages=s.clearSelectedPages,t.setTotalPages=s.setTotalPages,t.openChooser=s.openChooser,t.reducer=t.pageActionsSlice.reducer}));
//# sourceMappingURL=page_actions_slice.min.js-vflqJSbl8.map