define(["require","exports","tslib","react","react-intl","dig-components/icons","dig-components/icons/src","dig-components/badges","typescript/component_libraries/files_components/src/right-rail/index","typescript/component_libraries/files_components/src/blades/comments/component/meatball_menu","react-redux","typescript/component_libraries/files_components/src/blades/comments/data/selectors","typescript/component_libraries/files_components/src/blades/comments/data/types","dig-components/typography"],(function(e,t,a,n,r,s,o,i,l,d,m,c,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollapsedCommentsBladeButton=t.CommentsBlade=void 0,n=a.__importStar(n);var f=r.defineMessage({id:"5PJLxb",defaultMessage:"{unreadCount} unread"}),g=r.defineMessage({id:"ZKwnCD",defaultMessage:"An error occurred."}),h=function(e){return m.useSelector((function(t){return e?c.getUnreadThreadCount(t,e):0}))},C=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.state={hasError:!1},t}return a.__extends(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}},t.prototype.render=function(){var e=this.props.intl;return this.state.hasError?n.createElement(u.Text,null,e.formatMessage(g)):this.props.children},t})(n.PureComponent);C.displayName="CommentsBladeErrorBoundary";var v=function(e){var t=e.fileId,a=e.sharedLinkURL,s=e.showOverflowMenu,o=e.showApproval,l=e.approvalsLogger,m=h(p.createCommentFileIdentifier(t,a)),c=r.useIntl();return n.createElement("div",{className:"comments-blade-header-accessory-wrapper"},m>0?n.createElement("div",{className:"comments-blade-header-badge"},n.createElement(i.NotificationBadge,{status:"attention"},c.formatMessage(f,{unreadCount:m}))):null,s&&n.createElement("div",{className:"comments-blade-header-menu"},n.createElement(d.CommentsMeatball,{fileId:t,sharedLinkURL:a,size:"small",showApproval:o,approvalsLogger:l})))};v.displayName="CommentsBladeRightAccessory",t.CommentsBlade=function(e){var t=e.id,a=e.intl,i=e.children,d=e.fileId,m=e.sharedLinkURL,c=e.showApproval,p=e.approvalsLogger,u=l.useIsExpanded(t);return n.createElement(r.RawIntlProvider,{value:a},n.createElement(l.RightRail.Blade,{withTitle:a.formatMessage({id:"TxGYML",defaultMessage:"Comments"}),withIcon:n.createElement(s.UIIcon,{src:o.CommentLine}),id:t,withTitleRightAccessory:n.createElement(v,{fileId:d,sharedLinkURL:m,showOverflowMenu:u,showApproval:c,approvalsLogger:p})},n.createElement(C,{intl:a},i)))},t.CommentsBlade.displayName="CommentsBlade",t.CollapsedCommentsBladeButton=function(e){var t=e.id,a=e.intl,r=e.fileId,i=e.sharedLinkURL,d=h(r?p.createCommentFileIdentifier(r,i):void 0);return n.createElement(l.RightRail.CollapsedBladeIcon,{id:t,withIcon:n.createElement(s.UIIcon,{src:o.CommentLine,"aria-label":a.formatMessage({id:"JrjHYo",defaultMessage:"Open comments panel"})}),tooltip:a.formatMessage({id:"GSZlCi",defaultMessage:"Comments"}),withNotificationBadge:d})},t.CollapsedCommentsBladeButton.displayName="CollapsedCommentsBladeButton"}));
//# sourceMappingURL=comments_blade.amd.min.js-vflSHXQbz.map