define("file-viewer/core/middlewares/analytics",["require","exports","tslib","file-viewer/core/logging/actions","file-viewer/core/logging/session","file-viewer/core/data/modes/types","file-viewer/core/extension_constants","file-viewer/core/data/selectors","file-viewer/core/utils/index","lodash"],(function(e,t,i,n,r,a,o,s,l,c){"use strict";var u;function d(e){return Object.keys(e).reduce((function(t,i){var n=e[i];return"string"==typeof n||"number"==typeof n?t[i]=String(n):"boolean"==typeof n?t[i]=String(+n):"object"==typeof n&&n&&(t[i]=JSON.stringify(n)),t}),{})}function p(e){return i.__assign(i.__assign({},e),{file_extension:o.getWhitelistedFileExtension(e.file_extension||""),extra:d(e.extra)})}Object.defineProperty(t,"__esModule",{value:!0}),t.analyticsMiddleware=t.MAPPED_USER_ACTIONS=void 0,c=i.__importDefault(c);var f=((u={})["@@previews/zoomIn"]="zoom_in",u["@@previews/zoomOut"]="zoom_out",u["@@previews/fileViewerUi/closeDocSidebar"]="close_doc_sidebar",u["@@previews/fileViewerUi/openDocSidebar"]="open_doc_sidebar",u["@@previews/zoomToggleOriginalOrFit"]="zoom_toggle_original_or_fit",u["@@previews/modes/changeMode"]="mode_change",u["@@previews/updateDocCurrentPageIndex"]="page_jump",u["@@previews/pageDown"]="page_down",u["@@previews/pageUp"]="page_up",u["@@previews/share"]="share",u["@@previews/restore"]="restore",u["@@previews/openWith"]="open_with",u["@@previews/openWebPreview"]="open_web_preview",u["@@previews/navigation/flipToNextFile"]="flip_next",u["@@previews/navigation/flipToPreviousFile"]="flip_prev",u["@@previews/closeViewer"]="close_viewer",u["@@previews/openFullscreenPreview"]="open_fullscreen_preview",u["@@previews/openVersionHistory"]="open_version_history",u["@@previews/openSidebar"]="toggle_sidebar_on",u["@@previews/closeSidebar"]="toggle_sidebar_off",u["@@previews/switchWorkbookTab"]="switch_workbook_tab",u["@@previews/fileSystem/copyToDropbox"]="save_to_dropbox",u["@@previews/fileSystem/downloadFile"]="download",u["@@previews/print"]="print",u["@@previews/enterFullscreen"]="toggle_fullscreen_on",u["@@previews/exitFullscreen"]="toggle_fullscreen_off",u["@@previews/clickDropboxLogo"]="click_dropbox_logo",u["@@previews/plugins/setActiveRightRailPlugin"]="sidebar_pane_selected",u);t.MAPPED_USER_ACTIONS=c.default(f);t.analyticsMiddleware=function(e){return function(c){var u=c.getState;return function(c){return function(v){switch(v.type){case"@@previews/logSessionEvent":return c((function(e,t,i){var a=i.payload,o=a.event,s=a.fileViewerId,l=a.previewSessionId,c=a.extra,u=t.loggingSession[s];return l===u.file_preview_session_id&&(u=r.recordEvent(t.loggingSession[s],o,c),e.log(o,p(u)),u=r.updateSessionLastEvent(u,o)),n.updateSession(u)})(e,u(),v));case"@@previews/log":return c((function(e,t,r){var a=r.payload,o=a.event,s=a.fileViewerId,l=t.loggingSession[s];return e.log(o,p(i.__assign(i.__assign({},l),{extra:a.extra||{}}))),n.updateSession(l)})(e,u(),v));case"@@previews/logVideo":return void 0!==e.logVideo?c((function(e,t,i){var r=i.payload,a=r.eventName,o=r.fileViewerId,s=r.previewSessionId,l=t.loggingSession[o],c=l.file_preview_session_id;return void 0!==e.logVideo&&s===c&&e.logVideo(a,(function(e){return{file_preview_session_id:e.previewSessionId,video_format:e.videoFormat,video_duration_seconds:e.videoDuration,video_truncated:e.videoTruncated,extra:e.extra}})(r)),n.updateSession(l)})(e,u(),v)):c(v);case"@@previews/LogUserAction":return c((function(e,n,r){var a=r.payload,o=a.userAction,s=a.actionContext,l=a.fileViewerId,c=n.loggingSession[l];return o in t.MAPPED_USER_ACTIONS?console.warn("WARNING: "+o+" is automatically logged when it's in USER_ACTION_MAP. No need to call logUserAction for it."):e.log("user_action",p(i.__assign(i.__assign({},c),{extra:i.__assign(i.__assign({},a.extra),{action:o,context:s})}))),r})(e,u(),v));case"@@previews/logTTI":return c((function(e,t,i){var a;return a=r.markTTI(t.loggingSession[i.payload]),e.logTTI(),n.updateSession(a)})(e,u(),v));case"@@previews/logTTV":return c((function(e,t,i){var r=t.loggingSession[i.payload];return e.logTTV(),n.updateSession(r)})(e,u(),v));case"@@previews/excelSheetRenderFailed":case"@@previews/excelSheetRenderSucceeded":case"@@previews/fetchExcelSheetLayoutData":case"@@previews/fetchExcelSheetLayoutDataResult":return c((function(e,t,n){var r=n.payload,a=r.fileViewerId,o=r.sheetIndex,s=t.loggingSession[a],l=p(i.__assign(i.__assign({},s),{extra:d({tab_index:o,ts:Date.now()})}));switch(n.type){case"@@previews/fetchExcelSheetLayoutData":e.log("excel_sheet_download_attempted",l);break;case"@@previews/fetchExcelSheetLayoutDataResult":null!=n.error?e.log("excel_sheet_download_failed",l):e.log("excel_sheet_download_succeeded",l);break;case"@@previews/excelSheetRenderFailed":e.log("excel_sheet_render_failed",l);break;case"@@previews/excelSheetRenderSucceeded":e.log("excel_sheet_render_succeeded",l)}return n})(e,u(),v));case"@@previews/updateArchiveFileCurrentPath":return c((function(e,t,n){var r=n.payload,a=r.fileViewerId,s=r.currentPath,c=r.isDir;if(void 0!==c){var u=t.loggingSession[a],f=p(i.__assign(i.__assign({},u),{extra:d({action:"archive_navigation",context:"preview_content_main",isDir:String(c),extension:c?"":o.getWhitelistedFileExtension(l.getFileExtension(s[s.length-1]))})}));e.log("user_action",f)}return n})(e,u(),v))}return v.type in f?c((function(e,t,n){var r=n.payload,o=r.fileViewerId,l=r.sourceContext,c=t.loggingSession,u=t.modes,v=c[o],g=u[o]?u[o].mode:a.FileViewerMode.Default,_=s.isSidebarOpen(t,{fileViewerId:o}),w={context:l,action:f[n.type],mode:g,right_sidebar_state:_?"opened":"collapsed"};return"@@previews/modes/changeMode"===n.type?w.next_mode=n.payload.mode:"@@previews/switchWorkbookTab"===n.type?w.tab_index=n.payload.tabIndex:"@@previews/plugins/setActiveRightRailPlugin"===n.type&&(w.selected_pane=n.payload.pluginId),e.log("user_action",p(i.__assign(i.__assign({},v),{extra:d(w)}))),n})(e,u(),v)):c(v)}}}}})),define("file-viewer/file_viewer/bootstrap",["require","exports","tslib","file-viewer/core/middlewares/plugins","redux","file-viewer/core/data/reducer","api_v2/redux/previews","file-viewer/core/middlewares/riviera_data","file-viewer/core/config","file-viewer/core/middlewares/analytics","file-viewer/core/middlewares/ui_action_redispatcher","file-viewer/core/middlewares/local_cache_data","api_v2/redux/files","api_v2/redux/users","file-viewer/core/middlewares/file_system","file-viewer/core/middlewares/full_screen","file-viewer/core/middlewares/navigation","file-viewer/core/middlewares/native_apps","file-viewer/core/middlewares/network_state","file-viewer/core/middlewares/print","file-viewer/core/middlewares/url","file-viewer/core/middlewares/cloud_docs","api_v2/redux/seen_state","api_v2/redux/flows","api_v2/redux/sharing","file-viewer/file_viewer/file_viewer","file-viewer/core/middlewares/asset_url_rewrite","file-viewer/pass/index","file-viewer/preview_excel/tab_selection_handler","file-viewer/core/middlewares/preferences","file-viewer/core/middlewares/report_exception"],(function(e,t,i,n,r,a,o,s,l,c,u,d,p,f,v,g,_,w,m,h,b,y,A,I,P,E,M,S,C,x,R){"use strict";function T(e){var t=e.middlewares,n=void 0===t?[]:t,o=e.initialState,s=e.additionalReducers,l=void 0===s?{}:s,c="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?r.compose(r.applyMiddleware.apply(void 0,n),window.__REDUX_DEVTOOLS_EXTENSION__({name:"File Viewer SDK"})):r.applyMiddleware.apply(void 0,n),u=i.__assign(i.__assign(i.__assign({},a.reducers),S.reducers),l);return r.createStore(r.combineReducers(u),o,c)}Object.defineProperty(t,"__esModule",{value:!0}),t.createFileViewerFactory=t.createSDKStore=void 0,t.createSDKStore=T,t.createFileViewerFactory=function(e){var t,r=e.batteries,a=e.callbacks,O=e.featureConfig,F=e.unsafe_reduxExtensions,D=e.initData,V=e.platformConfig,B=null!=F?F:{},N=B.middlewares,k=void 0===N?[]:N,L=B.additionalReducers,U=void 0===L?{}:L,j=B.initialState,K=D.accountId,z=D.deviceType,G=r.optionalIOClients,q=r.coreIOClients,W=r.logger,H=r.intl,Y=q.rivieraIOClient,Z=q.apiv2ClientBase,X=G.fileSystemClient,Q=G.fullScreenClient,J=G.localCacheClient,$=G.nativeAppsIOClient,ee=G.navigationClient,te=G.presenceBeaconIOClient,ie=G.printClient,ne=G.transformAssetUrl,re=G.urlClient,ae=G.preferencesClient,oe=G.cloudDocsClient,se=G.reportExceptionClient,le=e.pluginLoaders||{},ce=T({middlewares:i.__spreadArrays($?[w.middleware($)]:[],J?[d.localCacheMiddleware(J)]:[],ee?[_.middleware(ee)]:[],[m.middleware,s.rivieraDataMiddleware(Y),o.middleware(Z.ns("previews")),p.middleware(Z.ns("files")),f.middleware(Z.ns("users")),u.uiActionRedispatcher,M.assetUrlRewrite(ne)],re?[b.middleware(re)]:[],[n.pluginsMiddleware((function(){return Object.keys(le)}))],te?[S.beaconMiddleware(te)]:[],[P.middleware(Z.ns("sharing"))],(null==O?void 0:O.excel_support)?[C.tabSelectionHandler]:[],X?[v.middleware(X)]:[],Q?[g.middleware(Q)]:[],ie?[h.middleware(ie)]:[],[A.middleware(Z.ns("seen_state")),I.middleware(Z.ns("flows"))],ae?[x.preferencesMiddleware(ae)]:[],oe?[y.middleware(oe)]:[],se?[R.reportExceptionMiddleware(se)]:[],k,W?[c.analyticsMiddleware(W)]:[]),initialState:j,additionalReducers:U}),ue=l.DEFAULT_CONFIG;O&&(ue=i.__assign(i.__assign({},ue),O));var de=r.optionalIOClients.showAuthModal,pe=!!(null===(t=r.optionalIOClients.navigationClient)||void 0===t?void 0:t.closeViewer);return{createFileViewer:E.createFileViewer((function(){return{callbacks:a,intl:H,store:ce,accountId:K,showAuthModal:de,canCloseViewer:pe,deviceType:z||"desktop",config:ue,platformConfig:i.__assign(i.__assign({},E.defaultPlatformConfig),V)}}),Z,le),registerPlugin:function(e,t){le[e]=t},registerPlugins:function(e){Object.assign(le,e)}}}})),define("file-viewer/core/middlewares/local_cache_data",["require","exports","tslib","api_v2/redux/previews","file-viewer/core/logging/session","file-viewer/core/logging/actions"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localCacheMiddleware=void 0,t.localCacheMiddleware=function(e){var t=this;return function(o){var s=o.getState,l=o.dispatch;return function(o){return function(c){return i.__awaiter(t,void 0,void 0,(function(){var t,u,d,p;return i.__generator(this,(function(i){switch(i.label){case 0:return"@@apiv2_redux/previews/get_preview_data_batch"!=c.type?[3,2]:e.previewDataCacheClient?[4,e.previewDataCacheClient.getByFileIds(c.payload.arg.files.map((function(e){return e.file_id})).filter((function(e){return"string"==typeof e})))]:[3,2];case 1:if(t=i.sent(),Array.isArray(t.results)&&t.results.length>0)return u={arg:c.payload.arg,result:t},c.meta&&c.meta.fileViewerId&&(p=r.recordExtra(s().loggingSession[c.meta.fileViewerId],{preview_data_cache_hit:"1"}),l(a.updateSession(p))),d=n.getPreviewDataBatchResultAction(u,c.meta),[2,l(d)];c.meta&&c.meta.fileViewerId&&(p=r.recordExtra(s().loggingSession[c.meta.fileViewerId],{preview_data_cache_hit:"0"}),l(a.updateSession(p))),i.label=2;case 2:return[2,o(c)]}}))}))}}}}})),define("file-viewer/core/middlewares/network_state",["require","exports","file-viewer/core/data/actions"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=void 0,t.middleware=function(e){var t=e.dispatch;function n(){t(i.setNetworkConnectivityState({isOffline:!navigator.onLine}))}return function(e){return function(r){if("undefined"==typeof window)return e(r);switch(r.type){case"@@previews/initializeFilePreviewSession":t(i.setNetworkConnectivityState({isOffline:!navigator.onLine}));break;case"@@previews/subscribeNetworkState":window.addEventListener("offline",n);break;case"@@previews/unsubscribeNetworkState":window.removeEventListener("offline",n)}return e(r)}}}})),define("file-viewer/core/middlewares/riviera_data",["require","exports","tslib","file-viewer/core/data/actions","file-viewer/core/data/riviera/index","file-viewer/core/data/riviera/transform","file-viewer/core/invariant","file-viewer/core/errors","file-viewer/core/utils/index","file-viewer/core/data/utils","file-viewer/core/constants","file-viewer/core/urls","file-viewer/core/data/selectors","file-viewer/core/data/preview_key"],(function(e,t,i,n,r,a,o,s,l,c,u,d,p,f){"use strict";function v(e){var t=e.payload;return{previewKey:t.previewKey,fileViewerId:t.fileViewerId}}Object.defineProperty(t,"__esModule",{value:!0}),t.rivieraDataMiddleware=void 0,t.rivieraDataMiddleware=function(e){var t=this,g=new r.RivieraClientBase(e);return function(e){var r=e.getState,_=e.dispatch;return function(e){return function(w){return i.__awaiter(t,void 0,void 0,(function(){var t,m,h,b,y,A,I,P,E,M,S,C,x,R,T,O,F,D,V,B,N,k,L,U,j,K,z,G,q,W,H,Y,Z,X,Q,J,$,ee,te,ie,ne,re,ae,oe,se,le,ce,ue,de,pe,fe,ve,ge;return i.__generator(this,(function(i){switch(i.label){case 0:switch(h=r(),w.type){case"@@previews/fetchRivieraData":return[3,1];case"@@previews/fetchPageDataWithMetadata":return[3,3];case"@@previews/fetchMediaMetadata":return[3,7];case"@@previews/fetchWaveformData":return[3,11];case"@@previews/fetchLinkfileData":return[3,15];case"@@previews/refreshBlob":return[3,19];case"@@previews/fetchExcelSheetLayoutData":return[3,23];case"@@previews/fetchArchiveTopLevelData":return[3,27]}return[3,31];case 1:if(b=w.payload,pe=b.fileViewerId,de=b.previewKey,y=b.config,(A=p.getRivieraData(h,de))&&Object.keys(A).length)return[2];if(!(I=p.getPreviewMetadata(h,de))||!I.content)throw new s.FVError(s.FVErrorCode.MalformedPreviewsDataApiResponse,"Missing `content` from preview data api payload");switch(P=[],I.content[".tag"]){case"ssr_doc":case"cloud_doc":E=I.content,M=E.text_url_tmpl,K=E.image_url_tmpl,S="cloud_doc"===I.content[".tag"]?I.content.exit_url:void 0,o.invariant(!("cloud_doc"!==I.content[".tag"]&&!M&&!K),s.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),S||null==M||null==K||(C=_(n.fetchPageDataWithMetadata({fileViewerId:pe,previewKey:de,textUrlTmpl:M,startPage:0,endPage:y.partial_prewarm_allowed?u.TEXT_FIRST_BATCH_SIZE:50,loadPartialPages:!0})),"small"!==y.size_class&&P.push(C),x="ssr_doc"===I.content[".tag"]?Math.min.apply(Math,(I.content.supported_widths||[]).concat([480])):void 0,_(n.prewarmUnifiedPreviewAsset({fileViewerId:pe,previewKey:de,assetUrl:d.imageUrl(K,0,0,x)})));break;case"video":(R=I.content.metadata_url)&&_(n.fetchMediaMetadata({metadataUrl:R,previewKey:de}));break;case"audio":(T=I.content.waveform_url)&&_(n.fetchWaveformData({url:T,previewKey:de}));break;case"linkfile":O=I.content.url,F=I.content.authenticated,O&&_(n.fetchLinkfileData({url:O,authenticated:!!F,previewKey:de}));break;case"excel":if(!y.excel_support||"unsupported"===y.excel_support)break;D=I.content.workbook_data_url_tmpl,o.invariant(!!D,s.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),null!=D&&P.push(_(n.fetchExcelSheetLayoutData({fileViewerId:pe,previewKey:de,sheetIndex:0,workbookDataUrlTmpl:D})));break;case"archive":o.invariant(!!I.preview_url,s.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),I.preview_url&&(_(n.fetchArchiveTopLevelData({fileViewerId:pe,previewKey:de,contentUrl:I.preview_url})),P.push(_(n.setupArchiveFileCurrentPath({fileViewerId:pe,previewKey:de}))))}return[4,Promise.all(P)];case 2:return[2,i.sent()];case 3:V=w.payload,B=V.textUrlTmpl,N=V.startPage,k=V.endPage,L=V.loadPartialPages,U=v(w),de=U.previewKey,pe=U.fileViewerId,ee=p.getPreviewMetadata(h,de),i.label=4;case 4:return i.trys.push([4,6,,7]),[4,g.fetchDocMetadata(B,!0,N,k)];case 5:return ve=i.sent(),o.invariant(!!ee,s.FVErrorCode.InvalidFileInfo,"Preview Data for "+de.serialized+" should have been available"),j=ee.content,K=j.image_url_tmpl,z=j.supported_widths,G=ve.metadata,o.invariant(!!G,s.FVErrorCode.MalformedRivieraData,"Response from riviera ssr_doc has no metadata and we also have no existing metadata"),q=G.page_count,H=(W=L?[N,k]:[0,q])[0],Y=W[1],[2,e(n.fetchPageDataWithMetadataResult({fileViewerId:pe,previewKey:de,data:{metadata:G,pages:a.processTextAndUrl(K,G.dimensions,q,ve,z,H,Math.min(null!=Y?Y:q,q))}}))];case 6:return Z=i.sent(),[2,e(n.fetchPageDataWithMetadataResult({fileViewerId:w.payload.fileViewerId,previewKey:de,data:void 0},Z))];case 7:if(de=w.payload.previewKey,f.isNestedArchiveFilePreviewKey(de))return[2,e(w)];i.label=8;case 8:return i.trys.push([8,10,,11]),[4,g.fetchMediaMetadata(w.payload.metadataUrl)];case 9:return ve=i.sent(),o.invariant(!!h.previewData[de.serialized],s.FVErrorCode.InvalidFileInfo,"Preview Data for "+de.serialized+" should have been available"),[2,e(n.fetchMediaMetadataResult({data:{is_truncated:ve.is_truncated},previewKey:de}))];case 10:return X=i.sent(),[2,_(n.fetchMediaMetadataResult({data:{is_truncated:void 0},previewKey:de},X))];case 11:if(de=w.payload.previewKey,f.isNestedArchiveFilePreviewKey(de))return[2,e(w)];i.label=12;case 12:return i.trys.push([12,14,,15]),[4,g.fetchWaveformData(w.payload.url)];case 13:return ve=i.sent(),o.invariant(!!h.previewData[de.serialized],s.FVErrorCode.InvalidFileInfo,"Preview Data for "+de.serialized+" should have been available"),[2,e(n.fetchWaveformDataResult({data:{waveformHeights:ve.waveformHeights},previewKey:de}))];case 14:return Q=i.sent(),[2,_(n.fetchWaveformDataResult({data:{waveformHeights:void 0},previewKey:de},Q))];case 15:de=w.payload.previewKey,i.label=16;case 16:return i.trys.push([16,18,,19]),[4,g.fetchLinkfileData(w.payload.url,w.payload.authenticated)];case 17:return ve=i.sent(),o.invariant(!!h.previewData[de.serialized],s.FVErrorCode.InvalidFileInfo,"Preview Data for "+de.serialized+" should have been available"),[2,e(n.fetchLinkfileDataResult({data:{uri:ve.uri},previewKey:de}))];case 18:return J=i.sent(),[2,_(n.fetchLinkfileDataResult({data:{uri:void 0},previewKey:de},J))];case 19:$=v(w),de=$.previewKey,pe=$.fileViewerId,ee=p.getPreviewMetadata(h,de),i.label=20;case 20:return i.trys.push([20,22,,23]),[4,g.refreshDocBlob(w.payload.refreshUrl,w.payload.password)];case 21:return ve=i.sent(),e(n.refreshBlobSuccessAction({previewKey:de,preview:ve})),o.invariant(!!ee,s.FVErrorCode.InvalidFileInfo,"Preview Data for "+de.serialized+" should have been available"),w.payload.password?[2,_(n.fetchPageDataWithMetadata({fileViewerId:pe,previewKey:de,textUrlTmpl:ve.text_url_tmpl}))]:(te=p.getFilePreviewUi(h,{fileViewerId:w.payload.fileViewerId},de),ie=null!==(m=null===(t=c.filterDocFilePreviewUiState(te))||void 0===t?void 0:t.currentPageIndex)&&void 0!==m?m:0,ne=l.calculatePageRange(ie),[2,_(n.fetchPageDataWithMetadata({fileViewerId:pe,previewKey:de,textUrlTmpl:ve.text_url_tmpl,startPage:ne[0],endPage:ne[1]}))]);case 22:return re=i.sent(),[2,e(n.fetchPageDataWithMetadataResult({fileViewerId:pe,previewKey:de,data:void 0},re))];case 23:ae=v(w),de=ae.previewKey,pe=ae.fileViewerId,e(w),oe=w.payload,se=oe.sheetIndex,le=oe.workbookDataUrlTmpl,i.label=24;case 24:return i.trys.push([24,26,,27]),[4,g.fetchExcelWorkbookLayoutData(le,se)];case 25:return ve=i.sent(),[2,_(n.fetchExcelSheetLayoutDataResult({fileViewerId:pe,previewKey:de,sheetIndex:se,data:ve}))];case 26:return ce=i.sent(),[2,_(n.fetchExcelSheetLayoutDataResult({fileViewerId:pe,previewKey:de,sheetIndex:se,data:void 0},ce))];case 27:ue=v(w),de=ue.previewKey,pe=ue.fileViewerId,e(w),i.label=28;case 28:return i.trys.push([28,30,,31]),fe=w.payload.contentUrl,[4,g.fetchArchiveTopLevelData(fe)];case 29:return ve=i.sent(),o.invariant(!!ve,s.FVErrorCode.MalformedRivieraData,"Response from riviera archive has no data"),[2,_(n.fetchArchiveTopLevelDataResult({fileViewerId:pe,previewKey:de,data:ve}))];case 30:return ge=i.sent(),[2,_(n.fetchArchiveTopLevelDataResult({fileViewerId:pe,previewKey:de,data:void 0},ge))];case 31:return[2,e(w)]}}))}))}}}}})),define("file-viewer/core/middlewares/ui_action_redispatcher",["require","exports","tslib","file-viewer/core/data/actions","file-viewer/core/data/utils","file-viewer/core/data/selectors"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiActionRedispatcher=void 0,t.uiActionRedispatcher=function(e){var t=e.getState;return function(e){return function(o){var s=t(),l=s.filePreviewUi,c=s.rivieraData,u=o.payload,d=u.previewKey,p=u.fileViewerId;if(!d)return e(o);var f=a.getPreviewMetadata(s,d),v=c[d.serialized];if(!l[p]||!f||!f.content)return e(o);if(!l[p][d.serialized])return e(o);switch(o.type){case"@@previews/zoomIn":return e(n.zoomIn(i.__assign(i.__assign({},o.payload),{previewType:"ssr_doc"===f.content[".tag"]?"ssr_doc":"image"})));case"@@previews/zoomOut":return e(n.zoomOut(i.__assign(i.__assign({},o.payload),{previewType:"ssr_doc"===f.content[".tag"]?"ssr_doc":"image"})));case"@@previews/updateDocCurrentPageIndex":if(("ssr_doc"===f.content[".tag"]||"cloud_doc"===f.content[".tag"])&&r.isDocPreviewRivieraData(v)&&v.metadata)return e(n.updateDocCurrentPageIndex(i.__assign(i.__assign({},o.payload),{pageCount:v.metadata.page_count})));break;case"@@previews/pageDown":if(("ssr_doc"===f.content[".tag"]||"cloud_doc"===f.content[".tag"])&&r.isDocPreviewRivieraData(v)&&v.metadata)return e(n.pageDown(i.__assign(i.__assign({},o.payload),{pageCount:v.metadata.page_count})))}return e(o)}}}})),define("file-viewer/file_viewer/file_viewer",["require","exports","tslib","react","react-dom","file-viewer/core/data/actions","file-viewer/app","file-viewer/core/uuid","file-viewer/core/config","api_v2/redux/previews","api_v2/redux/users","file-viewer/core/invariant","file-viewer/core/utils/index","file-viewer/core/logging/actions","file-viewer/core/errors","file-viewer/core/constants","file-viewer/plugins/index","file-viewer/plugins/queries","file-viewer/plugins/context","file-viewer/plugins/selectors/index","file-viewer/plugins/navigation","file-viewer/core/data/store_utils","file-viewer/plugins/sidebar","api_v2/redux/seen_state","file-viewer/pass/index","api_v2/redux/files","file-viewer/core/data/preview_key","file-viewer/core/data/selectors"],(function(e,t,i,n,r,a,o,s,l,c,u,d,p,f,v,g,_,w,m,h,b,y,A,I,P,E,M,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFileViewer=t.FileViewer=t.defaultPlatformConfig=void 0,n=i.__importStar(n),r=i.__importStar(r),t.defaultPlatformConfig={osModifierKey:"ctrlKey"};var C=(function(){function e(e,t,m){var y=this;this.mounted=!1,this.sessionActive=!1,this.loadPreviewMetadata=function(e){return i.__awaiter(y,void 0,void 0,(function(){var e,t,n,r,o,s,l,c;return i.__generator(this,(function(i){switch(i.label){case 0:return e=this.store,t=this.id,n=S.getCurrentFile(e.getState(),t),r=n.file_id,o=n.url,s=n.previewKey,l=this.getPlatformProps().config,(c=[]).push(e.dispatch(E.getFileContentMetadataAction({arg:{file_path_or_id:r,url:o}}))),c.push(e.dispatch(a.fetchRivieraData({fileViewerId:this.id,previewKey:s,config:l}))),[4,Promise.all(c)];case 1:return i.sent(),[2]}}))}))},this.selectDefaultPlugin=function(){return i.__awaiter(y,void 0,void 0,(function(){var e,t,n,r,o,s;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.plugins.promisedInstances];case 1:return n=i.sent(),r=Object.keys(n),o=this.store.getState(),s=S.getCurrentFile(o,this.id).previewKey,this.store.dispatch(a.setActiveRightRailPlugin({fileViewerId:this.id,previewKey:s,sourceContext:"sidebar",pluginId:null!==(t=null!==(e=this.defaultPlugin)&&void 0!==e?e:this.plugins.initialDefaultPlugin)&&void 0!==t?t:r[0]})),[2]}}))}))},this.exitPluginEditMode=function(){return i.__awaiter(y,void 0,void 0,(function(){var e,t,n;return i.__generator(this,(function(i){return e=this.getPlatformProps().config,t=this.store.getState(),n=S.getCurrentFile(t,this.id).previewKey,e.preview_page_revamp?this.store.dispatch(a.setActiveEditPlugin({fileViewerId:this.id,previewKey:n,sourceContext:"sidebar",pluginId:void 0})):this.selectDefaultPlugin(),[2]}))}))},this.reinitializeFileViewer=function(e){return i.__awaiter(y,void 0,void 0,(function(){var t,n,r,a,o;return i.__generator(this,(function(i){switch(e.userAction){case"click":t="click";break;case"double_click":t="double_click";break;case"visit":t="visit"}switch(n=this.store.getState(),r=M.getPreviewKey(e.fileId,e.nsId,e.sjId),a=S.getFileMetadata(n,r).fileConfig,e.sourceContext){case"workflow":o="workflow"}return this.selectDefaultPlugin(),this.initialize({fileSize:e.fileSize,sourceSession:{source_action:t,source_context:o},fileMetadata:{file_id:e.fileId,file_name:e.fileName},fileInfo:{ns_id:e.nsId,sj_id:e.sjId,file_id:e.fileId},fileConfig:a}),[2]}))}))},this.resolveFilePreview=function(e,t){return i.__awaiter(y,void 0,void 0,(function(){var n,r,a;return i.__generator(this,(function(i){switch(i.label){case 0:return d.invariant(!(!e.url&&!e.file_id),v.FVErrorCode.InvalidFileInfo,"You have to either provide a file ID or shared link url to fetch the preview data"),a=null!==(n=e.url)&&void 0!==n?n:t,r=a?{url:a,file_id:e.file_id}:e.ns_id&&e.sj_id?{ns_id:e.ns_id,sj_id:e.sj_id}:{file_id:e.file_id},[4,this.store.dispatch(c.getPreviewDataBatchAction({arg:{files:[r],include_dimensions:!0},params:{}},{fileViewerId:this.id}))];case 1:return i.sent(),[2]}}))}))},this.initialize=function(e){return i.__awaiter(y,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.initializeInternalState(e)];case 1:return t.sent(),[2]}}))}))},this.initializeInternalState=function(e){var t=e.fileMetadata,n=e.fileSize,r=e.fileInfo,o=e.fileConfig,s=e.sourceSession,c=e.defaultRightRailPlugin,u=e.pluginParams,_=void 0===u?{}:u,w=e.supportedPreviewTypes,m=void 0===w?g.DEFAULT_SUPPORTED_PREVIEW_TYPES:w,h=e.sharedLinkInfo,b=e.unsafe_onPreviewInitialized,A=void 0===b?function(){}:b;return i.__awaiter(y,void 0,void 0,(function(){var e,u,g,w,b,y,E,C,x,R,T,O,F,D,V,B,N,k,L,U,j,K,z,G,q,W,H,Y,Z,X,Q,J;return i.__generator(this,(function($){switch($.label){case 0:return e=t.file_name,u=r.file_id,g=r.sj_id,w=r.ns_id,b=this.getPlatformProps(),y=b.store,E=b.config,C=b.deviceType,x=b.accountId,R=p.getFileExtension(e),T=this.id,O=p.getFileExtension(e),F=function(){return y.getState().networkConnectivity.isOffline},(D=S.getCurrentFile(y.getState(),T))&&this.mounted?[4,this.doTeardown()]:[3,2];case 1:$.sent(),$.label=2;case 2:this.store.dispatch(a.setCurrentFilePreview({fileViewerId:this.id,fileInfo:r})),V=i.__assign(i.__assign({},l.DEFAULT_FILE_CONFIG),null!=o?o:{}),t.file_id&&(B=M.getPreviewKey(t.file_id,w,g),y.dispatch(a.setFileMetadata(i.__assign(i.__assign({},t),{fileConfig:V,size:n,previewKey:B})))),this.sessionActive=!0,y.dispatch(a.initializeFilePreviewSession({fileViewerId:T,fileId:u,sjId:g,nsId:w,deviceType:C,fileExtension:O,sourceSession:s})),N=y.getState().loggingSession[this.id].file_preview_session_id,y.dispatch(f.logSessionEvent({event:"preview_attempted",fileViewerId:T,previewSessionId:N})),$.label=3;case 3:return $.trys.push([3,5,,6]),[4,this.triggerPluginsPreviewWillInitialize(r,h,void 0===x)];case 4:return $.sent(),[3,6];case 5:return k=$.sent(),y.dispatch(f.logSessionEvent({event:"lifecycle_failure",fileViewerId:this.id,previewSessionId:N,extra:{e:k}})),[3,6];case 6:$.trys.push([6,17,,18]),d.invariant(!!R,v.FVErrorCode.NoExtension,"Missing file extension"),d.invariant(!!r.url||!!r.file_id,v.FVErrorCode.InvalidFileInfo,"You have to either provide a file ID or shared link url to fetch the preview data"),$.label=7;case 7:return $.trys.push([7,9,,10]),[4,this.resolveFilePreview(r,null==h?void 0:h.url)];case 8:if($.sent(),F())throw new v.FVError(v.FVErrorCode.UserOffline,"There is a network connectivity issue");return[3,10];case 9:throw L=$.sent(),v.isFVError(L)?L:new v.FVError(v.FVErrorCode.PreviewsDataApiFailure,L.message);case 10:return U=S.getCurrentFile(y.getState(),T),j=U.file_id,K=U.url,z=U.ns_id,G=U.sj_id,J=U.previewKey,h&&y.dispatch(a.setSharedLinkInfo(i.__assign(i.__assign({},h),{previewKey:J}))),y.dispatch(a.fetchNativeApps({fileId:j})),d.invariant(!!j,v.FVErrorCode.MalformedPreviewsDataApiResponse,"Missing `file_id` in `file_info`"),d.invariant(!(r.url&&K!==r.url||r.file_id&&j!==r.file_id),v.FVErrorCode.FileSwitched,"We have flipped to another file"),[4,this.setDefaultActivePlugin(J,c)];case 11:return $.sent(),null==D&&(q={fileViewerId:this.id,previewKey:J,sourceContext:"initialization"},y.dispatch(a.initializeSidebar(i.__assign(i.__assign({},q),{forceOpen:Boolean(_.shouldFocusApproval)}))),y.dispatch(a.initializeDocSidebar({fileViewerId:this.id,previewKey:J,sourceContext:"initialization"})),y.dispatch(a.initializeVolumeAndMuted(q))),W=S.getPreviewData(y.getState(),J),H=p.resolvePreviewType(W),y.dispatch(a.initializeFilePreview({fileViewerId:T,fileInfo:{file_id:j,size:n,ns_id:z,sj_id:G,previewKey:J},fileExtension:O,fileName:e,previewType:H,fileConfig:V})),d.invariant("error"!==H,v.FVErrorCode.MalformedPreviewsDataApiResponse,"Preview Type got resolved to PreviewType.Error, possibly because of missing `content`"),d.invariant(m.includes(H),v.FVErrorCode.UnsupportedPreviewType,"Unsupported preview type"),d.invariant(p.fileSizeSupported(e,n,H,E),v.FVErrorCode.FileTooLarge,"Unsupported file size"),y.dispatch(f.logSessionEvent({event:"support_confirmed",fileViewerId:T,previewSessionId:N,extra:{preview_type:H}})),y.dispatch(f.logSessionEvent({event:"download_attempted",fileViewerId:T,previewSessionId:N,extra:{preview_type:H}})),[4,this.loadPreviewMetadata(r).catch((function(e){throw v.isFVError(e)?e:new v.FVError(v.FVErrorCode.RivieraDataFetchFailure,e.message)}))];case 12:if($.sent(),Y=y.getState().rivieraData[J.serialized],Z=void 0,Y&&(Z=Y.error)&&12!==(null==Z?void 0:Z.statusCode)){if(null==(null==Z?void 0:Z.statusCode)||F())throw new v.FVError(v.FVErrorCode.UserOffline,"There is a network connectivity issue");throw new v.FVError(v.FVErrorCode.RivieraDataFetchFailure,'Riviera Failure, status code "'+Z.statusCode+'"')}y.dispatch(f.logSessionEvent({event:"download_succeeded",fileViewerId:T,previewSessionId:N,extra:{preview_type:H}})),y.dispatch(a.setBootstrappedFile({fileViewerId:T,previewKey:J})),E.log_views_to_pass&&y.dispatch(I.logFileViewAction({arg:{file_views:[{file_info:{file_identifier:j},platform_type:{".tag":"desktop"===C?"desktop":"web"}}]}})),$.label=13;case 13:return $.trys.push([13,15,,16]),A(this,j),P.initializePASSPresence(y,j,N),V.enable_pass&&P.initializePASS(y,j),[4,this.triggerPluginsPreviewDidInitialize(_)];case 14:return $.sent(),[3,16];case 15:return X=$.sent(),y.dispatch(f.logSessionEvent({event:"lifecycle_failure",fileViewerId:this.id,previewSessionId:N,extra:{e:X}})),[3,16];case 16:return this.subscribeToPluginActivation(N),[3,18];case 17:switch(Q=$.sent(),v.isFVError(Q)||(Q=new v.FVError(v.FVErrorCode.Unknown)),Q.type){case v.FVErrorCode.PreviewsDataApiFailure:case v.FVErrorCode.NoExtension:case v.FVErrorCode.InvalidFileInfo:case v.FVErrorCode.UnsupportedPreviewType:case v.FVErrorCode.MalformedPreviewsDataApiResponse:y.dispatch(f.logSessionEvent({event:"support_denied",fileViewerId:this.id,previewSessionId:N,extra:{error_code:v.FVErrorCode[Q.type]}}));break;case v.FVErrorCode.RivieraDataFetchFailure:y.dispatch(f.logSessionEvent({event:"download_failed",fileViewerId:this.id,previewSessionId:N,extra:{error_code:v.FVErrorCode[Q.type]}}))}return J=S.getCurrentFile(y.getState(),T).previewKey,y.dispatch(a.setErroredFile({fileViewerId:T,previewKey:J,error:Q})),this.triggerPluginsPreviewDidError(Q),[3,18];case 18:return[2]}}))}))},this.triggerPluginsPreviewDidRender=function(){return i.__awaiter(y,void 0,void 0,(function(){var e,t,n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.plugins.promisedInstances];case 1:for(e=i.sent(),t=0,n=Object.values(e);t<n.length;t++)(r=n[t]).lifecycle.previewDidRender&&r.lifecycle.previewDidRender();return[2]}}))}))},this.render=function(e,t,a,s){var l;y.container=e;var c=y.getPlatformProps(),u=c.store,d=c.intl,p=c.config,f=c.platformConfig,v=c.callbacks,g=y.id,w=null!==(l=null==t?void 0:t(y.getPlatformProps))&&void 0!==l?l:{},m=w.registerSidebarPanesFn,b=w.renderSidebarControlsFn,I=w.renderSidebarCallToActionsFn,P=y.plugins.instances;if(null==P)return null;var E=Object.entries(P).reduce((function(e,t){var n,r=t[0],a=t[1],o=_.parseRightRailPluginInstance(a);return null==o?e:i.__assign(i.__assign({},e),((n={})[r]=o,n))}),{}),M={rightRailPluginInstances:E,pluginNavigation:y.plugins.navigation,pluginQueryBus:y.plugins.queryBus,getRuntimeDisabledPlugins:function(){return h.getRuntimeDisabledPlugins(y.store.getState(),{fileViewerId:y.id})}},S=Object.keys(P).length>0,C=null!=m?m:S?A.registerSidebarPanesFn(M):void 0,x=null!=b?b:S?A.renderSidebarControlsFn(M):void 0;return r.render(n.createElement(o.AppWithProvider,{store:u,intl:d,id:g,callbacks:v,config:p,pluginInstances:P,rightRailPluginInstances:E,pluginQueryBus:y.plugins.queryBus,pluginNavigation:y.plugins.navigation,registerSidebarPanesFn:C,renderSidebarControlsFn:x,renderSidebarCallToActionsFn:I,onDestroy:y.handleAppDestroy,onMount:y.handleAppMount,osModifierKey:f.osModifierKey,viewport:a},s),e,y.triggerPluginsPreviewDidRender)},this.doTeardown=function(){return i.__awaiter(y,void 0,void 0,(function(){var e,t,n;return i.__generator(this,(function(i){switch(i.label){case 0:e=this.getPlatformProps().store,t=e.getState().loggingSession[this.id].file_preview_session_id,this.endSession();try{this.triggerPluginDidDeactivateForCurrent()}catch(i){e.dispatch(f.logSessionEvent({event:"lifecycle_failure",fileViewerId:this.id,previewSessionId:t,extra:{e:i}}))}this.unsubscribeFromPluginActivation&&this.unsubscribeFromPluginActivation(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.triggerPluginsPreviewWillTeardown()];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),e.dispatch(f.logSessionEvent({event:"lifecycle_failure",fileViewerId:this.id,previewSessionId:t,extra:{e:n}})),[3,4];case 4:return[2]}}))}))},this.endSession=function(){if(y.sessionActive){y.sessionActive=!1;var e=y.getPlatformProps().store,t=e.getState().loggingSession[y.id].file_preview_session_id,i=S.getCurrentFile(e.getState(),y.id);e.dispatch(f.logSessionEvent({event:"preview_session_ended",fileViewerId:y.id,previewSessionId:t})),(null==i?void 0:i.file_id)&&P.teardownPASSPresence(e,i.file_id)}},this.handleAppDestroy=function(){return i.__awaiter(y,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.mounted=!1,[4,this.doTeardown()];case 1:return e.sent(),[2]}}))}))},this.handleAppMount=function(){y.mounted=!0},this.unmount=function(){y.container&&(r.unmountComponentAtNode(y.container),window.removeEventListener("beforeunload",y.endSession))};var C=this.id=t||s.v4();this.getPlatformProps=e;var x=e(),R=x.store,T=x.deviceType,O=void 0===T?"desktop":T,F=x.showAuthModal,D=x.canCloseViewer;this.store=R;var V=m?Object.keys(m)[0]:void 0;this.plugins={navigation:b.makeNavigation({store:R,fileViewerId:C,reinitializeFileViewer:this.reinitializeFileViewer,exitPluginEditMode:this.exitPluginEditMode,showAuthModal:F,canCloseViewer:D}),instances:null,promisedInstances:this.loadPlugins(m),count:null==m?0:Object.keys(m).length,queryBus:new w.PluginQueryBus({getPageForSelection:function(){}}),initialDefaultPlugin:V},this.defaultPlugin=void 0,R.dispatch(a.initializeFileViewer({fileViewerId:C,deviceType:O})),R.dispatch(u.getCurrentAccountAction({arg:void 0,params:{}})),R.dispatch(u.getRootInfoAction({arg:void 0})),window.addEventListener("beforeunload",this.endSession,{once:!0})}return e.prototype.loadPlugins=function(e){var t=this;void 0===e&&(e={});var n={},r=this.getPlatformProps().config;return Promise.all(Object.keys(e).map((function(a){return i.__awaiter(t,void 0,void 0,(function(){var t,o;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,(0,e[a])()];case 1:return t=i.sent(),o=m.makePluginContext({store:this.store,sdkConfig:r,fileViewerId:this.id,pluginId:a,reinitializeFileViewer:this.reinitializeFileViewer,exitPluginEditMode:this.exitPluginEditMode}),n[a]=new t(o),[2,n]}}))}))}))).then((function(){return t.plugins.instances=Object.keys(e).reduce((function(e,t){var r;return i.__assign(i.__assign({},e),((r={})[t]=n[t],r))}),{}),n}))},Object.defineProperty(e.prototype,"unstable_pluginInstances",{get:function(){if(null==this.plugins.instances)throw new Error("Attempted to access plugin instances before initialization");return this.plugins.instances},enumerable:!1,configurable:!0}),e.prototype.getPluginByName=function(e){return e&&this.plugins.instances&&this.plugins.instances[e]?this.plugins.instances[e]:null},e.prototype.getActivePluginInstance=function(){var e=h.getActivePluginId(this.store.getState(),{fileViewerId:this.id});return this.getPluginByName(e)},e.prototype.setDefaultActivePlugin=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return this.defaultPlugin=t,h.getSelectedPluginId(this.store.getState(),{fileViewerId:this.id})?[2]:[4,this.plugins.promisedInstances];case 1:return r=i.sent(),0===(o=Object.keys(r)).length?[2]:(this.store.dispatch(a.setActiveRightRailPlugin({fileViewerId:this.id,previewKey:e,sourceContext:"initialization",pluginId:null!==(n=null!=t?t:this.plugins.initialDefaultPlugin)&&void 0!==n?n:o[0]})),[2])}}))}))},e.prototype.triggerPluginDidDeactivateForCurrent=function(){var e=this.getActivePluginInstance();e&&e.lifecycle&&e.lifecycle.pluginDidDeactivate&&e.lifecycle.pluginDidDeactivate()},e.prototype.triggerPluginsPreviewWillInitialize=function(e,t,n){var r=e.file_id,a=e.ns_id,o=e.sj_id,s=e.url;return i.__awaiter(this,void 0,void 0,(function(){var e,l,c,u,d;return i.__generator(this,(function(i){switch(i.label){case 0:if(null!=r)e={fileId:r};else if(null!=a&&null!=o)e={nsId:a,sjId:o};else{if(null==s)throw new Error("Expected file_id, ns_id/sj_id, or url to be present");e={sharedLinkUrl:s}}return[4,this.plugins.promisedInstances];case 1:for(l=i.sent(),c=0,u=Object.values(l);c<u.length;c++)null!=(d=u[c].lifecycle.previewWillInitialize)&&d(e,t,n);return[2]}}))}))},e.prototype.subscribeToPluginActivation=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return i.__generator(this,(function(i){return t=this.id,n=function(e){return h.getActivePluginId(e,{fileViewerId:t})},this.unsubscribeFromPluginActivation=y.observeStore(this.store,n,(function(t,i){var n=r.getPluginByName(t);if(n&&n.lifecycle&&n.lifecycle.pluginDidDeactivate)try{n.lifecycle.pluginDidDeactivate()}catch(t){r.store.dispatch(f.logSessionEvent({event:"lifecycle_failure",fileViewerId:r.id,previewSessionId:e,extra:{e:t}}))}var a=r.getPluginByName(i);if(a&&n!==a&&a.lifecycle&&a.lifecycle.pluginDidActivate)try{a.lifecycle.pluginDidActivate()}catch(t){r.store.dispatch(f.logSessionEvent({event:"lifecycle_failure",fileViewerId:r.id,previewSessionId:e,extra:{e:t}}))}})),[2]}))}))},e.prototype.triggerPluginsPreviewDidInitialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,a;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.plugins.promisedInstances];case 1:for(t=i.sent(),n=0,r=Object.values(t);n<r.length;n++)null!=(a=r[n]).lifecycle.previewDidInitialize&&a.lifecycle.previewDidInitialize(e);return[2]}}))}))},e.prototype.triggerPluginsPreviewWillTeardown=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.plugins.promisedInstances];case 1:for(e=i.sent(),t=0,n=Object.values(e);t<n.length;t++)(r=n[t]).lifecycle.previewWillTeardown&&r.lifecycle.previewWillTeardown();return[2]}}))}))},e.prototype.triggerPluginsPreviewDidError=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,a;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.plugins.promisedInstances];case 1:for(t=i.sent(),n=0,r=Object.values(t);n<r.length;n++)(a=r[n]).lifecycle.previewDidError&&a.lifecycle.previewDidError(e);return[2]}}))}))},e})();t.FileViewer=C,t.createFileViewer=function(e,t,n){var r=this;return void 0===n&&(n={}),function(a){for(var o=e().intl,s={},l=function(e){var a=n[e];s[e]=function(){return i.__awaiter(r,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2,a({intl:o,apiv2ClientBase:t})]}))}))}},c=0,u=Object.keys(n);c<u.length;c++){l(u[c])}return new C(e,a,s)}}})),define("file-viewer/preview_archive/archive_snack_bar",["require","exports","tslib","react","dig-components/snackbar","dig-components/progress_indicators","dig-components/icons","dig-components/icons/src","dig-components/buttons","file-viewer/core/data/actions"],(function(e,t,i,n,r,a,o,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArchiveSnackBar=void 0,n=i.__importStar(n);var u="snackBar__ZJpRxzAZou__preview-archive";t.ArchiveSnackBar=function(e){var t,i=e.filePreviewUiData.extractAllSnackbarState,d=e.intl,p=e.fileViewerId,f=e.previewKey,v=e.dispatch,g=n.useMemo((function(){return function(){return v(c.updateArchiveExtractAllSnackbarState({extractAllSnackbarState:null,fileViewerId:p,previewKey:f}))}}),[v,p,f]);if(!i)return null;if("pending"===i.state)t=n.createElement(r.Snackbar,{open:!0,timeout:0},n.createElement(a.Spinner,{"aria-valuetext":"Loading",size:"small",inverse:!0}),n.createElement(r.Snackbar.Message,null,d.formatMessage({id:"Cdmrh0",defaultMessage:"Extracting files..."})));else if("loaded"===i.state){t=n.createElement(r.Snackbar,{open:!0,timeout:0},n.createElement(o.UIIcon,{src:s.CheckmarkCircleLine}),n.createElement(r.Snackbar.Message,null,d.formatMessage({id:"Qs0be2",defaultMessage:"Files extracted to {folder} in your main Dropbox folder"},{folder:i.data})),n.createElement(r.Snackbar.Actions,null,n.createElement(l.Button,{variant:"transparent",inverse:!0,onClick:function(){v(c.openFileURL({fqPath:i.data}))}},d.formatMessage({id:"SliIKT",defaultMessage:"Open"})),n.createElement(l.Button,{variant:"transparent",inverse:!0,onClick:g},d.formatMessage({id:"1dhg8/",defaultMessage:"Close"}))))}else t=n.createElement(r.Snackbar,{open:!0,timeout:0},n.createElement(o.UIIcon,{src:s.FailLine}),n.createElement(r.Snackbar.Message,null,d.formatMessage({id:"Jh3TK7",defaultMessage:"Couldn't extract files"})),n.createElement(r.Snackbar.Actions,null,n.createElement(l.Button,{variant:"transparent",inverse:!0,onClick:g},d.formatMessage({id:"1dhg8/",defaultMessage:"Close"}))));return n.createElement("div",{className:u},t)}})),define("file-viewer/preview_error/index",["require","exports","tslib","react","dig-components/buttons","file-viewer/core/index","file-viewer/open_with_native/index","file-viewer/sidebar/download_dropdown","file-viewer/core/data/preview_key","file-viewer/preview_archive/archive_snack_bar","file-viewer/toolbar/toolbar_v2"],(function(e,t,i,n,r,a,o,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewError=t.TestOnlyErrorPage=t.UserOffline=t.FileUploading=t.FileTooLarge=t.NoExtension=t.DataFetchFailure=t.Unavailable=t.ArchiveFilePasswordProtected=t.PasswordProtected=t.ArchiveNestedFiletypeNotSupported=t.FiletypeNotSupported=void 0,n=i.__importStar(n);var d="container__1gUqDp17RI__preview-error",p="header__GVbENI6bxm__preview-error",f="message__1d_V7x7-Fc__preview-error",v="ctaSecondary__2BEWvdoier__preview-error",g="ctaLink__4S4Uc8LT1A__preview-error",_="illustrationContainer__1H20smtI3P__preview-error",w=function(e,t){var r=n.lazy((function(){return i.__awaiter(void 0,void 0,void 0,(function(){var n;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,e()];case 1:return n=i.sent(),[2,{default:n[t]}]}}))}))})),a=function(){return n.createElement(n.Suspense,{fallback:null},n.createElement(r,null))};return a.displayName="Async"+t,a},m=w((function(){return new Promise((function(t,i){e(["dig-illustrations/spot/look-view"],t,i)})).then(i.__importStar)}),"LookViewSpot"),h=w((function(){return new Promise((function(t,i){e(["dig-illustrations/spot/traffic-duck-crossing"],t,i)})).then(i.__importStar)}),"TrafficDuckCrossingSpot"),b=w((function(){return new Promise((function(t,i){e(["dig-illustrations/spot/team-ants"],t,i)})).then(i.__importStar)}),"TeamAntsSpot"),y=w((function(){return new Promise((function(t,i){e(["dig-illustrations/spot/passcode-lock"],t,i)})).then(i.__importStar)}),"PasscodeLockSpot");function A(e){var t=e.title,i=e.message,r=e.illustration,a=e.children;return n.createElement("article",{className:d},n.createElement("div",{className:_},r),n.createElement("header",{className:p},n.createElement("h1",null,t)),i?n.createElement("p",{className:f},i):null,a)}var I=function(e){var t,i,r,a,c,u=e.fileConfig,d=e.intl,p=e.dispatch,f=e.fileViewerId,g=e.previewKey,_=e.extractConfig,w=void 0===_?{canExtract:!1}:_,m=l.isFileIdPreviewKey(g)?g.fileId:null;return(null===(t=null==u?void 0:u.download_button)||void 0===t?void 0:t.enable_download_button)&&m?n.createElement(s.DownloadDropdown,{intl:d,dispatch:p,fileViewerId:f,fileId:m,previewKey:g,copyTargets:null!==(r=null===(i=null==u?void 0:u.download_button)||void 0===i?void 0:i.copy_targets)&&void 0!==r?r:[],canDownload:null!==(c=null===(a=null==u?void 0:u.download_button)||void 0===a?void 0:a.can_download)&&void 0!==c&&c,useTextButton:!0,useOutlineButton:!0,extractConfig:w}):n.createElement(o.OpenWithButton,{variant:"outline",collapsed:!1,dispatch:p,intl:d,fileViewerId:f,className:v})};t.FiletypeNotSupported=function(e){var t=e.fileViewerId,i=e.fileMetadata,o=e.previewKey,s=e.intl,l=e.dispatch,c=e.extractConfig,u=e.fileConfig;return n.createElement(A,{illustration:n.createElement(m,null),title:s.formatMessage({id:"73IpwD",defaultMessage:"{extension} files can’t currently be previewed."},{extension:a.getFileExtension(i?i.file_name:"")}),fileName:i?i.file_name:""},n.createElement(I,{previewKey:o,fileViewerId:t,intl:s,dispatch:l,extractConfig:c,fileConfig:u}),n.createElement(r.Button,{variant:"transparent",onClick:function(){return l(a.openWebPreview({fileViewerId:t,previewKey:o,sourceContext:"preview_error"}))},className:g},s.formatMessage({id:"qLPMn5",defaultMessage:"View on dropbox.com"})))},t.FiletypeNotSupported.displayName="FiletypeNotSupported",t.ArchiveNestedFiletypeNotSupported=function(e){var t=e.fileName,i=e.fileSize,r=e.intl,o=a.getFileExtension(t),s=o?r.formatMessage({id:"x+ecOm",defaultMessage:"{extension} files can’t be previewed from an archive file."},{extension:o}):r.formatMessage({id:"SQjtty",defaultMessage:"This file cannot be previewed. Please check to see if your file extension is correct."});return n.createElement(A,{illustration:n.createElement(m,null),title:s,fileName:t,message:r.formatMessage({id:"WF66bN",defaultMessage:"{filename} · {filesize}"},{filename:t,filesize:a.formatBytes(i,r)})})},t.ArchiveNestedFiletypeNotSupported.displayName="ArchiveNestedFiletypeNotSupported",t.PasswordProtected=function(e){var t=e.fileName,i=e.intl;return n.createElement(A,{illustration:n.createElement(y,null),title:i.formatMessage({id:"tzyBCT",defaultMessage:"This {extension} file is password-protected"},{extension:a.getFileExtension(t)}),fileName:t})},t.PasswordProtected.displayName="PasswordProtected",t.ArchiveFilePasswordProtected=function(e){var t=e.fileName,i=e.intl;return n.createElement(A,{illustration:n.createElement(y,null),title:i.formatMessage({id:"eO6mPw",defaultMessage:"Can't preview items inside password protected {extension} files."},{extension:a.getFileExtension(t)}),fileName:t})},t.ArchiveFilePasswordProtected.displayName="ArchiveFilePasswordProtected",t.Unavailable=function(e){var t,i=e.fileMetadata,r=e.previewKey,a=e.fileConfig,o=e.intl,s=e.fileViewerId,l=e.dispatch,c=e.extractConfig,u=o.formatMessage({id:"w0q1CU",defaultMessage:"Couldn’t preview this file"}),d=null!==(t=null==i?void 0:i.file_name)&&void 0!==t?t:"";return n.createElement(A,{illustration:n.createElement(m,null),title:u,fileName:d},n.createElement(I,{previewKey:r,fileViewerId:s,intl:o,dispatch:l,extractConfig:c,fileConfig:a}))},t.Unavailable.displayName="Unavailable",t.DataFetchFailure=function(e){var t,i,r=e.fileMetadata,o=e.intl;return r?(t=o.formatMessage({id:"ejp+g5",defaultMessage:"{extension} files are supported but something went wrong."},{extension:a.getFileExtension(r.file_name)}),i=r.file_name):(t=o.formatMessage({id:"0ljH1z",defaultMessage:"This file cannot be previewed"}),i=""),n.createElement(A,{illustration:n.createElement(m,null),title:t,fileName:i})},t.DataFetchFailure.displayName="DataFetchFailure",t.NoExtension=function(e){var t=e.fileMetadata,i=e.intl,r=e.dispatch,a=e.fileViewerId,o=e.previewKey,s=e.extractConfig,l=e.fileConfig;return n.createElement(A,{illustration:n.createElement(m,null),title:i.formatMessage({id:"vbytsy",defaultMessage:"Files without extensions cannot be previewed"}),fileName:t?t.file_name:""},n.createElement(I,{previewKey:o,fileViewerId:a,intl:i,dispatch:r,extractConfig:s,fileConfig:l}))},t.NoExtension.displayName="NoExtension",t.FileTooLarge=function(e){var t=e.fileMetadata,i=e.previewKey,r=e.previewMetadata,o=e.intl,s=e.dispatch,l=e.fileViewerId,c=e.config,u=e.fileConfig,d=e.extractConfig,p=void 0===d?{canExtract:!1}:d;return n.createElement(A,{illustration:n.createElement(b,null),title:o.formatMessage({id:"Jap7oN",defaultMessage:"This file is too big to preview"}),message:o.formatMessage({id:"CaboZW",defaultMessage:"The maximum size for {extension} files is {size}"},{extension:t?a.getFileExtension(t.file_name):"",size:a.formatBytes(a.getFileSizeLimit(t?t.file_name:"",a.resolvePreviewType(r),c),o)}),fileName:t?t.file_name:""},n.createElement(I,{previewKey:i,fileViewerId:l,intl:o,dispatch:s,extractConfig:p,fileConfig:u}))},t.FileTooLarge.displayName="FileTooLarge",t.FileUploading=function(e){var t=e.fileMetadata,i=e.intl,r=e.dispatch,a=e.fileViewerId,o=e.previewKey,s=e.extractConfig,l=e.fileConfig;return n.createElement(A,{illustration:n.createElement(h,null),title:i.formatMessage({id:"fz7GLr",defaultMessage:"File is uploading"}),fileName:t?t.file_name:""},n.createElement(I,{previewKey:o,fileViewerId:a,intl:i,dispatch:r,extractConfig:s,fileConfig:l}))},t.FileUploading.displayName="FileUploading",t.UserOffline=function(e){var t=e.dispatch,i=e.fileMetadata,r=e.fileViewerId,a=e.intl,o=e.previewKey,s=e.extractConfig,l=e.fileConfig;return n.createElement(A,{illustration:n.createElement(m,null),title:a.formatMessage({id:"jZUA7r",defaultMessage:"This file cannot be previewed because you are offline"}),fileName:i?i.file_name:""},n.createElement(I,{previewKey:o,fileViewerId:r,intl:a,dispatch:t,extractConfig:s,fileConfig:l}))},t.UserOffline.displayName="UserOffline";var P=function(e){switch(e.error.type){case a.FVErrorCode.UnsupportedPreviewType:return n.createElement(t.FiletypeNotSupported,Object.assign({},e));case a.FVErrorCode.NoExtension:return n.createElement(t.NoExtension,Object.assign({},e));case a.FVErrorCode.FileTooLarge:return n.createElement(t.FileTooLarge,Object.assign({},e));case a.FVErrorCode.PasswordProtected:return n.createElement(t.PasswordProtected,{intl:e.intl,fileName:e.fileMetadata?e.fileMetadata.file_name:""});case a.FVErrorCode.FileUploading:return n.createElement(t.FileUploading,Object.assign({},e));case a.FVErrorCode.UserOffline:return n.createElement(t.UserOffline,Object.assign({},e));case a.FVErrorCode.RivieraDataFetchFailure:return n.createElement(t.DataFetchFailure,Object.assign({},e));case a.FVErrorCode.PreviewsDataApiFailure:case a.FVErrorCode.MalformedPreviewsDataApiResponse:case a.FVErrorCode.MalformedRivieraData:case a.FVErrorCode.Unknown:case a.FVErrorCode.FileSwitched:case a.FVErrorCode.InvalidFileInfo:case a.FVErrorCode.InvalidLoggingOrder:case a.FVErrorCode.InvalidLoggingSession:case a.FVErrorCode.MissingContentMetadata:return n.createElement(t.Unavailable,Object.assign({},e))}};t.TestOnlyErrorPage=P,t.PreviewError=function(e){var t,i=e.extractConfig,r=e.fileMetadata,a=e.intl,o=e.previewKey,s=e.fileViewerId,l=e.dispatch,d=e.rootArchiveFileInformation,p=e.config,f=e.coreFileViewerUiData,v=e.filePreviewUiData,g=e.toolbarPlugins,_=e.width,w=e.responsiveSize,m=(null==i?void 0:i.canExtract)&&r?n.createElement(c.ArchiveSnackBar,{filePreviewUiData:i.filePreviewUiData,intl:a,previewKey:o,fileViewerId:s,dispatch:l}):null,h=null===(t=r)||void 0===t?void 0:t.fileConfig;return n.createElement(n.Fragment,null,m,n.createElement(P,Object.assign({},e,{fileConfig:h})),e.config.preview_page_revamp&&n.createElement(u.ConfigurableToolbarV2,{featureConfig:p,rootArchiveFileInformation:d,fileViewerId:s,previewKey:o,intl:a,filePreviewUi:v,fileMetadata:r,fileViewerUi:f,previewType:"error",plugins:g,previewWidth:_,responsiveSize:w}))}})),define("file-viewer/preview_doc/renderer/index",["require","exports","tslib","react","file-viewer/preview_doc/renderer/ppt","file-viewer/preview_doc/renderer/pdf","file-viewer/core/index","file-viewer/preview_doc/data_transform","file-viewer/preview_doc/password_modal","file-viewer/preview_error/index","file-viewer/keyboard/index","file-viewer/preview_doc/layers","file-viewer/core/utils/index","file-viewer/toolbar/toolbar","file-viewer/modes/sidebar/utils","file-viewer/core/constants","file-viewer/toolbar/toolbar_v2","file-viewer/core/data/actions"],(function(e,t,i,n,r,a,o,s,l,c,u,d,p,f,v,g,_,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewDoc=void 0,n=i.__importStar(n);var m=parseInt("16px",10),h=parseInt("24px",10),b=parseInt("24px",10),y=parseInt("168px",10),A=[".docx",".pptx"],I=(function(e){function t(t){var i=e.call(this,t)||this;return i.state={failedPasswordAttempt:0,passwordDismissed:!1,transformedData:i.props.rivieraData?s.transformData(i.props.rivieraData):i.props.data},i.handlePageChange=function(e,t){i.props.dispatch(o.updateDocCurrentPageIndex({fileViewerId:i.props.fileViewerId,previewKey:i.props.previewKey,pageIndex:e,sourceContext:t}))},i.handlePdfPageChange=function(e){i.handlePageChange(e,"mouse_wheel")},i.handlePasswordSubmit=function(e){var t=i.props,n=t.fileViewerId,r=t.previewKey,a=t.previewMetadata;if(a&&a.content){var s=a.content,l=s.refresh_url,c=s.text_url_tmpl,u=s.image_url_tmpl;o.invariant(!!l,o.FVErrorCode.MalformedRivieraData,"Cannot send password! Missing refresh_url from preview metadata"),i.props.dispatch(o.refreshBlobAction({fileViewerId:n,previewKey:r,refreshUrl:l,oldPreview:{text_url_tmpl:c,image_url_tmpl:u},password:e}))}},i.handlePasswordDismiss=function(){i.setState({passwordDismissed:!0})},i.fetchPageDataWithMetadata=function(e,t,n){var r=i.metadataBatchPageRange=o.calculatePageRange(e,i.props.config.partial_prewarm_allowed),a=r[0],s=r[1];t&&i.props.dispatch(o.fetchPageDataWithMetadata({fileViewerId:i.props.fileViewerId,previewKey:n,textUrlTmpl:t.content.text_url_tmpl,startPage:a,endPage:s}))},i.onRenderSucceeded=function(){i.props.onRenderSucceeded(),i.fetchPageDataWithMetadata(i.props.filePreviewUiData.currentPageIndex,i.props.previewMetadata,i.props.previewKey)},i.zoomIn=function(){var e=i.props,t=e.dispatch,n=e.fileViewerId,r=e.previewKey;t(o.zoomIn({fileViewerId:n,previewKey:r,sourceContext:"keyboard"}))},i.zoomOut=function(){var e=i.props,t=e.dispatch,n=e.fileViewerId,r=e.previewKey;t(o.zoomOut({fileViewerId:n,previewKey:r,sourceContext:"keyboard"}))},i.keyboardBindings=u.getZoomInOutBindings({zoomIn:i.zoomIn,zoomOut:i.zoomOut}),t.config.partial_prewarm_allowed?i.metadataBatchPageRange=[0,g.TEXT_FIRST_BATCH_SIZE]:i.metadataBatchPageRange=[0,50],i}return i.__extends(t,e),t.prototype.recalculateFitScaleFactor=function(e){void 0===e&&(e=this.props);var t=e.rivieraData,i=e.fileViewerId,n=e.previewKey,r=e.width,a=e.height,s=e.dispatch;if(t&&t.metadata){var l=_.shouldShowDocSidebar(r)&&this.props.config.enable_navigation_bar,c=Math.max(0,r-m-b-(l?y:0)-15),u=Math.max(0,a-m-h),d=this.props.config.preview_types.ssr_doc,p=d.scaleToFit,f=d.maxWidth,v=null!=f?Math.min(c,f):c,g=u,w=t.metadata.dimensions;if(0===w.length)return 1;var A=w.reduce((function(e,t){var i=t[0],n=t[1];return Math.min(e,v/i,"width_and_height"===p?g/n:Number.POSITIVE_INFINITY)}),Number.POSITIVE_INFINITY);s(o.updateFitScaleFactor({fileViewerId:i,previewKey:n,fitScaleFactor:A}))}},t.prototype.componentDidMount=function(){this.props.fileMetadata&&A.includes(o.getFileExtension(this.props.fileMetadata.file_name))&&this.props.dispatch(w.triggerDynamicRoutingModalCheck()),this.recalculateFitScaleFactor()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.rivieraData,i=e.previewMetadata;e.previewKey.serialized!==this.props.previewKey.serialized?this.setState({failedPasswordAttempt:0,passwordDismissed:!1}):t&&t!==this.props.rivieraData&&t.error&&12===t.error.statusCode&&this.setState({failedPasswordAttempt:this.state.failedPasswordAttempt+1}),t!==this.props.rivieraData&&this.setState({transformedData:t?s.transformData(t):e.data});var n=e.filePreviewUiData.currentPageIndex,r=this.metadataBatchPageRange,a=r[0],o=r[1];!(n>=a&&n<o)&&t&&i&&p.canPreviewInPreviewDoc(i)&&this.fetchPageDataWithMetadata(n,i,e.previewKey),this.recalculateFitScaleFactor(e)},t.prototype.render=function(){var e,t,s=this.props,p=s.config,g=s.coreFileViewerUiData,w=s.dispatch,h=s.previewKey,A=s.fileMetadata,I=s.filePreviewUiData,P=s.fileViewerId,E=s.fileConfig,M=s.height,S=s.intl,C=s.rootArchiveFileInformation,x=s.rivieraData,R=s.width,T=s.toolbarPlugins,O=this.state,F=O.failedPasswordAttempt,D=O.transformedData,V=O.passwordDismissed,B=A?A.file_name:"";if(null===(e=this.props.rivieraData)||void 0===e?void 0:e.error)return 12!==this.props.rivieraData.error.statusCode?n.createElement(c.PreviewError,Object.assign({},this.props,{rivieraData:void 0,data:void 0,error:new o.FVError(o.FVErrorCode.RivieraDataFetchFailure,this.props.rivieraData.error.message)})):V||F>3?n.createElement(n.Fragment,null,n.createElement(c.PasswordProtected,{fileName:B,intl:S}),p.preview_page_revamp&&n.createElement(_.ConfigurableToolbarV2,{previewKey:h,fileConfig:E,fileViewerId:P,featureConfig:p,intl:S,showDocSidebar:_.shouldShowDocSidebar(this.props.width),previewType:"error",rootArchiveFileInformation:C,fileViewerUi:g,filePreviewUi:I,fileMetadata:A,plugins:T,previewWidth:R})):n.createElement(l.PasswordModal,{enteredWrongPassword:!!F,intl:S,onSubmit:this.handlePasswordSubmit,onDismiss:this.handlePasswordDismiss,fileName:B});var N=m+b,k=Math.round(100*(R-N-y)/window.innerWidth/window.devicePixelRatio),L=i.__assign(i.__assign({},I),{viewportWidth:k}),U=i.__assign(i.__assign({},this.props),{onRenderSucceeded:this.onRenderSucceeded,filePreviewUiData:L,data:(D||[]).filter((function(e){return e})),onPageChange:this.handlePdfPageChange,layerRenderFn:d.defaultLayerRenderFn,pageNavigation:I.pageNavigation});return n.createElement("div",{className:"app__2pz0EjZoOj__preview-core",style:{width:R,height:M}},o.PRESENTATION_EXTS.includes(o.getFileExtension(B))?n.createElement(r.PreviewPPT,Object.assign({},U,{onPageChange:this.handlePageChange})):n.createElement(a.PreviewPDF,Object.assign({},U,{isEditMode:v.isPluginEditMode(null===(t=this.props.activePluginInstance)||void 0===t?void 0:t.mode)})),!p.preview_page_revamp&&n.createElement(f.ConfigurableToolbarV1,{className:"toolbar__1COr9ZzNP6__preview-core",previewKey:h,fileConfig:E,fileViewerId:P,featureConfig:p,intl:S,previewType:"ssr_doc",dispatch:w,rootArchiveFileInformation:C,fileViewerUi:g,filePreviewUi:I,fileMetadata:A,fileRivieraData:x}),n.createElement(u.KeyboardBindingConnector,{keyboardBindings:this.keyboardBindings}))},t})(n.PureComponent);t.PreviewDoc=I})),define("file-viewer/preview_doc/index",["require","exports","file-viewer/preview_doc/sidebar","file-viewer/preview_doc/links_layer","file-viewer/preview_doc/text_transform","file-viewer/preview_doc/img_layer","file-viewer/preview_doc/text_layer","file-viewer/preview_doc/text_transform","file-viewer/preview_doc/error_snackbar","file-viewer/preview_doc/types","file-viewer/preview_doc/renderer/index","file-viewer/preview_doc/renderer/page","file-viewer/preview_doc/renderer/pdf_pages","file-viewer/preview_doc/renderer/pdf","file-viewer/preview_doc/renderer/ppt","file-viewer/preview_doc/password_modal","file-viewer/preview_doc/layers"],(function(e,t,i,n,r,a,o,s,l,c,u,d,p,f,v,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLayerRenderFn=t.PasswordModal=t.PreviewPPT=t.PreviewPDF=t.PdfPages=t.Page=t.PreviewDoc=t.TextDir=t.TextNodeType=t.ErrorSnackbar=t.transformText=t.TextLayer=t.ImgLayer=t.normalizeUrl=t.isLinkUrl=t.LinksLayer=t.SIDEBAR_WIDTH=t.Sidebar=void 0,Object.defineProperty(t,"Sidebar",{enumerable:!0,get:function(){return i.Sidebar}}),Object.defineProperty(t,"SIDEBAR_WIDTH",{enumerable:!0,get:function(){return i.SIDEBAR_WIDTH}}),Object.defineProperty(t,"LinksLayer",{enumerable:!0,get:function(){return n.LinksLayer}}),Object.defineProperty(t,"isLinkUrl",{enumerable:!0,get:function(){return n.isLinkUrl}}),Object.defineProperty(t,"normalizeUrl",{enumerable:!0,get:function(){return r.normalizeUrl}}),Object.defineProperty(t,"ImgLayer",{enumerable:!0,get:function(){return a.ImgLayer}}),Object.defineProperty(t,"TextLayer",{enumerable:!0,get:function(){return o.TextLayer}}),Object.defineProperty(t,"transformText",{enumerable:!0,get:function(){return s.transform}}),Object.defineProperty(t,"ErrorSnackbar",{enumerable:!0,get:function(){return l.ErrorSnackbar}}),Object.defineProperty(t,"TextNodeType",{enumerable:!0,get:function(){return c.TextNodeType}}),Object.defineProperty(t,"TextDir",{enumerable:!0,get:function(){return c.TextDir}}),Object.defineProperty(t,"PreviewDoc",{enumerable:!0,get:function(){return u.PreviewDoc}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return d.Page}}),Object.defineProperty(t,"PdfPages",{enumerable:!0,get:function(){return p.PdfPages}}),Object.defineProperty(t,"PreviewPDF",{enumerable:!0,get:function(){return f.PreviewPDF}}),Object.defineProperty(t,"PreviewPPT",{enumerable:!0,get:function(){return v.PreviewPPT}}),Object.defineProperty(t,"PasswordModal",{enumerable:!0,get:function(){return g.PasswordModal}}),Object.defineProperty(t,"defaultLayerRenderFn",{enumerable:!0,get:function(){return _.defaultLayerRenderFn}})})),define("file-viewer/sidebar_v2/right_rail",["require","exports","tslib","react","typescript/component_libraries/files_components/src/right-rail/right_rail","react-redux","file-viewer/core/index","file-viewer/plugins/data","file-viewer/plugins/props","file-viewer/plugins/selectors/active_plugin","file-viewer/core/data/selectors"],(function(e,t,i,n,r,a,o,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewRightRail=t.NOOP=void 0,n=i.__importStar(n);var d="rightRailContainer__FLvSm9lBS3__right_rail",p="previewRightRailWrapper__3izY7rEowj__right_rail";t.NOOP=function(){},t.PreviewRightRail=n.default.memo((function(e){var i=e.fileViewerId,f=e.previewKey,v=e.fileName,g=e.intl,_=e.pluginInstances,w=e.pluginNavigation,m=e.pluginQueryBus,h=e.height,b=a.useDispatch(),y=a.useSelector((function(e){return u.isSidebarOpen(e,{fileViewerId:i})})),A=a.useSelector((function(e){return s.getPluginData(e,{fileViewerId:i,navigation:w})})),I=a.useSelector((function(e){return l.makePluginProps(e,i,A,m)})),P=a.useSelector((function(e){return l.makePluginControlProps(e,i,A,m)})),E=a.useSelector((function(e){var t;return c.getSelectedRightRailPluginId(e,{fileViewerId:i})||(null===(t=Object.keys(_))||void 0===t?void 0:t[0])})),M=n.default.useCallback((function(e){e===E&&y||b(o.setActiveRightRailPlugin({pluginId:e,fileViewerId:i,previewKey:f,sourceContext:"sidebar"}))}),[b,i,f,E,y]),S=n.default.useCallback((function(){var e={fileViewerId:i,previewKey:f,sourceContext:"sidebar"};b(o.openSidebar(e))}),[b,i,f]),C=n.useCallback((function(){var e={fileViewerId:i,previewKey:f,sourceContext:"sidebar"};b(o.closeSidebar(e))}),[b,i,f]),x=n.default.useCallback((function(e){M(e),S()}),[M,S]);return I&&E?n.default.createElement("div",{style:{height:h},className:p},y?n.default.createElement(r.RightRail.ExpandedWrapper,{withTitle:v,withCollapseButton:g.formatMessage({id:"BgMbCS",defaultMessage:"Close details pane"}),onCollapse:C,expandedBlade:E,className:d,onExpandBlade:M},n.default.createElement(r.RightRail.Content,null,Object.entries(_).map((function(e){var t=e[0],i=e[1].rightRailUI.Sidebar;return n.default.createElement(i,Object.assign({},I,{key:"plugin-sidebar-"+t}))})))):n.default.createElement(r.RightRail.CollapsedWrapper,{onExpand:S,withExpandButton:g.formatMessage({id:"J5TC1D",defaultMessage:"Open details pane"}),className:d,onExpandBlade:x},P&&Object.entries(_).map((function(e){var i=e[0],r=e[1].rightRailUI.Control;return n.default.createElement(r,Object.assign({},P,{isSelectedPlugin:i===E,onClick:t.NOOP,key:"plugin-control-"+i}))})))):null})),t.PreviewRightRail.displayName="PreviewRightRail"})),define("file-viewer/sidebar/download_button",["require","exports","tslib","react","dig-components/buttons","dig-components/tooltips","dig-components/icons","dig-components/icons/src","file-viewer/core/index"],(function(e,t,i,n,r,a,o,s,l){"use strict";function c(e){var t=e.onClick,i=e.title;return n.createElement(a.Tooltip,{placement:"left",title:i},n.createElement(r.IconButton,{onClick:t,variant:"transparent",title:i},n.createElement(o.UIIcon,{src:s.DownloadLine})))}Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadButton=t.DownloadIconButton=void 0,n=i.__importStar(n),t.DownloadIconButton=c,t.DownloadButton=function(e){var t=e.onClick,i=e.intl,a=e.fileViewerUiData,o=i.formatMessage({id:"Mran8D",defaultMessage:"Download"});return a.sidebar.visibility===l.SidebarVisibility.Closed?n.createElement(c,{onClick:t,title:o}):n.createElement(r.Button,{onClick:t,variant:"primary"},o)}})),define("file-viewer/sidebar/download_dropdown",["require","exports","tslib","react","dig-components/buttons","dig-components/menu","dig-components/tooltips","dig-components/icons","dig-components/icons/src","file-viewer/core/index","file-viewer/core/data/actions","file-viewer/core/data/utils"],(function(e,t,i,n,r,a,o,s,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadDropdown=t.normalize=void 0,n=i.__importStar(n);function p(e){return e?("/"!==e.charAt(0)&&(e="/"+e),"/"===e.charAt(e.length-1)?e.substr(0,e.length-1):e):""}t.normalize=p,t.DownloadDropdown=function(t){var v,g,_=t.dispatch,w=t.fileViewerId,m=t.fileId,h=t.previewKey,b=t.intl,y=t.canDownload,A=t.copyTargets,I=t.useTextButton,P=t.extractConfig,E=t.useOutlineButton,M=function(){_(c.downloadFile({previewKey:h,fileViewerId:w,sourceContext:"sidebar"}))},S=function(e){return function(){_(c.copyToDropbox({previewKey:h,fileViewerId:w,sourceContext:"sidebar",role:e}))}},C=b.formatMessage({id:"Mran8D",defaultMessage:"Download"}),x=function(){return i.__awaiter(void 0,void 0,void 0,(function(){var t;return i.__generator(this,(function(n){switch(n.label){case 0:return _(u.updateArchiveExtractAllSnackbarState({extractAllSnackbarState:d.makePendingLoadableData(),fileViewerId:w,previewKey:h})),[4,new Promise((function(t,i){e(["api_v2/redux/flows"],t,i)})).then(i.__importStar)];case 1:return t=n.sent().unzipAction,_(t({arg:{file:{identifier:{file_id:m,".tag":"file_id"}}}},{previewKey:h,fileViewerId:w})),[2]}}))}))},R=P.canExtract&&y?(function(e){var t;switch(null==e?void 0:e[".tag"]){case"cdm_team":var i=(function(e,t){var i=(e=p(e)).split("/").pop();return i||(t||"Dropbox")})(e.home_path);t=i.length>12?b.formatMessage({id:"TAv+z6",defaultMessage:"Extract to my member folder"}):b.formatMessage({id:"53+pL4",defaultMessage:"Extract to {cdm_tmf_name} folder"},{cdm_tmf_name:i});break;case"not_on_cdm_team":default:t=b.formatMessage({id:"v021UF",defaultMessage:"Extract to my Dropbox"})}return{text:t,value:x,disabled:!1,key:"decompress"}})(P.rootInfo):void 0,T=i.__spreadArrays([y?{text:C,value:M,disabled:!1,key:"download"}:void 0],A.map((function(e){var t=e.text,i=e.isDisabled,n=e.role;return{text:t,value:S(n),disabled:i,key:t}})),[R]).filter(Boolean);if(1===T.length)return n.createElement(r.Button,{onClick:null===(v=T[0])||void 0===v?void 0:v.value,variant:"outline"},null===(g=T[0])||void 0===g?void 0:g.text);var O=T.map((function(e){return e?n.createElement(a.Menu.ActionItem,{id:"download-menu-item",key:e.key,value:e.value,disabled:e.disabled},e.text):null}));return I?n.createElement(r.SplitButton,{variant:E?"outline":"primary",renderMenu:f(O),onClick:M},C):n.createElement(a.Menu.Wrapper,{key:"download-dropdown-menu",onSelection:function(e){e()}},(function(e){var t=e.getContentProps,i=e.getTriggerProps,c=e.triggerRef;return n.createElement(n.Fragment,null,n.createElement(o.Tooltip,{placement:"left",title:C,triggerRef:c},n.createElement(r.IconButton,Object.assign({},i(),{variant:"transparent",title:C}),n.createElement(s.UIIcon,{src:l.DownloadLine}))),n.createElement(a.Menu.Content,Object.assign({},t()),n.createElement(a.Menu.Segment,null,O)))}))};var f=function(e){return function(t){var i=t.buttonProps;return n.createElement(a.Menu.Wrapper,{key:"download-dropdown-menu",onSelection:function(e){e()}},(function(t){var o=t.getContentProps,s=t.getTriggerProps;return n.createElement(n.Fragment,null,n.createElement(r.Button,Object.assign({},s(),i)),n.createElement(a.Menu.Content,Object.assign({},o()),n.createElement(a.Menu.Segment,null,e)))}))}};t.DownloadDropdown.displayName="DownloadDropdown"})),define("file-viewer/title_bar_v2/index",["require","exports","file-viewer/title_bar_v2/title_bar_v2"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TitleBarV2=t.TITLE_BAR_BACK_AND_HELP_ICONS=t.TITLE_BAR_V2_HEIGHT=void 0,Object.defineProperty(t,"TITLE_BAR_V2_HEIGHT",{enumerable:!0,get:function(){return i.TITLE_BAR_V2_HEIGHT}}),Object.defineProperty(t,"TITLE_BAR_BACK_AND_HELP_ICONS",{enumerable:!0,get:function(){return i.TITLE_BAR_BACK_AND_HELP_ICONS}}),Object.defineProperty(t,"TitleBarV2",{enumerable:!0,get:function(){return i.TitleBarV2}})})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/index",["require","exports","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar","typescript/component_libraries/retrieval-components/src/simple-action-bar/inline_action_bar","typescript/component_libraries/retrieval-components/src/simple-action-bar/inline_overflow_menu"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineOverflowMenu=t.InlineActionBar=t.ActionBar=void 0,Object.defineProperty(t,"ActionBar",{enumerable:!0,get:function(){return i.ActionBar}}),Object.defineProperty(t,"InlineActionBar",{enumerable:!0,get:function(){return n.InlineActionBar}}),Object.defineProperty(t,"InlineOverflowMenu",{enumerable:!0,get:function(){return r.InlineOverflowMenu}})})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar",["require","exports","tslib","react","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_action","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_overflow_menu","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/component_libraries/retrieval-components/src/hooks/resize_observer","classnames"],(function(e,t,i,n,r,a,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBar=void 0,n=i.__importStar(n),l=i.__importDefault(l);var c={previousActions:{},offsetRight:[]};function u(e){return null!=e}t.ActionBar=function(e){var t,i=e.actionHandler,d=e.actions,p=e.className,f=e.intl,v=e.handleOverflowMenuToggle,g=e.hideOverflowMenu,_=e.responsive,w=e.responsiveSize,m=e.accessibilityConfig,h=e.hideIcons,b=e.overflowMenuOpenRequest,y=e.overflowMenuCloseRequest,A=e.overflowMenuCoordinates,I=e.resolveOverflowMenuOpenRequest,P=e.overflowMenuTitle,E=e.expActionBarRedesignVariant,M=e.hideOverflowMenuHeader,S=e.canShowSelectionIndicatorInToolbar,C=e.createMenuOpenRequest,x=e.resolveCreateMenuOpenRequest,R="OFF"!==E&&"CONTROL"!==E,T=_&&(w===o.ResponsiveSize.MOBILE||w===o.ResponsiveSize.TABLET),O=_&&w===o.ResponsiveSize.MOBILE,F=s.useResizeObserver()[0],D=void 0;F.current&&(D=S?F.current.offsetLeft+F.current.offsetWidth-48:F.current.offsetLeft+F.current.offsetWidth);var V=n.useRef(null),B=n.useRef(null),N=n.useRef(null),k=n.useRef(null),L=n.useState(c),U=L[0],j=L[1];n.useLayoutEffect((function(){j({previousActions:d,offsetRight:[V,B,N,k].map((function(e){return e.current&&e.current.offsetLeft+e.current.offsetWidth})).filter(u)})}),[d]);var K=n.useMemo((function(){var e,t,i;return d.atTopLevelIfSpace&&!R&&(d.alwaysInOverflow=d.alwaysInOverflow?d.alwaysInOverflow:[[]],d.alwaysInOverflow[0]=d.atTopLevelIfSpace.concat(d.alwaysInOverflow[0])),{alwaysAtTopLevel:d.alwaysAtTopLevel,atTopLevelIfSpace:d.atTopLevelIfSpace,alwaysInOverflow:d.alwaysInOverflow,hasActions:(null===(e=d.alwaysAtTopLevel)||void 0===e?void 0:e.length)||(null===(t=d.atTopLevelIfSpace)||void 0===t?void 0:t.length)||(null===(i=d.alwaysInOverflow)||void 0===i?void 0:i.length)}}),[d]),z=K.alwaysAtTopLevel,G=K.atTopLevelIfSpace,q=K.alwaysInOverflow,W=K.hasActions,H=U.previousActions,Y=U.offsetRight,Z=_&&D&&d===H?Y.filter((function(e){return e+43<D})).length:4,X=l.default("rc-action-bar-container",p,((t={})["rc-action-bar-container--responsive"]=_,t));if(!W)return n.createElement("div",{className:X});var Q=[V,B,N,k],J=!g&&(null==q?void 0:q.some((function(e){return e.length>0})));return n.createElement("div",{ref:F,className:X,style:{width:e.fixedWidth}},!!(null==z?void 0:z.length)&&n.createElement(n.Fragment,null,z.map((function(e,t){return n.createElement("div",{ref:Q[t],key:"action-bar-action-"+t},n.createElement(r.ActionBarAction,Object.assign({},e,{buttonVariant:0===t?"primary":"opacity",actionHandler:i,intl:f,accessibilityConfig:m,hideIcons:T||h,expActionBarRedesignEnabled:R})))})),(!!(null==G?void 0:G.length)||J)&&n.createElement("div",{className:l.default("rc-action-bar-separator",{"rc-action-bar-separator-small":T})})),!!(null==G?void 0:G.length)&&(null==G?void 0:G.slice(0,Z).map((function(e,t){return n.createElement("div",{ref:Q[t],key:"action-bar-action-"+t},n.createElement(r.ActionBarAction,Object.assign({},e,{buttonVariant:"opacity",actionHandler:i,intl:f,accessibilityConfig:m,hideIcons:T||h,expActionBarRedesignEnabled:R,createMenuOpenRequest:C,resolveCreateMenuOpenRequest:x})))}))),J&&n.createElement(a.ActionBarOverflowMenu,{actions:{alwaysAtTopLevel:z,atTopLevelIfSpace:G,alwaysInOverflow:q},actionHandler:i,buttonVariant:R?"opacity":"transparent",overflowMenuTitle:P||"",expActionBarRedesignVariant:E||"OFF",intl:f,onToggle:v,accessibilityConfig:m,overflowMenuOpenRequest:b,overflowMenuCloseRequest:y,overflowMenuCoordinates:A,resolveOverflowMenuOpenRequest:I,isMobile:!!O,hideOverflowMenuHeader:M}))}})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_action",["require","exports","tslib","react","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_action_button","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_action_menu","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_split_button","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_utils","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types"],(function(e,t,i,n,r,a,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBarAction=void 0;var c=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.handleMenuSelection=function(e,i){var n=s.createActionBarActionEventInfo(e,l.ActionBarActionEventSource.BUTTON_MENU,i);void 0!==n&&t.props.actionHandler.handleAction(n)},t.handleMenuToggle=function(e){var i=e.isOpen;t.props.actionHandler.handleMenuToggle&&t.props.actionHandler.handleMenuToggle({type:t.props.actionType,isOpen:i})},t.handleActionClick=function(e){t.props.actionHandler.handleAction({type:t.props.actionType,event:e,source:l.ActionBarActionEventSource.BUTTON},!1)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.menu,i=e.isEnabled,c=e.intl,u=e.variant,d=e.accessibilityConfig,p=e.icon,f=e.hideIcons,v=e.tooltip,g=e.disabledTooltip,_=e.menuMinWidth,w=e.actionType,m=e.className,h=e.dropdownButtonClassName,b=e.buttonVariant,y=e.expActionBarRedesignEnabled,A=e.createMenuOpenRequest,I=e.resolveCreateMenuOpenRequest,P=this.props.labelOverride||c.formatMessage(this.props.text),E=s.getAccessibilityLabel(c,P,"primary"===u?null==d?void 0:d.primaryActionContext:null==d?void 0:d.secondaryActionsContext);if(this.props.renderButton)return this.props.renderButton(f||!1);if(this.props.button)return this.props.button;if((null==t?void 0:t.type)===l.ActionBarMenuType.DROPDOWN){var M=w===l.ActionBarActionTypes.CREATE;return n.createElement(a.ActionBarActionMenu,{disabled:!i,value:P,onSelection:this.handleMenuSelection,onToggle:this.handleMenuToggle,icon:f?void 0:p,variant:b,ariaLabel:E,tooltip:v,minWidth:_,actionType:w,className:m,dropdownButtonClassName:h,menuOpenRequest:M?A:void 0,resolveOpenRequest:M?I:void 0},n.createElement(a.ActionBarActionMenuContent,{menuSections:t.menuSections,expActionBarRedesignEnabled:y}))}return(null==t?void 0:t.type)===l.ActionBarMenuType.CUSTOM_DROPDOWN?n.createElement(a.ActionBarActionMenu,{disabled:!i,value:P,onSelection:this.handleMenuSelection,onToggle:this.handleMenuToggle,icon:f?void 0:p,variant:b,ariaLabel:E,tooltip:v,actionType:w,className:m,dropdownButtonClassName:h,expActionBarRedesignEnabled:y},t.menuContent):(null==t?void 0:t.type)===l.ActionBarMenuType.SPLIT_BUTTON?n.createElement(o.ActionBarSplitButton,{disabled:!i,onClick:this.handleActionClick,onSelection:this.handleMenuSelection,onToggle:this.handleMenuToggle,value:P,intl:c,icon:f?void 0:p,ariaLabel:E,menuSections:t.menuSections,className:m,expActionBarRedesignEnabled:y}):n.createElement(r.ActionBarActionButton,{disabled:!i,value:P,onClick:this.handleActionClick,icon:f?void 0:p,variant:b,ariaLabel:E,tooltip:v,disabledTooltip:g,className:m})},t})((n=i.__importStar(n)).Component);t.ActionBarAction=c,c.displayName="ActionBarAction"})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_action_button",["require","exports","tslib","react","dig-components/buttons","dig-components/tooltips","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_icon"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBarActionButton=void 0,n=i.__importStar(n),t.ActionBarActionButton=function(e){var t=e.variant,i=e.disabled,s=e.value,l=e.onClick,c=e.icon,u=e.ariaLabel,d=e.tooltip,p=e.disabledTooltip,f=e.className,v=n.createElement(r.Button,{variant:t,disabled:i,onClick:l,withIconLeft:c?n.createElement(o.ActionBarIcon,{icon:c}):void 0,"aria-label":u,className:f},s),g=n.useState(!1),_=g[0],w=g[1],m=n.useState("bottom"),h=m[0],b=m[1],y=n.createRef(),A=function(){w(!0)},I=function(){w(!1)};return i&&p?n.createElement(n.Fragment,null,n.createElement("span",{tabIndex:0,onMouseEnter:A,onMouseLeave:I,onFocus:A,onBlur:I,"aria-describedby":_&&_?"tooltip-button":void 0},n.createElement(r.Button,{variant:t,disabled:!0,onClick:l,withIconLeft:c?n.createElement(o.ActionBarIcon,{icon:c}):void 0,"aria-label":u,ref:y,className:f},s)),n.createElement(a.Tooltip.Control,{id:"tooltip-button",triggerRef:y,open:_,auto:!0,placement:h,onChangePlacement:function(e){return b(e)}},p)):d?n.createElement(a.Tooltip,{title:d,id:"tooltip-button"},v):v},t.ActionBarActionButton.displayName="ActionBarActionButton"})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_action_menu",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/menu","dig-components/tooltips","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_icon","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types"],(function(e,t,i,n,r,a,o,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBarActionMenuContentItem=t.ActionBarActionMenuContent=t.ActionBarActionMenu=void 0,n=i.__importStar(n),r=i.__importDefault(r),t.ActionBarActionMenu=function(e){var t=e.variant,i=e.disabled,r=e.value,c=e.onSelection,d=e.onToggle,p=e.icon,f=e.children,v=e.ariaLabel,g=e.tooltip,_=e.minWidth,w=e.className,m=e.dropdownButtonClassName,h=e.expActionBarRedesignEnabled,b=e.menuOpenRequest,y=e.resolveOpenRequest,A=void 0!==_?{minWidth:_}:{};return n.createElement(o.Menu.Wrapper,{onSelection:c,onToggle:d,className:w},(function(e){var c=e.getTriggerProps,d=e.getContentProps,_=e.triggerRef,w=e.openMenu,I=n.createElement(a.Button,Object.assign({className:m,variant:t,withDropdownIcon:!0,disabled:i,withIconLeft:p?n.createElement(l.ActionBarIcon,{icon:p}):void 0,"aria-label":v},c()),r);return n.createElement(u,{openMenu:w,menuOpenRequest:b,resolveOpenRequest:y},n.createElement(n.Fragment,null,g?n.createElement(s.Tooltip,{title:g,triggerRef:_,id:"tooltip-button"},I):I,n.createElement(o.Menu.Content,Object.assign({},d(),{style:A,className:h?"rc-action-bar-submenu-content":""}),f)))}))},t.ActionBarActionMenu.displayName="ActionBarActionMenu";var u=function(e){var t=e.openMenu,i=e.menuOpenRequest,r=e.resolveOpenRequest,a=e.children;return n.useEffect((function(){i&&(t(i),r&&r())}),[i,r]),a};t.ActionBarActionMenuContent=function(e){var i=e.menuSections,r=e.expActionBarRedesignEnabled;return n.createElement(n.Fragment,null,i.map((function(e,i){return n.createElement(o.Menu.Segment,{key:i+"-section",withLabel:e.label},e.menuItems.map((function(e,a){return n.createElement(t.ActionBarActionMenuContentItem,{menuItem:e,key:c.isActionBarActionMenuSubmenu(e)?i+"-"+a+"-submenu":i+"-"+a+"-action-item",expActionBarRedesignEnabled:r})})))})))},t.ActionBarActionMenuContent.displayName="ActionBarActionMenuContent",t.ActionBarActionMenuContentItem=function(e){var i,a=e.menuItem,u=e.key,d=e.expActionBarRedesignEnabled,p=e.highlightedTextElement,f=!1===a.isEnabled;if(c.isActionBarActionMenuSubmenu(a))return n.createElement(o.Menu.Submenu,{key:u,withTriggerContent:p||a.description,withLeftAccessory:a.icon&&n.createElement(l.ActionBarIcon,{icon:a.icon}),contentClassName:d?"rc-action-bar-submenu-content":"",disabled:f},n.createElement(t.ActionBarActionMenuContent,{menuSections:a.submenuSections,expActionBarRedesignEnabled:d}));if(c.isActionBarCustomMenuAction(a))return a.menuItem;var v={nodeType:"dropdown",actionType:a.value.type,menuItem:a.value};return f&&a.disabledTooltip?n.createElement(s.Tooltip,{title:a.disabledTooltip,placement:"left",id:"tooltip-item"},n.createElement(o.Menu.ActionItem,{key:u,className:r.default(a.className,(i={},i["visuallyDisabled-see-DSYS-1278"]=f,i)),value:"NOOP_SEE_DSYS-1278",disabled:!1,withLeftAccessory:a.icon&&n.createElement(l.ActionBarIcon,{icon:a.icon})},a.description)):n.createElement(o.Menu.ActionItem,{key:u,className:a.className,value:v,disabled:f,withLeftAccessory:a.icon&&n.createElement(l.ActionBarIcon,{icon:a.icon})},p||a.description)},t.ActionBarActionMenuContentItem.displayName="ActionBarActionMenuContentItem"})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_overflow_menu",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons/src","dig-components/menu","dig-components/tooltips","dig-components/typography","dig-components/truncate","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_action_menu","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_icon","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_utils","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types"],(function(e,t,i,n,r,a,o,s,l,c,u,d,p,f,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBarOverflowMenuItem=t.ActionBarOverflowMenu=void 0,n=i.__importStar(n),r=i.__importDefault(r),t.ActionBarOverflowMenu=function(e){var i=(function(){function e(){this.position=[0,0]}return e.prototype.getBoundingClientRect=function(){return{height:0,width:0,top:this.position[1],right:this.position[0],bottom:this.position[1],left:this.position[0]}},e})(),d=e.actions,_=e.buttonVariant,w=e.intl,m=e.onToggle,h=e.showTooltip,b=e.accessibilityConfig,y=e.size,A=e.overflowMenuOpenRequest,I=e.overflowMenuCloseRequest,P=e.resolveOverflowMenuOpenRequest,E=e.resolveOverflowMenuCloseRequest,M=e.inverse,S=e.overflowMenuTitle,C=e.expActionBarRedesignVariant,x=e.isMobile,R=e.overflowMenuCoordinates,T=e.hideOverflowMenuHeader,O=n.useRef(new i),F=function(e){e.stopPropagation()},D=e.intl.formatMessage(f.MORE_MENU_STRING),V=f.getAccessibilityLabel(w,D,null==b?void 0:b.secondaryActionsContext);return n.createElement(s.Menu.Wrapper,{onSelection:function(t,i){var n=f.createActionBarActionEventInfo(t,v.ActionBarActionEventSource.OVERFLOW_MENU,i),r=void 0!==R;void 0!==n?e.actionHandler.handleAction(n,r):(null==t?void 0:t.handler)&&t.handler()},onToggle:function(e){null==m||m(e)},closeOnBlurWhenDefaultPrevented:!1,slideSubmenu:!!x,shouldPropagateClickOutsideMouseEvents:!!R,onContextMenu:function(e){e.preventDefault(),e.stopPropagation()}},(function(i){var v,m=i.getTriggerProps,b=i.getContentProps,x=i.triggerRef,D=i.openMenu,B=i.closeMenu,N=n.createElement(a.IconButton,Object.assign({variant:_},m(),{"aria-label":V,"data-testid":"action-bar-overflow",size:y,inverse:M}),n.createElement(p.ActionBarIcon,{icon:o.MoreHorizontalLine})),k="OFF"!==C&&"CONTROL"!==C;return n.createElement(g,{openMenu:D,overflowMenuOpenRequest:A,resolveOverflowMenuOpenRequest:P,resolveOverflowMenuCloseRequest:E,overflowMenuCloseRequest:I,closeMenu:B,overflowMenuCoordinates:R,virtualTriggerRef:O},n.createElement(n.Fragment,null,h?n.createElement(l.Tooltip,{title:w.formatMessage(f.MORE_TOOLTIP_STRING),triggerRef:x},N):N,n.createElement(s.Menu.Content,Object.assign({},b(),{triggerRef:R?O:x,className:k?"rc-action-bar-overflow-menu-content":"",onClick:F}),n.createElement("div",{className:k?"rc-action-bar-overflow-menu-container":""},k&&!T&&n.createElement(s.Menu.Segment,{className:"rc-action-bar-overflow-menu-header"},n.createElement(s.Menu.Row,{interactive:!1},n.createElement(s.Menu.RowTitle,null,n.createElement(c.Text,{isBold:!0},n.createElement(u.Truncate,{location:.5,tooltipControlProps:{placement:"top",openDelay:500}},S))))),n.createElement(s.Menu.Segment,{className:r.default("rc-action-bar-overflow-menu-bottom-container",{"rc-action-bar-overflow-menu-bottom-container--redesign":k})},null===(v=d.alwaysInOverflow)||void 0===v?void 0:v.map((function(i,r){return!!i.length&&n.createElement(s.Menu.Segment,{key:r,className:"rc-action-bar-overflow-menu-segment"},i.map((function(i,r){return n.createElement(t.ActionBarOverflowMenuItem,{key:"action-bar-overflow-menu-item-"+r,action:i,intl:w,actionHandler:e.actionHandler,closeMenu:B,expActionBarRedesignEnabled:k,isRightClickMenu:!!R,logEsignShown:e.logEsignShown})})))})))))))}))},t.ActionBarOverflowMenu.displayName="ActionBarOverflowMenu";var g=function(e){var t=e.openMenu,i=e.closeMenu,r=e.overflowMenuOpenRequest,a=e.resolveOverflowMenuOpenRequest,o=e.children,s=e.overflowMenuCloseRequest,l=e.resolveOverflowMenuCloseRequest,c=e.overflowMenuCoordinates,u=e.virtualTriggerRef;return n.useEffect((function(){r&&(t(r),a&&a())}),[r,a]),n.useEffect((function(){s&&(i(s),l&&l())}),[s,l]),n.useLayoutEffect((function(){if(c&&u){var e=c[0],t=c[1];u.current.position=[e,t]}}),[c]),o};t.ActionBarOverflowMenuItem=function(e){var t,i=e.action,r=e.intl,a=e.actionHandler,o=e.closeMenu,c=e.expActionBarRedesignEnabled,u=e.highlightedTextElement,f=e.isRightClickMenu,g=e.logEsignShown,_=!i.isEnabled,w=u||i.labelOverride||r.formatMessage(i.text),m=n.useRef(null);if(n.useEffect((function(){59===i.actionType&&(null==g||g())}),[]),i.overflowItem)return i.overflowItem;switch(null===(t=i.menu)||void 0===t?void 0:t.type){case v.ActionBarMenuType.DROPDOWN:case v.ActionBarMenuType.SPLIT_BUTTON:return n.createElement(s.Menu.Submenu,{disabled:_,withTriggerContent:w,withLeftAccessory:n.createElement(p.ActionBarIcon,{icon:i.icon}),contentClassName:c?"rc-action-bar-submenu-content":""},n.createElement(d.ActionBarActionMenuContent,{menuSections:i.menu.menuSections,expActionBarRedesignEnabled:c}));case v.ActionBarMenuType.CUSTOM_DROPDOWN:return n.createElement(s.Menu.Submenu,{disabled:_,withTriggerContent:w,withLeftAccessory:n.createElement(p.ActionBarIcon,{icon:i.icon}),contentClassName:c?"rc-action-bar-submenu-content":""},i.menu.menuContent);default:var h={nodeType:"action",actionType:i.actionType},b={key:i.actionType,value:h,withLeftAccessory:n.createElement(p.ActionBarIcon,{icon:i.icon}),disabled:_},y={interactive:!0,disabled:_,ref:m,withLeftAccessory:n.createElement(p.ActionBarIcon,{icon:i.icon}),onClick:function(e){a.handleAction({type:v.ActionBarActionTypes.SHARE_COPY_LINK,event:e,source:v.ActionBarActionEventSource.OVERFLOW_MENU,anchorRef:m,onActionFlowComplete:function(){return o({})}},f)}},A=n.createElement(s.Menu.ActionItem,Object.assign({},b),w),I=n.createElement(s.Menu.Row,Object.assign({},y),w);return i.disabledTooltip&&_?n.createElement(l.Tooltip,{title:i.disabledTooltip,placement:"left",id:"tooltip-item"},n.createElement(s.Menu.ActionItem,Object.assign({},b,{value:"NOOP_SEE_DSYS-1278",disabled:!1,className:_?"visuallyDisabled-see-DSYS-1278":""}),w)):i.actionType===v.ActionBarActionTypes.SHARE_COPY_LINK?I:i.tooltip?n.createElement(l.Tooltip,{title:i.tooltip,placement:"left",id:"tooltip-item"},A):A}},t.ActionBarOverflowMenuItem.displayName="ActionBarOverflowMenuItem"})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_utils",["require","exports","react-intl"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createActionBarActionEventInfo=t.getAccessibilityLabel=t.ACTION_ARIAL_LABEL=t.MORE_TOOLTIP_STRING=t.MORE_MENU_STRING=void 0,t.MORE_MENU_STRING=i.defineMessage({id:"3kB3s4",defaultMessage:"More menu"}),t.MORE_TOOLTIP_STRING=i.defineMessage({id:"06UTVR",defaultMessage:"More"}),t.ACTION_ARIAL_LABEL=i.defineMessage({id:"XyseuH",defaultMessage:"{action}, applies to {noOfFiles, plural, one{{fileName}} other{{noOfFiles} selected files}}"}),t.getAccessibilityLabel=function(e,i,n){return n?e.formatMessage(t.ACTION_ARIAL_LABEL,{action:i,noOfFiles:n.noOfEntries,fileName:n.firstEntryAccessibilityHint}):i},t.createActionBarActionEventInfo=function(e,t,i){try{switch((e=e).nodeType){case"action":return{type:e.actionType,event:i,source:t};case"dropdown":return{type:e.actionType,menuItem:e.menuItem,event:i,source:t};default:return}}catch(e){return}}})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_split_button",["require","exports","tslib","react","dig-components/buttons","dig-components/menu","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_action_menu","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_icon"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBarSplitButton=void 0,n=i.__importStar(n),t.ActionBarSplitButton=function(e){var t=e.disabled,i=e.value,l=e.intl,c=e.onClick,u=e.onSelection,d=e.onToggle,p=e.icon,f=e.ariaLabel,v=e.menuSections,g=e.className,_=e.expActionBarRedesignEnabled,w=n.useMemo((function(){return{withIconLeft:p?n.createElement(s.ActionBarIcon,{icon:p}):void 0}}),[p]);return n.createElement(r.SplitButton,Object.assign({variant:"opacity",disabled:t,renderMenu:function(e){var t=e.buttonProps;return n.createElement(a.Menu.Wrapper,{onSelection:u,onToggle:d,className:g},(function(e){var s=e.getTriggerProps,c=e.getContentProps;return n.createElement(n.Fragment,null,n.createElement(r.Button,Object.assign({"aria-label":l.formatMessage({id:"y4xCgb",defaultMessage:"Expand menu for {action}"},{action:i})},t,s())),n.createElement(a.Menu.Content,Object.assign({},c(),{placement:"bottom-end"}),n.createElement(o.ActionBarActionMenuContent,{menuSections:v,expActionBarRedesignEnabled:_})))}))},onClick:c,className:"rc-action-bar-split-button","aria-label":f},w),i)},t.ActionBarSplitButton.displayName="ActionBarSplitButton"})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_icon",["require","exports","tslib","react","dig-components/icons"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBarIcon=void 0,n=i.__importStar(n),t.ActionBarIcon=function(e){var t=e.icon;return n.isValidElement(t)?t:n.createElement(r.UIIcon,{src:t})},t.ActionBarIcon.displayName="ActionBarIcon"})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/inline_action_bar",["require","exports","tslib","classnames","react","dig-components/buttons","dig-components/tooltips","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_icon","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_overflow_menu","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/component_libraries/retrieval-components/src/highlighted-truncated-string/em-string"],(function(e,t,i,n,r,a,o,s,l,c,u){"use strict";function d(e){var t=e.action,i=e.actionHandler,n=e.intl,l=e.useCopyLinkTextVariant;function u(e){i.handleAction({type:t.actionType,event:e,source:c.ActionBarActionEventSource.BUTTON,anchorRef:p})}var d=n.formatMessage(t.text),p=r.useRef(null);return l&&t.actionType===c.ActionBarActionTypes.SHARE_COPY_LINK?r.createElement(o.Tooltip,{title:t.tooltip,triggerRef:p},r.createElement(a.Button,{variant:"opacity",onClick:u,disabled:!t.isEnabled},d)):r.createElement(o.Tooltip,{title:d,triggerRef:p},r.createElement(a.IconButton,{"aria-label":d,variant:"transparent",onClick:u,disabled:!t.isEnabled},r.createElement(s.ActionBarIcon,{icon:t.icon})))}Object.defineProperty(t,"__esModule",{value:!0}),t.InlineActionBar=void 0,n=i.__importDefault(n),r=i.__importStar(r),t.InlineActionBar=function(e){var t=e.actionHandler,i=e.actions,a=e.className,o=e.handleOverflowMenuToggle,s=e.highlighted,p=e.intl,f=e.overflowMenuTitle,v=e.expActionBarRedesignVariant,g=e.isMobile,_=e.overflowMenuOpenRequest,w=e.overflowMenuCloseRequest,m=e.overflowMenuCoordinates,h=e.resolveOverflowMenuOpenRequest,b=e.hideOverflowMenuHeader,y=e.logEsignShown,A=e.useCopyLinkTextVariant,I=e.resetOverflowMenuCoordinates,P=r.useMemo((function(){var e;return{atTopLevelIfSpace:(null===(e=i.alwaysAtTopLevel)||void 0===e?void 0:e.filter((function(e){return e.actionType===c.ActionBarActionTypes.SHARE_MODAL||e.actionType===c.ActionBarActionTypes.SHARE_COPY_LINK||e.actionType===c.ActionBarActionTypes.MANAGE_FOLDER_RULES||e.actionType===c.ActionBarActionTypes.STAR||e.actionType===c.ActionBarActionTypes.UNSTAR})))||[],alwaysInOverflow:i.alwaysInOverflow||[]}}),[i]),E=P.atTopLevelIfSpace,M=P.alwaysInOverflow,S=-(24+40*(E.length+1)),C=A&&E.filter((function(e){return e.actionType===c.ActionBarActionTypes.SHARE_COPY_LINK}))[0];if(C){var x=p.formatMessage(C.text);S-=12*new u.Emstring(x).length}return r.createElement("div",{className:n.default("rc-inline-action-bar-container",a,{"rc-inline-action-bar-container--highlighted":s}),style:{marginLeft:S+"px"},onClick:function(){m&&I&&I()}},!!E.length&&E.map((function(e,i){return r.createElement(d,{key:"inline-action-bar-button-"+i,action:e,actionHandler:t,intl:p,useCopyLinkTextVariant:A})})),(null==M?void 0:M.some((function(e){return e.length>0})))&&r.createElement(l.ActionBarOverflowMenu,{actions:{atTopLevelIfSpace:E,alwaysInOverflow:M},actionHandler:t,buttonVariant:"transparent",intl:p,onToggle:o,showTooltip:!0,overflowMenuTitle:f,expActionBarRedesignVariant:v,isMobile:g,overflowMenuOpenRequest:_,overflowMenuCloseRequest:w,overflowMenuCoordinates:m,resolveOverflowMenuOpenRequest:h,hideOverflowMenuHeader:b,logEsignShown:y}))}})),define("typescript/component_libraries/retrieval-components/src/simple-action-bar/inline_overflow_menu",["require","exports","tslib","react","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_overflow_menu"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineOverflowMenu=void 0,n=i.__importStar(n),t.InlineOverflowMenu=function(e){var t=e.actionHandler,i=e.actions,a=e.handleOverflowMenuToggle,o=e.intl,s=e.className,l=e.size,c=e.inverse,u=e.overflowMenuTitle,d=e.expActionBarRedesignVariant,p=e.isMobile,f=e.hideOverflowMenuHeader,v=n.useMemo((function(){return{alwaysAtTopLevel:i.alwaysAtTopLevel,atTopLevelIfSpace:i.atTopLevelIfSpace,alwaysInOverflow:i.alwaysInOverflow}}),[i]),g=v.alwaysAtTopLevel,_=v.atTopLevelIfSpace,w=v.alwaysInOverflow;return n.createElement("div",{className:s},!!(null==w?void 0:w.length)&&n.createElement(r.ActionBarOverflowMenu,{actions:{alwaysAtTopLevel:g,atTopLevelIfSpace:_,alwaysInOverflow:w},actionHandler:t,buttonVariant:"transparent",intl:o,onToggle:a,showTooltip:!0,size:l,inverse:c,overflowMenuTitle:u,expActionBarRedesignVariant:d,isMobile:p,hideOverflowMenuHeader:f}))}})),define("typescript/component_libraries/retrieval-components/src/hooks/resize_observer",["require","exports","tslib","react","resize-observer-polyfill"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useResizeObserver=void 0,r=i.__importDefault(r),t.useResizeObserver=function(){var e=n.useRef(null),t=n.useRef(),i=n.useState(),a=i[0],o=i[1],s=n.useCallback((function(){t.current=new r.default((function(e){var t=e[0];return o(t)})),(null==e?void 0:e.current)&&t.current.observe(e.current)}),[e.current]);return n.useLayoutEffect((function(){return s(),function(){var e;return null===(e=t.current)||void 0===e?void 0:e.disconnect()}}),[s]),[e,a]}})),define("api_v2/redux/users",["require","exports","api_v2/redux/base_action"],(function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=t.setSharingPrefsResultAction=t.setSharingPrefsAction=t.saveMobileClientSettingsResultAction=t.saveMobileClientSettingsAction=t.pairUserResultAction=t.pairUserAction=t.needsScaleMitigationResultAction=t.needsScaleMitigationAction=t.getUserUiInfoResultAction=t.getUserUiInfoAction=t.getSpaceUsageResultAction=t.getSpaceUsageAction=t.getSharingPrefsResultAction=t.getSharingPrefsAction=t.getRootInfoResultAction=t.getRootInfoAction=t.getPlanInfoV2ResultAction=t.getPlanInfoV2Action=t.getPlanInfoResultAction=t.getPlanInfoAction=t.getMobileClientSettingsResultAction=t.getMobileClientSettingsAction=t.getFileModifierAccountResultAction=t.getFileModifierAccountAction=t.getCurrentAccountResultAction=t.getCurrentAccountAction=t.getAccountBatchResultAction=t.getAccountBatchAction=t.getAccountResultAction=t.getAccountAction=t.generatePairingTokenResultAction=t.generatePairingTokenAction=t.featuresGetValuesResultAction=t.featuresGetValuesAction=t.Action=void 0,t.Action={FeaturesGetValues:"@@apiv2_redux/users/features/get_values",FeaturesGetValuesResult:"@@apiv2_redux/users/features/get_values_result",GeneratePairingToken:"@@apiv2_redux/users/generate_pairing_token",GeneratePairingTokenResult:"@@apiv2_redux/users/generate_pairing_token_result",GetAccount:"@@apiv2_redux/users/get_account",GetAccountResult:"@@apiv2_redux/users/get_account_result",GetAccountBatch:"@@apiv2_redux/users/get_account_batch",GetAccountBatchResult:"@@apiv2_redux/users/get_account_batch_result",GetCurrentAccount:"@@apiv2_redux/users/get_current_account",GetCurrentAccountResult:"@@apiv2_redux/users/get_current_account_result",GetFileModifierAccount:"@@apiv2_redux/users/get_file_modifier_account",GetFileModifierAccountResult:"@@apiv2_redux/users/get_file_modifier_account_result",GetMobileClientSettings:"@@apiv2_redux/users/get_mobile_client_settings",GetMobileClientSettingsResult:"@@apiv2_redux/users/get_mobile_client_settings_result",GetPlanInfo:"@@apiv2_redux/users/get_plan_info",GetPlanInfoResult:"@@apiv2_redux/users/get_plan_info_result",GetPlanInfoV2:"@@apiv2_redux/users/get_plan_info_v2",GetPlanInfoV2Result:"@@apiv2_redux/users/get_plan_info_v2_result",GetRootInfo:"@@apiv2_redux/users/get_root_info",GetRootInfoResult:"@@apiv2_redux/users/get_root_info_result",GetSharingPrefs:"@@apiv2_redux/users/get_sharing_prefs",GetSharingPrefsResult:"@@apiv2_redux/users/get_sharing_prefs_result",GetSpaceUsage:"@@apiv2_redux/users/get_space_usage",GetSpaceUsageResult:"@@apiv2_redux/users/get_space_usage_result",GetUserUiInfo:"@@apiv2_redux/users/get_user_ui_info",GetUserUiInfoResult:"@@apiv2_redux/users/get_user_ui_info_result",NeedsScaleMitigation:"@@apiv2_redux/users/needs_scale_mitigation",NeedsScaleMitigationResult:"@@apiv2_redux/users/needs_scale_mitigation_result",PairUser:"@@apiv2_redux/users/pair_user",PairUserResult:"@@apiv2_redux/users/pair_user_result",SaveMobileClientSettings:"@@apiv2_redux/users/save_mobile_client_settings",SaveMobileClientSettingsResult:"@@apiv2_redux/users/save_mobile_client_settings_result",SetSharingPrefs:"@@apiv2_redux/users/set_sharing_prefs",SetSharingPrefsResult:"@@apiv2_redux/users/set_sharing_prefs_result"},t.featuresGetValuesAction=i._createAction(t.Action.FeaturesGetValues),t.featuresGetValuesResultAction=i._createAction(t.Action.FeaturesGetValuesResult),t.generatePairingTokenAction=i._createAction(t.Action.GeneratePairingToken),t.generatePairingTokenResultAction=i._createAction(t.Action.GeneratePairingTokenResult),t.getAccountAction=i._createAction(t.Action.GetAccount),t.getAccountResultAction=i._createAction(t.Action.GetAccountResult),t.getAccountBatchAction=i._createAction(t.Action.GetAccountBatch),t.getAccountBatchResultAction=i._createAction(t.Action.GetAccountBatchResult),t.getCurrentAccountAction=i._createAction(t.Action.GetCurrentAccount),t.getCurrentAccountResultAction=i._createAction(t.Action.GetCurrentAccountResult),t.getFileModifierAccountAction=i._createAction(t.Action.GetFileModifierAccount),t.getFileModifierAccountResultAction=i._createAction(t.Action.GetFileModifierAccountResult),t.getMobileClientSettingsAction=i._createAction(t.Action.GetMobileClientSettings),t.getMobileClientSettingsResultAction=i._createAction(t.Action.GetMobileClientSettingsResult),t.getPlanInfoAction=i._createAction(t.Action.GetPlanInfo),t.getPlanInfoResultAction=i._createAction(t.Action.GetPlanInfoResult),t.getPlanInfoV2Action=i._createAction(t.Action.GetPlanInfoV2),t.getPlanInfoV2ResultAction=i._createAction(t.Action.GetPlanInfoV2Result),t.getRootInfoAction=i._createAction(t.Action.GetRootInfo),t.getRootInfoResultAction=i._createAction(t.Action.GetRootInfoResult),t.getSharingPrefsAction=i._createAction(t.Action.GetSharingPrefs),t.getSharingPrefsResultAction=i._createAction(t.Action.GetSharingPrefsResult),t.getSpaceUsageAction=i._createAction(t.Action.GetSpaceUsage),t.getSpaceUsageResultAction=i._createAction(t.Action.GetSpaceUsageResult),t.getUserUiInfoAction=i._createAction(t.Action.GetUserUiInfo),t.getUserUiInfoResultAction=i._createAction(t.Action.GetUserUiInfoResult),t.needsScaleMitigationAction=i._createAction(t.Action.NeedsScaleMitigation),t.needsScaleMitigationResultAction=i._createAction(t.Action.NeedsScaleMitigationResult),t.pairUserAction=i._createAction(t.Action.PairUser),t.pairUserResultAction=i._createAction(t.Action.PairUserResult),t.saveMobileClientSettingsAction=i._createAction(t.Action.SaveMobileClientSettings),t.saveMobileClientSettingsResultAction=i._createAction(t.Action.SaveMobileClientSettingsResult),t.setSharingPrefsAction=i._createAction(t.Action.SetSharingPrefs),t.setSharingPrefsResultAction=i._createAction(t.Action.SetSharingPrefsResult);var r=((n={})[t.Action.FeaturesGetValues]={endpoint:"features/get_values",action:t.featuresGetValuesResultAction},n[t.Action.GeneratePairingToken]={endpoint:"generate_pairing_token",action:t.generatePairingTokenResultAction},n[t.Action.GetAccount]={endpoint:"get_account",action:t.getAccountResultAction},n[t.Action.GetAccountBatch]={endpoint:"get_account_batch",action:t.getAccountBatchResultAction},n[t.Action.GetCurrentAccount]={endpoint:"get_current_account",action:t.getCurrentAccountResultAction},n[t.Action.GetFileModifierAccount]={endpoint:"get_file_modifier_account",action:t.getFileModifierAccountResultAction},n[t.Action.GetMobileClientSettings]={endpoint:"get_mobile_client_settings",action:t.getMobileClientSettingsResultAction},n[t.Action.GetPlanInfo]={endpoint:"get_plan_info",action:t.getPlanInfoResultAction},n[t.Action.GetPlanInfoV2]={endpoint:"get_plan_info_v2",action:t.getPlanInfoV2ResultAction},n[t.Action.GetRootInfo]={endpoint:"get_root_info",action:t.getRootInfoResultAction},n[t.Action.GetSharingPrefs]={endpoint:"get_sharing_prefs",action:t.getSharingPrefsResultAction},n[t.Action.GetSpaceUsage]={endpoint:"get_space_usage",action:t.getSpaceUsageResultAction},n[t.Action.GetUserUiInfo]={endpoint:"get_user_ui_info",action:t.getUserUiInfoResultAction},n[t.Action.NeedsScaleMitigation]={endpoint:"needs_scale_mitigation",action:t.needsScaleMitigationResultAction},n[t.Action.PairUser]={endpoint:"pair_user",action:t.pairUserResultAction},n[t.Action.SaveMobileClientSettings]={endpoint:"save_mobile_client_settings",action:t.saveMobileClientSettingsResultAction},n[t.Action.SetSharingPrefs]={endpoint:"set_sharing_prefs",action:t.setSharingPrefsResultAction},n);t.middleware=i._createMiddleware(r)})),define("modules/clean/logging/hive/schemas/web-file_previews",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebFilePreviewsLoggingRow=void 0;var i=function(e){this.category="web-file_previews",this.active_user_id=null,this.anon_ip=null,this.authed_user_ids=null,this.identity_gid=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_agent=null,this.user_id=null,this.device_type=e.device_type,this.event_name=e.event_name,this.extra=e.extra,this.file_extension=e.file_extension,this.file_last_edit_ts=e.file_last_edit_ts,this.file_obj_id=e.file_obj_id,this.file_preview_session_id=e.file_preview_session_id,this.file_preview_size=e.file_preview_size,this.file_sf_status=e.file_sf_status,this.file_size=e.file_size,this.file_viewer_session_id=e.file_viewer_session_id,this.is_starred=e.is_starred,this.ns_id=e.ns_id,this.sj_id=e.sj_id,this.x_dropbox_path=e.x_dropbox_path,this.timestamp=Date.now()/1e3|0,Object.seal(this)};t.WebFilePreviewsLoggingRow=i}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("modules/clean/react/async_fileops_modals",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showNamingConventionsModal=t.showTidyUpDialog=t.showMoveDialog=t.showAdminUpload=void 0,t.showAdminUpload=function(t){var i;i=function(e){return(0,e.showAdminUpload)(t)},new Promise((function(t,i){e(["modules/clean/react/fileops_modals"],t,i)})).then(__importStar).then(i)},t.showMoveDialog=function(t){new Promise((function(t,i){e(["modules/clean/react/folder_dialog/move_dialog_modal"],t,i)})).then(__importStar).then((function(e){return e.MoveDialogModal.show(t)}))},t.showTidyUpDialog=function(t){new Promise((function(t,i){e(["modules/clean/react/tidy_up/modal/tidy_up_modal"],t,i)})).then(__importStar).then((function(e){return(0,e.showTidyUpModal)(t)}))},t.showNamingConventionsModal=function(t){new Promise((function(t,i){e(["modules/clean/react/naming_conventions/naming_conventions_modal"],t,i)})).then(__importStar).then((function(e){return(0,e.showNamingConventionsModal)(t)}))}}));
//# sourceMappingURL=pkg-fvsdk-common.min.js-vflD_NQS6.map