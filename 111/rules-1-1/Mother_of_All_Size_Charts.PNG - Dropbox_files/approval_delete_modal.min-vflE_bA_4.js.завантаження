define(["require","exports","tslib","react","dig-components/modal","dig-components/typography","dig-components/buttons","modules/clean/react/flows/approval/api","dig-components/text_fields","react-intl","modules/clean/react/browse/action_logger","modules/clean/web_user_action_events"],(function(e,t,a,o,l,n,r,d,s,i,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApprovalDeleteThreadModal=t.ApprovalDeleteCommentModal=void 0,o=a.__importStar(o);var p=function(e){var t=e.open,a=e.title,d=e.body,i=e.onCancel,u=e.onDelete,c=e.error,p=e.isLoading,m=f(),_=m.closeButton,v=m.deleteButton,g=m.genericError;return o.default.createElement(l.Modal,{open:t,onRequestClose:i},o.default.createElement(l.Modal.Header,{hasBottomSpacing:"title-standard"},o.default.createElement(n.Title,null,a)),o.default.createElement(l.Modal.Body,null,o.default.createElement(n.Text,null,d),c&&o.default.createElement(s.FormHelperText,{isInvalid:!0},g)),o.default.createElement(l.Modal.Footer,null,o.default.createElement(r.Button,{variant:"opacity",onClick:i},_),o.default.createElement(r.Button,{variant:"primary",onClick:u,isLoading:p},v)))};p.displayName="ApprovalDeleteModal",t.ApprovalDeleteCommentModal=function(e){var t=e.userId,a=e.fileId,l=e.actor,n=e.onDeleteSuccess,r=e.commentId,s=o.useState(!1),i=s[0],m=s[1],_=o.useState(!0),v=_[0],g=_[1],E=o.useState(!1),A=E[0],M=E[1],b=f(),D=b.getDeleteCommentTitle,h=b.getDeleteCommentBody;o.default.useEffect((function(){return u.logApprovalActions({user_id:t,event_name:c.WebUserActionLogEvent.REMOVE_APPROVAL_RESPONSE_MODAL_SHOWN,action_surface:"delete_approval_modal",file_id:a,comment_id:r})}),[]);var O=D(l),C=h(l);return O&&C?o.default.createElement(p,{open:v,onCancel:function(){u.logApprovalActions({user_id:t,event_name:c.WebUserActionLogEvent.REMOVE_APPROVAL_RESPONSE_CANCEL,action_surface:"delete_approval_modal",file_id:a,comment_id:r}),g(!1)},onDelete:function(){u.logApprovalActions({user_id:t,event_name:c.WebUserActionLogEvent.REMOVE_APPROVAL_RESPONSE_CONFIRM,action_surface:"delete_approval_modal",file_id:a,comment_id:r}),m(!1),M(!0),d.deleteApproval(t,a,r).then((function(){n(),g(!1)})).catch((function(){m(!0),M(!1)}))},title:O,body:C,error:i,isLoading:A}):null},t.ApprovalDeleteCommentModal.displayName="ApprovalDeleteCommentModal",t.ApprovalDeleteThreadModal=function(e){var t=e.userId,a=e.fileId,l=e.threadId,n=e.onDeleteSuccess,r=o.useState(!1),s=r[0],i=r[1],m=o.useState(!0),_=m[0],v=m[1],g=o.useState(!1),E=g[0],A=g[1],M=f(),b=M.deleteThreadTitle,D=M.deleteThreadBody;o.default.useEffect((function(){return u.logApprovalActions({user_id:t,event_name:c.WebUserActionLogEvent.REMOVE_APPROVAL_REQUEST_MODAL_SHOWN,action_surface:"delete_approval_modal",file_id:a,thread_id:l})}),[t,a,l]);return o.default.createElement(p,{open:_,onCancel:function(){u.logApprovalActions({user_id:t,event_name:c.WebUserActionLogEvent.REMOVE_APPROVAL_REQUEST_CANCEL,action_surface:"delete_approval_modal",file_id:a,thread_id:l}),v(!1)},onDelete:function(){u.logApprovalActions({user_id:t,event_name:c.WebUserActionLogEvent.REMOVE_APPROVAL_REQUEST_CONFIRM,action_surface:"delete_approval_modal",file_id:a,thread_id:l}),i(!1),A(!0),d.deleteApprovalThread(t,a,l).then((function(){n(),v(!1)})).catch((function(){i(!0),A(!1)}))},title:b,body:D,error:s,isLoading:E})},t.ApprovalDeleteThreadModal.displayName="ApprovalDeleteThreadModal";var f=function(){var e=i.useIntl();return{getDeleteCommentTitle:function(t){return"requester"===t?e.formatMessage({id:"l623DN",defaultMessage:"Delete your approval request?"}):"approver"===t?e.formatMessage({id:"a6tb8g",defaultMessage:"Delete your response?"}):null},getDeleteCommentBody:function(t){return"requester"===t?e.formatMessage({id:"o4wQ1b",defaultMessage:"Your request for approval on this file will be deleted. You’ll be able to start a new approval request."}):"approver"===t?e.formatMessage({id:"lTKaYp",defaultMessage:"Your response to the approval request on this file will be deleted. You’ll be able to submit a new response."}):null},closeButton:e.formatMessage({id:"67AKp5",defaultMessage:"Cancel"}),deleteButton:e.formatMessage({id:"sDOGa0",defaultMessage:"Delete"}),genericError:e.formatMessage({id:"cdCpqV",defaultMessage:"Something went wrong. Please try again later."}),deleteThreadTitle:e.formatMessage({id:"bJ6YI2",defaultMessage:"Remove approval request?"}),deleteThreadBody:e.formatMessage({id:"OtCoJc",defaultMessage:"Your request for approval on this file and all of its responses will be deleted. You can always initiate a new approval request."})}}}));
//# sourceMappingURL=approval_delete_modal.min.js-vflclacID.map