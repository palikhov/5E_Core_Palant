define("prod_assets_web_modules/dig-components/typeahead",["exports","../tslib","../focus-visible","react","./click_outside","./hooks","../classnames","./motion","./overlay","./progress_indicators","./icons","./icons/src","./typography","./buttons","../common/_commonjsHelpers","./layer","react-dom","../resize-observer-polyfill","../common/Transition","../@popperjs/core","../react-transition-group/CSSTransition","../common/extends"],(function(e,t,n,o,a,s,i,r,l,c,u,d,m,p,g,v,h,y,f,w,_,T){"use strict";var x=['.dig-Typeahead-row--interactive[role="option"]','.dig-Typeahead-row--interactive[role="menuitemcheckbox"]',".dig-Typeahead-results--show-more"],C={value:void 0,setSelected:function(){return!1},setFocused:function(){return!1},closeMenu:function(){return!1},isPortaled:!0,menuRows:s.createMenuRows(),containerId:"",setIsTypeaheadDropdownVisible:function(){}},E=o.createContext(C),R=o.createContext({}),b=o.createContext({}),M=function(e){var n=e.children,i=e.isPortaled,r=e.closeOnSelection,l=void 0===r||r,c=e.inlineProps,u=e.openMenuOnFocus,d=void 0===u||u,m=e.containerId,p=e.hasMaxHeight,g=void 0!==p&&p,v=e.onSelection,h=e.onBlur,y=e.onToggle,f=t.__rest(e,["children","isPortaled","closeOnSelection","inlineProps","openMenuOnFocus","containerId","hasMaxHeight","onSelection","onBlur","onToggle"]),w=o.useRef(null),_=o.useState(!1),T=_[0],C=_[1],R=o.useState(!1),b=R[0],M=R[1],N=o.useRef(null),S=o.useRef(null),k=s.useUniqueId({prefix:"dig-Typeahead",idOverride:m}),I=o.useCallback((function(e){b!==e&&M(e)}),[b]),P=o.useCallback((function(e,t){v&&v(e,t),l&&(S&&S.current&&S.current(void 0),w&&s.returnFocus(w))}),[l,v,S]),F=s.useMenu({triggerRef:w,contentRef:N,onSelection:P,onToggle:y,closeOnSelection:l,shouldFocusDisabledRows:!0,interactiveRowSelectors:x,allowLetterNavigation:!1,focusMenuRowTriggerKey:40,allowSpaceBarToOpenMenu:!1,focusNextItemImmediately:!1}),O=F.isOpen,D=F.openMenu,B=F.closeMenu,K=F.toggleMenu,A=F.value,H=F.setSelected,L=F.setFocused,z=F.getRootProps,U=F.getTriggerProps,j=F.getContentProps,V=F.menuRows,W=F.isFocusing;S.current=L;var Q=o.useCallback((function(){C(!1),document.removeEventListener("mouseup",Q)}),[]);o.useEffect((function(){return T&&document.addEventListener("mouseup",Q),function(){return document.removeEventListener("mouseup",Q)}}),[T,Q]);var q={getContentProps:function(e){return t.__assign(t.__assign({open:Boolean(O),triggerRef:w},j(t.__assign({tabIndex:void 0},e))),{role:"listbox"})},getTriggerProps:function(e){return t.__assign(t.__assign({},U(t.__assign(t.__assign({},e),{onKeyDown:function(t){if(c){var n=c.customOpenKey,o=c.onCustomOpenKeyTrigger,a=c.customCloseKey;t.keyCode===n.keyCode?void 0!==n.shiftKey&&n.shiftKey!==t.shiftKey||(D({autoFocus:!1}),o&&o(t)):a&&t.keyCode===a.keyCode&&(void 0!==a.shiftKey&&a.shiftKey!==t.shiftKey||B({autoFocus:!1}))}e&&e.onKeyDown&&e.onKeyDown(t)}}))),{"aria-autocomplete":"list","aria-controls":k,onChange:function(t){c||D({autoFocus:!1}),e&&e.onChange&&e.onChange(t)},onMouseDown:function(t){e&&e.onMouseDown&&e.onMouseDown(t),C(!0)},onClick:e?e.onClick:void 0,onKeyUp:e?e.onKeyUp:void 0,onFocus:function(t){d&&D({autoFocus:!1}),L(void 0),e&&e.onFocus&&e.onFocus(t)}})},openMenu:D,closeMenu:B,toggleMenu:K,triggerRef:w},G=o.useCallback((function(e){A||W||B({autoFocus:!1}),h&&h(e)}),[A,W,B,h]),J={isPortaled:i,contentRef:N,value:A,setSelected:H,setFocused:L,closeMenu:B,inlineProps:c,menuRows:V,containerId:k,hasMaxHeight:g,setIsTypeaheadDropdownVisible:I},X=o.useCallback((function(){B({autoFocus:!1})}),[B]),Y=c?n&&n(q):o.createElement(a.ClickOutside,{className:"dig-Typeahead-backdrop",isBlock:!0,onClickOutside:X,shouldPropagateMouseEvents:!1,isClickThroughPortaled:i,isActive:Boolean(O)&&!T&&b},n&&n(q));return o.createElement(E.Provider,{value:J},o.createElement("div",t.__assign({className:"dig-Typeahead",role:"combobox","aria-haspopup":"listbox","aria-owns":k,"aria-expanded":Boolean(O)},z(t.__assign(t.__assign({},f),{onBlur:G}))),Y))};M.displayName="Wrapper";var N=function(e){var n=e.className,a=e.children,s=t.__rest(e,["className","children"]),r=i("dig-Typeahead-row-accessory",n);return o.createElement("div",t.__assign({className:r},s),a)};N.displayName="RowAccessory";var S=function(e){var n=e.className,a=e.children,s=t.__rest(e,["className","children"]),r=i("dig-Typeahead-row-content",n);return o.createElement("div",t.__assign({className:r},s),a)};S.displayName="RowContent";var k=function(e){var n=e.className,a=e.children,s=t.__rest(e,["className","children"]),r=i("dig-Typeahead-row-subtitle",n);return o.createElement("div",t.__assign({className:r},s),a)};k.displayName="RowSubtitle";var I=function(e){var n=e.className,a=e.children,s=t.__rest(e,["className","children"]),r=i("dig-Typeahead-row-title",n);return o.createElement("div",t.__assign({className:r},s),a)};I.displayName="RowTitle";var P=o.forwardRef((function(e,n){var a=e.tagName,r=void 0===a?"li":a,l=e.role,c=void 0===l?"option":l,u=e.disabled,d=void 0!==u&&u,m=e.interactive,p=void 0===m||m,g=e.className,v=e.withLeftAccessory,h=e.withRightAccessory,y=e.withSubtitle,f=e.withTitle,w=e.onFocus,_=e.onMouseDown,T=e.value;e.tabIndex;var x=e.children,C=t.__rest(e,["tagName","role","disabled","interactive","className","withLeftAccessory","withRightAccessory","withSubtitle","withTitle","onFocus","onMouseDown","value","tabIndex","children"]),M=o.useRef(null),P=o.useContext(E),F=P.menuRows,O=P.setSelected,D=P.setFocused,B=o.useContext(b).resultIndex,K=o.useContext(R),A=K.rowIndex,H=K.focusIndex,L=100*(B||0)+(A||0),z=s.useMenuItem({interactive:p,disabled:d,ref:M,role:c,index:L},F).getItemProps;o.useEffect((function(){void 0!==H&&H===A&&setTimeout((function(){M.current&&M.current.focus()}),0)}),[H,A]);var U=i("dig-Typeahead-row",{"dig-Typeahead-row--disabled":d,"dig-Typeahead-row--interactive":p},g);return o.useImperativeHandle(n,(function(){return{getBoundingClientRect:function(){if(M.current)return M.current.getBoundingClientRect()}}})),o.createElement(r,t.__assign({onMouseDown:function(e){e.preventDefault(),O(T,e),D(void 0),_&&_(e)},onFocus:function(e){D(T),w&&w(e)},className:U,ref:M},z(t.__assign({},C))),x||o.createElement(o.Fragment,null,v&&o.createElement(N,null,v),o.createElement(S,null,o.createElement(I,null,f),y&&o.createElement(k,null,y)),h&&o.createElement(N,null,h)))}));P.displayName="Row";var F=function(e){var n=e.open,i=e.triggerRef,u=e.emptyState,d=e.isEmptyQuery,m=void 0!==d&&d,p=e.loading,g=e.children,v=e.auto,h=void 0===v||v,y=e.positioningStrategy,f=void 0===y?"absolute":y,w=e.placement,_=void 0===w?"bottom-start":w,T=e.omitOverlay,x=void 0!==T&&T,C=t.__rest(e,["open","triggerRef","emptyState","isEmptyQuery","loading","children","auto","positioningStrategy","placement","omitOverlay"]),R=o.useContext(E),M=R.menuRows,N=R.closeMenu,S=R.contentRef,k=R.isPortaled,I=R.containerId,P=R.inlineProps,F=R.hasMaxHeight,O=R.setIsTypeaheadDropdownVisible,D=o.useCallback((function(){N({autoFocus:!1})}),[N]),B=s.useMaxHeight({hasMaxHeight:F,contentRef:S}).styles;if(!n||!g)return null;var K=void 0,A={},H=!0;if(p?K=o.createElement("div",{className:"dig-Typeahead-loading"},o.createElement(c.Spinner,null)):m&&u?K=u:0===M.items.size?(K=g,A={display:"none"},H=!1):K=o.Children.map(g,(function(e,t){return o.createElement(b.Provider,{value:{resultIndex:t}},e)})),O(H),x)return o.createElement(o.Fragment,null,K);var L=(function(e){switch(e){default:return"up";case"bottom":case"bottom-start":case"bottom-end":return"down"}})(_),z=o.createElement(r.Motion,{transitionIn:{transitions:[{property:L,value:0},{property:"opacity",value:1}],easing:"enter",duration:125},transitionOut:{transitions:[{property:"opacity",value:0}],easing:"leave",duration:125},style:{opacity:0},in:n,mountOnEnter:!0,unmountOnExit:!0},(function(e){var a=e.state,s=e.style;return(n||"exited"!==a)&&o.createElement(l.Overlay,{anchorRef:i,auto:h,isPortaled:k,placement:_,positioningStrategy:f,offsetDistance:4,setWidthSameAsAnchor:!Boolean(P)},o.createElement("ul",t.__assign({className:"dig-Typeahead-container",ref:S,id:I,style:A},C),o.createElement("div",{className:"dig-Typeahead-container--canvas",style:t.__assign(t.__assign({},s),B)},K)))}));return P?o.createElement(a.ClickOutside,{className:"dig-Typeahead-backdrop",isBlock:!0,onClickOutside:D,shouldPropagateMouseEvents:!1,isClickThroughPortaled:k,isActive:Boolean(n)},z):z};F.displayName="Container";var O=function(e){var t=e.placeholderText;return o.createElement("div",{className:"dig-Typeahead-empty"},o.createElement(u.UIIcon,{size:"large",src:d.SearchLine}),o.createElement(m.Text,{color:"faint"},t))};O.displayName="EmptyState";var D=function(e){var n=e.onShowMoreClick,a=e.showMoreButtonText,i=void 0===a?"Show more":a,r=o.useRef(null),l=o.useContext(E),c=l.menuRows,u=l.setFocused,d=100*(o.useContext(b).resultIndex||0)+(o.useContext(R).rowIndex||0),m=s.useMenuItem({interactive:!0,disabled:!0,ref:r,role:"option",index:d},c).getItemProps,g=function(e){e.stopPropagation(),e.preventDefault(),n()};return o.createElement(p.Button,t.__assign(t.__assign({className:"dig-Typeahead-results--show-more",variant:"transparent",ref:r,type:"button",onClick:g,onKeyDown:function(e){13!==e.keyCode&&32!==e.keyCode||(e.stopPropagation(),e.preventDefault(),n())},onMouseDown:g,onFocus:function(){u(void 0)}},m()),{disabled:!1,"aria-disabled":!1}),i)};function B(e){var t=e.results,n=e.title,a=e.renderRow,s=e.initialResults,r=void 0===s?4:s,l=e.maxResults,c=void 0===l?8:l,u=e.showMoreButtonText,d=e.size,p=void 0===d?"standard":d,g=o.useContext(E).setFocused,v=o.useState(Math.min(t.length,r)),h=v[0],y=v[1],f=o.useState(),w=f[0],_=f[1];if(o.useEffect((function(){y(Math.min(t.length,r))}),[t,r]),!t||0===t.length)return null;var T=i("dig-Typeahead-results",{"dig-Typeahead-results--standard":"standard"===p,"dig-Typeahead-results--large":"large"===p});return o.createElement("div",{className:T},n?o.createElement(m.Text,{className:"dig-Typeahead-results--title",color:"faint",isBold:!0,size:"small"},n):o.createElement("div",{className:"dig-Typeahead-results--title-spacer"}),t.slice(0,h).map((function(e,t){return o.createElement(R.Provider,{key:t,value:{rowIndex:t,focusIndex:w}},a(e))})),h<t.length&&h!==c&&o.createElement(R.Provider,{value:{rowIndex:h+100}},o.createElement(D,{showMoreButtonText:u,onShowMoreClick:function(){h<t.length&&(g(t[h]),_(h),y(Math.min(t.length,c)))}})))}D.displayName="ShowMore",B.displayName="Results";var K={Row:P,RowAccessory:N,RowContent:S,RowSubtitle:k,RowTitle:I,Wrapper:M,Container:F,EmptyState:O,Results:B};e.Typeahead=K,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-dig-f.min.js-vflWBo7wA.map