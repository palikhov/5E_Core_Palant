define(["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","dig-components/buttons","dig-components/menu","react-redux","react-intl","typescript/component_libraries/files_components/src/blades/comments/data/actions","typescript/component_libraries/files_components/src/blades/comments/data/selectors","typescript/component_libraries/files_components/src/blades/comments/data/transform","api_v2/redux/comments2","typescript/component_libraries/files_components/src/blades/comments/data/types","typescript/component_libraries/flows/src/components/approval-forms/index"],(function(e,t,s,n,a,r,o,l,i,c,m,u,d,f,p,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentsMeatball=void 0,n=s.__importStar(n);var g=c.defineMessage({id:"U75RtN",defaultMessage:"Hide resolved comments"}),M=c.defineMessage({id:"fKXJUR",defaultMessage:"Show resolved comments"}),v=c.defineMessage({id:"w904jy",defaultMessage:"Unsubscribe"}),C=c.defineMessage({id:"cnLKs9",defaultMessage:"Subscribe"}),_=c.defineMessage({id:"/XlCxM",defaultMessage:"Disable comments"}),S=c.defineMessage({id:"bppWf8",defaultMessage:"Enable comments"}),k=c.defineMessage({id:"o2BfZf",defaultMessage:"Request approval"});t.CommentsMeatball=n.default.memo((function(e){var t=e.className,s=e.fileId,E=e.sharedLinkURL,h=e.size,A=e.showApproval,I=e.approvalsLogger,y=i.useDispatch(),w=c.useIntl(),F=d.createStreamFromFileOrSharedLink(s,E),L=p.createCommentFileIdentifier(s,E),O=i.useSelector((function(e){return e.showResolvedComments})),R=i.useSelector((function(e){var t;return null===(t=e.permissions[L])||void 0===t?void 0:t.can_enable_commenting})),U=i.useSelector((function(e){return u.areCommentsEnabled(e,L)})),x=i.useSelector((function(e){var t;return null===(t=e.permissions[L])||void 0===t?void 0:t.can_subscribe})),j=i.useSelector((function(e){return u.isUserSubscribed(e,L)})),q=n.useCallback((function(){y(m.updateShowResolvedComments(!O))}),[y,O]),z=n.useCallback((function(){return y(f.subscribeAction({arg:{stream:F}}))}),[y,F]),N=n.useCallback((function(){return y(f.unsubscribeAction({arg:{stream:F}}))}),[y,F]),D=n.useCallback((function(){return y(f.enableCommentingAction({arg:{stream:F}}))}),[y,F]),P=n.useCallback((function(){return y(f.disableCommentingAction({arg:{stream:F}}))}),[y,F]),B=n.useCallback((function(){var e;I&&I(),y(b.setApprovalForm(((e={})[L]={activeForm:"request",threadId:void 0},e)))}),[y,L,I]);return U||R?n.default.createElement(l.Menu.Wrapper,{className:t},(function(e){var t=e.getContentProps,s=e.getTriggerProps;return n.default.createElement(n.default.Fragment,null,n.default.createElement(o.IconButton,Object.assign({variant:"transparent"},s(),{size:h,"aria-label":w.formatMessage({id:"OD3YF0",defaultMessage:"Other actions"})}),n.default.createElement(r.UIIcon,{src:a.MoreHorizontalLine,size:h})),n.default.createElement(l.Menu.Content,Object.assign({},t()),n.default.createElement(l.Menu.Segment,null,n.default.createElement(l.Menu.ActionItem,{value:O?"hide-resolve-comments":"show-resolve-comments",onClick:q,disabled:!U},O?w.formatMessage(g):w.formatMessage(M)),x?n.default.createElement(l.Menu.ActionItem,{value:j?"unsubscribe":"subscribe",onClick:j?N:z,disabled:!U},j?w.formatMessage(v):w.formatMessage(C)):null,R?n.default.createElement(l.Menu.ActionItem,{value:j?"enableComments":"disableComments",onClick:U?P:D},U?w.formatMessage(_):w.formatMessage(S)):null,A&&n.default.createElement(l.Menu.ActionItem,{value:"requestApproval",onClick:B},w.formatMessage(k)))))})):null})),t.CommentsMeatball.displayName="CommentsMeatball"}));
//# sourceMappingURL=meatball_menu.amd.min.js-vflcfGSMu.map