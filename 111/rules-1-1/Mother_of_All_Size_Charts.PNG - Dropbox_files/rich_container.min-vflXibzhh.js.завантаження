define(["require","exports","tslib","react","file-viewer/pass/reducer","typescript/libraries/dbx-i18n/src/index","typescript/libraries/comments2/src/components/rich_facepile/index"],(function(e,t,i,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RichFacepileContainer=void 0,n=i.__importStar(n);var l="avatarTooltipPadded__3hbAALe5Bh__pass",o=function(e){return e.split(/\s+/g).slice(0,2).map((function(e){return e[0]})).join("").toLocaleUpperCase()},u=function(e){var t=e.name,i=e.ts,r=e.intl,s=e.active;return n.createElement("article",{className:l},n.createElement("header",null,n.createElement("h3",null,t)),s?r.formatMessage({id:"cSWjTH",defaultMessage:"Viewing now"}):i?r.formatMessage({id:"lWGuPm",defaultMessage:"Viewed {ago}"},{ago:a.timeSince(r,i,{displayLocation:"label",displayContext:"sentence-middle"})}):null)},c=function(e){return e.startsWith("dbafvid:")},p=function(e,t){var i=e.name.display_name,r=e.account_id,a=e.profile_photo_url;return{present:!0,displayName:i,initials:o(i),avatarColorSeed:r,memberKey:r,photoUrl:a||"",passiveTooltipContent:n.createElement(u,{name:i,active:!0,intl:t})}},m=function(e){var t=e.currentUser,r=e.viewingUserIds,a=e.users,s=e.seenStates,l=e.fileMembers,m=e.intl,d=i.__spreadArrays([p(t,m)],r.filter((function(e){return e!==t.account_id&&(c(e)||a[e])})).slice(0,3).map((function(e){return c(e)?(function(e,t){var i=t.formatMessage({id:"uxSU4g",defaultMessage:"Guest"});return{present:!0,displayName:i,initials:o(i),avatarColorSeed:e,memberKey:e,photoUrl:"",passiveTooltipContent:n.createElement(u,{name:i,active:!0,intl:t})}})(e,m):p(a[e],m)})));return d.length<4&&d.push.apply(d,s.order.filter((function(e){return!r.includes(e)&&e!==t.account_id})).slice(0,4-d.length).map((function(e){return(function(e,t,i){void 0===i&&(i=!1);var r=e.when_last_seen,a=e.seen_state_user,s=a.display_name,l=a.user_id,c=a.photo_circle_url;return{present:i,displayName:s,initials:o(s),avatarColorSeed:l,memberKey:l,photoUrl:c||"",passiveTooltipContent:n.createElement(u,{name:s,active:!1,ts:r,intl:t})}})(s.infos[e],m)}))),d.length<4&&d.push.apply(d,l.order.filter((function(e){return!(e===t.account_id||r.includes(e)||e in s.infos)})).slice(0,4-d.length).map((function(e){return l.users[e]?(function(e,t){var i=e.user,r=i.display_name,a=i.account_id;return{present:!1,displayName:r,initials:o(r),avatarColorSeed:a,memberKey:a,photoUrl:"",passiveTooltipContent:n.createElement(u,{name:r,intl:t})}})(l.users[e],m):(function(e,t){var i=e.user,r=e.invitee;if(i){var a=i.display_name,s=i.account_id;return{present:!1,displayName:a,initials:o(a),avatarColorSeed:s,memberKey:s,photoUrl:"",passiveTooltipContent:n.createElement(u,{name:a,intl:t})}}if("email"===r[".tag"])return{present:!1,displayName:r.email,initials:o(r.email),avatarColorSeed:r.email,memberKey:r.email,photoUrl:"",passiveTooltipContent:n.createElement(u,{name:r.email,intl:t})}})(l.invitees[e],m)})).filter((function(e){return!!e}))),d};t.RichFacepileContainer=function(e){var t,i=e.seenStates,a=void 0===i?r.DEFAULT_SEEN_STATES:i,l=e.intl,o=e.fileMemberCounts,u=void 0===o?r.DEFAULT_FILE_MEMBER_COUNTS:o,c=e.fileMembers,p=void 0===c?r.DEFAULT_FILE_MEMBERS:c,d=e.currentUser,f=e.users,v=e.viewingUserIds,_=void 0===v?r.DEFAULT_VIEWING_USER_IDS:v,h=0,C=[];return d&&(h=(function(e,t,i,n){return e.count+t.order.filter((function(e){return!(e in i.users||e in i.invitees)})).length+n.filter((function(e){return!(e in t.infos||e in i.users||e in i.invitees)})).length})(u,a,p,_),C=m({currentUser:d,viewingUserIds:_,users:f,seenStates:a,fileMembers:p,intl:l})),n.createElement(s.RichFacepile,{avatarSize:32,sizeClass:s.SizeClass.Large,sizeClassToCircleCountOverrides:(t={},t[s.SizeClass.Large]=4,t[s.SizeClass.ExtraLarge]=4,t),avatarInfoList:C,intl:l,overflowBasis:h,tooltipComponent:s.UtilTooltip})}}));
//# sourceMappingURL=rich_container.min.js-vflqXWccG.map