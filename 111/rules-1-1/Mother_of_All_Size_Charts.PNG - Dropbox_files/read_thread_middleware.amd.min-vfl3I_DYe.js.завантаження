define(["require","exports","tslib","api_v2/redux/comments2","typescript/component_libraries/files_components/src/blades/comments/data/actions","typescript/component_libraries/files_components/src/blades/comments/data/transform","typescript/component_libraries/files_components/src/blades/comments/data/types"],(function(e,t,r,i,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMiddleware=void 0,t.createMiddleware=function(){return function(e){var t=e.dispatch,c=e.getState;return function(e){return function(d){return r.__awaiter(void 0,void 0,void 0,(function(){var s,l,m,p,u,f,_,v,h;return r.__generator(this,(function(r){if(s=e(d),d.type===n.Action.ActivateThread||d.type===n.Action.ActivateInitialThread){if(l=d.payload,m=l.threadId,p=l.fileId,u=l.sharedLinkURL,f=c(),null==(_=f.threads[o.createCommentFileIdentifier(p,u)]))return[2,s];!(v=_[m])||v.read||v.readonly||(h=a.createStreamFromFileOrSharedLink(p,u),t(i.markThreadReadAction({arg:{id:v.id,stream:h}})))}return[2,s]}))}))}}}}}));
//# sourceMappingURL=read_thread_middleware.amd.min.js-vfllrDKLB.map