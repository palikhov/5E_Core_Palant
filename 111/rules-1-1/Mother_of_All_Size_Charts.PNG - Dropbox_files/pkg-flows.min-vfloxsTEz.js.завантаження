define("modules/clean/react/flows/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXCLOG_TAG=t.FLOWS_STYLESHEETS=void 0,t.FLOWS_STYLESHEETS=["/static/css/spectrum/index.web-vfliw9181.css","/static/css/dig-components/index.web-vflfsfj-g.css","/static/js/dig-experimental/index.web-vfl_TJZKT.css","/static/js/typescript/component_libraries/flows/src/index.web-vflbHvh9w.css","/static/css/flows/flows-vflA4QU_Y.css"],t.EXCLOG_TAG="dbx-owner:workflow-automation"})),define("modules/clean/react/flows/components/badge",["require","exports","tslib","react","dig-components/badges","react-intl","modules/clean/react/components/css","modules/clean/react/flows/constants","modules/core/i18n","dig-components/tooltips","modules/clean/react/flows/types","typescript/component_libraries/flows/src/common/constants"],(function(e,t,o,n,r,a,s,i,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowsFolderBadge=t.FlowsFolderBadgeComponent=void 0,n=o.__importDefault(n),t.FlowsFolderBadgeComponent=function(e){var t,o=e.type,s=e.isInUnifiedModal,i=e.isFolderFocused,_=f(),p=_.autoPdfBadgeContent,g=_.autoPdfBadgeTooltip,m=_.autoUnzipBadgeContent,v=_.autoUnzipBadgeTooltip,A=_.unifiedModalContent,w=_.autoTagBadgeContent,S=_.autoTagBadgeTooltip,b=_.autoSmartSubfoldersBadgeContent,T=_.autoSmartSubfoldersBadgeTooltip,h=_.autoImageBadgeContent,C=_.autoImageBadgeTooltip,U=_.autoVideoBadgeContent,E=_.autoVideoBadgeTooltip,M=_.autoNamingConventionsBadgeContent,y=_.autoNamingConventionsBadgeTooltip,F=_.autoTidyUpBadgeContent,O=_.autoTidyUpBadgeTooltip,I=_.autoAudioBadgeContent,x=_.autoAudioBadgeTooltip,P=((t={})[u.FlowsRuleType.AutoPDF]={tooltip:g,content:p},t[u.FlowsRuleType.AutoUnzip]={tooltip:v,content:m},t[u.FlowsRuleType.AutoTag]={tooltip:S,content:w},t[u.FlowsRuleType.AutoSmartSubfolders]={tooltip:T,content:b},t[u.FlowsRuleType.AutoImage]={tooltip:C,content:h},t[u.FlowsRuleType.AutoVideo]={tooltip:E,content:U},t[u.FlowsRuleType.AutoNamingConventions]={tooltip:y,content:M},t[u.FlowsRuleType.AutoTidyUp]={tooltip:O,content:F},t[u.FlowsRuleType.AutoAudio]={tooltip:x,content:I},t),R=o===u.FlowsRuleType.None?void 0:P[o];return n.default.createElement(a.RawIntlProvider,{value:l.intl},R&&n.default.createElement(c.Tooltip,{id:"flows-badge-tooltip","data-testid":d.TestTarget.FLOWS_BADGE_TOOLTIP,title:R.tooltip,maxWidth:400},n.default.createElement("div",{className:"flows-badge","data-testid":d.TestTarget.FLOWS_BADGE,tabIndex:i?0:-1},n.default.createElement(r.AccessoryBadge,null,s?A:R.content))))},t.FlowsFolderBadgeComponent.displayName="FlowsFolderBadgeComponent";var f=function(){var e=a.useIntl();return{autoPdfBadgeContent:e.formatMessage({id:"J7Q2k7",defaultMessage:"Auto-PDF"}),autoPdfBadgeTooltip:e.formatMessage({id:"fsqHOb",defaultMessage:"Files added to this folder are automatically saved as PDFs."}),unifiedModalContent:e.formatMessage({id:"VWmNRn",defaultMessage:"Automated"}),autoUnzipBadgeContent:e.formatMessage({id:"ZrkK1J",defaultMessage:"Auto-unzip"}),autoUnzipBadgeTooltip:e.formatMessage({id:"7ZScv9",defaultMessage:"Zipped files added to this folder are automatically unzipped."}),autoTagBadgeContent:e.formatMessage({id:"86n5XF",defaultMessage:"Auto-tag"}),autoTagBadgeTooltip:e.formatMessage({id:"1VM5D6",defaultMessage:"Files added to this folder are automatically tagged"}),autoSmartSubfoldersBadgeContent:e.formatMessage({id:"fy7f50",defaultMessage:"Smart Subfolders"}),autoSmartSubfoldersBadgeTooltip:e.formatMessage({id:"apbbra",defaultMessage:"Files added to this folder are automatically sorted and moved to organized subfolders"}),autoImageBadgeContent:e.formatMessage({id:"sxUr1/",defaultMessage:"Auto-Image"}),autoImageBadgeTooltip:e.formatMessage({id:"IXOBFy",defaultMessage:"Files added to this folder are automatically saved as image files."}),autoVideoBadgeContent:e.formatMessage({id:"eomqk8",defaultMessage:"Auto-Video"}),autoVideoBadgeTooltip:e.formatMessage({id:"rAbBlX",defaultMessage:"Files added to this folder are automatically saved as video files."}),autoNamingConventionsBadgeContent:e.formatMessage({id:"Agx16U",defaultMessage:"Auto-Rename"}),autoNamingConventionsBadgeTooltip:e.formatMessage({id:"0fCqTu",defaultMessage:"Files added to this folder are automatically renamed."}),autoTidyUpBadgeContent:e.formatMessage({id:"ilGTr6",defaultMessage:"Auto-Organize"}),autoTidyUpBadgeTooltip:e.formatMessage({id:"eKz+EF",defaultMessage:"Files added to this folder are automatically organized by date."}),autoAudioBadgeContent:e.formatMessage({id:"KosKoB",defaultMessage:"Auto-Audio"}),autoAudioBadgeTooltip:e.formatMessage({id:"uQyruu",defaultMessage:"Files added to this folder are automatically saved as audio files."})}};t.FlowsFolderBadge=s.requireCssWithComponent(t.FlowsFolderBadgeComponent,i.FLOWS_STYLESHEETS)})),define("modules/clean/react/flows/components/flows_browse_root",["require","exports","tslib","react","modules/clean/react/browse/data/selectors","react-redux","modules/clean/react/browse/data/action_creators/index","modules/clean/react/flows/lib/api","modules/clean/react/hooks/usePrevious","modules/clean/react/flows/types","modules/clean/react/browse/models","modules/clean/filetypes","modules/clean/react/flows/utils/api_helpers","modules/clean/react/flows/types","modules/clean/react/flows/utils/bolt","modules/clean/user_survey/user_survey","modules/clean/file_store/utils","modules/clean/react/flows/utils/notifications"],(function(e,t,o,n,r,a,s,i,l,c,u,d,f,_,p,g,m,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowsRoot=t.FlowsRootComponent=void 0,r=o.__importStar(r),s=o.__importStar(s),i=o.__importStar(i);var A={getFolderRulesConfig:s.getFlowsFolderRulesConfig,setFileHasAutomatedRuleMap:s.setFileHasAutomatedRuleMap};t.FlowsRootComponent=function(e){var t=e.unsortedFiles,o=e.setFileHasAutomatedRuleMap,r=e.user,a=e.path,s=e.flowsRule,A=e.getFolderRulesConfig,w=l.usePrevious(t),S=n.useState(!1),b=S[0],T=S[1],h=v.useFlowsNotifications(r).handlePayload,C=function(e){!b&&e.valueSeq().some((function(e){return e!==c.FlowsRuleType.None}))&&T(!0),o({fileHasAutomatedRuleMap:e})};return n.useEffect((function(){s&&T(!0)}),[s]),n.useEffect((function(){var e=[];t.forEach((function(t,o){if(t.is_dir&&!u.File.isNoAccessSharedFolder(t)&&!t.is_in_vault_folder&&t.type!==d.FileTypes.VAULT_FOLDER)if(w){var n=w.get(o);n&&m.getFileRevisionId(n)===m.getFileRevisionId(t)||e.push(t.fq_path)}else e.push(t.fq_path)})),e.length>0&&i.getFolderRulesBatch(e).then((function(e){var t;if("folder_rule_batch_result"===(null===(t=null==e?void 0:e.get_rule_batch_result)||void 0===t?void 0:t[".tag"])){var o=null==e?void 0:e.get_rule_batch_result;if(o.folder_rule_results){var n=_.FlowsMap(o.folder_rule_results.map((function(e){var t,o,n,r;if(!e.err&&(null===(t=e.folder_rule_set)||void 0===t?void 0:t.rules)){var a=null===(o=e.folder_rule_set)||void 0===o?void 0:o.rules;if(a.length>0){var s=null===(r=null===(n=a[0].action)||void 0===n?void 0:n.action)||void 0===r?void 0:r[".tag"],i=s?f.APIV2_TAG_TO_RULE_TYPE[s]:c.FlowsRuleType.None;return[e.fq_path,i]}}return[e.fq_path,c.FlowsRuleType.None]})));C(n)}}}))}),[t]),n.useEffect((function(){"/"!==a&&""!==a&&i.getFolderRules(a).then((function(e){var t,o,n,r,s;if("folder_rule_set"===(null===(o=null==e?void 0:e.get_rule_result)||void 0===o?void 0:o[".tag"])){var i=null===(n=e.get_rule_result)||void 0===n?void 0:n.rules;if(i&&i.length>0){var l=null===(s=null===(r=i[0].action)||void 0===r?void 0:r.action)||void 0===s?void 0:s[".tag"],u=l?f.APIV2_TAG_TO_RULE_TYPE[l]:c.FlowsRuleType.None;C(_.FlowsMap(((t={})[a]=u,t)))}}}),(function(e){}))}),[a]),n.useEffect((function(){return b&&p.FlowsBoltClient.subscribe((function(e){e.forEach((function(e){null==e||!e.action_type||e.status&&"success"!==e.status||(g.UserSurvey.addAttribute("flows_last_action_type",e.action_type),g.UserSurvey.trackEvent("flows_automation_success","browse")),p.isCompleteFlowsBoltPayload(e)&&h(e)}))})),function(){return p.FlowsBoltClient.unsubscribe()}}),[b,h]),n.useEffect((function(){A()}),[]),null},t.FlowsRootComponent.displayName="FlowsRootComponent";var w=a.connect((function(e,t){return{unsortedFiles:r.unsortedFiles(e),flowsRule:r.flowsFolderRule(e,t.path)}}),A);t.FlowsRoot=w(t.FlowsRootComponent)})),define("modules/clean/react/flows/components/modals/automated_adoption_modal",["require","exports","tslib","react","dig-components/modal","dig-components/buttons","dig-components/typography","modules/clean/react/image","modules/core/i18n","modules/clean/react/browse/action_logger","modules/clean/web_user_action_events","modules/clean/react/flows/utils/modal_utils"],(function(e,t,o,n,r,a,s,i,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutomatedAdoptionModal=void 0,n=o.__importStar(n),t.AutomatedAdoptionModal=function(e){var t=e.modalName,o=e.userId,l=e.source,_=e.fileNsId,p=f(t),g=p.closeButton,m=p.title,v=p.automationSteps,A=p.imageUrl1x,w=p.imageUrl2x,S=n.useState(!0),b=S[0],T=S[1],h=n.useRef(d.generateModalSessionId()),C=(new Date).getTime().toString();n.default.useEffect((function(){b&&U(u.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_MODAL_OPEN)}),[b]);var U=function(e,t){c.logAutoFolderEducationModal({user_id:o,action_source:"adoption",event_name:e,file_nsid:_,source:l,modal_session_id:h.current,open_ts:C,close_ts:t})},E=function(){U(u.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_MODAL_CLOSE,(new Date).getTime().toString()),T(!1)};return n.default.createElement(r.Modal,{open:b,width:600,onRequestClose:E},n.default.createElement(r.Modal.Body,{style:{padding:"0px"}},n.default.createElement("div",{className:"adoption-modal-image",style:{background:"#F7F5F2",display:"flex",alignItems:"center",justifyContent:"center",height:"338px"}},n.default.createElement(i.Image,{width:328,src:A,srcSet:w})),n.default.createElement("div",{className:"adoption-modal-text",style:{padding:"24px"}},n.default.createElement(s.Title,null,m),n.default.createElement(s.Text,null,v))),n.default.createElement(r.Modal.Footer,null,n.default.createElement(a.Button,{variant:"primary",onClick:E},g)))},t.AutomatedAdoptionModal.displayName="AutomatedAdoptionModal";var f=function(e){var t={closeButton:l.intl.formatMessage({id:"PomlfA",defaultMessage:"Got it"})};switch(e){case"addAutomation":return o.__assign(o.__assign({},t),{title:l.intl.formatMessage({id:"vm4jhB",defaultMessage:"To add an automation to a folder"}),automationSteps:l.intl.formatMessage({id:"QqxD05",defaultMessage:"<ol><li>Find the folder you want to automate </li> <li> Click “...” (ellipsis) </li> <li> Select <b>Add automation</b></li> </ol>"},{ol:function(e){return n.default.createElement("ol",{style:{paddingLeft:"1.5em"}},e)},li:function(e){return n.default.createElement("li",null,e)},b:function(e){return n.default.createElement("b",null,e)}}),imageUrl1x:"https://assets.dropbox.com/prompt/en/workflow-automation/add_automated_folder@1x.png",imageUrl2x:"https://assets.dropbox.com/prompt/en/workflow-automation/add_automated_folder@2x.png"});default:return o.__assign(o.__assign({},t),{title:l.intl.formatMessage({id:"JjROwT",defaultMessage:"To create a new automated folder"}),automationSteps:l.intl.formatMessage({id:"lqFmMv",defaultMessage:"<ol><li> Click <b>Create</b> </li> <li> Click <b>Automated Folder</b> </li> </ol>"},{ol:function(e){return n.default.createElement("ol",{style:{paddingLeft:"1.5em"}},e)},li:function(e){return n.default.createElement("li",null,e)},b:function(e){return n.default.createElement("b",null,e)}}),imageUrl1x:"https://assets.dropbox.com/prompt/en/workflow-automation/create_automated_folder@1x.png",imageUrl2x:"https://assets.dropbox.com/prompt/en/workflow-automation/create_automated_folder@2x.png"})}}})),define("modules/clean/react/flows/conversions/actions/convert_image_format",["require","exports","tslib","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","dig-components/icons/src"],(function(e,t,o,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertImageFormatActions=t.SUPPORTED_IMAGE_INPUT_EXTENSIONS=void 0,t.SUPPORTED_IMAGE_INPUT_EXTENSIONS=["bmp","gif","heic","j2c","j2k","jp2","jpc","jpeg","jpf","jpg","jpg2","jpm","jpx","png","ppm","psd","svg","tga","tif","tiff","wbmp","webp","3fr","arw","cr2","cr3","crw","dcr","dcs","dng","erf","kdc","mef","mos","mrw","nef","nrw","orf","pef","r3d","raf","rw2","rwl","sr2","x3f"];var i={jpg:t.SUPPORTED_IMAGE_INPUT_EXTENSIONS.filter((function(e){return"jpg"!==e&&"jpeg"!==e})),png:t.SUPPORTED_IMAGE_INPUT_EXTENSIONS.filter((function(e){return"png"!==e}))};t.ConvertImageFormatActions=Object.entries(i).map((function(e){var t=e[0],i=e[1];return{actionText:t.toUpperCase(),actionIcon:s.ImageLine,selector:a.singleFileWithExtensionSelector(i),convert:function(e,s,i){var l=i.shareToken;return n.convertFileAndShowSnackbar({file:e[0],user:s,shareToken:l,conversionType:"image_format",loggingFunctions:a.getConversionLoggingFunctions("image_format"),getStrings:function(e){return a.getDefaultConversionStrings(t.toUpperCase(),e)},conversionFn:function(e,n,s){return o.__awaiter(void 0,void 0,void 0,(function(){return o.__generator(this,(function(o){switch(o.label){case 0:return[4,r.convertImageFormat(n.id,a.getFileIdentifier(e,s),t)];case 1:return[2,o.sent().path]}}))}))}})}}}))})),define("modules/clean/react/flows/conversions/actions/convert_doc_to_image",["require","exports","tslib","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","dig-components/icons/src"],(function(e,t,o,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertDocToImageActions=t.SUPPORTED_IMAGE_OUTPUT_EXTENSIONS=t.SUPPORTED_DOC_INPUT_EXTENSIONS=void 0,t.SUPPORTED_DOC_INPUT_EXTENSIONS=["ai","azw4","binder","djvu","doc","docm","docx","dwg","eps","epub","gdoc","gslides","mobi","odp","odt","paper","papert","pps","ppsm","ppsx","ppt","pptm","pptx","ps","rtf","wpd","pdf"],t.SUPPORTED_IMAGE_OUTPUT_EXTENSIONS=["jpg","png"];t.ConvertDocToImageActions=t.SUPPORTED_IMAGE_OUTPUT_EXTENSIONS.map((function(e){return{actionText:e.toUpperCase(),actionIcon:s.ImageLine,selector:a.singleFileWithExtensionSelector(t.SUPPORTED_DOC_INPUT_EXTENSIONS),convert:function(t,s,i){var l=i.shareToken;return n.convertFileAndShowSnackbar({file:t[0],user:s,shareToken:l,conversionType:"doc_to_image",loggingFunctions:a.getConversionLoggingFunctions("doc_to_image"),getStrings:function(t){return a.getDefaultConversionStrings(e.toUpperCase(),t)},conversionFn:function(t,n,s){return o.__awaiter(void 0,void 0,void 0,(function(){return o.__generator(this,(function(o){switch(o.label){case 0:return[4,r.convertDocToImage(n.id,a.getFileIdentifier(t,s),e)];case 1:return[2,o.sent().path]}}))}))}})}}}))})),define("modules/clean/react/flows/conversions/actions/convert_to_pdf",["require","exports","tslib","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","dig-components/icons/src"],(function(e,t,o,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canConvertToPdfExcludingImages=t.ConvertToPdfAction=t.SUPPORTED_PDF_EXTENSIONS=void 0;var i=["ai","azw4","binder","djvu","doc","docm","docx","dwg","eps","epub","gdoc","gslides","mobi","odp","odt","paper","papert","pps","ppsm","ppsx","ppt","pptm","pptx","ps","rtf","wpd"];t.SUPPORTED_PDF_EXTENSIONS=i.concat(["bmp","j2c","j2k","jp2","jpc","jpeg","jpf","jpg","jpg2","jpm","jpx","png","ppm","tga","tif","tiff"]),t.ConvertToPdfAction={actionText:"PDF",actionIcon:s.FileLine,selector:a.singleFileWithExtensionSelector(t.SUPPORTED_PDF_EXTENSIONS),convert:function(e,t,s){var i=s.shareToken,l=s.isCurrentFolderEligibleForAutomation,c=s.isSubfolderEligibleForAutomation,u=s.source;return n.convertFileAndShowSnackbar({file:e[0],user:t,shareToken:i,conversionType:"pdf",loggingFunctions:a.getConversionLoggingFunctions("pdf"),getStrings:function(e){return a.getDefaultConversionStrings("PDF",e)},conversionFn:function(e,t,n){return o.__awaiter(void 0,void 0,void 0,(function(){return o.__generator(this,(function(o){switch(o.label){case 0:return[4,r.convertToPdf(t.id,a.getFileIdentifier(e,n))];case 1:return[2,o.sent().path]}}))}))},getAdoptionSnackbarProps:function(e){return n.getAdoptionSnackbarProps(t,"pdf","PDF",e,l,c,u)},source:u})}},t.canConvertToPdfExcludingImages=function(e){return a.singleFileWithExtensionSelector(i)([e])}})),define("modules/clean/react/flows/conversions/actions/unzip",["require","exports","tslib","modules/core/i18n","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","modules/clean/react/flows/conversions/convert","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/file_viewer/models","modules/clean/react/app_actions/telemetry_client","dig-components/icons/src","dig-components/icons/src","modules/clean/react/flows/conversions/api"],(function(e,t,o,n,r,a,s,i,l,c,u,d,f,_,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnzipAdoptionSnackbarProps=t.UnzipAction=t.SUPPORTED_UNZIP_EXTENSIONS=void 0;t.SUPPORTED_UNZIP_EXTENSIONS=["7z","bz","bz2","cpio","gz","iso","lha","lz","lzh","lzma","rar","tar","taz","tbz","tbz2","tgz","tlz","txz","tz","xar","xz","z","zip"];t.UnzipAction={actionText:n.intl.formatMessage({id:"u1R/iY",defaultMessage:"Extract all"}),actionIcon:_.ZipLine,selector:s.singleFileWithExtensionSelector(t.SUPPORTED_UNZIP_EXTENSIONS),convert:function(e,t,n){var i=n.shareToken,l=n.isCurrentFolderEligibleForAutomation,c=n.isSubfolderEligibleForAutomation,u=n.source;return r.convertFileAndShowSnackbar({file:e[0],user:t,shareToken:i,loggingFunctions:v,conversionType:"unzip",getStrings:function(e){return A(e)},conversionFn:function(e,t,n){return o.__awaiter(void 0,void 0,void 0,(function(){return o.__generator(this,(function(o){switch(o.label){case 0:return[4,a.unzip(t.id,s.getFileIdentifier(e,n))];case 1:return[2,o.sent().path]}}))}))},getAdoptionSnackbarProps:function(e){return w(t,"unzip",e,l,c,u)},source:u})}};var m=function(){return{previewSession:d.FilePreviewSession.currentSession,browseSession:f.createTelemetryClient({component:"decompress_action"}).session()}},v={logConvert:function(){var e=m(),t=e.previewSession,o=e.browseSession;t?u.filePreviewEventEmitter.emit(c.EventType.DecompressInitiated,t):o.event(c.EventType.DecompressInitiated)},logConvertRetry:function(){var e=m(),t=e.previewSession,o=e.browseSession;t?l.logUserAction(c.UserAction.DecompressRetry,c.UserActionContext.Snackbar):o.event(c.UserAction.DecompressRetry,{context:c.UserActionContext.Snackbar})},logConvertOpen:function(){var e=m(),t=e.previewSession,o=e.browseSession;t?l.logUserAction(c.UserAction.GoToFolder,c.UserActionContext.Snackbar):o.event(c.UserAction.GoToFolder,{context:c.UserActionContext.Snackbar})},logConvertClose:function(){var e=m(),t=e.previewSession,o=e.browseSession;t?l.logUserAction(c.UserAction.DecompressCloseSnackbar,c.UserActionContext.Snackbar):o.event(c.UserAction.DecompressCloseSnackbar,{context:c.UserActionContext.Snackbar})}},A=function(e){var t=n.intl.formatMessage({id:"gJnC96",defaultMessage:"Couldn't extract files"}),o=s.getSuccessString(e,(function(e,t){return n.intl.formatMessage({id:"Hz2NSj",defaultMessage:"Files extracted to {folderName} in {parentFolderName} folder"},{folderName:e,parentFolderName:t})}),(function(e){return n.intl.formatMessage({id:"TRohxO",defaultMessage:"Files extracted to {folderName} in your main Dropbox folder"},{folderName:e})}));return{saving:n.intl.formatMessage({id:"Jk+n/I",defaultMessage:"Extracting files..."}),success:o,successAutomatedAdoption:o,failGeneric:t,failRetryable:t,failOverQuota:n.intl.formatMessage({id:"atcchQ",defaultMessage:"Couldn't extract because your Dropbox account is out of space"}),failTooLarge:n.intl.formatMessage({id:"Hgd1fQ",defaultMessage:"Couldn't extract files. Can only handle files up to {fileSize} MB"},{fileSize:512}),failCorrupt:n.intl.formatMessage({id:"00qMd1",defaultMessage:"Couldn't extract because the file is damaged"}),failPassword:n.intl.formatMessage({id:"xbgxEF",defaultMessage:"Couldn't extract because the file is password protected"}),failPasswordLink:n.intl.formatMessage({id:"UvS9P9",defaultMessage:"Couldn't extract because the file was shared using a password-protected link"})}};function w(e,t,o,r,a,l){var c={user:e,conversionType:t,isCurrentFolderEligibleForAutomation:r,isSubfolderEligibleForAutomation:a,source:l};return s.isAutomatedAdoptionEnabled(e)?{actions:[{icon:p.AddFolderLine,name:"create_automated_folder",text:n.intl.formatMessage({id:"AS674M",defaultMessage:"Create automated folder"}),onClick:i.createAutomatedFolderHandler},{icon:p.FolderLine,name:"automated_existing_folder",text:n.intl.formatMessage({id:"n9iAyA",defaultMessage:"Automate existing folder"}),onClick:i.automateExistingFolderHandler},{name:"maybe_later",text:n.intl.formatMessage({id:"/5Lzsh",defaultMessage:"Maybe later"}),onClick:i.remindMeLaterHandler}],helperText:n.intl.formatMessage({id:"tMuSn1",defaultMessage:"Want to unzip files automatically?"}),clickHandlerArgs:{userId:e.id,filePath:o||"",conversionArg:c},onCloseClick:function(){g.updateAdoptionStatus(c.conversionType,e.id)}}:void 0}t.getUnzipAdoptionSnackbarProps=w})),define("modules/clean/react/flows/conversions/api",["require","exports","tslib","api_v2/user_client","modules/clean/react/flows/conversions/utils","modules/clean/downloads"],(function(e,t,o,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAdoptionStatus=t.checkAdoptionStatus=t.convertVideoToGif=t.mediaRemux=t.archive=t.convertDocToImage=t.convertImageFormat=t.unzip=t.convertToPdf=void 0,t.convertToPdf=function(e,t,o){var r={file:t,dest_path:o};return(new n.UserApiV2Client).ns("flows").rpc("convert_to_pdf",r,{subjectUserId:e})},t.unzip=function(e,t,o){var r={file:t,dest_path:o};return(new n.UserApiV2Client).ns("flows").rpc("unzip",r,{subjectUserId:e})},t.convertImageFormat=function(e,t,o,r){var a={file:t,format:o,dest_path:r};return(new n.UserApiV2Client).ns("flows").rpc("convert_image_format",a,{subjectUserId:e})},t.convertDocToImage=function(e,t,o,r){var a={file:t,format:o,dest_path:r};return(new n.UserApiV2Client).ns("flows").rpc("convert_doc_to_image",a,{subjectUserId:e})},t.archive=function(e,t,s,i,l){return o.__awaiter(this,void 0,Promise,(function(){var c,u,d,f,_;return o.__generator(this,(function(o){switch(o.label){case 0:return i&&i.blockHash?(c=i.currentFQPath,u=t.map((function(e){return e.fq_path})),[4,a.getZipDownloadUrl({block_hash:i.blockHash,fq_paths:u,parent_path:c,subjectUserId:e,flat_mode:!1})]):[3,2];case 1:return(d=o.sent()).isError?(a.showGetZipUrlErrorSnackbar(d.error),[2,Promise.resolve({path:void 0})]):(f=t.map((function(e){return r.getFileIdentifier(e)})),s=s||"archive.zip",_={file:f,dest_path:l,zip_url:d.result.url,archive_name:s},[2,(new n.UserApiV2Client).ns("flows").rpc("archive",_,{subjectUserId:e})]);case 2:return[2,Promise.resolve({path:void 0})]}}))}))},t.mediaRemux=function(e,t,o,r){var a={file:t,dest_path:r,container:o};return(new n.UserApiV2Client).ns("flows").rpc("media_remux",a,{subjectUserId:e})},t.convertVideoToGif=function(e,t,o,r,a,s){var i={file:t,dest_path:s,start_offset:o,duration:r,resolution:a};return(new n.UserApiV2Client).ns("flows").rpc("convert_video_to_gif",i,{subjectUserId:e})},t.checkAdoptionStatus=function(e,t){var o={check_adoption_status_arg:{".tag":"check_automation_adoption_status_arg",conversion_type:e}};return(new n.UserApiV2Client).ns("flows").rpc("check_adoption_status",o,{subjectUserId:t})},t.updateAdoptionStatus=function(e,t){var o={update_adoption_status_arg:{".tag":"update_automated_adoption_status_arg",conversion_type:e}};return(new n.UserApiV2Client).ns("flows").rpc("update_adoption_status",o,{subjectUserId:t})}})),define("modules/clean/react/flows/conversions/conversion_actions",["require","exports","tslib","modules/clean/react/flows/conversions/actions/convert_to_pdf","modules/clean/react/flows/conversions/actions/convert_image_format","modules/clean/react/flows/conversions/actions/convert_doc_to_image","modules/clean/react/flows/conversions/actions/media_remux","modules/clean/react/flows/conversions/actions/convert_video_to_gif"],(function(e,t,o,n,r,a,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConversionActionsForFiles=void 0;var l=o.__spreadArrays([n.ConvertToPdfAction],r.ConvertImageFormatActions,a.ConvertDocToImageActions,s.MediaRemuxActions,[i.ConvertVideoToGifAction]);t.getConversionActionsForFiles=function(e,t){return l.filter((function(o){return o.selector(e,t)}))}})),define("modules/clean/react/flows/conversions/convert",["require","exports","tslib","modules/core/i18n","react","modules/clean/react/snackbar","modules/clean/browse_uri_interface","modules/core/uri","modules/core/browser","modules/clean/react/flows/conversions/utils","modules/clean/react/flows/conversions/api","dig-components/icons/src","modules/clean/react/flows/components/modals/automated_adoption_modal","modules/clean/react/components/modal","react-redux","modules/clean/react/browse/data/store","react-intl","modules/clean/react/flows/redux/store","modules/clean/react/flows/redux/actions","modules/clean/react/browse/data/action_creators/index","modules/clean/react/browse/action_logger","modules/clean/web_user_action_events"],(function(e,t,o,n,r,a,s,i,l,c,u,d,f,_,p,g,m,v,A,w,S,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncLaunchAutomatedAdoptionModal=t.remindMeLaterHandler=t.automateExistingFolderHandler=t.createAutomatedFolderHandler=t.getAdoptionSnackbarProps=t.convertFileAndShowSnackbar=void 0,r=o.__importDefault(r),l=o.__importStar(l),w=o.__importStar(w);var T=new Map([["pdf","pdf_conversion"],["unzip","unzip"]]);function h(e){var t;return o.__awaiter(this,void 0,void 0,(function(){var n,r,a,s,i,l,d,f,_,p,g,m,v,A;return o.__generator(this,(function(w){switch(w.label){case 0:n=e.file,r=e.user,a=e.shareToken,s=e.conversionFn,i=e.loggingFunctions,l=e.conversionType,d=e.getAdoptionSnackbarProps,f=e.source,i.logConvert(),C(o.__assign(o.__assign({},e),{state:"saving"})),w.label=1;case 1:return w.trys.push([1,7,,8]),[4,s(n,r,a)];case 2:return(_=w.sent())?(p=d?d(_):void 0,g=!1,p?[4,u.checkAdoptionStatus(l,r.id)]:[3,4]):[3,5];case 3:m=w.sent(),g="show_automation_adoption_tooltips"===(null===(t=m.check_automation_adoption_status_result)||void 0===t?void 0:t[".tag"])&&m.check_automation_adoption_status_result.show_automation_adoption_tooltips.valueOf(),w.label=4;case 4:return g?(S.logAutoFolderAdoptionSnackbar({user_id:r.id,action_source:"adoption",event_name:b.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_SNACKBAR_SHOW,file_nsid:n.ns_id,source:f,trigger_rule:T.get(l)}),C(o.__assign(o.__assign({},e),{state:"successAutomatedAdoption",resultPath:_,adoptionSnackbarProps:p}))):C(o.__assign(o.__assign({},e),{state:"success",resultPath:_})),[3,6];case 5:C(o.__assign(o.__assign({},e),{state:"failGeneric"})),w.label=6;case 6:return[3,8];case 7:return v=w.sent(),A=c.getConversionStateFromException(v),C(o.__assign(o.__assign({},e),{state:A})),[3,8];case 8:return[2]}}))}))}function C(e){var t=e.user,s=e.getStrings,i=e.state,l=e.resultPath,c=e.loggingFunctions,u=e.adoptionSnackbarProps,d=o.__assign(o.__assign({},s(l||"")),{open:n.intl.formatMessage({id:"+JIEsO",defaultMessage:"Open"}),close:n.intl.formatMessage({id:"In8b64",defaultMessage:"Close"}),retry:n.intl.formatMessage({id:"Y/tkCj",defaultMessage:"Try again"})}),f={closeButtonText:d.close,onCloseClick:c.logConvertClose},_={saving:{variant:"sync",syncProgressLoop:!0},failGeneric:o.__assign({variant:"fail"},f),failOverQuota:o.__assign({variant:"fail"},f),failTooLarge:o.__assign({variant:"fail"},f),failCorrupt:o.__assign({variant:"fail"},f),failPassword:o.__assign({variant:"fail"},f),failPasswordLink:o.__assign({variant:"fail"},f),failRetryable:o.__assign({variant:"fail",onActionClick:function(){c.logConvertRetry(),h(e)}},f),successAutomatedAdoption:o.__assign({variant:"complete",onActionClick:function(){return U(t,l,c)},richSnackbarProps:u},f),success:o.__assign({variant:"complete",actionButtonText:d.open,onActionClick:function(){return U(t,l,c)}},f)};a.Snackbar.update(r.default.createElement(a.Snackbar,o.__assign({id:"flows-conversion-snackbar",title:d[i]},_[i])))}function U(e,t,o){o.logConvertOpen();var n=t,r=s.get_browse_root(e)+i.URI.encode_parts(n);l.replace_location(r)}function E(e,t,o,a){_.Modal.showInstance(r.default.createElement(p.Provider,{store:g.getStoreForBrowse()},r.default.createElement(m.RawIntlProvider,{value:n.intl},r.default.createElement(f.AutomatedAdoptionModal,{modalName:e,userId:t,source:o,fileNsId:a}))))}t.convertFileAndShowSnackbar=h,t.getAdoptionSnackbarProps=function(e,o,r,a,s,i,l){var f={user:e,conversionType:o,isCurrentFolderEligibleForAutomation:s,isSubfolderEligibleForAutomation:i,source:l};return c.isAutomatedAdoptionEnabled(e)?{actions:[{icon:d.AddFolderLine,name:"create_automated_folder",text:n.intl.formatMessage({id:"AS674M",defaultMessage:"Create automated folder"}),onClick:t.createAutomatedFolderHandler},{icon:d.FolderLine,name:"automated_existing_folder",text:n.intl.formatMessage({id:"n9iAyA",defaultMessage:"Automate existing folder"}),onClick:t.automateExistingFolderHandler},{name:"maybe_later",text:n.intl.formatMessage({id:"/5Lzsh",defaultMessage:"Maybe later"}),onClick:t.remindMeLaterHandler}],helperText:n.intl.formatMessage({id:"KmBuBt",defaultMessage:"Want to save files as {fileType}s automatically?"},{fileType:r}),clickHandlerArgs:{userId:e.id,filePath:a||"",conversionArg:f},onCloseClick:function(){u.updateAdoptionStatus(f.conversionType,e.id)}}:void 0},t.createAutomatedFolderHandler=function(e){return o.__awaiter(void 0,void 0,void 0,(function(){var t,n,r,s,i,l;return o.__generator(this,(function(o){switch(o.label){case 0:return t=e.conversionArg,n=e.userId,r=e.ns_id,t?[4,u.updateAdoptionStatus(t.conversionType,n)]:[3,2];case 1:o.sent(),(s=T.get(t.conversionType))&&(S.logAutoFolderAdoptionSnackbar({user_id:n,action_source:"adoption",event_name:b.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_SNACKBAR_CLICK,file_nsid:r,trigger_rule:s,snackbar_click_option:"create",source:t.source}),t.isSubfolderEligibleForAutomation?(i=g.getStoreForBrowse(),l=v.getStoreForAutomations(),i.dispatch(w.clearSelection({skipLogging:!0})),i.dispatch(w.setCreateMenuOpenRequest({autoFocus:!1})),l.dispatch(A.setAutoFolderOnboarding({conversionType:s,step:1,variant:"create"}))):E("createAutomation",n,t.source,r)),o.label=2;case 2:return a.Snackbar.close("flows-conversion-snackbar"),[2]}}))}))},t.automateExistingFolderHandler=function(e){return o.__awaiter(void 0,void 0,void 0,(function(){var t,n,r,s,i;return o.__generator(this,(function(o){switch(o.label){case 0:return t=e.conversionArg,n=e.userId,r=e.ns_id,t?[4,u.updateAdoptionStatus(t.conversionType,n)]:[3,2];case 1:o.sent(),(s=T.get(t.conversionType))&&(S.logAutoFolderAdoptionSnackbar({user_id:n,action_source:"adoption",event_name:b.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_SNACKBAR_CLICK,file_nsid:r,trigger_rule:s,snackbar_click_option:"add",source:t.source}),t.isCurrentFolderEligibleForAutomation?((i=g.getStoreForBrowse()).dispatch(w.clearSelection({skipLogging:!0})),i.dispatch(w.setOverflowMenuOpenRequest({autoFocus:!1})),v.getStoreForAutomations().dispatch(A.setAutoFolderOnboarding({conversionType:s,step:1,variant:"add"}))):E("addAutomation",n,t.source,r)),o.label=2;case 2:return a.Snackbar.close("flows-conversion-snackbar"),[2]}}))}))},t.remindMeLaterHandler=function(e){var t=e.conversionArg,o=e.userId,n=e.ns_id;if(t){var r=T.get(t.conversionType);r&&S.logAutoFolderAdoptionSnackbar({user_id:o,action_source:"adoption",event_name:b.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_SNACKBAR_CLICK,file_nsid:n,trigger_rule:r,snackbar_click_option:"later",source:t.source})}a.Snackbar.close("flows-conversion-snackbar")},t.asyncLaunchAutomatedAdoptionModal=E})),define("modules/clean/react/flows/conversions/utils",["require","exports","tslib","modules/core/i18n","modules/clean/file_store/utils","spectrum-sharing/utils/sharing_constants","modules/clean/file_store/utils","modules/clean/filepath/filepath","modules/clean/hql/index","dropbox/proto/hql_events/flows/manual_file_conversion","dropbox/proto/hql_events/extensions","dropbox/proto/hql_events/taxonomy","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/models","modules/clean/react/app_actions/telemetry_client","modules/constants/file_viewer"],(function(e,t,o,n,r,a,s,i,l,c,u,d,f,_,p,g,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonStrings=t.getConversionLoggingFunctions=t.getDefaultConversionStrings=t.getSuccessString=t.singleFileWithExtensionSelector=t.canConvertFile=t.getConversionStateFromException=t.isAutomatedAdoptionEnabled=t.getFileIdentifier=void 0,i=o.__importStar(i),t.getFileIdentifier=function(e,t){return r.isBrowseFile(e)||(null==t?void 0:t.linkType)===a.SharedLinkType.Content?{identifier:{file_id:e.file_id,".tag":"file_id"}}:{identifier:{shared_link_url:e.href?e.href:"",".tag":"shared_link_url"}}};var v={generic_error:"failGeneric",permission_error:"failGeneric",unsupported_error:"failGeneric",filesystem_error:"failGeneric",filesystem_transient_error:"failRetryable",over_quota_error:"failOverQuota",riviera_permanent_error:"failGeneric",riviera_retryable_error:"failRetryable",riviera_too_large_error:"failTooLarge",riviera_source_corrupt_error:"failCorrupt",riviera_password_protected_error:"failPassword",password_protected_shared_link_error:"failPasswordLink",riviera_invalid_request_error:"failGeneric",other:"failGeneric"};function A(e,t,o){var n=i.filename(e),r=i.parentDirName(e);return r?t(n,r):o(n)}t.isAutomatedAdoptionEnabled=function(e){return!!(e&&m.AUTOMATED_ADOPTION_BY_USER_ID&&m.AUTOMATED_ADOPTION_BY_USER_ID[e.id])},t.getConversionStateFromException=function(e){var t=null==e?void 0:e.error;return(function(e){return e&&e[".tag"]&&e[".tag"]in v})(t)?v[t[".tag"]]:"failGeneric"},t.canConvertFile=function(e,t){return r.isBrowseFile(e)||t&&t.canDownloadRoles.length>0},t.singleFileWithExtensionSelector=function(e){return function(t){if(1!==t.length||t[0].is_dir)return!1;var o=s.getExtension(t[0]);return e.includes(o)}},t.getSuccessString=A,t.getDefaultConversionStrings=function(e,t){var o=n.intl.formatMessage({id:"WthXj+",defaultMessage:"Couldn't save as {fileType}"},{fileType:e}),r=A(t,(function(e,t){return n.intl.formatMessage({id:"HwR61n",defaultMessage:"{fileName} saved to {dirName} folder"},{fileName:e,dirName:t})}),(function(e){return n.intl.formatMessage({id:"ukwwi2",defaultMessage:"{fileName} saved to your main Dropbox folder"},{fileName:e})}));return{saving:n.intl.formatMessage({id:"Bdb4J5",defaultMessage:"Saving {fileType}..."},{fileType:e}),success:r,successAutomatedAdoption:r,failGeneric:o,failRetryable:o,failOverQuota:n.intl.formatMessage({id:"QP2WHb",defaultMessage:"Couldn't save as {fileType} because your Dropbox account is out of space"},{fileType:e}),failTooLarge:n.intl.formatMessage({id:"cmnQAC",defaultMessage:"Couldn't save as {fileType} because the file is too large"},{fileType:e}),failCorrupt:n.intl.formatMessage({id:"INKSmo",defaultMessage:"Couldn't save as {fileType} because the file is damaged"},{fileType:e}),failPassword:n.intl.formatMessage({id:"dnnNdt",defaultMessage:"Couldn't save as {fileType} because the file is password protected"},{fileType:e}),failPasswordLink:n.intl.formatMessage({id:"qzTamN",defaultMessage:"Couldn't save as {fileType} because the file was shared using a password-protected link"},{fileType:e})}};var w=new Map([["pdf","convert_to_pdf"],["image-format","convert_image_format"],["doc-to-image","convert_doc_to_image"]]);t.getConversionLoggingFunctions=function(e){var t=d.hql_events.TaxonomyAppSurface.AppSurface,o=d.hql_events.TaxonomyActionSurface.ActionSurface,n=function(){return{previewSession:p.FilePreviewSession.currentSession,browseSession:g.createTelemetryClient({component:"file_conversion"}).session()}},r=w.has(e)?w.get(e):e;return{logConvert:function(){l.logEvent(c.hql_events.SelectConversion.create({conversionType:r,hqlMetadata:u.hql_events.HQLMetadata.create({appSurface:t.WEB,actionSurface:o.BROWSER_WINDOW})}));var e=n(),a=e.previewSession,s=e.browseSession;a?f.logUserAction(_.UserAction.FileConversionInitiated,_.UserActionContext.Snackbar,{conversion_type:r}):s.event(_.UserAction.FileConversionInitiated,{conversion_type:r})},logConvertRetry:function(){l.logEvent(c.hql_events.SelectConversionRetry.create({conversionType:r,hqlMetadata:u.hql_events.HQLMetadata.create({appSurface:t.WEB,actionSurface:o.BROWSER_WINDOW})}));var e=n(),a=e.previewSession,s=e.browseSession;a?f.logUserAction(_.UserAction.FileConversionRetry,_.UserActionContext.Snackbar,{conversion_type:r}):s.event(_.UserAction.FileConversionRetry,{context:_.UserActionContext.Snackbar,conversion_type:r})},logConvertClose:function(){l.logEvent(c.hql_events.SelectConversionCloseClick.create({conversionType:r,hqlMetadata:u.hql_events.HQLMetadata.create({appSurface:t.WEB,actionSurface:o.BROWSER_WINDOW})}));var e=n(),a=e.previewSession,s=e.browseSession;a?f.logUserAction(_.UserAction.FileConversionCloseSnackbar,_.UserActionContext.Snackbar,{conversion_type:r}):s.event(_.UserAction.FileConversionCloseSnackbar,{context:_.UserActionContext.Snackbar,conversion_type:r})},logConvertOpen:function(){l.logEvent(c.hql_events.SelectConversionOpenClick.create({conversionType:r,hqlMetadata:u.hql_events.HQLMetadata.create({appSurface:t.WEB,actionSurface:o.BROWSER_WINDOW})}));var e=n(),a=e.previewSession,s=e.browseSession;a?f.logUserAction(_.UserAction.GoToFolder,_.UserActionContext.Snackbar,{conversion_type:r}):s.event(_.UserAction.GoToFolder,{context:_.UserActionContext.Snackbar,conversion_type:r})}}},t.getCommonStrings=function(){return{open:n.intl.formatMessage({id:"+JIEsO",defaultMessage:"Open"}),close:n.intl.formatMessage({id:"In8b64",defaultMessage:"Close"}),retry:n.intl.formatMessage({id:"Y/tkCj",defaultMessage:"Try again"})}}})),define("dropbox/proto/hql_events/flows/manual_file_conversion",["require","exports","tslib","protobufjs/minimal","dropbox/proto/hql_events/extensions"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.hql_events=void 0;var r,a=(n=o.__importStar(n)).Reader,s=n.Writer,i=(n.util,n.roots.default||(n.roots.default={}));t.default=i,t.hql_events=i.hql_events=((r=i.hql_events||{}).SelectConversion=(function(e){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.conversionType="",e.prototype.hqlMetadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.conversionType&&Object.hasOwnProperty.call(e,"conversionType")&&t.uint32(10).string(e.conversionType),null!=e.hqlMetadata&&Object.hasOwnProperty.call(e,"hqlMetadata")&&i.hql_events.HQLMetadata.encode(e.hqlMetadata,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new i.hql_events.SelectConversion;e.pos<o;){var r=e.uint32();switch(r>>>3){case 1:n.conversionType=e.string();break;case 2:n.hqlMetadata=i.hql_events.HQLMetadata.decode(e,e.uint32());break;default:e.skipType(7&r)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/hql_events.SelectConversion"},e})(r.SelectConversion||{}),r.SelectConversionRetry=(function(e){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.conversionType="",e.prototype.hqlMetadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.conversionType&&Object.hasOwnProperty.call(e,"conversionType")&&t.uint32(10).string(e.conversionType),null!=e.hqlMetadata&&Object.hasOwnProperty.call(e,"hqlMetadata")&&i.hql_events.HQLMetadata.encode(e.hqlMetadata,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new i.hql_events.SelectConversionRetry;e.pos<o;){var r=e.uint32();switch(r>>>3){case 1:n.conversionType=e.string();break;case 2:n.hqlMetadata=i.hql_events.HQLMetadata.decode(e,e.uint32());break;default:e.skipType(7&r)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/hql_events.SelectConversionRetry"},e})(r.SelectConversionRetry||{}),r.SelectConversionCloseClick=(function(e){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.conversionType="",e.prototype.hqlMetadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.conversionType&&Object.hasOwnProperty.call(e,"conversionType")&&t.uint32(10).string(e.conversionType),null!=e.hqlMetadata&&Object.hasOwnProperty.call(e,"hqlMetadata")&&i.hql_events.HQLMetadata.encode(e.hqlMetadata,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new i.hql_events.SelectConversionCloseClick;e.pos<o;){var r=e.uint32();switch(r>>>3){case 1:n.conversionType=e.string();break;case 2:n.hqlMetadata=i.hql_events.HQLMetadata.decode(e,e.uint32());break;default:e.skipType(7&r)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/hql_events.SelectConversionCloseClick"},e})(r.SelectConversionCloseClick||{}),r.SelectConversionOpenClick=(function(e){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.conversionType="",e.prototype.hqlMetadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.conversionType&&Object.hasOwnProperty.call(e,"conversionType")&&t.uint32(10).string(e.conversionType),null!=e.hqlMetadata&&Object.hasOwnProperty.call(e,"hqlMetadata")&&i.hql_events.HQLMetadata.encode(e.hqlMetadata,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new i.hql_events.SelectConversionOpenClick;e.pos<o;){var r=e.uint32();switch(r>>>3){case 1:n.conversionType=e.string();break;case 2:n.hqlMetadata=i.hql_events.HQLMetadata.decode(e,e.uint32());break;default:e.skipType(7&r)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/hql_events.SelectConversionOpenClick"},e})(r.SelectConversionOpenClick||{}),r)})),define("modules/clean/react/file_viewer/file_conversion/convert_to_pdf_button",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","modules/core/i18n","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/flows/conversions/actions/convert_to_pdf"],(function(e,t,o,n,r,a,s,i,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertToPdfButton=void 0,n=o.__importStar(n),t.ConvertToPdfButton=function(e){var t=e.file,d=e.user,f=e.shareToken,_=n.useState(!1),p=_[0],g=_[1];return n.default.createElement(r.Button,{style:{margin:"12px 25px"},variant:"opacity",size:"large",onClick:function(){return o.__awaiter(void 0,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return g(!0),l.logUserAction(c.UserAction.ConvertToPdf,c.UserActionContext.PreviewContentMain),[4,u.ConvertToPdfAction.convert([t],d,{shareToken:f})];case 1:return e.sent(),g(!1),[2]}}))}))},disabled:p,withIconLeft:n.default.createElement(a.UIIcon,{src:s.FileLine})},i.intl.formatMessage({id:"Xlc8yC",defaultMessage:"Save as PDF"}))}})),define("modules/clean/react/file_viewer/file_conversion/save_as_button",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","modules/clean/react/flows/conversions/conversion_actions","modules/core/i18n","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants"],(function(e,t,o,n,r,a,s,i,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveAsButton=void 0,n=o.__importDefault(n),t.SaveAsButton=function(e){var t=e.file,f=e.user,_=e.shareToken,p=e.experiments,g=l.getConversionActionsForFiles([t],p);return 0===g.length?null:n.default.createElement(i.Menu.Wrapper,null,(function(e){var l=e.getTriggerProps,p=e.getContentProps;return n.default.createElement(n.default.Fragment,null,n.default.createElement(r.Button,o.__assign({className:"flows_save_as_button",style:{margin:"12px 25px"},variant:"opacity",withIconLeft:n.default.createElement(a.UIIcon,{src:s.AddFileLine}),withDropdownIcon:!0},l()),c.intl.formatMessage({id:"GAZsDK",defaultMessage:"Save as..."})),n.default.createElement(i.Menu.Content,o.__assign({},p()),n.default.createElement(i.Menu.Segment,null,g.map((function(e){return n.default.createElement(i.Menu.ActionItem,{key:e.actionText,onClick:function(){u.logUserAction(d.UserAction.ConvertFile,d.UserActionContext.PreviewContentMain,{action:e.actionText}),e.convert([t],f,{shareToken:_,source:"preview"})}},n.default.createElement("div",{style:{display:"flex"}},n.default.createElement(a.UIIcon,{src:e.actionIcon}),e.actionText))})))))}))}})),define("modules/clean/react/file_viewer/file_conversion/unzip_button",["require","exports","tslib","react","dig-components/buttons","modules/core/i18n","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/flows/conversions/actions/unzip"],(function(e,t,o,n,r,a,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnzipButton=void 0,n=o.__importStar(n),t.UnzipButton=function(e){var t=e.file,c=e.user,u=e.shareToken,d=n.useState(!1),f=d[0],_=d[1];return n.default.createElement(r.Button,{className:"decompress-button",variant:"outline",onClick:function(){return o.__awaiter(void 0,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return _(!0),s.logUserAction(i.UserAction.DecompressFile,i.UserActionContext.PreviewContentMain),[4,l.UnzipAction.convert([t],c,{shareToken:u,source:"preview"})];case 1:return e.sent(),_(!1),[2]}}))}))},disabled:f},a.intl.formatMessage({id:"rFpkYN",defaultMessage:"Extract all"}))}})),define("modules/clean/react/file_viewer/file_conversion/utils",["require","exports","tslib","react","modules/clean/file_store/utils","modules/constants/file_viewer","modules/clean/react/file_viewer/file_conversion/save_as_button","modules/clean/react/file_viewer/file_conversion/convert_to_pdf_button","modules/clean/react/flows/conversions/utils","modules/clean/react/flows/conversions/actions/unzip","modules/clean/react/flows/conversions/actions/convert_to_pdf","modules/clean/react/file_viewer/file_conversion/unzip_button"],(function(e,t,o,n,r,a,s,i,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConversionsForPreview=t.isManualAudioConversionEnabled=t.isManualVideoGifEnabled=t.isManualVideoRemuxingEnabled=t.isManualFileConversionEnabled=t.isManualPdfConversionEnabled=void 0,n=o.__importDefault(n),t.isManualPdfConversionEnabled=function(e){return!!(e&&a.MANUAL_PDF_CONVERSION_BY_USER_ID&&a.MANUAL_PDF_CONVERSION_BY_USER_ID[e.id])},t.isManualFileConversionEnabled=function(e){return!!(e&&a.MANUAL_FILE_CONVERSION_BY_USER_ID&&a.MANUAL_FILE_CONVERSION_BY_USER_ID[e.id])},t.isManualVideoRemuxingEnabled=function(e){return!!(e&&a.MANUAL_VIDEO_REMUX_BY_USER_ID&&a.MANUAL_VIDEO_REMUX_BY_USER_ID[e.id])},t.isManualVideoGifEnabled=function(e){return!!(e&&a.MANUAL_VIDEO_GIF_BY_USER_ID&&a.MANUAL_VIDEO_GIF_BY_USER_ID[e.id])},t.isManualAudioConversionEnabled=function(e){return!!(e&&a.MANUAL_AUDIO_CONVERSION_BY_USER_ID&&a.MANUAL_AUDIO_CONVERSION_BY_USER_ID[e.id])},t.getConversionsForPreview=function(e,o,a,f){if(!o||r.isArchiveFile(e)||!l.canConvertFile(e,f)||""===window.location.search||-1!==window.location.search.indexOf("xframed=1"))return null;if(c.UnzipAction.selector([e]))return n.default.createElement("div",null,n.default.createElement(d.UnzipButton,{user:o,file:e,shareToken:a}));if(t.isManualFileConversionEnabled(o)){var _={expFlowsManualVideoRemuxUi:t.isManualVideoRemuxingEnabled(o),expFlowsManualVideoGifUi:t.isManualVideoGifEnabled(o)};return n.default.createElement("div",null,n.default.createElement(s.SaveAsButton,{user:o,file:e,shareToken:a,experiments:_}))}return t.isManualPdfConversionEnabled(o)&&u.canConvertToPdfExcludingImages(e)?n.default.createElement("div",null,n.default.createElement(i.ConvertToPdfButton,{user:o,file:e,shareToken:a})):null}})),define("modules/clean/logging/hive/schemas/web-app_actions_telemetry",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppActionsTelemetryRow=void 0;var o=function(e){this.category="web-app_actions_telemetry",this.user_id=null,this.session_id=null,this.request_id=null,this.url=null,this.telemetry_session_id=e.telemetry_session_id,this.event_name=e.event_name,this.event_start_ts=e.event_start_ts,this.event_extras=e.event_extras,Object.seal(this)};t.AppActionsTelemetryRow=o})),define("modules/clean/react/app_actions/telemetry_client",["require","exports","tslib","modules/clean/logging/telemetry","modules/clean/logging/hive/schemas/web-app_actions_telemetry"],(function(e,t,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPiiSafeExtension=t.createTelemetryClient=t.TelemetryClient=t.Session=void 0,n=o.__importStar(n);var a=(function(){function e(t,o){this.logger=t,this.context=o,this.sessionId=e.generateRandomId()}return e.generateRandomId=function(){return Math.random().toString(36).substring(2)},e.getCurrentTimestamp=function(){return(new Date).getTime()},e.prototype.event=function(t,n){var a=e.getCurrentTimestamp(),s=o.__assign(o.__assign({},this.context),n),i=new r.AppActionsTelemetryRow({telemetry_session_id:this.sessionId,event_name:t,event_start_ts:a,event_extras:JSON.stringify(s)});this.logger.log(i)},e})();t.Session=a;var s=(function(){function e(e,t){this.logger=e,this.context=t||{}}return e.prototype.session=function(e){var t=o.__assign(o.__assign({},this.context),e);return new a(this.logger,t)},e})();t.TelemetryClient=s;var i=new n.HiveLogger;t.createTelemetryClient=function(e){return new s(i,e)};var l=(function(e){for(var t={},o=0,n=e;o<n.length;o++){t[n[o]]=!0}return t})(["",".doc",".docx",".pdf",".dwg",".png",".jpg",".jpeg",".tiff",".m4v",".wmv",".mpg",".pptx",".xlsx",".pages",".numbers",".key"]);t.getPiiSafeExtension=function(e){return l[e]?e:"__REDACTED__"}})),define("modules/clean/react/flows/conversions/actions/media_remux",["require","exports","tslib","modules/core/i18n","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","dig-components/icons/src"],(function(e,t,o,n,r,a,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConversionStrings=t.MediaRemuxActions=t.SUPPORTED_AUDIO_OUTPUT_CONTAINERS=t.SUPPORTED_AUDIO_INPUT_EXTENSIONS=t.SUPPORTED_VIDEO_OUTPUT_CONTAINERS=t.SUPPORTED_VIDEO_INPUT_EXTENSIONS=void 0,t.SUPPORTED_VIDEO_INPUT_EXTENSIONS=["mov","mp4","avi","mkv","mpeg"],t.SUPPORTED_VIDEO_OUTPUT_CONTAINERS=["mp4","mov"],t.SUPPORTED_AUDIO_INPUT_EXTENSIONS=["aac","aif","aiff","flac","m4a","m4r","mp3","oga","ogg","wav","wma"],t.SUPPORTED_AUDIO_OUTPUT_CONTAINERS=["mp3","wav","m4a"];var l=function(e){return function(t,n,i){var l=i.shareToken;return r.convertFileAndShowSnackbar({file:t[0],user:n,shareToken:l,conversionType:"media_remux",loggingFunctions:s.getConversionLoggingFunctions("media_remux"),getStrings:function(t){return d(e.toUpperCase(),t)},conversionFn:function(t,n,r){return o.__awaiter(void 0,void 0,void 0,(function(){return o.__generator(this,(function(o){switch(o.label){case 0:return[4,a.mediaRemux(n.id,s.getFileIdentifier(t,r),e)];case 1:return[2,o.sent().path]}}))}))}})}},c=t.SUPPORTED_VIDEO_OUTPUT_CONTAINERS.map((function(e){return{actionText:e.toUpperCase(),actionIcon:i.VideoLine,selector:function(o,n){var r=s.singleFileWithExtensionSelector(t.SUPPORTED_VIDEO_INPUT_EXTENSIONS.filter((function(t){return t!==e}))),a=!!n&&n.expFlowsManualVideoRemuxUi;return r(o)&&a},convert:l(e)}})),u=t.SUPPORTED_AUDIO_OUTPUT_CONTAINERS.map((function(e){return{actionText:e.toUpperCase(),actionIcon:i.SoundOnLine,selector:function(o,n){var r=s.singleFileWithExtensionSelector(t.SUPPORTED_AUDIO_INPUT_EXTENSIONS.filter((function(t){return t!==e}))),a=!!n&&n.expFlowsAudioConversionUi;return r(o)&&!!a},convert:l(e)}}));function d(e,t){var r=s.getDefaultConversionStrings(e,t);return o.__assign(o.__assign({},r),{failTooLarge:n.intl.formatMessage({id:"D67i/e",defaultMessage:"Couldn't save as {fileType} because the file is too large. The maximum file size is {maxSize} MB."},{fileType:e,maxSize:512})})}t.MediaRemuxActions=o.__spreadArrays(c,u),t.getConversionStrings=d})),define("modules/clean/react/flows/conversions/actions/convert_video_to_gif",["require","exports","modules/clean/react/flows/conversions/utils","dig-components/icons/src","modules/clean/react/flows/conversions/modals"],(function(e,t,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertVideoToGifAction=void 0;var a=["mov","mp4","avi","mkv","mpeg"];t.ConvertVideoToGifAction={actionText:"GIF",actionIcon:n.VideoLine,selector:function(e,t){var n=o.singleFileWithExtensionSelector(a),r=!!t&&t.expFlowsManualVideoGifUi;return n(e)&&r},convert:function(e,t,o){var n=o.shareToken;return r.asyncLaunchVideoToGifSettingsModal(e[0],t,n),Promise.resolve()}}})),define("modules/clean/react/flows/conversions/modals",["require","exports","tslib","react","modules/clean/react/components/modal","react-redux","modules/clean/react/browse/data/store","react-intl","modules/core/i18n"],(function(e,t,o,n,r,a,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncLaunchVideoToGifSettingsModal=void 0,n=o.__importDefault(n),t.asyncLaunchVideoToGifSettingsModal=function(t,c,u){new Promise((function(t,o){e(["modules/clean/react/flows/components/modals/video_to_gif_settings_modal"],t,o)})).then(o.__importStar).then((function(e){var o=e.StatefulVideoToGifSettingsModal;r.Modal.showInstance(n.default.createElement(a.Provider,{store:s.getStoreForBrowse()},n.default.createElement(i.RawIntlProvider,{value:l.intl},n.default.createElement(o,{file:t,user:c,shareToken:u}))))}))}})),define("modules/clean/react/flows/lib/api",["require","exports","api_v2/user_client","modules/clean/active_user"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.undoActions=t.getBoltData=t.getFolderMetadata=t.getUserAutomations=t.getFolderRulesConfig=t.removeFolderRules=t.updateFolderRules=t.getFeedbackStatus=t.logFreeformFeedback=t.createFolder=t.getFolderRulesBatch=t.moveFile=t.setupFolderRules=t.getFolderRules=t.deleteFolderRules=void 0,t.deleteFolderRules=function(e){var t={delete_arg:{".tag":"delete_folder_rule_arg",folder_fq_path:e}};return(new o.UserApiV2Client).ns("flows").rpc("delete_rule",t,{subjectUserId:n.mustGetActiveUserId()})},t.getFolderRules=function(e){var t={get_rule_arg:{".tag":"get_folder_rule_arg",folder_fq_path:e}};return(new o.UserApiV2Client).ns("flows").rpc("get_rule",t,{subjectUserId:n.mustGetActiveUserId()})},t.setupFolderRules=function(e,t){var r={setup_rule_arg:{".tag":"setup_folder_rule_arg",folder_fq_path:e,rule_set:t}};return(new o.UserApiV2Client).ns("flows").rpc("setup_rule",r,{subjectUserId:n.mustGetActiveUserId()})},t.moveFile=function(e,t){var r={from_path:e,to_path:t};return(new o.UserApiV2Client).ns("files").rpc("move_v2",r,{subjectUserId:n.mustGetActiveUserId()})},t.getFolderRulesBatch=function(e){var t={get_rule_batch_arg:{".tag":"get_folder_rule_batch_arg",folder_fq_paths:e}};return(new o.UserApiV2Client).ns("flows").rpc("get_rule_batch",t,{subjectUserId:n.mustGetActiveUserId()})},t.createFolder=function(e){var t={path:e};return(new o.UserApiV2Client).ns("files").rpc("create_folder_v2",t,{subjectUserId:n.mustGetActiveUserId()})},t.logFreeformFeedback=function(e,t,r){var a={log_feedback_arg:{".tag":"log_freeform_feedback_arg",freeform_feedback:e,folder_fq_path:t,feedback_source:r}};return(new o.UserApiV2Client).ns("flows").rpc("log_feedback",a,{subjectUserId:n.mustGetActiveUserId()})},t.getFeedbackStatus=function(e){var t={get_feedback_status_arg:{".tag":"get_freeform_feedback_status_arg",feedback_source:e}};return(new o.UserApiV2Client).ns("flows").rpc("get_feedback_status",t,{subjectUserId:n.mustGetActiveUserId()})},t.updateFolderRules=function(e,t,r){var a={update_rules_arg:{".tag":"update_folder_rules_arg",folder_fq_path:e,rule_set:t,apply_to_existing_files:r}};return(new o.UserApiV2Client).ns("flows").rpc("update_rules",a,{subjectUserId:n.mustGetActiveUserId()})},t.removeFolderRules=function(e,t){var r={remove_rules_arg:{".tag":"remove_folder_rules_arg",folder_fq_path:e,rule_set:t}};return(new o.UserApiV2Client).ns("flows").rpc("remove_rules",r,{subjectUserId:n.mustGetActiveUserId()})},t.getFolderRulesConfig=function(){return(new o.UserApiV2Client).ns("flows").rpc("get_folder_rules_config",void 0,{subjectUserId:n.mustGetActiveUserId()})},t.getUserAutomations=function(){return(new o.UserApiV2Client).ns("flows").rpc("get_user_automations",{folder_limit:1e3},{subjectUserId:n.mustGetActiveUserId()})},t.getFolderMetadata=function(e){var t={path:e};return(new o.UserApiV2Client).ns("files").rpc("get_metadata",t,{subjectUserId:n.mustGetActiveUserId()})},t.getBoltData=function(){return(new o.UserApiV2Client).ns("flows").rpc("get_bolt_data",void 0,{subjectUserId:n.mustGetActiveUserId()})},t.undoActions=function(e,t){var r={creates:e,moves:t};return(new o.UserApiV2Client).ns("flows").rpc("undo_actions",r,{subjectUserId:n.mustGetActiveUserId()})}})),define("modules/clean/react/flows/redux/actions",["require","exports","tslib","modules/clean/react/flows/redux/types","modules/clean/react/flows/redux/helpers","modules/clean/react/flows/lib/api"],(function(e,t,o,n,r,a){"use strict";function s(e){return{type:n.Actions.SetFolderRulesConfig,payload:e}}function i(e){return{type:n.Actions.SetUserAutomations,payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setAutoFolderOnboarding=t.removeUserAutomation=t.editUserAutomation=t.addUserAutomation=t.getUserAutomations=t.setUserAutomations=t.getFolderRulesConfig=t.setFolderRulesConfig=void 0,a=o.__importStar(a),t.setFolderRulesConfig=s,t.getFolderRulesConfig=function(){var e=this;return function(t){return o.__awaiter(e,void 0,void 0,(function(){var e,n,r,i,l,c;return o.__generator(this,(function(o){switch(o.label){case 0:t(s({status:"pending"})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.getFolderRulesConfig()];case 2:return e=o.sent(),n=(null===(l=e.folder_rules_config)||void 0===l?void 0:l.actions)||[],r=(null===(c=e.folder_rules_config)||void 0===c?void 0:c.action_experiments)||[],t(s({status:"completed",data:n,hasDashboardAccess:Boolean(e.exp_flows_dashboard_ui),newApplyToExistingFiles:e.new_apply_to_existing_files,actionExperiments:r})),[3,4];case 3:return i=o.sent(),t(s({status:"errored",error:i.message})),[3,4];case 4:return[2]}}))}))}},t.setUserAutomations=i,t.getUserAutomations=function(){var e=this;return function(t){return o.__awaiter(e,void 0,void 0,(function(){var e,n,s;return o.__generator(this,(function(l){switch(l.label){case 0:t(i({status:"pending"})),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,a.getUserAutomations()];case 2:return e=l.sent(),n=(function(e){var t,n,a,s,i=[];if(e.folder_rule_results)for(var l=0,c=e.folder_rule_results;l<c.length;l++){var u=c[l];if(!u.err&&(null===(t=u.folder_rule_set)||void 0===t?void 0:t.rules)&&(null===(n=u.folder_rule_set)||void 0===n?void 0:n.rules.length)>0){var d=null===(a=u.folder_rule_set)||void 0===a?void 0:a.rules[0],f=null===(s=d.action)||void 0===s?void 0:s.action;if(!f)continue;var _=f[".tag"],p=o.__rest(f,[".tag"]);"other"!==_&&u.fq_path&&i.push({action:_,actionArgs:p,fqPath:u.fq_path,isActive:d.enabled||!1,nsId:u.ns_id})}}return i.sort(r.compareAutomation),i})(e),t(i({status:"completed",data:n})),[3,4];case 3:return s=l.sent(),t(i({status:"errored",error:s.message})),[3,4];case 4:return[2]}}))}))}},t.addUserAutomation=function(e){return{type:n.Actions.AddUserAutomation,payload:e}},t.editUserAutomation=function(e){return{type:n.Actions.EditUserAutomation,payload:e}},t.removeUserAutomation=function(e){return{type:n.Actions.RemoveUserAutomation,payload:{fqPath:e}}},t.setAutoFolderOnboarding=function(e){return{type:n.Actions.SetAutoFolderOnboarding,payload:e}}})),define("modules/clean/react/flows/redux/helpers",["require","exports","tslib","modules/clean/filepath/filepath"],(function(e,t,o,n){"use strict";function r(e,t){return e.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase())}function a(e,t){var o=(function(e,t){return n.filename(e.fqPath).toLocaleLowerCase().localeCompare(n.filename(t.fqPath).toLocaleLowerCase())})(e,t);return 0!==o?o:r(e.fqPath,t.fqPath)}Object.defineProperty(t,"__esModule",{value:!0}),t.insertAutomation=t.compareAutomation=t.compareFqPath=void 0,t.compareFqPath=r,t.compareAutomation=a,t.insertAutomation=function(e,t){for(var n=[],s=!1,i=0,l=e;i<l.length;i++){var c=l[i];!s&&a(t,c)<0&&(n.push(o.__assign({},t)),s=!0),0!==r(t.fqPath,c.fqPath)&&n.push(o.__assign({},c))}return s||n.push(o.__assign({},t)),n}})),define("modules/clean/react/flows/redux/reducer",["require","exports","tslib","modules/clean/react/flows/redux/types","modules/clean/react/flows/redux/helpers"],(function(e,t,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutomationsReducer=t.defaultAutomationsState=void 0,t.defaultAutomationsState={folderRulesConfig:{status:"initial"},userAutomations:{status:"initial"},autoFolderOnboarding:void 0},t.AutomationsReducer=function(e,a){switch(void 0===e&&(e=t.defaultAutomationsState),a.type){case n.Actions.SetFolderRulesConfig:return o.__assign(o.__assign({},e),{folderRulesConfig:a.payload});case n.Actions.SetUserAutomations:return o.__assign(o.__assign({},e),{userAutomations:a.payload});case n.Actions.SetAutoFolderOnboarding:return o.__assign(o.__assign({},e),{autoFolderOnboarding:a.payload});case n.Actions.AddUserAutomation:if(!(l="completed"===e.userAutomations.status?e.userAutomations.data:void 0))return e;var s=r.insertAutomation(l,a.payload);return o.__assign(o.__assign({},e),{userAutomations:{status:"completed",data:s}});case n.Actions.EditUserAutomation:if(!(l="completed"===e.userAutomations.status?e.userAutomations.data:void 0))return e;var i=a.payload;s=l.map((function(e){return 0===r.compareFqPath(e.fqPath,i.fqPath)?o.__assign(o.__assign({},e),i):e}));return o.__assign(o.__assign({},e),{userAutomations:{status:"completed",data:s}});case n.Actions.RemoveUserAutomation:var l;if(!(l="completed"===e.userAutomations.status?e.userAutomations.data:void 0))return e;var c=a.payload;s=l.filter((function(e){return 0!==r.compareFqPath(c.fqPath,e.fqPath)}));return o.__assign(o.__assign({},e),{userAutomations:{status:"completed",data:s}});default:return e}}})),define("modules/clean/react/flows/redux/store",["require","exports","tslib","lodash","modules/clean/redux/namespaces","modules/clean/redux/store","modules/clean/react/flows/redux/reducer","modules/clean/tagging/data/store"],(function(e,t,o,n,r,a,s,i){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForAutomations=void 0,n=o.__importStar(n);var c=((l={})[r.AUTOMATIONS_NAMESPACE_KEY]=s.AutomationsReducer,l);t.getStoreForAutomations=n.once((function(){var e=a.getStoreAndRegisterReducers(c);return i.getStoreForTagging(),e}))})),define("modules/clean/react/flows/redux/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,(function(e){e.GetFolderRulesConfig="AUTOMATIONS/GET_FOLDER_RULES_CONFIG",e.SetFolderRulesConfig="AUTOMATIONS/SET_FOLDER_RULES_CONFIG",e.GetUserAutomations="AUTOMATIONS/GET_USER_AUTOMATIONS",e.SetUserAutomations="AUTOMATIONS/SET_USER_AUTOMATIONS",e.SetAutoFolderOnboarding="AUTOMATIONS/SetAutoFolderOnboarding",e.AddUserAutomation="AUTOMATIONS/ADD_USER_AUTOMATION",e.EditUserAutomation="AUTOMATIONS/EDIT_USER_AUTOMATION",e.RemoveUserAutomation="AUTOMATIONS/REMOVE_USER_AUTOMATION"})(t.Actions||(t.Actions={}))})),define("modules/clean/react/flows/utils/modal_utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateModalSessionId=void 0,t.generateModalSessionId=function(){return(new Date).getTime().toString()+Math.random().toString(36).substring(2)}}));
//# sourceMappingURL=pkg-flows.min.js-vflVhVZUU.map