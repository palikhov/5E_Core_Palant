define(["require","exports","file-viewer/core/data/actions","file-viewer/preview_archive/constants","file-viewer/preview_archive/utils"],(function(e,r,t,i,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.middleware=void 0,r.middleware=function(e){return function(r){var n=r.dispatch;return function(r){return function(u){if("@@previews/updateArchiveFileCurrentPath"===u.type)u.payload.fromUrlChanged||e.setQueryStringParameter(i.ArchiveSubpathQueryStringKey,a.archiveCurrentPathToQueryStringValue(u.payload.currentPath));else{if("@@previews/setupArchiveFileCurrentPath"===u.type){var p=(function(e,r,n){return function(u,p){u===i.ArchiveSubpathQueryStringKey&&n(t.updateArchiveFileCurrentPath({currentPath:a.queryStringValueToArchiveCurrentPath(p),fileViewerId:e,previewKey:r,fromUrlChanged:!0}))}})(u.payload.fileViewerId,u.payload.previewKey,n);e.onQueryStringParameterChange(i.ArchiveSubpathQueryStringKey,p);var l=e.getQueryStringParameter(i.ArchiveSubpathQueryStringKey);return r(t.updateArchiveFileCurrentPath({currentPath:a.queryStringValueToArchiveCurrentPath(l),fileViewerId:u.payload.fileViewerId,previewKey:u.payload.previewKey}))}"@@previews/openFileURL"===u.type?e.openFile(u.payload.fqPath):"@@previews/closeViewer"===u.type?e.setQueryStringParameter(i.ArchiveSubpathQueryStringKey,null):"@@previews/redirect"===u.type&&e.redirect(u.payload.href,u.payload.newTab)}return r(u)}}}}}));
//# sourceMappingURL=url.min.js-vflykjxiH.map