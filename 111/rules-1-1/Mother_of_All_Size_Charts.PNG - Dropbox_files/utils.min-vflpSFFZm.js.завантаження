define(["require","exports","tslib","react-intl","react","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","file-viewer/plugins/types"],(function(e,n,t,r,o,a,l,i,u,s,c){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getRootName=n.extractToolbarComponentsFromPlugins=n.extractTitlebarComponentsFromPlugins=n.extractActionsFromPlugins=void 0,o=t.__importStar(o);var f=function(e){return{actionType:s.ActionBarActionTypes.ADD_CONTENT,text:r.defineMessage({id:"C2s323",defaultMessage:"Blank"}),icon:o.default.createElement("div",null),isEnabled:!0,renderButton:e.renderButton,overflowItem:e.overflowItem}},d=function(e,n){var r=c.parseActionBarPluginInstance(n);if(null==r)return e;var o=r.actionDefinitions,a=o.alwaysAtTopLevel,l=o.atTopLevelIfSpace,i=o.alwaysInOverflow,u=function(e,n){return void 0===e&&(e=[]),void 0===n&&(n=[]),t.__spreadArrays(e,n)};return{alwaysAtTopLevel:u(e.alwaysAtTopLevel,null==a?void 0:a.map(f)),atTopLevelIfSpace:u(e.atTopLevelIfSpace,null==l?void 0:l.map(f)),alwaysInOverflow:(function(e,n){var r,o;void 0===e&&(e=[]),void 0===n&&(n=[]);for(var a=[],l=0;l<e.length||l<n.length;l++)a[l]=t.__spreadArrays(null!==(r=e[l])&&void 0!==r?r:[],null!==(o=n[l])&&void 0!==o?o:[]);return a})(e.alwaysInOverflow,null==i?void 0:i.map((function(e){return e.map(f)})))}},v=function(e,n){var r,o=c.parseTitleBarPluginInstance(n);if(null==o)return e;var a=o.identifier,l=o.titleBarUI;return t.__assign(t.__assign({},e),((r={})[a]=l,r))},p=function(e,n){var r,o=c.parseToolbarPluginInstance(n);return o?t.__assign(t.__assign({},e),((r={})[o.identifier]=o.toolbarUI,r)):e},m={workflows:r.defineMessage({id:"6BWuNX",defaultMessage:"Workflows"})},g={workflows:u.MemberTransferLine},w=function(e){var n=e.category,t=e.children,u=e.hideIcons,s=r.useIntl(),c=m[n],f=g[n],d=o.useCallback((function(e){null==e||e.handler()}),[]);return o.default.createElement(a.Menu.Wrapper,{onSelection:d},(function(e){var r=e.getTriggerProps,d=e.getContentProps;return o.default.createElement(o.default.Fragment,null,o.default.createElement(l.Button,Object.assign({},r(),{variant:"opacity",withIconLeft:u?null:o.default.createElement(i.UIIcon,{src:f}),withDropdownIcon:!0,className:n+"-menu-button"}),s.formatMessage(c)),o.default.createElement(a.Menu.Content,Object.assign({},d()),o.default.createElement(a.Menu.Segment,null,t)))}))},I=function(e){var n=e.category,t=e.children,l=r.useIntl(),u=m[n],s=g[n];return o.default.createElement(a.Menu.Submenu,{withTriggerContent:l.formatMessage(u),withLeftAccessory:o.default.createElement(i.UIIcon,{src:s})},o.default.createElement(a.Menu.Segment,null,t))},_=function(e,n,r){var a,l,i,u,s,c=[];if(e.workflows&&e.workflows.length>0){var d=(function(e,n){var t=n.map((function(e){var n;return null!==(n=e.overflowItem)&&void 0!==n?n:null})).filter((function(e){return null!==e}));if(0!==t.length){var r=o.default.createElement(I,{category:e},t);return f({renderButton:function(n){return o.default.createElement(w,{category:e,hideIcons:n},t)},overflowItem:r})}})("workflows",e.workflows);void 0!==d&&c.push(d)}var v=n.map(f),p=(null!==(a=r.atTopLevelIfSpace)&&void 0!==a?a:[]).length,m=null!==(u=null===(i=null!==(l=r.alwaysInOverflow)&&void 0!==l?l:[])||void 0===i?void 0:i[0])&&void 0!==u?u:[],g=m.slice(0,p),_=m.slice(p),y=t.__spreadArrays(g,v,c,_);return t.__assign(t.__assign({},r),{atTopLevelIfSpace:t.__spreadArrays(null!==(s=r.atTopLevelIfSpace)&&void 0!==s?s:[],v,c),alwaysInOverflow:[y]})},y=function(e){return e.reduce((function(e,n){return(function(e,n){var r,o,a,l=e;for(a in n){var i=null!==(r=e[a])&&void 0!==r?r:[],u=null!==(o=n[a])&&void 0!==o?o:[];l[a]=t.__spreadArrays(i,u)}return l})(e,(function(e){var n,t=c.parseActionBarPluginInstance(e);return null==t?{}:null!==(n=t.actionDefinitions.categories)&&void 0!==n?n:{}})(n))}),{})};n.extractActionsFromPlugins=function(e,n){var t=Object.values(e),r=t.reduce(d,{}),o=y(t);return _(o,n,r)},n.extractTitlebarComponentsFromPlugins=function(e){return Object.values(e).reduce(v,{})},n.extractToolbarComponentsFromPlugins=function(e){return Object.values(e).reduce(p,{})};n.getRootName=function(e){return"work"===e.role&&e.team?e.team.name:e.is_paired?"Personal":"Dropbox"}}));
//# sourceMappingURL=utils.min.js-vflMtlpBX.map