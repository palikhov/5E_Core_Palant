define(["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons","dig-components/icons/src","file-viewer/watermarking/plugin/utils/getImageFromFile"],(function(e,a,t,r,n,i,o,l,u){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.WatermarkingImageChooser=a.VALID_MIME_TYPES=void 0,r=t.__importStar(r),n=t.__importDefault(n);var m="watermarking-image-chooser__2rppSwLWvv__watermarking_plugin",d="watermarking-add-image-button__ILC68HbSds__watermarking_plugin",g="watermarking-drop-zone__vlZ3_8-bLS__watermarking_plugin",s="watermarking-drop-zone-active__3ou7A3V6gE__watermarking_plugin",c="watermarking-drop-zone-text__Cioub5hO4O__watermarking_plugin",_="watermarking-image-chooser-preview__1LDe1NJ9oD__watermarking_plugin";a.VALID_MIME_TYPES=["image/png","image/jpeg","image/jpg","image/gif","image/bmp"],a.WatermarkingImageChooser=function(e){var f,v=e.image,p=e.onImageChange,E=e.intl,k=r.useRef(null),w=r.useState(!1),I=w[0],M=w[1],L=r.useCallback((function(e){var a=e.image;p(a)}),[p]);return r.useEffect((function(){var e=function(e){e.preventDefault(),M(!0)},r=function(e){e.preventDefault(),M(!1)},n=function(e){return t.__awaiter(void 0,void 0,void 0,(function(){var r,n,i,o;return t.__generator(this,(function(t){switch(t.label){case 0:return e.preventDefault(),M(!1),(n=null===(r=null==e?void 0:e.dataTransfer)||void 0===r?void 0:r.files[0])?a.VALID_MIME_TYPES.includes(n.type)?(i=L,o={},[4,u.getImageFromFile(n)]):[2]:[2];case 1:return i.apply(void 0,[(o.image=t.sent(),o.filename=n.name,o.source="dragdrop",o)]),[2]}}))}))};return document.addEventListener("dragover",e),document.addEventListener("dragleave",r),document.addEventListener("drop",n),function(){document.removeEventListener("dragover",e),document.removeEventListener("dragleave",r),document.removeEventListener("drop",n)}}),[L]),r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:n.default(g,(f={},f[s]=I,f))},I&&r.default.createElement("p",{className:c},E.formatMessage({id:"m5kdkX",defaultMessage:"Drop image here"}))),r.default.createElement("div",{className:m,onClick:function(){var e;null===(e=null==k?void 0:k.current)||void 0===e||e.click()}},v?r.default.createElement("img",{className:_,src:v.src,alt:E.formatMessage({id:"xX2p4m",defaultMessage:"Preview of image watermark option"})}):r.default.createElement(r.default.Fragment,null,r.default.createElement(i.IconButton,{className:d,variant:"outline",inverse:!0},r.default.createElement(o.UIIcon,{src:l.AddLine})),E.formatMessage({id:"m5kdkX",defaultMessage:"Drop image here"})),r.default.createElement("input",{id:"watermarking-image-input",ref:k,accept:a.VALID_MIME_TYPES.join(", "),type:"file",onChange:function(e){return t.__awaiter(void 0,void 0,void 0,(function(){var r,n,i;return t.__generator(this,(function(t){switch(t.label){case 0:return e.currentTarget.files?(r=Array.from(e.currentTarget.files).pop())&&a.VALID_MIME_TYPES.includes(r.type)?(n=L,i={},[4,u.getImageFromFile(r)]):[2]:[3,2];case 1:n.apply(void 0,[(i.image=t.sent(),i.filename=r.name,i.source="computer",i)]),t.label=2;case 2:return[2]}}))}))},hidden:!0})))}}));
//# sourceMappingURL=watermarking_image_chooser.min.js-vfl4wy9l5.map