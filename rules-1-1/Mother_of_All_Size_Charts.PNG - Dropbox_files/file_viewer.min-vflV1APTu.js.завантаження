define(["require","exports","tslib","react","react-redux","api_v2/default_user_client","api_v2/noauth_client","modules/clean/file_store/utils","modules/clean/react/components/css","modules/clean/react/extensions/data/selectors","modules/clean/react/extensions/data/helpers","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/data/selectors","modules/clean/react/file_viewer/data/store","modules/clean/react/file_viewer/exp_file_viewer_upsell_banner","modules/clean/react/file_viewer/utils","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/copy_plugin","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/download_plugin","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/starred_plugin","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/move_plugin","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/delete_plugin","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/rename_plugin","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/restore_plugin","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/open_dropdown_plugin","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/open_in_desktop_plugin","modules/clean/react/file_viewer/sdk_file_viewer/comments","modules/clean/integrations/hellosign_deep_integration/send_file_viewer_plugin","modules/clean/react/flows/conversions/conversion_plugin","modules/clean/react/file_viewer/sdk_file_viewer/file_system","modules/clean/react/file_viewer/sdk_file_viewer/full_screen","modules/clean/react/file_viewer/sdk_file_viewer/print","modules/clean/react/file_viewer/sdk_file_viewer/navigation","modules/clean/react/file_viewer/sdk_file_viewer/utils","modules/clean/react/file_viewer/sdk_file_viewer/pass","modules/clean/web_timing_logger","modules/core/i18n","modules/core/browser","file-viewer/core/data/riviera/index","file-viewer/core/index","file-viewer/core/logging/index","file-viewer/public/index","modules/clean/react/file_viewer/sdk_file_viewer/url","modules/clean/react/file_viewer/sdk_file_viewer/cloud_docs","modules/clean/react/file_viewer/sdk_file_viewer/constants","file-viewer/comments2/plugin/index","file-viewer/info_blade/info_blade_plugin","modules/clean/react/pass/plugin/loader","file-viewer/info_blade/loader","modules/clean/react/file_viewer/sdk_file_viewer/preview_logger","modules/clean/react/file_viewer/sdk_file_viewer/feature_config","modules/clean/react/share_download/util","modules/clean/react/extensions/cloud_docs_compat","modules/clean/react/previews/print_helpers","file-viewer/file_activity_blade/file_activity_blade_plugin","file-viewer/file_activity_blade/loader","modules/clean/react/file_viewer/sdk_file_viewer/preferences","modules/clean/react/previews/sharing_plugin/loader","modules/clean/react/branding/branding_modal_controller","file-viewer/watermarking/edit_plugin/loader","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/unzip_plugin","modules/clean/react/file_viewer/sdk_file_viewer/upsell/upsell_dialog_manager","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/version_history_plugin","modules/clean/react/integrations/pdf_editor/plugin/loader","modules/constants/file_viewer","keymaster","modules/clean/loggers/device_type","file-viewer/watermarking/edit_plugin/plugin","modules/clean/react/file_viewer/sdk_file_viewer/toolbar_plugins/star_plugin","modules/clean/react/watermarking/utils","file-viewer/watermarking/edit_plugin/action_plugin","modules/clean/browse_uri_interface","modules/clean/react/previews/constants","modules/core/dom","modules/clean/user_survey/user_survey","modules/clean/react/file_viewer/toggle_browse_elements_util","modules/clean/react/file_viewer/sdk_file_viewer/replay_prompt/async_replay_dialog","modules/clean/react/flows/approval/api","modules/clean/sharing/ui_util","modules/clean/react/file_viewer/sdk_file_viewer/report_exception","modules/clean/react/file_viewer/sdk_file_viewer/app_download_interstitial","modules/clean/react/flows/approval/request_approval_plugin","modules/clean/react/comments2/util"],(function(e,i,r,n,t,a,l,o,s,_,c,u,d,f,v,S,w,p,I,m,P,N,D,O,g,E,C,A,R,T,k,L,h,b,U,F,K,y,V,G,x,M,B,H,W,Y,Q,q,j,z,Z,J,X,$,ee,ie,re,ne,te,ae,le,oe,se,_e,ce,ue,de,fe,ve,Se,we,pe,Ie,me,Pe,Ne,De,Oe,ge,Ee,Ce,Ae){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewer=i.UnconnectedFileViewer=void 0,n=r.__importDefault(n),U=r.__importStar(U),K=r.__importStar(K),ce=r.__importDefault(ce),Ie=r.__importStar(Ie);var Re=function(e,i,n,t,s,_,c,u,d,f,v,V,G,H,Z,J,X,ne,le){var ce,Ie,Pe,Ne,Ae,Re,Te,ke,Le,he,be,Ue,Fe,Ke,ye,Ve,Ge,xe,Me,Be,He;void 0===H&&(H=!1),void 0===Z&&(Z=!0),void 0===J&&(J=!1);var We=u?new a.DefaultUserApiV2Client(u):new l.NoAuthApiV2Client,Ye=z.getFeatureConfig(e,J,H,Z,u),Qe=function(e){return S.showAuthModal(r.__assign(r.__assign({},e),{encryptionOptions:G}))},qe=ie.makePreferencesClient(u);me.UserSurvey.addAttribute("previewPageRevamp",_e.PREVIEW_PAGE_REVAMP),me.UserSurvey.trackEvent("preview_viewed","previews"),o.isSharedFile(i().file)&&setTimeout((function(){Oe.trackReceiverUserLeapEvent(Oe.ReceiverUserLeapEvent.VIEWED_SHARED_FILE)}),5e3);var je=o.isBrowseFile(i().file)&&ve.isWatermarkingEnabled(u);switch(e){case h.SDKPreviewSurface.BROWSE:case h.SDKPreviewSurface.HOME:case h.SDKPreviewSurface.SEARCH:case h.SDKPreviewSurface.RECENTS:case h.SDKPreviewSurface.STARRED:case h.SDKPreviewSurface.STANDALONE_PREVIEW:case h.SDKPreviewSurface.PHOTOS:case h.SDKPreviewSurface.COLLECTIONS:if(!u)throw new Error("Must be logged in to browse");He={presenceBeaconIOClient:b.getPresenceBeaconIOClient(u,i),fileSystemClient:R.makeFileSystemClient(u,i,{allowCopyToDropbox:!1,shareToken:n,encryptionOptions:G,authModalKind:ne}),fullScreenClient:T.makeFullScreenClient(),printClient:k.makePrintClient(),navigationClient:L.makeBrowseNavigationClient(u,i,s,d,f,v),urlClient:M.makeUrlClient(u),preferencesClient:qe};break;case h.SDKPreviewSurface.VERSION_HISTORY:if(!u)throw Error("user required for version history");He={presenceBeaconIOClient:b.getPresenceBeaconIOClient(u,i),fileSystemClient:void 0,fullScreenClient:T.makeFullScreenClient(),printClient:k.makePrintClient(),navigationClient:L.makeVersionHistoryNavigationClient(u,i,s,d,f,v),urlClient:M.makeUrlClient(u),preferencesClient:qe};break;case h.SDKPreviewSurface.SHARED_LINK:He={fullScreenClient:T.makeFullScreenClient(),printClient:k.makePrintClient(),navigationClient:L.makeInbandShareNavigationClient(s,d,f,v,Qe),urlClient:M.makeUrlClient(u),fileSystemClient:R.makeFileSystemClient(u,i,{allowCopyToDropbox:!0,shareToken:n,encryptionOptions:G,sharePermission:t,authModalKind:ne}),presenceBeaconIOClient:u&&b.getPresenceBeaconIOClient(u,i),preferencesClient:qe};break;case h.SDKPreviewSurface.SHARED_LINK_EMBED:He={fullScreenClient:T.makeFullScreenClient(),printClient:k.makePrintClient(),urlClient:M.makeUrlClient(u),fileSystemClient:R.makeFileSystemClient(u,i,{allowCopyToDropbox:!0,shareToken:n,encryptionOptions:G,sharePermission:t,authModalKind:ne})};break;case h.SDKPreviewSurface.SHARED_CONTENT_LINK:case h.SDKPreviewSurface.INBAND_SHARE:if(!u)throw new Error("Must be logged in to view inband shared files");He={presenceBeaconIOClient:b.getPresenceBeaconIOClient(u,i),fileSystemClient:R.makeFileSystemClient(u,i,{allowCopyToDropbox:!0,shareToken:n,encryptionOptions:G,sharePermission:t,authModalKind:ne}),fullScreenClient:T.makeFullScreenClient(),printClient:k.makePrintClient(),navigationClient:L.makeInbandShareNavigationClient(s,d,f,v),urlClient:M.makeUrlClient(u),preferencesClient:qe}}var ze={logTTI:U.mark_time_to_interactive,logTTV:U.mark_time_to_view,logVideo:j.logVideo,log:j.logEvent},Ze=x.createFileViewerFactory({batteries:{intl:F.intl,coreIOClients:{apiv2ClientBase:We,rivieraIOClient:new y.WebRivieraIOClient},logger:ze,optionalIOClients:r.__assign(r.__assign({},He),{showAuthModal:Qe,cloudDocsClient:u?B.makeCloudDocsClient(u,i,n):void 0,reportExceptionClient:ge.makeReportExceptionClient()})},callbacks:{onRenderSucceeded:function(){return S.cleanupPrerenderPreview()}},initData:{accountId:u?u.account_id:void 0,deviceType:ue.getDeviceType()},featureConfig:Ye,platformConfig:{osModifierKey:"ctrlKey"}});if(Ze.registerPlugins(r.__assign(r.__assign(((ce={})[Y.INFO_BLADE_PLUGIN_ID]=q.makeInfoBladePluginLoader(u?String(u.id):void 0,V,u&&_e.APPROVAL_FLOW_BY_USER_ID[u.id]?function(e){return De.getFileApprovalStatus(u.id,e)}:void 0),ce[W.COMMENTS_PLUGIN_ID]=E.makeComments2MetaserverLoader(u),ce),u&&((Ie={})[$.FILE_ACTIVITY_PLUGIN_ID]=ee.makeFileActivityPluginLoader(u,null===(Be=He.navigationClient)||void 0===Be?void 0:Be.openVersionHistory),Ie)),je&&((Pe={})[de.WATER_MARKING_PLUGIN_ID]=te.makeWatermarkLoader(ze,(function(i){var r=i.fqPath;i.overwrite&&e===h.SDKPreviewSurface.BROWSE||(r&&u?K.replace_location(we.preview_uri_for_fq_path(u,r,{context:pe.PreviewSourceContext.Workflow})):K.reload())})),Pe))),Ze.registerPlugins(((Ne={})[Q.PASS_PLUGIN_ID]=Q.makePASSMetaserverLoader(i,e,u),Ne[re.SHARE_PLUGIN_ID]=re.makeShareMetaserverLoader(i,e,u),Ne[p.DOWNLOAD_ACTION_PLUGIN_ID]=p.makeDownloadActionLoader(i,u,n,t,G,ne),Ne[Ee.APP_DOWNLOAD_PLUGIN_ID]=Ee.makeOpenInAppPluginLoader(i,u,le),Ne)),u){var Je=O.makeOpenDropdownActionLoader(i,u,s),Xe=m.makeMoveActionLoader(i,u,null==_?void 0:_.currentFQPath,c),$e=w.makeCopyActionLoader(i,u,null==_?void 0:_.currentFQPath,c),ei=I.makeStarredActionLoader(i,u),ii=N.makeRenameActionLoader(i,u),ri=P.makeDeleteActionLoader(i,u),ni=Se.makeWaterMarkingActionPluginLoader(i),ti=g.makeOpenInDesktopActionLoader(i,u,_),ai=ae.makeUnzipActionLoader(i,u),li=oe.makeVersionHistoryActionLoader(i,u),oi=A.makeFileConversionsLoader(i,u),si=C.makeSendForSignatureLoader(i,u),_i=D.makeRestoreActionLoader(v,X),ci=fe.makeStarToolbarButtonLoader(i,u),ui=Ce.makeRequestApprovalLoader(i,u),di=se.makePdfEditorPluginLoader(i);switch(e){case h.SDKPreviewSurface.BROWSE:Ze.registerPlugins(r.__assign(r.__assign(r.__assign(((Ae={})[O.OPEN_DROPDOWN_ACTION_PLUGIN_ID]=Je,Ae[m.MOVE_ACTION_PLUGIN_ID]=Xe,Ae[w.COPY_ACTION_PLUGIN_ID]=$e,Ae[N.RENAME_ACTION_PLUGIN_ID]=ii,Ae[P.DELETE_ACTION_PLUGIN_ID]=ri,Ae),je&&((Re={})[Se.WATERMARKING_ACTION_PLUGIN_ID]=ni,Re)),S.isFvsdkPdfEditorEnabled()&&((Te={})[se.PDF_EDITOR_PLUGIN_ID]=di,Te)),((ke={})[I.STARRED_ACTION_PLUGIN_ID]=ei,ke[oe.VERSION_HISTORY_ACTION_PLUGIN_ID]=li,ke[g.OPEN_IN_DESKTOP_ACTION_PLUGIN_ID]=ti,ke[ae.UNZIP_ACTION_PLUGIN_ID]=ai,ke[A.CONVERSION_ACTION_PLUGIN_ID]=oi,ke[C.SEND_FOR_SIGNATURE_ACTION_PLUGIN_ID]=si,ke[fe.STAR_TOOLBAR_PLUGIN_ID]=ci,ke[Ce.REQUEST_APPROVAL_ACTION_PLUGIN_ID]=ui,ke)));break;case h.SDKPreviewSurface.SEARCH:Ze.registerPlugins(r.__assign(r.__assign(r.__assign(((Le={})[O.OPEN_DROPDOWN_ACTION_PLUGIN_ID]=Je,Le),je&&((he={})[Se.WATERMARKING_ACTION_PLUGIN_ID]=ni,he)),S.isFvsdkPdfEditorEnabled()&&((be={})[se.PDF_EDITOR_PLUGIN_ID]=di,be)),((Ue={})[I.STARRED_ACTION_PLUGIN_ID]=ei,Ue[oe.VERSION_HISTORY_ACTION_PLUGIN_ID]=li,Ue[ae.UNZIP_ACTION_PLUGIN_ID]=ai,Ue[A.CONVERSION_ACTION_PLUGIN_ID]=oi,Ue[C.SEND_FOR_SIGNATURE_ACTION_PLUGIN_ID]=si,Ue[fe.STAR_TOOLBAR_PLUGIN_ID]=ci,Ue[Ce.REQUEST_APPROVAL_ACTION_PLUGIN_ID]=ui,Ue)));break;case h.SDKPreviewSurface.INBAND_SHARE:case h.SDKPreviewSurface.SHARED_CONTENT_LINK:case h.SDKPreviewSurface.SHARED_LINK:case h.SDKPreviewSurface.HOME:case h.SDKPreviewSurface.RECENTS:case h.SDKPreviewSurface.STARRED:case h.SDKPreviewSurface.STANDALONE_PREVIEW:case h.SDKPreviewSurface.PHOTOS:Ze.registerPlugins(r.__assign(r.__assign(r.__assign(((Fe={})[O.OPEN_DROPDOWN_ACTION_PLUGIN_ID]=Je,Fe),je&&((Ke={})[Se.WATERMARKING_ACTION_PLUGIN_ID]=ni,Ke)),S.isFvsdkPdfEditorEnabled()&&((ye={})[se.PDF_EDITOR_PLUGIN_ID]=di,ye)),((Ve={})[I.STARRED_ACTION_PLUGIN_ID]=ei,Ve[oe.VERSION_HISTORY_ACTION_PLUGIN_ID]=li,Ve[ae.UNZIP_ACTION_PLUGIN_ID]=ai,Ve[A.CONVERSION_ACTION_PLUGIN_ID]=oi,Ve[C.SEND_FOR_SIGNATURE_ACTION_PLUGIN_ID]=si,Ve[D.RESTORE_ACTION_PLUGIN_ID]=_i,Ve[fe.STAR_TOOLBAR_PLUGIN_ID]=ci,Ve[Ce.REQUEST_APPROVAL_ACTION_PLUGIN_ID]=ui,Ve)));break;case h.SDKPreviewSurface.VERSION_HISTORY:Ze.registerPlugins(((Ge={})[D.RESTORE_ACTION_PLUGIN_ID]=_i,Ge));break;case h.SDKPreviewSurface.SHARED_LINK_EMBED:Ze.registerPlugins(((xe={})[O.OPEN_DROPDOWN_ACTION_PLUGIN_ID]=Je,xe));break;case h.SDKPreviewSurface.COLLECTIONS:Ze.registerPlugins(((Me={})[O.OPEN_DROPDOWN_ACTION_PLUGIN_ID]=Je,Me[oe.VERSION_HISTORY_ACTION_PLUGIN_ID]=li,Me[C.SEND_FOR_SIGNATURE_ACTION_PLUGIN_ID]=si,Me[Ce.REQUEST_APPROVAL_ACTION_PLUGIN_ID]=ui,Me));break;default:(function(e){throw new Error})()}}return Ze.createFileViewer()},Te=function(e,i,n,t,a,l,s,_,c,u,d,f){return r.__awaiter(void 0,void 0,void 0,(function(){var v,w;return r.__generator(this,(function(p){switch(p.label){case 0:return v=Ae.parseActiveCommentFromUrl(),w={fileInfo:{file_id:i.file_id,sj_id:i.sjid,ns_id:i.ns_id},fileMetadata:{file_id:i.file_id,file_name:o.getFilename(i),file_path:o.isBrowseFile(i)?i.fq_path:void 0,file_last_modified_date:i.ts?new Date(1e3*i.ts).toISOString():void 0,file_collection_context:{file_index:a,parent_files_count:l}},fileConfig:n,fileSize:i.bytes,supportedPreviewTypes:r.__spreadArrays(V.DEFAULT_SUPPORTED_PREVIEW_TYPES,h.INBAND_SUPPORTED_TYPES),sharedLinkInfo:_&&r.__assign(r.__assign({},_),{hasPublicAudienceOrVisibility:!!_.hasPublicAudienceOrVisibility}),sourceSession:{source_action:G.SourceAction.Visit,source_context:s,page_start_ts:performance.timing.navigationStart},pluginParams:{shouldFocusApproval:c,shouldFocusComment:u,threadId:d,commentId:v},defaultRightRailPlugin:c||u||!S.isPreviewPageRevampEnabled()||d||v?W.COMMENTS_PLUGIN_ID:Y.INFO_BLADE_PLUGIN_ID},[4,e.initialize(w)];case 1:return p.sent(),e.render(t,void 0,t,f),[2]}}))}))},ke=function(e){return e.showOverQuotaUpsell?n.default.createElement(v.ExpFileViewerUpsellBannerV2,null):null};i.UnconnectedFileViewer=function(e){var i=e.fetchShowOverQuotaUpsell,a=e.file,l=e.sharedLinkInfo,s=e.sharePermission,u=e.shareToken,d=e.brandingInfo,f=e.showOverQuotaUpsell,v=e.user,S=e.previewSurface,w=e.encryptionOptions,p=e.closeFile,I=e.flipToNextFile,m=e.flipToPreviousFile,P=e.fileIndex,N=void 0===P?0:P,D=e.fileCount,O=void 0===D?1:D,g=e.previewContentOnly,E=void 0!==g&&g,C=e.showCloudDocPreview,A=void 0===C||C,R=e.onRestoreRevision,T=e.canRestoreRevision,k=e.canShowFileFlippers,L=e.authModalKind,b=(function(e){switch(e){case h.SDKPreviewSurface.BROWSE:return G.SourceContext.Browse;case h.SDKPreviewSurface.SEARCH:return G.SourceContext.Search;case h.SDKPreviewSurface.INBAND_SHARE:case h.SDKPreviewSurface.SHARED_LINK:case h.SDKPreviewSurface.SHARED_CONTENT_LINK:return G.SourceContext.SharedLinkFile;case h.SDKPreviewSurface.SHARED_LINK_EMBED:return G.SourceContext.EmbeddedSharedLinkFile;case h.SDKPreviewSurface.VERSION_HISTORY:return G.SourceContext.VersionHistory;case h.SDKPreviewSurface.HOME:return G.SourceContext.Home;case h.SDKPreviewSurface.RECENTS:return G.SourceContext.Recents;case h.SDKPreviewSurface.STARRED:return G.SourceContext.Starred;case h.SDKPreviewSurface.STANDALONE_PREVIEW:return G.SourceContext.StandalonePreview;case h.SDKPreviewSurface.PHOTOS:return G.SourceContext.Photos;case h.SDKPreviewSurface.COLLECTIONS:return G.SourceContext.Collections}})(S),U=n.default.useState(!1),K=U[0],y=U[1],V=n.default.useRef({file:a,sharedLinkInfo:l,sharePermission:s,shareToken:u,encryptionOptions:w}),x=n.default.useCallback((function(){return V.current}),[]),M=n.default.useRef(void 0),B=t.useSelector((function(e){return _.getOpenActionsForFile(e,a)}),t.shallowEqual),W=n.default.useMemo((function(){return c.partitionActions(B).cloudEditors}),[B]),Y=n.default.useCallback((function(e){M.current=e,y(!0);for(var i=function(e){e.stopPropagation(),e.preventDefault()},r=0,n=["dragenter","dragover","dragleave","drop"];r<n.length;r++){var t=n[r];null==e||e.addEventListener(t,i)}}),[]),Q=e.previewSurface===h.SDKPreviewSurface.BROWSE?e.browseContext:void 0,q=e.previewSurface===h.SDKPreviewSurface.BROWSE?e.browseExceptions:void 0,j=e.previewSurface===h.SDKPreviewSurface.BROWSE?e.shouldFocusApproval:void 0,z=e.previewSurface===h.SDKPreviewSurface.BROWSE?e.shouldFocusComment:void 0,$="activeCommentThreadId"in e&&e.activeCommentThreadId?e.activeCommentThreadId:void 0,ee=n.default.useMemo((function(){return Re(S,x,u,s,p,Q,q,v,I,m,R,d,w,E,A,k,T,L)}),[v,S]),ie=n.default.useMemo((function(){return(function(e,i,r,n,t,a,l,s){var _=r.map((function(e){return{displayName:e.description,editorName:"cloud_editor"===e.handler[".tag"]?J.cloudEditorNameToParams(e.handler.editor_name):"",iconUrl:e.icon.url}}));if(o.isSharedFile(i)){var c=t?Z.getToDropboxOptions(t,a,i,l):[];return{cloud_open_with_buttons:_,download_button:{enable_download_button:!0,can_download:!!t&&Z.isDownloadAllowed(t),copy_targets:c.map((function(e){var i=e.text,r=e.role;return{isDisabled:e.isDisabled,role:r,text:i}}))},enable_pass:!!t&&t.canViewMetadataRoles.length>0,enable_print:X.canPrint(t),enable_share_button:!1,enable_open_button:!1,enable_restore_button:s}}return{cloud_open_with_buttons:_,download_button:{enable_download_button:!0,can_download:!0,copy_targets:[]},enable_pass:!0,enable_print:!0,enable_share_button:e!==h.SDKPreviewSurface.VERSION_HISTORY,enable_open_button:e!==h.SDKPreviewSurface.VERSION_HISTORY,enable_restore_button:s}})(S,a,W,0,s,u,w,!!T)}),[S,a,W,l,s,u,w,T]);n.default.useEffect((function(){var e=S===h.SDKPreviewSurface.VERSION_HISTORY;return r.__awaiter(void 0,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return ee&&K&&M.current?(V.current={file:a,sharedLinkInfo:l,sharePermission:s,shareToken:u,encryptionOptions:w},i=n.default.createElement(n.default.Fragment,null,n.default.createElement(ne.BrandingModalController,{brandingInfo:d,sharedLinkInfo:l,closeButtonText:F.intl.formatMessage({id:"D/tUrq",defaultMessage:"View file"})})),[4,Te(ee,a,ie,M.current,N,O,b,l,j,z,$,i)]):[3,2];case 1:r.sent(),e||Pe.hideElementsBehindFileViewer(),document.title=o.getFilename(a),r.label=2;case 2:return[2]}}))})),e?function(){return null}:Pe.showElementsBehindFileViewer}),[a,K]),n.default.useEffect((function(){i(v)}),[v]),n.default.useEffect((function(){var e=ce.default.getScope();return ce.default.setScope("fvsdk_scope"),Ie.scroll_lock_document(),function(){ee.unmount(),Ie.scroll_unlock_document(),ce.default.setScope(e)}}),[]);var re="AD_FREE"!==_e.PREVIEW_PAGE_REVAMP;return n.default.createElement("div",{className:"fvsdk-container"},n.default.createElement(ke,{showOverQuotaUpsell:f}),n.default.createElement("div",{className:H.FVSDK_MOUNT_POINT,id:H.FVSDK_MOUNT_POINT,ref:Y}),re&&n.default.createElement(le.UpsellDialogManager,{file:a,user:v}),re&&n.default.createElement(Ne.AsyncReplayDialog,{file:a,user:v}))},i.UnconnectedFileViewer.displayName="UnconnectedFileViewer",i.UnconnectedFileViewer.displayName="UnconnectedFileViewer";var Le={fetchShowOverQuotaUpsell:u.fetchShowOverQuotaUpsell},he=t.connect((function(e){return{showOverQuotaUpsell:d.getShowOverQuotaUpsell(e)}}),Le)(i.UnconnectedFileViewer);he.displayName="ConnectedFileViewer";var be=f.getStoreForFileViewer(),Ue=function(e){return n.default.createElement(t.Provider,{store:be},n.default.createElement(he,r.__assign({},e)))};Ue.displayName="FileViewerWithProvider";var Fe=s.requireCssWithComponent(Ue,["/static/js/file-viewer/index.web-vflw9uINO.css","/static/js/typescript/libraries/comments2/src/index-vflV1CLGF.css","/static/css/dig-components/index.web-vflfsfj-g.css","/static/css/preview/sdk_file_viewer-vfl_N5gnB.css","/static/js/typescript/component_libraries/files_components/src/index.web-vfleMRwk2.css","/static/js/dig-experimental/index.web-vfl_TJZKT.css","/static/js/typescript/component_libraries/retrieval-components/src/index.web-vfldw1cUu.css","/static/js/typescript/component_libraries/flows/src/index.web-vflbHvh9w.css","/static/css/dig-illustrations/index.web-vflABEtwa.css"]);i.FileViewer=Fe,Fe.displayName="FileViewer"}));
//# sourceMappingURL=file_viewer.min.js-vfloyMZnI.map