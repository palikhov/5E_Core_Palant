define(["require","exports","modules/clean/react/integrations/pdf_editor/document_message_bus/dispatchers/event_relay"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultDocumentActionDispatcher=void 0;var n=(function(){function e(e,t){var n=this;void 0===t&&(t=void 0),this.messageChannel=new MessageChannel,this.targetOrigin=e,this.windowMessageEventRelay=new s.WindowMessageEventRelay((function(e){return n.handleWindowOnMessage(e)})),this.messagePortEventRelay=new s.MessagePortEventRelay,t&&this.registerOnReplyHandler(t),this.messageBusInitializedEventRelay=new s.SimpleEventRelay,this.messagePortEventRelay.port=this.messageChannel.port1,this._busInitialized=!1}return Object.defineProperty(e.prototype,"busInitialized",{get:function(){return this._busInitialized},enumerable:!1,configurable:!0}),e.prototype.sendDocumentAction=function(e){switch(e.kind){case"load_document_action":case"insert_document_action":this.messageChannel.port1.postMessage(e,[e.documentData]);break;default:this.messageChannel.port1.postMessage(e)}},e.prototype.registerOnReplyHandler=function(e){this.messagePortEventRelay.registerHandler(e)},e.prototype.removeOnReplyHandler=function(e){this.messagePortEventRelay.removeHandler(e)},e.prototype.registerOnInitializedHandler=function(e){this.messageBusInitializedEventRelay.registerHandler(e)},e.prototype.removeOnInitializedHandler=function(e){this.messageBusInitializedEventRelay.removeHandler(e)},e.prototype.dispose=function(){this.windowMessageEventRelay.dispose(),this.messagePortEventRelay.dispose(),this._busInitialized=!1},e.prototype.sendMessageChannelPortMessage=function(e){if(null!==e){e.postMessage({kind:"message_channel_port_message"},this.targetOrigin,[this.messageChannel.port2])}},e.prototype.handleWindowOnMessage=function(e){if(e.origin===this.targetOrigin)switch(e.data.kind){case"frame_initialized_message":this.sendMessageChannelPortMessage(e.source);break;case"message_channel_port_ack_message":this._busInitialized=!0,this.messageBusInitializedEventRelay.triggerHandlers(),this.windowMessageEventRelay.dispose()}},e})();t.DefaultDocumentActionDispatcher=n}));
//# sourceMappingURL=document_action_dispatcher.min.js-vfliAJPDz.map