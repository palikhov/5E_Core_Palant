define("modules/clean/growth/user_action/trackers/personalization_tracker",["require","exports","tslib","modules/clean/growth/user_action/tracker"],(function(e,n,t,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PersonalizationTracker=n.PersonalizationProjectTag=n.PersonalizationActions=void 0,(function(e){e.ASSIGNED_SUGGESTED_FOLDERS="assigned_suggested_folders",e.DISMISS_ALL_SUGGESTED_FOLDER_TO_MOVE="dismiss_all_suggested_folder_to_move",e.DISMISS_DOWNLOAD_APP_PANEL="dismiss_download_app_panel",e.DISMISS_COLLECTIONS_QUICK_ACTION="dismiss_collections_quick_action",e.DISMISS_IN_FOLDER_ACTIVATION_BANNER="dismiss_in_folder_activation_banner",e.CLICK_IN_FOLDER_ACTIVATION_BANNER="click_in_folder_activation_banner",e.HIDE_SUGGESTED_FOLDER="hide_suggested_folder",e.CREATE_SUGGESTED_FOLDER="create_suggested_folder",e.DISMISS_SUGGESTED_FOLDER_TO_MOVE="dismiss_suggested_folder_to_move",e.MINIMIZE_COLLECTIONS_QUICK_ACTIONS="minimize_collections_quick_actions",e.QUICK_ACTION_SEE_SUGGESTED_FOLDERS="quick_action_see_suggested_folders",e.CLICK_DESKTOP_CTA="click_desktop_cta",e.DISMISS_CREATE_SUGGESTED_FOLDER_TOOLTIP="dismiss_create_suggested_folder_tooltip"})(n.PersonalizationActions||(n.PersonalizationActions={})),n.PersonalizationProjectTag="personalization";var o=(function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.project=n.PersonalizationProjectTag,t}return t.__extends(i,e),i})(i.GrowthUserActionTracker);n.PersonalizationTracker=o})),define("modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal",["require","exports","tslib","react","modules/clean/react/components/modal","modules/clean/react/components/css","modules/clean/web_user_action_events","modules/clean/sharing/views/share_modal_evolution/utils/logging","spectrum-sharing/utils/logging","spectrum-sharing/utils/sharing_constants","modules/clean/analytics","modules/core/browser_detection","modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util","modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_overlay","modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util","modules/clean/clipboard_v3"],(function(e,n,t,i,o,r,s,a,_,c,l,d,u,p,h,E){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CopyLinkMiniModal=n.CopyLinkMiniModalComponent=void 0,i=t.__importDefault(i),o=t.__importStar(o);var f=(function(e){function r(n){var t=e.call(this,n)||this;return t.handleCopyLinkToClipboard=function(){E.copyToClipboard(t.sharedLink.url,(function(){t.handleClipboardSuccess(u.CopyLinkMethod.EXEC_COMMAND)}),t.handleClipboardFailure)},t.handleClipboardSuccess=function(e){e!==u.CopyLinkMethod.MANUAL&&t.setState({stage:u.ModalState.RESULT}),t.logEvent(_.TiburonEventName.CopySharedLink,{created_new_link:t.isLinkNewlyCreated,copy_method:e})},t.handleClipboardFailure=function(){t.copyLinkToClipboardNewAPI()},t.copyLinkToClipboardNewAPI=function(){if(navigator.clipboard){var e=t.sharedLink.url;navigator.clipboard.writeText(e).then((function(){t.handleClipboardSuccess(u.CopyLinkMethod.CLIPBOARD_API)}),(function(){t.handleClipboardFailureNewAPI()}))}else t.handleClipboardFailureNewAPI()},t.handleClipboardFailureNewAPI=function(){t.exceptionType=u.CopyLinkException.FAILED_COPY_TO_CLIPBOARD,t.failToFetchCopyLinkHelper()},t.onClose=function(){t.props.setIsCreatingSharedLink(!1,t.fileIdOrPath),t.props.userActionSource===s.ActionSourceValue.BUTTON&&t.props.onHoverLocked&&t.props.onHoverLocked({isOpen:!1}),t.props.onActionFlowComplete&&t.props.onActionFlowComplete(),t.setState({isOpen:!1})},t.focusOnInput=function(){t.inputRef.current&&t.inputRef.current.select()},t.inputRef=i.default.createRef(),t.state={isOpen:!0,stage:u.ModalState.PENDING},t.fileIdOrPath=t.getFileIdOrPath(),t}return t.__extends(r,e),r.prototype.componentDidMount=function(){this.createSharedLink()},r.prototype.createSharedLink=function(){var e=this;this.props.setIsCreatingSharedLink(!0,this.fileIdOrPath),this.props.userActionSource===s.ActionSourceValue.BUTTON&&this.props.onHoverLocked&&this.props.onHoverLocked({isOpen:!0}),h.getApiClient(this.props.user).createSharedLinkNonAlpha({fileIdOrPath:this.fileIdOrPath,settings:{access:"max"}}).then((function(n){e.succeedToFetchLinkHelper(n,!0)})).catch((function(n){n.error[".tag"]===u.CopyLinkException.SHARED_LINK_ALREADY_EXISTS?e.succeedToFetchLinkHelper(n.error.shared_link_already_exists.metadata,!1,n):n.error[".tag"]===u.CopyLinkException.ACCESS_DENIED?(e.exceptionType=u.CopyLinkException.ACCESS_DENIED,e.failToFetchCopyLinkHelper(n)):n.error[".tag"]===u.CopyLinkException.SETTINGS_ERROR&&n.error.settings_error[".tag"]===u.CopyLinkException.NOT_AUTHORIZED?(e.exceptionType=u.CopyLinkException.NOT_AUTHORIZED,e.failToFetchCopyLinkHelper(n)):n.error[".tag"]===u.CopyLinkException.PATH&&n.error.path[".tag"]===u.CopyLinkException.NOT_FOUND?(e.exceptionType=u.CopyLinkException.NOT_FOUND,e.failToFetchCopyLinkHelper(n)):n.error[".tag"]===u.CopyLinkException.EMAIL_NOT_VERIFIED?(e.exceptionType=u.CopyLinkException.EMAIL_NOT_VERIFIED,e.failToFetchCopyLinkHelper(n)):(e.exceptionType=n.error[".tag"]?n.error[".tag"]:u.CopyLinkException.UNDEFINED_ERROR,e.failToFetchCopyLinkHelper(n))}))},r.prototype.succeedToFetchLinkHelper=function(e,n,t){this.sharedLink=e,this.isLinkNewlyCreated=n;var i=n?200:t&&t.raw&&t.raw.status;this.logEvent(_.TiburonEventName.SucceedCreateSharedLinkWithSettings,{created_new_link:n,http_status_code:i,response_status:"success",is_alpha:!1}),h.isBrowserCopyEnabled()?this.handleCopyLinkToClipboard():this.setState({stage:u.ModalState.COPY})},r.prototype.failToFetchCopyLinkHelper=function(e){e&&this.logEvent(_.TiburonEventName.FailCreateSharedLinkWithSettings,{error_message:this.exceptionType,http_status_code:e.raw&&e.raw.status,is_alpha:!1}),this.setState({stage:u.ModalState.ERROR}),this.logEvent(_.TiburonEventName.CopySharedLinkFailure,{error:this.exceptionType})},r.prototype.getFileIdOrPath=function(){var e,n;return(null===(e=this.props.file)||void 0===e?void 0:e.file_id)||(null===(n=this.props.file)||void 0===n?void 0:n.fq_path)||this.props.filePath},r.prototype.getAccessLevel=function(){var e=this.sharedLink?this.sharedLink.link_permissions.link_access_level:void 0,n="viewer";return e&&(n=e.hasOwnProperty(".tag")?e[".tag"]:e),n},r.prototype.logEvent=function(e,n){var i,o,r=c.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_BUTTON;this.props.userActionSource===s.ActionSourceValue.OVERFLOW_MENU?r=c.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_OVERFLOW_MENU:this.props.userActionSource===s.ActionSourceValue.COPY_LINK_FROM_UPLOAD_MODAL&&(r=c.SHARE_ACTION_ORIGIN_TYPE.COPY_LINK_FROM_UPLOAD_MODAL);var _=d.get_browser_info();l.ShareTibEventLogger.log(this.props.user.id,e,r,t.__assign(t.__assign(t.__assign({},a.buildExtraFromLinkMetadata(this.sharedLink)),{file_id:null===(i=this.props.file)||void 0===i?void 0:i.file_id,fq_path:(null===(o=this.props.file)||void 0===o?void 0:o.fq_path)||this.props.filePath,browser:_.browser,browser_version:_.version}),n))},r.show=function(e,r){o.Modal.showInstance(i.default.createElement(n.CopyLinkMiniModal,t.__assign({},e)),!0,r)},r.prototype.render=function(){if(!this.state.isOpen)return null;switch(this.state.stage){case u.ModalState.PENDING:return i.default.createElement(p.CopyLinkMiniModalOverlay,{stage:u.ModalStage.PENDING,closeButtonHandler:this.onClose,anchorRef:this.props.anchorRef,zIndexOverride:this.props.zIndexOverride});case u.ModalState.COPY:return i.default.createElement(p.CopyLinkMiniModalOverlay,{stage:u.ModalStage.COPY,actionHandler:this.handleCopyLinkToClipboard,closeButtonHandler:this.onClose,sharedLink:this.sharedLink,focusOnInput:this.focusOnInput,anchorRef:this.props.anchorRef,inputRef:this.inputRef,shouldFocusOnLink:!1,onCopyToClipboard:this.handleClipboardSuccess,zIndexOverride:this.props.zIndexOverride});case u.ModalState.ERROR:return this.exceptionType!==u.CopyLinkException.FAILED_COPY_TO_CLIPBOARD?i.default.createElement(p.CopyLinkMiniModalOverlay,{stage:u.ModalStage.ERROR_SERVER,closeButtonHandler:this.onClose,anchorRef:this.props.anchorRef,errorMessage:h.getServerErrorMessage(this.exceptionType),zIndexOverride:this.props.zIndexOverride}):i.default.createElement(p.CopyLinkMiniModalOverlay,{stage:u.ModalStage.ERROR_CLIENT,actionHandler:this.handleCopyLinkToClipboard,closeButtonHandler:this.onClose,sharedLink:this.sharedLink,focusOnInput:this.focusOnInput,inputRef:this.inputRef,anchorRef:this.props.anchorRef,shouldFocusOnLink:!0,onCopyToClipboard:this.handleClipboardSuccess,zIndexOverride:this.props.zIndexOverride});case u.ModalState.RESULT:return i.default.createElement(p.CopyLinkMiniModalOverlay,{stage:u.ModalStage.RESULT,linkAccessLevel:this.getAccessLevel(),actionHandler:this.handleCopyLinkToClipboard,closeButtonHandler:this.onClose,sharedLink:this.sharedLink,focusOnInput:this.focusOnInput,inputRef:this.inputRef,anchorRef:this.props.anchorRef,shouldFocusOnLink:!0,onCopyToClipboard:this.handleClipboardSuccess,zIndexOverride:this.props.zIndexOverride})}},r.displayName="CopyLinkMiniModalComponent",r})(i.default.Component);n.CopyLinkMiniModalComponent=f,n.CopyLinkMiniModal=r.requireCssWithComponent(f,["/static/css/sharing/copy_link_mini_modal-vflGT76Bj.css","/static/css/dig-components/index.web-vflfsfj-g.css"])})),define("modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_header",["require","exports","tslib","react","spectrum-sharing/components/sharing_spinner/index","modules/core/i18n","dig-components/typography","dig-components/icons/src","dig-components/icons","dig-components/buttons","modules/clean/react/components/css","modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util"],(function(e,n,t,i,o,r,s,a,_,c,l,d){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CopyLinkMiniModalHeader=n.CopyLinkMiniModalHeaderComponent=void 0,i=t.__importStar(i);var u="copy-link-mini-modal__header",p=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.render=function(){return i.createElement("div",{className:u},i.createElement("div",{className:u+"-content"},this.props.stageType===d.ModalStage.PENDING&&this._renderPendingStage(),this.props.stageType===d.ModalStage.COPY&&this._renderCopyStage(),this.props.stageType===d.ModalStage.RESULT&&this._renderResultStage(),this.props.stageType===d.ModalStage.ERROR_CLIENT&&this._renderClientErrorStage(),this.props.stageType===d.ModalStage.ERROR_SERVER&&this._renderServerErrorStage()),this._renderCloseButton())},n.prototype._renderPendingStage=function(){return i.createElement(i.Fragment,null,i.createElement(o.SharingSpinner,{ariaValue:"Loading xsmall",textSize:"standard"}),i.createElement(s.Text,{className:u+"--pending-text"},r.intl.formatMessage({id:"LPF3tp",defaultMessage:"Getting the link..."})))},n.prototype._renderCopyStage=function(){return i.createElement(s.Text,null,i.createElement(s.Link,{href:"#",hasNoUnderline:!0,onClick:this.props.actionHandler,isBold:!0},i.createElement(_.UIIcon,{src:a.LinkLine,"aria-label":""}),r.intl.formatMessage({id:"emiHs/",defaultMessage:"Copy Link"})))},n.prototype._renderResultStage=function(){var e=r.intl.formatMessage({id:"l+Mf7Y",defaultMessage:"Allows editing."}),n=r.intl.formatMessage({id:"FXqYpV",defaultMessage:"Allows viewing."}),t="";return void 0!==this.props.linkAccessLevel&&(t="editor"===this.props.linkAccessLevel?e:n),i.createElement(i.Fragment,null,i.createElement(_.UIIcon,{className:u+"--result-icon",src:a.CheckmarkCircleLine,size:"standard","aria-label":""}),i.createElement(s.Text,{className:u+"--result-text"},i.createElement("b",null,r.intl.formatMessage({id:"v2yJMn",defaultMessage:"Link copied."}))," ",t))},n.prototype._renderClientErrorStage=function(){return i.createElement(i.Fragment,null,i.createElement(_.UIIcon,{className:u+"--client-error-icon",src:a.FailLine,"aria-label":""}),i.createElement(s.Text,{className:u+"--client-error-text"},i.createElement("b",null,r.intl.formatMessage({id:"rp1Lxc",defaultMessage:"Couldn't copy the link."})," "),i.createElement(s.Link,{href:"#",hasNoUnderline:!0,onClick:this.props.actionHandler,isBold:!0},r.intl.formatMessage({id:"wXhxJC",defaultMessage:"Try again"}))))},n.prototype._renderServerErrorStage=function(){return i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(_.UIIcon,{size:"standard",src:a.FailLine,"aria-label":""})),i.createElement(s.Text,{className:u+"--server-error-text"},this.props.errorMessage))},n.prototype._renderCloseButton=function(){return i.createElement(c.IconButton,{"aria-label":"close",onClick:this.props.closeButtonHandler,variant:"transparent",isRounded:!0,size:"small"},i.createElement(_.UIIcon,{src:a.CloseLine,"aria-label":""}))},n.displayName="CopyLinkMiniModalHeaderComponent",n})(i.Component);n.CopyLinkMiniModalHeaderComponent=p,n.CopyLinkMiniModalHeader=l.requireCssWithComponent(p,["/static/css/dig-components/index.web-vflfsfj-g.css","/static/css/sharing/copy_link_mini_modal-vflGT76Bj.css"])})),define("modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_link",["require","exports","tslib","react","modules/clean/react/components/css","dig-components/text_fields","modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util"],(function(e,n,t,i,o,r,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CopyLinkMiniModalLink=n.CopyLinkMiniModalLinkComponent=void 0,i=t.__importStar(i);var a=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleCopy=function(){n.props.onCopyToClipboard(s.CopyLinkMethod.MANUAL)},n}return t.__extends(n,e),n.prototype.componentDidMount=function(){this.props.shouldFocusOnLink&&this.props.focusOnInput()},n.prototype.componentDidUpdate=function(){this.props.shouldFocusOnLink&&this.props.focusOnInput()},n.prototype.render=function(){return i.createElement("div",{className:"copy-link-mini-modal__link"},i.createElement(r.TextInput,{onCopy:this.handleCopy,size:"standard","aria-label":"Link for copy link click",value:this.props.sharedLink.url,readOnly:!0,onClick:this.props.focusOnInput,ref:this.props.inputRef}))},n.displayName="CopyLinkMiniModalLinkComponent",n})(i.Component);n.CopyLinkMiniModalLinkComponent=a,n.CopyLinkMiniModalLink=o.requireCssWithComponent(a,["/static/css/dig-components/index.web-vflfsfj-g.css","/static/css/sharing/copy_link_mini_modal-vflGT76Bj.css"])})),define("modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_overlay",["require","exports","tslib","react","modules/clean/react/components/css","lodash","dig-components/overlay","dig-components/click_outside","dig-components/layer","modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_header","modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_link"],(function(e,n,t,i,o,r,s,a,_,c,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CopyLinkMiniModalOverlay=n.CopyLinkMiniModalOverlayComponent=void 0;var d=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.onWindowResize=r.throttle((function(){n.props.anchorRef.current||n.props.closeButtonHandler()}),500),n.handleClick=function(e){e.preventDefault(),e.stopPropagation()},n}return t.__extends(n,e),n.prototype.componentDidMount=function(){window.addEventListener("resize",this.onWindowResize)},n.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onWindowResize)},n.prototype.render=function(){var e=this.props,n=e.anchorRef,t=e.inputRef,o=e.stage,r=e.closeButtonHandler,d=e.linkAccessLevel,u=e.sharedLink,p=e.shouldFocusOnLink,h=e.focusOnInput,E=e.actionHandler,f=e.errorMessage,S=e.onCopyToClipboard,m=e.zIndexOverride,C=i.default.createElement(c.CopyLinkMiniModalHeader,{stageType:o,actionHandler:E,closeButtonHandler:r,sharedLink:u,linkAccessLevel:d,errorMessage:f}),y=i.default.createElement(i.default.Fragment,null);return u&&h&&t&&(y=i.default.createElement(l.CopyLinkMiniModalLink,{sharedLink:u,focusOnInput:h,inputRef:t,shouldFocusOnLink:p,onCopyToClipboard:S})),i.default.createElement(_.LayerContext.Provider,{value:m||20},i.default.createElement(a.ClickOutside,{isActive:!0,onClickOutside:r,shouldPropagateMouseEvents:!1,isBlock:!0,shouldClickOutsideWhenDefaultPrevented:!0},i.default.createElement(s.Overlay,{className:"copy-link-mini-modal__overlay",anchorRef:n,placement:"bottom",auto:!0,offsetDistance:4,onClick:this.handleClick},C,y)))},n.displayName="CopyLinkMiniModalOverlayComponent",n})((i=t.__importDefault(i)).default.Component);n.CopyLinkMiniModalOverlayComponent=d,n.CopyLinkMiniModalOverlay=o.requireCssWithComponent(d,["/static/css/sharing/copy_link_mini_modal-vflGT76Bj.css","/static/css/dig-components/index.web-vflfsfj-g.css"])})),define("modules/clean/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util",["require","exports","modules/clean/sharing/api/client","modules/core/i18n"],(function(e,n,t,i){"use strict";var o;Object.defineProperty(n,"__esModule",{value:!0}),n.getServerErrorMessage=n.isBrowserCopyEnabled=n.getApiClient=n.CopyLinkMethod=n.ModalState=n.CopyLinkException=n.ModalStage=void 0,(function(e){e.PENDING="pending",e.COPY="copy",e.RESULT="result",e.ERROR_CLIENT="error_client",e.ERROR_SERVER="error_server"})(n.ModalStage||(n.ModalStage={})),(function(e){e.SHARED_LINK_ALREADY_EXISTS="shared_link_already_exists",e.ACCESS_DENIED="access_denied",e.PATH="path",e.NOT_FOUND="not_found",e.EMAIL_NOT_VERIFIED="email_not_verified",e.SETTINGS_ERROR="settings_error",e.NOT_AUTHORIZED="not_authorized",e.UNDEFINED_ERROR="undefined_error",e.FAILED_COPY_TO_CLIPBOARD="failed_copy_to_clipboard"})(o=n.CopyLinkException||(n.CopyLinkException={})),(function(e){e.PENDING="pending",e.COPY="copy",e.RESULT="result",e.ERROR="error"})(n.ModalState||(n.ModalState={})),(function(e){e.EXEC_COMMAND="exec_command",e.CLIPBOARD_API="clipboard_api",e.MANUAL="manual"})(n.CopyLinkMethod||(n.CopyLinkMethod={})),n.getApiClient=function(e){return new t.FileShareApiClient({userId:e.id})},n.isBrowserCopyEnabled=function(){var e=document.createElement("input");return e.value="sharing is caring",document.body.appendChild(e),e.select(),document.queryCommandEnabled("copy")},n.getServerErrorMessage=function(e){switch(e){case o.ACCESS_DENIED:case o.NOT_AUTHORIZED:return i.intl.formatMessage({id:"2wQgFw",defaultMessage:"Couldn't copy the link. You don't have permission to create a link to this content."});case o.NOT_FOUND:return i.intl.formatMessage({id:"+HMjSg",defaultMessage:"We can't find this file anymore. Try checking activity or folder history to see what happened."});case o.EMAIL_NOT_VERIFIED:return i.intl.formatMessage({id:"cHWnMe",defaultMessage:"You can't share until you verify your email address."});default:return i.intl.formatMessage({id:"pAS2H5",defaultMessage:"Couldn't copy, but it might be a fluke. Try reloading the page or ask us for help."})}}})),define("modules/clean/sharing/views/share_modal_evolution/utils/logging",["require","exports","tslib","spectrum-sharing/utils/logging"],(function(e,n,t,i){"use strict";function o(e){var n=new URL(e);if(-1!==n.search.indexOf("rlkey")){var t=n.searchParams.get("rlkey");return{kind:i.LinkKeyTypes.RL,val:t,link_type:i.LinkTypes.Righteous}}if(-1!==n.pathname.indexOf("/s/")||-1!==n.pathname.indexOf("/sh/")){var o=(function(e){return e.pathname.indexOf("/raw/")*e.pathname.indexOf("/dl/")*e.pathname.indexOf("/print/")>0})(n)?3:2,r=n.pathname.split("/")[o];return{kind:i.LinkKeyTypes.SH,val:r,link_type:i.LinkTypes.Shmodel}}return{kind:i.LinkKeyTypes.NONE,val:"",link_type:i.LinkTypes.NONE}}function r(e){if(!e)return{};var n,t={link_id:e.id,link_access_level:(n=e.link_permissions.link_access_level,n?n.hasOwnProperty(".tag")?n[".tag"]:n:i.AccessType.Viewer)},r=o(e.url);return r.kind!==i.LinkKeyTypes.NONE&&(t[r.kind]=r.val,t.link_type=r.link_type),t}Object.defineProperty(n,"__esModule",{value:!0}),n.buildExtraFromLinkMetadata=n.getLinkKey=n.buildExtraFromMetadata=void 0,n.buildExtraFromMetadata=function(e,n){return t.__assign(t.__assign({},(function(e){return{user_access_type:e.access_type,is_folder:e.isFolder(),fq_path:e.path_lower,content_id:e.contentId(),ns_id:e.nsId(),can_create_edit_link:e.canCreateEditLink(),can_create_view_link:e.canCreateViewLink(),can_edit_inband_invite:e.canEditInbandInvite(),can_view_inband_invite:e.canViewInbandInvite(),max_access:e.canCreateEditLink()||e.canEditInbandInvite()?i.AccessType.Editor:i.AccessType.Viewer}})(e)),r(n))},n.getLinkKey=o,n.buildExtraFromLinkMetadata=r})),define("modules/clean/unity/check_file_cache",["require","exports","modules/clean/unity/features"],(function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(){}return e.is_cached_and_locally_available=function(e,n){var i=this._cache[t.UnityFeatures.server_path(e,n)];return null!=i&&i.is_locally_available},e.get=function(e,n){return this._cache[t.UnityFeatures.server_path(e,n)]},e.set=function(e,n){this._cache[e]=n},e.set_batch=function(e){Object.assign(this._cache,e)},e.clear=function(){this._cache={}},e._cache={},e})();t.UnityFeatures.isUnitySupported()||(i=void 0),n.default=i})),define("modules/clean/unity/connection",["require","exports","tslib","lodash","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/unity/connection_error","modules/clean/unity/logger","modules/clean/unity/versions","modules/clean/unity/websocket_config","modules/clean/unity/web_socket","modules/clean/viewer","modules/constants/unity","modules/core/assert","modules/core/uri"],(function(e,n,t,i,o,r,s,a,_,c,l,d,u,p){"use strict";var h,E,f;Object.defineProperty(n,"__esModule",{value:!0}),n.isUnitySupported=n.UnityConnection=n.MAX_PORT=n.MIN_PORT=n.Permissions=n.ConnectionState=n.LastCompletedSecurityHandshakeStep=void 0,o=t.__importStar(o),s=t.__importDefault(s),a=t.__importDefault(a),d=t.__importStar(d),(function(e){e.CONNECTION_OPENED="CONNECTION_OPENED",e.VERSION_CHECK="VERSION_CHECK",e.FETCHING_NONCE="FETCHING_NONCE",e.NONCE_RETURNED_TO_CLIENT="NONCE_RETURNED_TO_CLIENT",e.HANDSHAKE_COMPLETED="HANDSHAKE_COMPLETED"})(h=n.LastCompletedSecurityHandshakeStep||(n.LastCompletedSecurityHandshakeStep={})),(function(e){e.PENDING="PENDING",e.ESTABLISHED="ESTABLISHED",e.CLOSED="CLOSED",e.RETRYING="RETRYING"})(E=n.ConnectionState||(n.ConnectionState={})),(function(e){e.SECURE_PERMISSION="secure",e.INSECURE_WEB_PERMISSION="insecure_web",e.INSECURE_CLIENT_PERMISSION="insecure_client",e.INSECURE_PERMISSION="insecure"})(f=n.Permissions||(n.Permissions={}));n.MIN_PORT=17600,n.MAX_PORT=17602;var S=(function(){function e(){var e=this;this.client_version=null,this.logger=new s.default,this._on_open_callbacks=[],this._on_open_failed_callbacks=[],this._on_close_callbacks=[],this._pending_callbacks=[],this._response_callbacks={},this._webSocket=null,this._port=null,this._active_ports={},this._connection_state=E.PENDING,this._current_message_id=1,this._permission_level=null,this._on_close=function(n){return function(t){[1e3,1001,1005,1006].includes(t.code)||e.logger.report_event("unity_failure",{message:"WebSocket closed. Code: "+t.code+". Reason: "+t.reason,port:n}),e._close_port(n)}},this._on_error=function(n){return function(t){e.logger.report_event("unity_failure",{message:"WebSocket unknown error",port:n}),e._close_port(n)}},this._set_connection_state=function(n){if(n!==e._connection_state){var t=e._connection_state;if(u.assert(t!==E.CLOSED,"Shouldn't unclose a closed connection."),e._connection_state=n,n===E.ESTABLISHED){u.assert(e._is_connection_in_progress(t),"Can only establish from pending or retrying."),e.logger.report_event("handshake_complete"),t===E.PENDING&&e._on_open_callbacks.forEach((function(e){return e()}));for(var i=[];e._pending_callbacks.length;){var o=e._pending_callbacks.pop(),s=o.callback,a=o.error_callback;e.is_ready()?i.push(s()):i.push("function"==typeof a?a(r.UnityConnectionError.UNEXPECTED_ERROR):void 0)}return i}if(n!==E.RETRYING){if(n===E.CLOSED){t===E.PENDING?(e.logger.report_event("connection_not_established"),e._on_open_failed_callbacks.forEach((function(e){return e()}))):t===E.RETRYING?(e.logger.report_event("connection_terminated"),e._on_close_callbacks.forEach((function(e){return e()}))):u.assert(!1,"CONNECTION_CLOSED can only be set from PENDING or RETRYING");for(var _=[];e._pending_callbacks.length;){a=e._pending_callbacks.pop().error_callback;_.push("function"==typeof a?a(r.UnityConnectionError.CONNECTION_CLOSED):void 0)}return _}return u.assert(!1,"Changing connection_state to CONNECTION_PENDING not supported.")}}},this._on_message=function(n){return function(t){var i=JSON.parse(t.data);if(i.func&&i.header&&i.header.message_id&&void 0!==i.header.should_respond)if(i.header.log_data&&e.logger.update(i.header.log_data),e.logger.update({port:n.port}),"response"===i.func)e._on_response(i.header.message_id,i.data);else{var o=e._routes[i.func];if(null==o)return void e._terminate_handshake(n.ws,"Unknown function.",{function:i.func});var r=e.is_ready()?o(i.data):o(n,i.data);i.header&&i.header.should_respond&&e.send("response",r,null,null,i.header.message_id)}else e._terminate_handshake(n.ws,"Malformed message from client.",{message:t.data})}},this._on_response_timeout=function(n){return function(){var t=e._response_callbacks[n].error_callback;delete e._response_callbacks[n],t&&t(r.UnityConnectionError.CONNECTION_TIMEOUT)}},this._check_unity_version=function(n,t){if(n.state===h.CONNECTION_OPENED)if(n.state=h.VERSION_CHECK,n.client_version=t.client_version,t.client_version<a.default.UNITY_HANDSHAKE)e._terminate_handshake(n.ws,"Client version is too old.");else{var i=e._web_has_auth();if(!(t.client_version<a.default.PERMISSION_LEVELS)||i)return e.logger.report_event("handshake_version_check"),t.client_version>=a.default.PERMISSION_LEVELS?e._send_with_ws(n.ws,"initiate_handshake",{secure_web:i}):e._send_with_ws(n.ws,"initiate_handshake");e._terminate_handshake(n.ws,"Client version is too old to support insecure web connections.")}else e._terminate_handshake(n.ws,"Handshake version check at wrong time of protocol.")},this._fetch_unity_nonce=function(n,t){n.state===h.VERSION_CHECK?(n.state=h.FETCHING_NONCE,e.logger.report_event("handshake_fetch_nonce"),e._retrieve_unity_nonce(n,t.nonce_key)):e._terminate_handshake(n.ws,"Fetch Unity nonce at wrong time of protocol.")},this._complete_handshake=function(n,t){if(n.state===h.NONCE_RETURNED_TO_CLIENT&&t.is_success)if(n.state=h.HANDSHAKE_COMPLETED,e._connection_state===E.CLOSED)e._terminate_handshake(n.ws,"No more handshakes are allowed to complete.");else if(null!=e._webSocket){var i="Only one Unity handshake can succeed! There's likely a MITM attack, so close all connections.";e._terminate_handshake(n.ws,i),e._terminate_handshake(e._webSocket,i),e.client_version=null,e._webSocket=null,e._port=null,e._set_connection_state(E.CLOSED)}else e.client_version=n.client_version,e._webSocket=n.ws,e._port=n.port,e._set_connection_state(E.ESTABLISHED);else e._terminate_handshake(n.ws,"Unable to complete handshake.")},this._routes={check_unity_version:this._check_unity_version,fetch_unity_nonce:this._fetch_unity_nonce,complete_handshake:this._complete_handshake}}return e.prototype.start=function(){_.WebSocketConfig.canUnityConnect()?this._attempt_handshake():(this._set_connection_state(E.CLOSED),this.logger.report_event("unity_failure",{message:"WebSocket creation failed. Not able to create web socket."}))},e.prototype._attempt_handshake=function(){for(var e=n.MIN_PORT;e<=n.MAX_PORT;e++)try{this._active_ports[e]=!0;var t={scheme:"ws",authority:"127.0.0.1:"+e.toString(),path:"/ws"},i=c.UnityWebSocket.create(new p.URI(t).toString());i.onmessage=this._on_message({ws:i,port:e,state:h.CONNECTION_OPENED,client_version:null,client_has_auth:null}),i.onclose=this._on_close(e),i.onerror=this._on_error(e)}catch(n){this.logger.report_event("unity_failure",{message:"WebSocket creation failed. Message: "+n.message,error_name:n.name,port:e}),this._set_connection_state(E.CLOSED)}this.logger.report_event("handshake_started")},e.prototype._close_port=function(e){if(e in this._active_ports&&(delete this._active_ports[e],i.isEmpty(this._active_ports)))return this._connection_state===E.ESTABLISHED?this._retry_connection():this._set_connection_state(E.CLOSED)},e.prototype._retry_connection=function(){return this.logger.report_event("connection_retrying"),this._set_connection_state(E.RETRYING),this.client_version=this._webSocket=this._port=null,this._attempt_handshake()},e.prototype.send=function(e,n,t,i,o){if(void 0===n&&(n=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),this._webSocket)return this._send_with_ws(this._webSocket,e,n,t,i,o)},e.prototype._send_with_ws=function(e,n,t,i,o,s){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),null==s&&(s=this._current_message_id,u.assert(this._current_message_id%2==1,"Web-initiated message_ids should remain odd"),this._current_message_id+=2),null!==i){var a=window.setTimeout(this._on_response_timeout(s),5e3);this._response_callbacks[s]={response_callback:i,error_callback:o,timeout_id:a}}var _={func:n,header:{message_id:s,should_respond:null!==i,log_data:this.logger.get_log_data_for_client()}};null!=t&&(_.data=t);try{return e.send(JSON.stringify(_))}catch(e){this.logger.report_event("unity_failure",{message:"WebSocket send failed. Message: "+e.message,error_name:e.name}),o&&o(r.UnityConnectionError.COULD_NOT_SEND)}},e.prototype._on_response=function(e,n){if(e in this._response_callbacks){var t=this._response_callbacks[e],i=t.response_callback,o=t.timeout_id;delete this._response_callbacks[e],window.clearTimeout(o),i&&i(n)}},e.prototype._web_has_auth=function(){return l.Viewer.get_viewer().is_signed_in},e.prototype._retrieve_unity_nonce=function(n,t){var i=this;return o.WebRequest({url:new p.URI({path:"/retrieve_unity_nonce"}),dataType:"json",data:{nonce_key:t},success:function(t){switch(t.status){case"OK":if(n.state=h.NONCE_RETURNED_TO_CLIENT,(null===n.client_version||n.client_version>=a.default.PORT_CHECK)&&(u.assert(t.message.client_port,"Port check must happen in version "+n.client_version),t.message.client_port!==n.port))return void i._terminate_handshake(n.ws,"Mismatched ports.",{client_port:t.message.client_port,web_port:n.port});n.client_has_auth=t.message.client_has_auth;var o=i._web_has_auth();return n.client_has_auth&&o?i._permission_level=e.SECURE_PERMISSION:(u.assert(null===n.client_version||n.client_version>=a.default.PERMISSION_LEVELS,"Insecure connections only supported by client_version >= "+a.default.PERMISSION_LEVELS+"."),i._permission_level=n.client_has_auth?e.INSECURE_WEB_PERMISSION:o?e.INSECURE_CLIENT_PERMISSION:e.INSECURE_PERMISSION),i.logger.update({unity_permission_level:i._permission_level}),i.logger.report_event("handshake_nonce_sent_to_unity_server"),i._send_with_ws(n.ws,"verify_unity_nonce",{nonce:t.message.nonce});case"MISMATCHED_USER_IDS":return i._terminate_handshake(n.ws,"Mismatched user_ids.",{client_user_ids:t.message.client_user_ids,web_user_ids:t.message.web_user_ids});case"INVALID":return i._terminate_handshake(n.ws,"Could not find nonce with given nonce_key.");case"AUTH_REQUIRED":return i._terminate_handshake(n.ws,"Did not have the necessary authentication to retrieve nonce.");case"LOCAL_INFORMATION_PERMISSION_REQUIRED":return i._terminate_handshake(n.ws,"Did not have permission to start a local-information-allowed connection.")}},error:function(e,t,o){i._terminate_handshake(n.ws,"Unable to retrieve nonce from server",{status:t,error_string:o})}})},e.prototype._terminate_handshake=function(e,n,i){void 0===i&&(i={});var o=t.__assign({message:n},i);d.UNITY_WEB_DEBUG&&console.error(o),this.logger.report_event("unity_failure",o),e&&e.close()},e.prototype._is_connection_in_progress=function(e){return e===E.PENDING||e===E.RETRYING},e.prototype.add_on_open_callback=function(e){this._on_open_callbacks.push(e)},e.prototype.add_on_open_failed_callback=function(e){this._on_open_failed_callbacks.push(e)},e.prototype.add_on_close_callback=function(e){this._on_close_callbacks.push(e)},e.prototype.call_when_ready=function(e,n){return void 0===n&&(n=null),this.is_ready()?e():this._is_connection_in_progress(this._connection_state)?this._pending_callbacks.push({callback:e,error_callback:n}):n?n(r.UnityConnectionError.CONNECTION_CLOSED):void 0},e.prototype.is_ready=function(){return this._webSocket&&this._webSocket.readyState===WebSocket.OPEN&&this._connection_state===E.ESTABLISHED},e.prototype.feature_supported=function(e,n){return void 0===n&&(n=[]),u.assert(null!==this._permission_level,"Connection is not ready."),!(null!==this.client_version&&this.client_version<e)&&n.includes(this._permission_level)},e.SECURE_PERMISSION=f.SECURE_PERMISSION,e.INSECURE_WEB_PERMISSION=f.INSECURE_WEB_PERMISSION,e.INSECURE_CLIENT_PERMISSION=f.INSECURE_CLIENT_PERMISSION,e.INSECURE_PERMISSION=f.INSECURE_PERMISSION,e})();n.UnityConnection=S,n.isUnitySupported=function(){return c.UnityWebSocket.web_sockets_supported()}})),define("modules/clean/unity/connection_error",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.UnityConnectionError=void 0,(function(e){e.CONNECTION_TIMEOUT="connection_timeout",e.CONNECTION_CLOSED="connection_closed",e.COULD_NOT_SEND="could_not_send",e.UNEXPECTED_ERROR="unexpected_error"})(n.UnityConnectionError||(n.UnityConnectionError={}))})),define("modules/clean/unity/features",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/filepath/filepath","modules/clean/unity/connection","modules/clean/unity/versions","modules/core/assert","modules/core/i18n","modules/core/notify","modules/core/uri"],(function(e,n,t,i,o,r,s,a,_,c,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.UnityFeatures=void 0,i=t.__importStar(i),o=t.__importStar(o),s=t.__importDefault(s),n.UnityFeatures={_uc:new r.UnityConnection,_has_handshake_started:!1,_cached_file_browser_display_name:null,_start_handshake_if_needed:function(){this._has_handshake_started||(this._uc.start(),this._has_handshake_started=!0)},continue_as_user:function(e,n,t,i){var o=this;return void 0===i&&(i=null),this._start_handshake_if_needed(),this._uc.call_when_ready((function(){if(o._uc.feature_supported(s.default.WEB_DESTINY,[r.UnityConnection.INSECURE_WEB_PERMISSION]))return o._uc.logger.report_event("continue_as_user",{browser:e,refresh_token:n}),o._uc.send("continue_as_user",{browser:e,refresh_token:n},t,i)}),i)},continue_as_user_direct:function(e,n){var t=this;return void 0===n&&(n=null),this._start_handshake_if_needed(),this._uc.call_when_ready((function(){if(t._uc.feature_supported(s.default.WEB_DESTINY_V2,[r.UnityConnection.INSECURE_WEB_PERMISSION]))return t._uc.logger.report_event("continue_as_user_direct"),t._uc.send("continue_as_user_direct",null,e,n)}),n)},web_destiny_info:function(e,n){var t=this;return void 0===n&&(n=null),this._start_handshake_if_needed(),this._uc.call_when_ready((function(){if(t._uc.feature_supported(s.default.WEB_DESTINY_V2,[r.UnityConnection.INSECURE_WEB_PERMISSION]))return t._uc.logger.report_event("web_destiny_info"),t._uc.send("web_destiny_info",null,e,n)}),n)},client_supports_open_in_file_browser:function(){return this._uc.feature_supported(s.default.OPEN_IN_FILE_BROWSER,[r.UnityConnection.SECURE_PERMISSION])},ensure_unity_ready:function(){var e=this;return this._start_handshake_if_needed(),new Promise((function(n){return e._uc.call_when_ready((function(){n(!0)}),(function(){e._uc=new r.UnityConnection,e._has_handshake_started=!1,n(!1)}))}))},open_file:function(e,n,t,_,c,d){var u=this;void 0===c&&(c=null),void 0===d&&(d=!1),this._start_handshake_if_needed();var p=this.server_path(e,n);return this._uc.call_when_ready((function(){if(u._uc.feature_supported(s.default.UNITY_HANDSHAKE,[r.UnityConnection.SECURE_PERMISSION])){u._uc.logger.report_event("open_file",{user_id:t,path_id:p,file_extension:o.file_extension(p),in_file_browser:d}),i.SilentBackgroundRequest({url:new l.URI({path:"/unity_open_log"}),data:{user_id:t,server_path:p,file_extension:o.file_extension(p),in_file_browser:d,unity_session_id:u._uc.logger.unity_session_id(),buildno:u._uc.logger._data.buildno,host_id:u._uc.logger._data.host_id}});var e={server_path:p,user_id:t};u._uc.client_version>=s.default.OPEN_IN_FILE_BROWSER?e.in_file_browser=d:a.assert(!d,"The connected client doesn't support opening in file browser."),u._uc.send("open_file",e,_,c)}}),c)},standard_open_file_handler:function(e){if(!e)return c.Notify.error(_.intl.formatMessage({id:"9HWjA9",defaultMessage:"Error opening file"}))},check_file:function(e,n,t,i,a){var _=this;void 0===a&&(a=null),this._start_handshake_if_needed();var c=this.server_path(e,n),l=function(e){_._check_file_deprecated_on_client()&&(e={is_locally_available:e}),i(e)};this._uc.call_when_ready((function(){if(_._uc.feature_supported(s.default.UNITY_HANDSHAKE,[r.UnityConnection.SECURE_PERMISSION]))return _._uc.logger.report_event("check_file",{user_id:t,path_id:c,file_extension:o.file_extension(c)}),_._uc.send("check_file",{server_path:c,user_id:t},l,a)}),a)},add_on_ready_callback:function(e){return this._uc.call_when_ready(e)},check_file_batch:function(e,n,t,i){var a=this;return void 0===i&&(i=null),new Promise((function(_,c){a._start_handshake_if_needed();var l=e.map((function(e){return a.server_path(e.ns_id,e.ns_path)})),d=function(e){if(a._check_file_deprecated_on_client())for(var n in e){var i=e[n];e[n]={is_locally_available:i}}t&&t(e),_(e)},u=function(e){i&&i(e),c(e)};a._uc.call_when_ready((function(){if(a._uc.feature_supported(s.default.UNITY_HANDSHAKE,[r.UnityConnection.SECURE_PERMISSION]))return a._uc.logger.report_event("check_file_batch",{user_id:n,path_ids:l,file_extensions:l.map(o.file_extension)}),a._uc.send("check_file_batch",{server_paths:l,user_id:n},d,u)}),u)}))},file_browser_display_name:function(e,n){var t=this;if(void 0===n&&(n=null),null==this._cached_file_browser_display_name){var i=function(n){return t._cached_file_browser_display_name=n,e(n)};this._start_handshake_if_needed();return this._uc.call_when_ready((function(){return t._uc.feature_supported(s.default.CHECK_FILE_RETURNS_OBJ,[r.UnityConnection.SECURE_PERMISSION])?(t._uc.logger.report_event("file_browser_display_name"),t._uc.send("file_browser_display_name",null,i,n)):e(null)}),n)}e(this._cached_file_browser_display_name)},_check_file_deprecated_on_client:function(){return s.default.UNITY_HANDSHAKE<=this._uc.client_version&&this._uc.client_version<s.default.CHECK_FILE_RETURNS_OBJ},server_path:function(e,n){return e+":"+n},has_chime:function(e,n){var t=this;void 0===n&&(n=null),this._start_handshake_if_needed();return this._uc.call_when_ready((function(){if(t._uc.feature_supported(s.default.CHIME_OPEN,[r.UnityConnection.SECURE_PERMISSION]))return t._uc.logger.report_event("has_chime"),t._uc.send("has_chime",null,e,n)}),n)},open_chime:function(e,n,t){var i=this;void 0===t&&(t=null),this._start_handshake_if_needed();return this._uc.call_when_ready((function(){if(i._uc.feature_supported(s.default.CHIME_OPEN,[r.UnityConnection.SECURE_PERMISSION]))return i._uc.logger.report_event("open_chime",{parameters:e}),i._uc.send("open_chime",e,n,t)}),t)},growth_deep_link:function(e,n){var t=this;return void 0===n&&(n={}),new Promise((function(i,o){t._start_handshake_if_needed(),t._uc.call_when_ready((function(){if(t._uc.feature_supported(s.default.GROWTH_DEEP_LINK,[r.UnityConnection.SECURE_PERMISSION]))return t._uc.logger.report_event("growth_deep_link"),t._uc.send("growth_deep_link",{resource:e,data:n},i,o);o("featured_unsupported")}),o)}))},can_open_apollo:function(){var e=this;return new Promise((function(n,t){return e._start_handshake_if_needed(),e._uc.call_when_ready((function(){e._uc.feature_supported(s.default.OPEN_COLLAB_BROWSE,[r.UnityConnection.SECURE_PERMISSION,r.UnityConnection.INSECURE_WEB_PERMISSION])&&e._uc.send("can_open_apollo",{},n,t)}),t)}))},open_apollo_main_window:function(){var e=this;return new Promise((function(n,t){return e._start_handshake_if_needed(),e._uc.call_when_ready((function(){e._uc.feature_supported(s.default.OPEN_COLLAB_BROWSE,[r.UnityConnection.SECURE_PERMISSION,r.UnityConnection.INSECURE_WEB_PERMISSION])&&e._uc.send("open_apollo_main_window",{},n,t)}),t)}))},isUnitySupported:function(){return r.isUnitySupported()}};var d=r.isUnitySupported()?n.UnityFeatures:void 0;n.default=d})),define("modules/clean/unity/logger",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/unity/versions","modules/constants/unity","modules/core/uri"],(function(e,n,t,i,o,r,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),i=t.__importStar(i),o=t.__importDefault(o),r=t.__importStar(r);var a=(function(){function e(){this._data={logging_source:"web",web_unity_version:o.default.LATEST}}return e.prototype.update=function(e){return this._data=t.__assign(t.__assign({},this._data),e),this._data},e.prototype.report_event=function(e,n){if(void 0===n&&(n=null),this._data.event_name=e,this._data.local_ts=(new Date).getTime()/1e3,this._data.extra=JSON.stringify(n||{}),i.SilentBackgroundRequest({url:new s.URI({path:"/unity_connection_log"}),data:this._data}),r.UNITY_WEB_DEBUG)return console.log(this._data)},e.prototype.get_log_data_for_client=function(){return{web_unity_version:this._data.web_unity_version,user_agent:window.navigator.userAgent}},e.prototype.unity_session_id=function(){return this._data.unity_session_id},e})();n.default=a})),define("modules/clean/unity/versions",["require","exports"],(function(e,n){"use strict";var t;Object.defineProperty(n,"__esModule",{value:!0}),(function(e){e[e.LATEST=16]="LATEST",e[e.INITIAL_UNITY=1]="INITIAL_UNITY",e[e.UNITY_HANDSHAKE=2]="UNITY_HANDSHAKE",e[e.REUNITY=3]="REUNITY",e[e.OPEN_IN_FILE_BROWSER=4]="OPEN_IN_FILE_BROWSER",e[e.CHECK_FILE_RETURNS_OBJ=5]="CHECK_FILE_RETURNS_OBJ",e[e.PERMISSION_LEVELS=6]="PERMISSION_LEVELS",e[e.WEB_DESTINY=7]="WEB_DESTINY",e[e.WEB_DESTINY_V2=8]="WEB_DESTINY_V2",e[e.PORT_CHECK=9]="PORT_CHECK",e[e.CHIME_OPEN=10]="CHIME_OPEN",e[e.GROWTH_DEEP_LINK=15]="GROWTH_DEEP_LINK",e[e.OPEN_COLLAB_BROWSE=16]="OPEN_COLLAB_BROWSE"})(t||(t={})),n.default=t})),define("modules/clean/unity/web_socket",["require","exports","tslib","modules/clean/unity/logger","modules/clean/unity/websocket_config"],(function(e,n,t,i,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.UnityWebSocket=void 0,i=t.__importDefault(i),n.UnityWebSocket={create:function(e){var n=new i.default;return o.WebSocketConfig.canUnityConnect()&&n.report_event("using_default_web_socket"),new WebSocket(e)},web_sockets_supported:function(){return o.WebSocketConfig.canUnityConnect()}}})),define("modules/clean/unity/websocket_config",["require","exports","tslib","modules/core/browser_detection"],(function(e,n,t,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WebSocketConfig=void 0,i=t.__importStar(i),n.WebSocketConfig={canUnityConnect:function(){return n.WebSocketConfig.canBrowserSupportNonSecureWebsocket()},canBrowserSupportNonSecureWebsocket:function(){var e=parseInt(i.version,10);return!!(i.safari&&e<9)||(!!(i.mozilla&&e>=55)||(!!(i.chrome&&e>=53)||!!i.edgeChromium()))}},n.default=n.WebSocketConfig})),define("spectrum-sharing/components/sharing_spinner/index",["require","exports","tslib","spectrum-sharing/components/sharing_spinner/sharing_spinner"],(function(e,n,t,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t.__exportStar(i,n)})),define("spectrum-sharing/components/sharing_spinner/sharing_spinner",["require","exports","tslib","react","classnames","dig-components/typography","dig-components/progress_indicators"],(function(e,n,t,i,o,r,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SharingSpinner=void 0,i=t.__importStar(i),o=t.__importDefault(o);var a=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.ariaValue,t=e.iconSize,a=e.textSize,_=e.message,c=e.className,l=o.default("scl-sharing-spinner__text",c);return i.createElement(r.Text,{size:a,isBold:!0},i.createElement(s.Spinner,{"aria-valuetext":n,size:t,className:"scl-sharing-spinner__icon"}),_&&i.createElement("span",{className:l},_))},n})(i.Component);n.SharingSpinner=a,a.displayName="SharingSpinner",a.defaultProps={iconSize:"xsmall"}})),define("spectrum-sharing/utils/logging",["require","exports"],(function(e,n){"use strict";var t,i,o,r,s,a,_;Object.defineProperty(n,"__esModule",{value:!0}),n.LinkKeyTypes=n.LinkTypes=n.AccessType=n.ScreenName=n.SettingsTabName=n.ShareTabName=n.TiburonEventName=void 0,(t=n.TiburonEventName||(n.TiburonEventName={})).AttemptTargetValidation="ATTEMPT_TARGET_VALIDATION",t.BeginShareFlow="BEGIN_SHARE_FLOW",t.ClickManageAccess="CLICK_MANAGE_ACCESS",t.SelectChangeMemberPermission="SELECT_CHANGE_MEMBER_PERMISSION",t.SucceedChangeMemberPermission="SUCCEED_CHANGE_MEMBER_PERMISSION",t.FailChangeMemberPermission="FAIL_CHANGE_MEMBER_PERMISSION",t.AttemptCreateSharedLinkWithSettings="ATTEMPT_CREATE_SHARED_LINK_WITH_SETTINGS",t.SucceedCreateSharedLinkWithSettings="SUCCEED_CREATE_SHARED_LINK_WITH_SETTINGS",t.FailCreateSharedLinkWithSettings="FAIL_CREATE_SHARED_LINK_WITH_SETTINGS",t.ClickTibCopyLink="CLICK_TIB_COPY_LINK",t.ClickTibCreateLink="CLICK_TIB_CREATE_LINK",t.ClickInbandShareButton="CLICK_INBAND_SHARE_BUTTON",t.CopySharedLink="COPY_SHARED_LINK",t.CopySharedLinkFailure="COPY_SHARED_LINK_FAILURE",t.ElementClick="ELEMENT_CLICK",t.ElementView="ELEMENT_VIEW",t.FailInbandShare="FAIL_INBAND_SHARE",t.FailTargetValidation="FAIL_TARGET_VALIDATION",t.MemberListLoaded="MEMBER_LIST_LOADED",t.OpenFileSettingsModal="OPEN_FILE_SETTINGS_MODAL",t.OpenFolderSettingsModal="OPEN_FOLDER_SETTINGS_MODAL",t.OpenLinkSettingsModal="OPEN_LINK_SETTINGS_MODAL",t.ShareModalEmailUnverified="SHARE_MODAL_EMAIL_UNVERIFIED",t.SucceedInbandShare="SUCCEED_INBAND_SHARE",t.SucceedTargetValidation="SUCCEED_TARGET_VALIDATION",t.ViewLinkOnlyModal="VIEW_LINK_ONLY_MODAL",t.ViewShareModal="VIEW_SHARE_MODAL",t.AttemptTargetSearch="ATTEMPT_TARGET_SEARCH",t.SucceedTargetSearch="SUCCEED_TARGET_SEARCH",t.FailTargetSearch="FAIL_TARGET_SEARCH",t.AttemptNavigateAwayDuringShare="ATTEMPT_NAVIGATE_AWAY_DURING_SHARE",t.SucceedNavigateAwayDuringShare="SUCCEED_NAVIGATE_AWAY_DURING_SHARE",t.AttemptRemoveAllMembers="ATTEMPT_REMOVE_ALL_MEMBERS",t.SucceedRemoveAllMembers="SUCCEED_REMOVE_ALL_MEMBERS",t.FailRemoveAllMembers="FAIL_REMOVE_ALL_MEMBERS",t.ChangeSharedLinkAudience="CHANGE_SHARED_LINK_AUDIENCE",t.ClickShareButtonLinkSettingsStatus="CLICK_SHARE_BUTTON_LINK_SETTINGS_STATUS",t.ClickSettingsText="CLICK_SETTINGS_TEXT",t.ClickSettingsGear="CLICK_SETTINGS_GEAR",t.CloseShareModal="CLOSE_SHARE_MODAL",t.ViewManageAccessScreen="VIEW_MANAGE_ACCESS_SCREEN",t.ViewSettingsScreen="VIEW_SETTINGS_SCREEN",t.ViewShareScreen="VIEW_SHARE_SCREEN",t.ViewShareTab="VIEW_SHARE_TAB",t.ViewSettingsTab="VIEW_SETTINGS_TAB",(i=n.ShareTabName||(n.ShareTabName={})).EditTab="edit_tab",i.ViewTab="view_tab",(o=n.SettingsTabName||(n.SettingsTabName={})).FileSettingsTab="file_settings",o.FolderSettingsTab="folder_settings",o.EditLinkSettingsTab="edit_link_settings",o.ViewLinkSettingsTab="view_link_settings",(r=n.ScreenName||(n.ScreenName={})).ShareScreen="share_screen",r.ManageAccessScreen="manage_access_screen",r.SettingsScreen="settings_screen",(s=n.AccessType||(n.AccessType={})).Editor="editor",s.Viewer="viewer",(a=n.LinkTypes||(n.LinkTypes={}))[a.NONE=0]="NONE",a.Righteous="righteous",a.Shmodel="shmodel",(_=n.LinkKeyTypes||(n.LinkKeyTypes={}))[_.NONE=0]="NONE",_.RL="rlkey",_.SH="tkey"}));
//# sourceMappingURL=pkg-unity-and-copy-link.min.js-vflIq_Pk4.map