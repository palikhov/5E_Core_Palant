define(["require","exports","tslib","react","classnames","typescript/component_libraries/files_components/src/blades/comments/index","typescript/libraries/comments2/src/components/comment/index","react-redux","file-viewer/comments2/plugin/editor_multiplexor"],(function(e,t,n,i,o,r,a,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentsPluginPane=void 0,i=n.__importStar(i),o=n.__importDefault(o);var l="contentBoxReset__1z48PfurGK__comments2",c="comments-pane-blade__OuxqIdAlel__comments2";t.CommentsPluginPane=i.memo((function(e){var t,n=e.previewType,m=e.file,u=e.sharedLinkInfo,f=e.config,p=e.context,v=e.intl,I=e.getAccountData,_=s.useDispatch(),g=(null==u?void 0:u.url)||m.fileId,h=s.useSelector((function(e){var t,n;return null!==(n=null===(t=e.mediaAddonFeatures)||void 0===t?void 0:t.frame_precise_comments)&&void 0!==n&&n})),w=s.useSelector((function(e){return e.supportedEnhancements[g]})),b=s.useSelector((function(e){return e.draftAnnotation[p.fileViewerId]})),C=s.useSelector((function(e){return Boolean(e.editorFocusRequest[p.fileViewerId])})),y=i.useMemo((function(){return function(e){switch(n){case"video":case"audio":var t=d.getFrameRateFromMetadata(m.contentMetadata);return i.createElement(a.TimeCodedComment,Object.assign({},e,{playerIntegrationEnabled:!1},d.toFramePrecisionProps(h,t)));case"image":case"ssr_doc":case"cloud_doc":return i.createElement(a.NumberedComment,Object.assign({},e));default:return i.createElement(a.Comment,Object.assign({},e))}}}),[n,m.contentMetadata,h]),M=i.useMemo((function(){return function(t){return i.createElement(d.CommentEditorMultiplexor,Object.assign({},e,{commentEditorProps:t,framePreciseCommentsEnabled:h,supportedEnhancements:w,draftNumberedAnnotation:b,editorFocusRequested:C}))}}),[C,b,h,w,e]),P=i.useMemo((function(){if("audio"===e.previewType||"video"===e.previewType)return{type:"av",seek:e.navigation.seek,pause:e.navigation.pause}}),[e.previewType,e.navigation]),E=null==u?void 0:u.url,k=i.useCallback((function(e){_(r.activateThread({fileId:m.fileId,sharedLinkURL:E,threadId:e.threadID,fileViewerId:p.fileViewerId,isThirdParty:!1}))}),[m.fileId,E,p.fileViewerId,_]);return i.createElement(r.CommentsBladePane,{className:o.default(l,(t={},t[c]=f.isInBladeRightRail,t)),fileId:m.fileId,editorComponent:M,commentComponent:y,commentsBladeId:p.fileViewerId,intl:v,showAuthModal:function(){var t;if(!e.navigation.showAuthModal)throw new Error("showAuthModal must be passed for logged out user");return e.navigation.showAuthModal({sharedLinkUrl:null===(t=e.sharedLinkInfo)||void 0===t?void 0:t.url,mode:1,kind:"comment",commentParams:{variant:"post_comment_variant",stream:{type:"file",id:m.fileId,ns_id:m.nsId,sjid:m.sjId,linkUrl:m.url,isVersionHistoryMode:!1,bytes:m.size,filename:m.name}}})},config:f,sharedLinkInfo:u,getAccountData:I,navigation:P,approvalIOClient:e.approvalIOClient,onClickAnnotation:k})}))}));
//# sourceMappingURL=pane.min.js-vflUnPN8a.map