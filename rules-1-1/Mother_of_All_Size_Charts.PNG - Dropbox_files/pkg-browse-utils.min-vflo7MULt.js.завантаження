define("dropbox/proto/js_init_data/browse_web/browse_web",["require","exports","tslib","protobufjs/minimal","dropbox/proto/js_init_data/login_form/login_form"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.browse_web=void 0;var r,o=(n=i.__importStar(n)).Reader,a=n.Writer,l=n.util,s=n.roots.default||(n.roots.default={});t.default=s,t.browse_web=s.browse_web=((r=s.browse_web||{}).BrowseExperiments=(function(e){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.goldenGateRaclsEnabled=!1,e.prototype.folderHistoryRollbacks=!1,e.prototype.lifeVault=!1,e.prototype.plusPlusEnabled=!1,e.prototype.browseWebHqlPilot=!1,e.prototype.browseColumnHeaderImprovements=!1,e.prototype.spacesFssModalVariant="",e.prototype.splitTmfTsd=!1,e.prototype.browseRightRail="",e.prototype.browseRowPerformance=!1,e.prototype.browseBoostSharing="",e.prototype.suggestedFoldersIndividual="",e.prototype.manualTagging="",e.prototype.suggestedFoldersPro="",e.prototype.coreO21nInFolderActivationM1="",e.prototype.browseCommitTokenBatch=!1,e.prototype.flowsAutomatedFolderUi=!1,e.prototype.flowsAutoTagUi=!1,e.prototype.browseContentSuggestionsVariant="",e.prototype.autoTagAwareness=!1,e.prototype.teamSpaceTsdAccessVisibility="",e.prototype.coreO21nLeverageEmptyStates="",e.prototype.isTransferEnabled=!1,e.prototype.multiObjectSharingRedesignExp="",e.prototype.coreO21nInFolderActivationM2="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.goldenGateRaclsEnabled&&Object.hasOwnProperty.call(e,"goldenGateRaclsEnabled")&&t.uint32(8).bool(e.goldenGateRaclsEnabled),null!=e.folderHistoryRollbacks&&Object.hasOwnProperty.call(e,"folderHistoryRollbacks")&&t.uint32(24).bool(e.folderHistoryRollbacks),null!=e.lifeVault&&Object.hasOwnProperty.call(e,"lifeVault")&&t.uint32(72).bool(e.lifeVault),null!=e.plusPlusEnabled&&Object.hasOwnProperty.call(e,"plusPlusEnabled")&&t.uint32(112).bool(e.plusPlusEnabled),null!=e.browseWebHqlPilot&&Object.hasOwnProperty.call(e,"browseWebHqlPilot")&&t.uint32(120).bool(e.browseWebHqlPilot),null!=e.browseColumnHeaderImprovements&&Object.hasOwnProperty.call(e,"browseColumnHeaderImprovements")&&t.uint32(176).bool(e.browseColumnHeaderImprovements),null!=e.spacesFssModalVariant&&Object.hasOwnProperty.call(e,"spacesFssModalVariant")&&t.uint32(226).string(e.spacesFssModalVariant),null!=e.splitTmfTsd&&Object.hasOwnProperty.call(e,"splitTmfTsd")&&t.uint32(240).bool(e.splitTmfTsd),null!=e.browseRightRail&&Object.hasOwnProperty.call(e,"browseRightRail")&&t.uint32(250).string(e.browseRightRail),null!=e.browseRowPerformance&&Object.hasOwnProperty.call(e,"browseRowPerformance")&&t.uint32(288).bool(e.browseRowPerformance),null!=e.browseBoostSharing&&Object.hasOwnProperty.call(e,"browseBoostSharing")&&t.uint32(298).string(e.browseBoostSharing),null!=e.suggestedFoldersIndividual&&Object.hasOwnProperty.call(e,"suggestedFoldersIndividual")&&t.uint32(322).string(e.suggestedFoldersIndividual),null!=e.manualTagging&&Object.hasOwnProperty.call(e,"manualTagging")&&t.uint32(330).string(e.manualTagging),null!=e.suggestedFoldersPro&&Object.hasOwnProperty.call(e,"suggestedFoldersPro")&&t.uint32(346).string(e.suggestedFoldersPro),null!=e.coreO21nInFolderActivationM1&&Object.hasOwnProperty.call(e,"coreO21nInFolderActivationM1")&&t.uint32(354).string(e.coreO21nInFolderActivationM1),null!=e.browseCommitTokenBatch&&Object.hasOwnProperty.call(e,"browseCommitTokenBatch")&&t.uint32(360).bool(e.browseCommitTokenBatch),null!=e.flowsAutomatedFolderUi&&Object.hasOwnProperty.call(e,"flowsAutomatedFolderUi")&&t.uint32(368).bool(e.flowsAutomatedFolderUi),null!=e.flowsAutoTagUi&&Object.hasOwnProperty.call(e,"flowsAutoTagUi")&&t.uint32(376).bool(e.flowsAutoTagUi),null!=e.browseContentSuggestionsVariant&&Object.hasOwnProperty.call(e,"browseContentSuggestionsVariant")&&t.uint32(386).string(e.browseContentSuggestionsVariant),null!=e.autoTagAwareness&&Object.hasOwnProperty.call(e,"autoTagAwareness")&&t.uint32(392).bool(e.autoTagAwareness),null!=e.teamSpaceTsdAccessVisibility&&Object.hasOwnProperty.call(e,"teamSpaceTsdAccessVisibility")&&t.uint32(402).string(e.teamSpaceTsdAccessVisibility),null!=e.coreO21nLeverageEmptyStates&&Object.hasOwnProperty.call(e,"coreO21nLeverageEmptyStates")&&t.uint32(410).string(e.coreO21nLeverageEmptyStates),null!=e.isTransferEnabled&&Object.hasOwnProperty.call(e,"isTransferEnabled")&&t.uint32(416).bool(e.isTransferEnabled),null!=e.multiObjectSharingRedesignExp&&Object.hasOwnProperty.call(e,"multiObjectSharingRedesignExp")&&t.uint32(426).string(e.multiObjectSharingRedesignExp),null!=e.coreO21nInFolderActivationM2&&Object.hasOwnProperty.call(e,"coreO21nInFolderActivationM2")&&t.uint32(434).string(e.coreO21nInFolderActivationM2),t},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new s.browse_web.BrowseExperiments;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.goldenGateRaclsEnabled=e.bool();break;case 3:n.folderHistoryRollbacks=e.bool();break;case 9:n.lifeVault=e.bool();break;case 14:n.plusPlusEnabled=e.bool();break;case 15:n.browseWebHqlPilot=e.bool();break;case 22:n.browseColumnHeaderImprovements=e.bool();break;case 28:n.spacesFssModalVariant=e.string();break;case 30:n.splitTmfTsd=e.bool();break;case 31:n.browseRightRail=e.string();break;case 36:n.browseRowPerformance=e.bool();break;case 37:n.browseBoostSharing=e.string();break;case 40:n.suggestedFoldersIndividual=e.string();break;case 41:n.manualTagging=e.string();break;case 43:n.suggestedFoldersPro=e.string();break;case 44:n.coreO21nInFolderActivationM1=e.string();break;case 45:n.browseCommitTokenBatch=e.bool();break;case 46:n.flowsAutomatedFolderUi=e.bool();break;case 47:n.flowsAutoTagUi=e.bool();break;case 48:n.browseContentSuggestionsVariant=e.string();break;case 49:n.autoTagAwareness=e.bool();break;case 50:n.teamSpaceTsdAccessVisibility=e.string();break;case 51:n.coreO21nLeverageEmptyStates=e.string();break;case 52:n.isTransferEnabled=e.bool();break;case 53:n.multiObjectSharingRedesignExp=e.string();break;case 54:n.coreO21nInFolderActivationM2=e.string();break;default:e.skipType(7&r)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/browse_web.BrowseExperiments"},e})(r.BrowseExperiments||{}),r.BrowseWebPageProps=(function(e){function e(e){if(this.selectFqPaths=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.autoTeamGroupId="",e.prototype.emailJustVerified=!1,e.prototype.emailJustVerifiedAndChanged=!1,e.prototype.fromSclSyncModal=!1,e.prototype.initFqPath="",e.prototype.nsId=0,e.prototype.nsPath="",e.prototype.openPreview=!1,e.prototype.selectFqPaths=l.emptyArray,e.prototype.sendVerificationEmail=!1,e.prototype.shareLink=!1,e.prototype.sharePrefillEmail="",e.prototype.shouldShowDeletedFiles=!1,e.prototype.shouldShowUnsyncNotification=!1,e.prototype.shouldOpenExtensionsEduModal="",e.prototype.shouldOpenAppRecommendationsModal=!1,e.prototype.shouldOpenUploadModal=!1,e.prototype.showShareModal=!1,e.prototype.showShareSuccessSnackbar=!1,e.prototype.userId=0,e.prototype.userVersionHistoryLength=0,e.prototype.browseExperiments=null,e.prototype.webTimingLoggerServerContext="",e.prototype.showPlusPlusSetupModal=!1,e.prototype.isSmbPersonalization=!1,e.prototype.hasLinkedMobile=!1,e.prototype.encryptionOptions=null,e.prototype.fromCtl=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.autoTeamGroupId&&Object.hasOwnProperty.call(e,"autoTeamGroupId")&&t.uint32(10).string(e.autoTeamGroupId),null!=e.emailJustVerified&&Object.hasOwnProperty.call(e,"emailJustVerified")&&t.uint32(16).bool(e.emailJustVerified),null!=e.emailJustVerifiedAndChanged&&Object.hasOwnProperty.call(e,"emailJustVerifiedAndChanged")&&t.uint32(24).bool(e.emailJustVerifiedAndChanged),null!=e.fromSclSyncModal&&Object.hasOwnProperty.call(e,"fromSclSyncModal")&&t.uint32(32).bool(e.fromSclSyncModal),null!=e.initFqPath&&Object.hasOwnProperty.call(e,"initFqPath")&&t.uint32(42).string(e.initFqPath),null!=e.nsId&&Object.hasOwnProperty.call(e,"nsId")&&t.uint32(48).int64(e.nsId),null!=e.nsPath&&Object.hasOwnProperty.call(e,"nsPath")&&t.uint32(58).string(e.nsPath),null!=e.openPreview&&Object.hasOwnProperty.call(e,"openPreview")&&t.uint32(64).bool(e.openPreview),null!=e.selectFqPaths&&e.selectFqPaths.length)for(var i=0;i<e.selectFqPaths.length;++i)t.uint32(74).string(e.selectFqPaths[i]);return null!=e.sendVerificationEmail&&Object.hasOwnProperty.call(e,"sendVerificationEmail")&&t.uint32(80).bool(e.sendVerificationEmail),null!=e.shareLink&&Object.hasOwnProperty.call(e,"shareLink")&&t.uint32(88).bool(e.shareLink),null!=e.sharePrefillEmail&&Object.hasOwnProperty.call(e,"sharePrefillEmail")&&t.uint32(98).string(e.sharePrefillEmail),null!=e.shouldShowDeletedFiles&&Object.hasOwnProperty.call(e,"shouldShowDeletedFiles")&&t.uint32(104).bool(e.shouldShowDeletedFiles),null!=e.shouldShowUnsyncNotification&&Object.hasOwnProperty.call(e,"shouldShowUnsyncNotification")&&t.uint32(112).bool(e.shouldShowUnsyncNotification),null!=e.shouldOpenExtensionsEduModal&&Object.hasOwnProperty.call(e,"shouldOpenExtensionsEduModal")&&t.uint32(122).string(e.shouldOpenExtensionsEduModal),null!=e.shouldOpenAppRecommendationsModal&&Object.hasOwnProperty.call(e,"shouldOpenAppRecommendationsModal")&&t.uint32(128).bool(e.shouldOpenAppRecommendationsModal),null!=e.shouldOpenUploadModal&&Object.hasOwnProperty.call(e,"shouldOpenUploadModal")&&t.uint32(136).bool(e.shouldOpenUploadModal),null!=e.showShareModal&&Object.hasOwnProperty.call(e,"showShareModal")&&t.uint32(144).bool(e.showShareModal),null!=e.showShareSuccessSnackbar&&Object.hasOwnProperty.call(e,"showShareSuccessSnackbar")&&t.uint32(152).bool(e.showShareSuccessSnackbar),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(176).int64(e.userId),null!=e.userVersionHistoryLength&&Object.hasOwnProperty.call(e,"userVersionHistoryLength")&&t.uint32(184).int32(e.userVersionHistoryLength),null!=e.browseExperiments&&Object.hasOwnProperty.call(e,"browseExperiments")&&s.browse_web.BrowseExperiments.encode(e.browseExperiments,t.uint32(194).fork()).ldelim(),null!=e.webTimingLoggerServerContext&&Object.hasOwnProperty.call(e,"webTimingLoggerServerContext")&&t.uint32(210).string(e.webTimingLoggerServerContext),null!=e.showPlusPlusSetupModal&&Object.hasOwnProperty.call(e,"showPlusPlusSetupModal")&&t.uint32(216).bool(e.showPlusPlusSetupModal),null!=e.isSmbPersonalization&&Object.hasOwnProperty.call(e,"isSmbPersonalization")&&t.uint32(224).bool(e.isSmbPersonalization),null!=e.hasLinkedMobile&&Object.hasOwnProperty.call(e,"hasLinkedMobile")&&t.uint32(232).bool(e.hasLinkedMobile),null!=e.encryptionOptions&&Object.hasOwnProperty.call(e,"encryptionOptions")&&s.login_form.EncryptionOptions.encode(e.encryptionOptions,t.uint32(242).fork()).ldelim(),null!=e.fromCtl&&Object.hasOwnProperty.call(e,"fromCtl")&&t.uint32(248).bool(e.fromCtl),t},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new s.browse_web.BrowseWebPageProps;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.autoTeamGroupId=e.string();break;case 2:n.emailJustVerified=e.bool();break;case 3:n.emailJustVerifiedAndChanged=e.bool();break;case 4:n.fromSclSyncModal=e.bool();break;case 5:n.initFqPath=e.string();break;case 6:n.nsId=e.int64();break;case 7:n.nsPath=e.string();break;case 8:n.openPreview=e.bool();break;case 9:n.selectFqPaths&&n.selectFqPaths.length||(n.selectFqPaths=[]),n.selectFqPaths.push(e.string());break;case 10:n.sendVerificationEmail=e.bool();break;case 11:n.shareLink=e.bool();break;case 12:n.sharePrefillEmail=e.string();break;case 13:n.shouldShowDeletedFiles=e.bool();break;case 14:n.shouldShowUnsyncNotification=e.bool();break;case 15:n.shouldOpenExtensionsEduModal=e.string();break;case 16:n.shouldOpenAppRecommendationsModal=e.bool();break;case 17:n.shouldOpenUploadModal=e.bool();break;case 18:n.showShareModal=e.bool();break;case 19:n.showShareSuccessSnackbar=e.bool();break;case 22:n.userId=e.int64();break;case 23:n.userVersionHistoryLength=e.int32();break;case 24:n.browseExperiments=s.browse_web.BrowseExperiments.decode(e,e.uint32());break;case 26:n.webTimingLoggerServerContext=e.string();break;case 27:n.showPlusPlusSetupModal=e.bool();break;case 28:n.isSmbPersonalization=e.bool();break;case 29:n.hasLinkedMobile=e.bool();break;case 30:n.encryptionOptions=s.login_form.EncryptionOptions.decode(e,e.uint32());break;case 31:n.fromCtl=e.bool();break;default:e.skipType(7&r)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/browse_web.BrowseWebPageProps"},e})(r.BrowseWebPageProps||{}),r)})),define("modules/clean/photos/thumbnail_url_util",["require","exports","tslib","lodash","modules/constants/python","modules/core/assert","modules/core/uri"],(function(e,t,i,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullSizeUrl=t.thumbnailUrlForSize=t.ThumbnailSizeMode=void 0,n=i.__importStar(n),r=i.__importStar(r),t.ThumbnailSizeMode=r.THUMBNAIL_SIZE_MODE;var l=r.THUMBNAIL_SIZES;t.thumbnailUrlForSize=function(e,i,r,s){o.assert(null!=i==(null!=r),"Width and height must both be specified or neither");var u={};if(null==i)o.assert(s===t.ThumbnailSizeMode.ORIGINAL||null===s,"You must supply width and height");else{var d=i+"x"+r;o.assert(l.indexOf(d)>-1,"Invalid thumbnail size ("+d+")"),u.size=d}return null!=s&&(o.assert(n.values(t.ThumbnailSizeMode).indexOf(s)>-1,"Invalid thumbnail size mode ("+s+")"),u.size_mode=s.toString()),a.URI.parse(e).updateQuery(u).toString()},t.fullSizeUrl=function(e){return a.URI.parse(e).updateQuery({size_mode:t.ThumbnailSizeMode.ORIGINAL.toString(),fv_content:"true"}).toString()}})),define("modules/clean/react/browse/browse_right_rail/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BROWSE_BLADE=void 0,t.DEFAULT_BROWSE_BLADE="info"})),define("modules/clean/react/browse/data/types",["require","exports","tslib","immutable","dropbox/proto/js_init_data/browse_web/browse_web","modules/clean/react/browse/models","modules/clean/react/files_view/types","modules/clean/react/selection","modules/clean/react/browse/browse_right_rail/types","modules/clean/react/flows/types"],(function(e,t,i,n,r,o,a,l,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBrowseState=t.ActionTypes=void 0,n=i.__importStar(n),(function(e){e.APP_INIT="BROWSE/APP_INIT",e.PUSH_BOLT_IGNORE="BROWSE/PUSH_BOLT_IGNORE",e.POP_BOLT_IGNORE="BROWSE/POP_BOLT_IGNORE",e.SELECT_FILES_BY_FQ_PATH="BROWSE/SELECT_FILES_BY_FQ_PATH",e.SHOW_TIMELINE="BROWSE/SHOW_TIMELINE",e.HIDE_TIMELINE="BROWSE/HIDE_TIMELINE",e.SHOW_FOLDER_HISTORY_PANEL="BROWSE/SHOW_FOLDER_HISTORY_PANEL",e.HIDE_FOLDER_HISTORY_PANEL="BROWSE/HIDE_FOLDER_HISTORY_PANEL",e.SET_IS_REWIND_ENABLED="BROWSE/SET_IS_REWIND_ENABLED",e.SET_BROWSE_POST_TTI_EXPERIMENTS="BROWSE/SET_BROWSE_POST_TTI_EXPERIMENTS",e.SET_BROWSE_POST_TTI_DATA="BROWSE/SET_BROWSE_POST_TTI_DATA",e.SET_CAN_DISPLAY_FOLDER_SIZES="BROWSE/SET_CAN_DISPLAY_FOLDER_SIZES",e.SET_CLIPBOARD_FILES="BROWSE/SET_CLIPBOARD_FILES",e.SET_CONTEXT="BROWSE/SET_CONTEXT",e.SET_CURRENT_FOLDER_INFO="BROWSE/SET_CURRENT_FOLDER_INFO",e.SET_FILE_HAS_AUTOMATED_RULE_MAP="BROWSE/SET_FILE_HAS_AUTOMATED_RULE_MAP",e.SET_FILE_JUMP_FILTER="BROWSE/SET_FILE_JUMP_FILTER",e.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE="BROWSE/SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE",e.SET_FILE_RENAME="BROWSE/SET_FILE_RENAME",e.SET_FOLDER_SIZES="BROWSE/SET_FOLDER_SIZES",e.SET_LOADING_STATE="BROWSE/SET_LOADING_STATE",e.SET_MOUNT_POINTS="BROWSE/SET_MOUNT_POINTS",e.SET_NEW_FOLDER_CREATION_STATE="BROWSE/SET_NEW_FOLDER_CREATION_STATE",e.SET_PAGINATED_TOTAL_NUM_FILES="BROWSE/SET_PAGINATED_TOTAL_NUM_FILES",e.SET_PATH="BROWSE/SET_PATH",e.SET_SELECTION="BROWSE/SET_SELECTION",e.SET_SHOULD_SHOW_DELETED_FILES="BROWSE/SET_SHOULD_SHOW_DELETED_FILES",e.SET_SORT_ORDER="BROWSE/SET_SORT_ORDER",e.SET_UNSORTED_FILES="BROWSE/SET_UNSORTED_FILES",e.SET_IS_FILE_VIEWER_SHOWN="BROWSE/IS_FILE_VIEWER_SHOWN",e.SET_IS_SEARCH_MODE="BROWSE/SET_IS_SEARCH_MODE",e.REQUEST_FOLDER_SIZES="BROWSE/REQUEST_FOLDER_SIZES",e.SET_FOLDER_SIZES_PENDING="BROWSE/SET_FOLDER_SIZES_PENDING",e.COMPLETE_FOLDER_SIZES="BROWSE/COMPLETE_FOLDER_SIZES",e.SET_ARE_POST_TTI_MODULES_LOADED="BROWSE/SET_ARE_POST_TTI_MODULES_LOADED",e.SET_VIEW_SCOPE="BROWSE/SET_VIEW_SCOPE",e.SET_HIDE_FILES_AND_SIDEBAR="BROWSE/SET_HIDE_FILES_AND_SIDEBAR",e.SET_IS_CREATING_SHARED_LINK="BROWSE/SET_IS_CREATING_SHARED_LINK",e.SET_RIGHTRAIL_IS_COLLAPSED="BROWSE/SET_RIGHTRAIL_COLLAPSED",e.SET_EXPANDED_BLADE="BROWSE/SET_EXPANDED_BLADE",e.SET_HAS_USER_UPLOADED_FILES="BROWSE/SET_HAS_USER_UPLOADED_FILES",e.SET_FLOWS_FOLDER_RULES_CONFIG="BROWSE/SET_FLOWS_FOLDER_RULES_CONFIG",e.SET_OVERFLOW_MENU_OPEN_REQUEST="BROWSE/SET_OVERFLOW_MENU_OPEN_REQUEST",e.SET_INLINE_OVERFLOW_MENU_OPEN_REQUEST="BROWSE/SET_INLINE_OVERFLOW_MENU_OPEN_REQUEST",e.SET_OVERFLOW_MENU_COORDINATES="BROWSE/SET_OVERFLOW_MENU_COORDINATES",e.SET_OVERFLOW_MENU_CLOSE_REQUEST="BROWSE/SET_OVERFLOW_MENU_CLOSE_REQUEST",e.SET_FOLDER_MEMBER_COUNTS="BROWSE/SET_FOLDER_MEMBER_COUNTS",e.TOGGLE_SPACES_ENTRY_POINT="BROWSE/TOGGLE_SPACES_ENTRY_POINT",e.SET_CREATE_MENU_OPEN_REQUEST="BROWSE/SET_CREATE_MENU_OPEN_REQUEST",e.HANDLE_APP_CLEANUP="BROWSE/HANDLE_APP_CLEANUP",e.SHOW_PERSONALIZATION_SUGGESTED_FOLDERS="BROWSE/SHOW_PERSONALIZATION_SUGGESTED_FOLDERS",e.SET_BACKUP_FOLDERS="BROWSE/SET_BACKUP_FOLDERS"})(t.ActionTypes||(t.ActionTypes={})),t.defaultBrowseState={boltIgnore:{added:new Set,moved:new Set,removed:new Set},canDisplayFolderSizes:!1,clipboard:{files:[]},context:new o.BrowseContext,isRewindButtonEnabled:!1,experiments:r.browse_web.BrowseExperiments.create(),browsePostTTIExperiments:{},browsePostTTIExperimentsOverrides:{},fileJumpFilter:"",filePathsToSelectOnNextUpdate:n.Set(),folderSizes:n.Map(),isRewindVisible:!1,isFolderHistoryVisible:!1,clickRewindTimestamp:void 0,clickFolderHistoryTimestamp:void 0,loadingState:a.LoadingState.LOADING_FIRST_PAGE,mountPoints:null,newFolderCreationState:a.NewFolderCreationState.CREATE_FOLDER_INACTIVE,paginatedTotalNumFiles:0,path:"",selection:l.createSelection(),shouldShowDeletedFiles:!1,user:null,unsortedFiles:n.Map(),viewer:null,currentFolderSizesQuery:n.Set(),isQueryingFolderSizes:!1,isSearchMode:!1,hasLinkedMobile:!1,autoTeamGroupId:"",hasUserUploadedFiles:!1,browsePostTTIData:{isOverFreeQuota:!1,hasExcludedNsIds:!1,uploaderPostTTIExperiments:{},preferredEditors:{},mobileWebInvites:!1,firstTaskProps:{is_eligible_team:!1,is_subtitle:!1,member_info:{tiered_admin:!1,users:[],evh_max_days:0,team_available_roles:[]},needs_pairing_token:!1,seen_desktop_tooltip:!1},familyMemberCount:0},arePostTTIModulesLoaded:!1,shouldHideFilesAndSidebar:!1,isCreatingSharedLinkMap:n.Map(),isRightRailCollapsed:!1,fileHasAutomatedRuleMap:u.FlowsMap({}),expandedBlade:s.DEFAULT_BROWSE_BLADE,flowsFolderRulesConfig:{status:"initial"},folderMemberCounts:0,isSpacesEntryPointEnabled:!0,backupFolders:null}})),define("modules/clean/react/browse/sort_helpers",["require","exports"],(function(e,t){"use strict";function i(e,t,i){for(var n="=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0;r<Math.max(e.length,t.length);r++){var o=e.charAt(r),a=t.charAt(r);if(!o)return-i;if(!a)return i;var l=n.indexOf(o),s=n.indexOf(a);if(l<s)return-i;if(s<l)return i}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.compare=void 0,t.compare=function(e,t,n,r){if(Array.isArray(e)&&Array.isArray(t)){for(var o=0;o<Math.max(e.length,t.length);o++){var a=e[o],l=t[o];if(null==a)return-n;if(null==l)return n;if("number"==typeof a&&"string"==typeof l)return-n;if("number"==typeof l&&"string"==typeof a)return n;if("string"==typeof a&&"string"==typeof l){var s=i(a,l,n);if(0!==s)return s}else{if(a<l)return-n;if(l<a)return n}}return 0}return e===t?0:r&&"string"==typeof e&&"string"==typeof t?r(e,t)<0?-n:n:e<t?-n:n}})),define("modules/clean/react/browse/util",["require","exports","tslib","modules/clean/filepath/filepath","modules/clean/react/browse/models","modules/clean/react/browse/sort_helpers","modules/clean/browse_uri_interface","modules/clean/react/files_view/sort_types","modules/core/exception","modules/core/i18n"],(function(e,t,i,n,r,o,a,l,s,u){"use strict";function d(e,t){return{isFolder:e.is_dir,value:t,isAlwaysFirst:c(e)}}function c(e){return r.File.isTeamMemberFolder(e)||r.File.isFamilySharedFolder(e)}function f(e,t){return e&&t?0:e?-1:t?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlForBackupPath=t.sortFiles=t.getSelectedFilesText=void 0,n=i.__importStar(n),t.getSelectedFilesText=function(e,t){var i=e.count(),n=u.intl.formatMessage({id:"v+fiz1",defaultMessage:"You only have partial access"});return i>0?1!==i||r.File.canViewFileMembers(e.first(),t)?u.intl.formatMessage({id:"cruh0p",defaultMessage:"{count, plural, one{{count} item selected} other{{count} items selected}}"},{count:i}):r.File.isNoAccessSharedFolder(e.first())?u.intl.formatMessage({id:"5Uq4ka",defaultMessage:"You don’t have access to this folder"}):n:t&&!t.canViewContainingNSMembers?n:""},t.sortFiles=function(e,t,i){var n=t.sortField,a=t.sortDirection,c=(function(e,t){switch(e){case l.SortField.FILENAME:case l.SortField.SHARED_WITH:case l.SortField.TAGS:return function(e){return d(e,r.File.getFilename(e))};case l.SortField.MODIFIED:return function(e){return d(e,e.ts)};case l.SortField.CATEGORY:return function(e){return d(e,r.File.getCategoryDescription(e))};case l.SortField.EXTENSION:return function(e){return d(e,r.File.getExtension(e))};case l.SortField.SIZE:return function(e){return d(e,e.is_dir&&(null==t?void 0:t.has(e.fq_path))?t.get(e.fq_path).size:e.bytes)};default:return}})(n,i),g=(function(e,t){var i=u.case_insensitive_comparator(!0),n=t===l.SortDirection.ASCENDING?1:-1;switch(e){case l.SortField.FILENAME:case l.SortField.SHARED_WITH:case l.SortField.SIZE:case l.SortField.TAGS:return(function(e,t){return function(i,n){var r=i.isFolder,a=i.value,l=i.isAlwaysFirst,s=n.isFolder,u=n.value,d=f(l,n.isAlwaysFirst);return 0!==d?d:(a||(a=1/0*e),u||(u=1/0*e),r&&s?o.compare(a,u,e,t):r?-e:s?e:o.compare(a,u,e,t))}})(n,i);case l.SortField.MODIFIED:case l.SortField.CATEGORY:case l.SortField.EXTENSION:return(function(e,t){return function(i,n){var r=i.isFolder,a=i.value,l=i.isAlwaysFirst,s=n.isFolder,u=n.value,d=f(l,n.isAlwaysFirst);return 0!==d?d:r&&s?o.compare(a,u,e,t):r?1:s?-1:""===a?1:""===u?-1:o.compare(a,u,e,t)}})(n,i);default:return}})(n,a);return c&&g?e.sortBy(c,g):(s.reportException({err:new Error("sortFiles was called with an unsupported sort field"),tags:["browse_sort_invalid_field"],severity:s.SEVERITY.CRITICAL,exc_extra:{sort_field:n}}),e)},t.getUrlForBackupPath=function(e,t,i){return e===n.parent_dir(i)?"/backup":a.browse_uri_for_fq_path(t,e).toString()}})),define("modules/clean/react/files_view/constants",["require","exports","tslib","react","modules/clean/react/files_view/types","modules/clean/react/files_view/sort_types","modules/clean/react/files_view/view_type","modules/core/i18n","modules/clean/react/files_view/contexts/experiments_context"],(function(e,t,i,n,r,o,a,l,s){"use strict";var u,d,c;Object.defineProperty(t,"__esModule",{value:!0}),t.defaultViewTypes=t.IMAGE_THUMBNAIL_EXTENSIONS=t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=t.VIEW_TYPE_SCOPE_TEXT_SEARCH=t.VIEW_TYPE_GLOBAL_SCOPE=t.VIEW_TYPE_COOKIE_NAME=t.OverflowMenuConstants=t.CulledListConstants=t.ViewTypeGridSizes=t.ViewTypeThumbnailSizes=t.AllSortDirections=t.AllLoadingStates=t.SortIsFilename=t.AllSortFields=t.AllDropTargetHighlightModes=t.AllViewTypes=t.AllRenameStates=t.AllNewFolderCreationStates=t.FilesViewTileGridConstants=t.SEARCH_LIST_VIEW_COLUMNS_DELETED=t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_COLUMNS=t.GRID_VIEW_COLUMNS=t.LIST_VIEW_COLUMNS=t.SharedWithLabel=t.GRID_VIEW_COLUMN_FLEX_RIGHT_RAIL=t.GRID_VIEW_COLUMN_FLEX=t.COLUMN_MAX_WIDTHS=t.COLUMN_MIN_WIDTHS=t.COLUMN_DEFAULT_WIDTHS=t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX=t.FILE_NAME_CELL_SEARCH_FLEX_BASIS=t.LIST_VIEW_COLUMN_FLEX=t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=t.CHECKBOX_CELL_FLEX_RIGHT_RAIL=t.CHECKBOX_CELL_FLEX=t.COMPACT_COLUMN_HEADER_HEIGHT=t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.MEDIA_INFO_ITEM_HEIGHT=t.TAGS_HEIGHT=t.MEDIA_CELL_ICON_WIDTH=t.SNIPPET_HORIZONTAL_PADDING=t.SNIPPET_HEIGHT_PER_ROW=t.ROW_SNIPPET_VERTICAL_MARGIN=t.ROW_VERTICAL_PADDING=t.ROW_SUBTITLE_HEIGHT=t.ROW_TITLE_HEIGHT=t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=t.DEFAULT_ROW_HEIGHT_DENSE=t.DEFAULT_ROW_HEIGHT=t.DEFAULT_COLUMN_HEADER_HEIGHT=void 0,n=i.__importStar(n);var f=l.intl.formatMessage({id:"P+XAua",defaultMessage:"Name"});t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_ROW_HEIGHT_DENSE=60,t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=40,t.ROW_TITLE_HEIGHT=24,t.ROW_SUBTITLE_HEIGHT=16,t.ROW_VERTICAL_PADDING=16,t.ROW_SNIPPET_VERTICAL_MARGIN=8,t.SNIPPET_HEIGHT_PER_ROW=16,t.SNIPPET_HORIZONTAL_PADDING=16,t.MEDIA_CELL_ICON_WIDTH=64,t.TAGS_HEIGHT=22,t.MEDIA_INFO_ITEM_HEIGHT=16,t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.ROW_VERTICAL_PADDING+t.ROW_TITLE_HEIGHT+t.ROW_SUBTITLE_HEIGHT+t.ROW_SNIPPET_VERTICAL_MARGIN+3*t.SNIPPET_HEIGHT_PER_ROW,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.CHECKBOX_CELL_FLEX="0 0 36px",t.CHECKBOX_CELL_FLEX_RIGHT_RAIL="0 0 44px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.FILE_NAME_CELL_SEARCH_FLEX_BASIS={3:50,2:65,1:100},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[3]+"%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[2]+"%","0 0 35%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[1]+"%"]},t.COLUMN_DEFAULT_WIDTHS={FILENAME:300,MODIFIED:160,CATEGORY:160,EXTENSION:160,SIZE:130,SHARED_WITH:160,SYNC_SETTING:160,FILE_COUNTS:160,RELEVANCE:160,LOCKED_FILES:160,POLICY:160,TAGS:160},t.COLUMN_MIN_WIDTHS={FILENAME:200,MODIFIED:140,CATEGORY:120,EXTENSION:160,SIZE:120,SHARED_WITH:120,SYNC_SETTING:120,FILE_COUNTS:120,RELEVANCE:150,LOCKED_FILES:120,POLICY:120,TAGS:120},t.COLUMN_MAX_WIDTHS={FILENAME:1200,MODIFIED:200,CATEGORY:300,EXTENSION:300,SIZE:200,SHARED_WITH:300,SYNC_SETTING:300,FILE_COUNTS:300,RELEVANCE:300,LOCKED_FILES:300,POLICY:300,TAGS:300},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.GRID_VIEW_COLUMN_FLEX_RIGHT_RAIL=[t.CHECKBOX_CELL_FLEX_RIGHT_RAIL,"1 1"],t.SharedWithLabel=function(){return n.useContext(s.ExperimentsContext).teamSpaceTsdAccessVisibility?n.default.createElement(n.default.Fragment,null,l.intl.formatMessage({id:"kGg5/N",defaultMessage:"Who can access"})):n.default.createElement(n.default.Fragment,null,l.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}))},t.LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:f,popoverTriggerLabel:f,isLocked:!0},{sortField:o.SortField.MODIFIED,label:l.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:l.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),loggingLabel:"Modified"},{sortField:o.SortField.SHARED_WITH,label:n.default.createElement(t.SharedWithLabel,null),popoverTriggerLabel:l.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}),loggingLabel:"Members",isSortOrderOptionDisabled:!0},{sortField:o.SortField.CATEGORY,label:l.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:l.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),loggingLabel:"Type"},{sortField:o.SortField.EXTENSION,label:l.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:l.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),loggingLabel:"Extension"},{sortField:o.SortField.SIZE,label:l.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:l.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size"},{sortField:o.SortField.TAGS,label:l.intl.formatMessage({id:"hI7tD7",defaultMessage:"Tags"}),popoverTriggerLabel:l.intl.formatMessage({id:"hI7tD7",defaultMessage:"Tags"}),isSortOrderOptionDisabled:!0,loggingLabel:"Tags"}],t.GRID_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:f,popoverTriggerLabel:f},{sortField:o.SortField.MODIFIED,label:l.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:l.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),loggingLabel:"Modified"},{sortField:o.SortField.CATEGORY,label:l.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:l.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),loggingLabel:"Type"},{sortField:o.SortField.EXTENSION,label:l.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:l.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),loggingLabel:"Extension"},{sortField:o.SortField.SIZE,label:l.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:l.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size"}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:f,popoverTriggerLabel:f,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:l.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:l.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),loggingLabel:"Modified",isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.SIZE,label:l.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:l.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size",isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.FILENAME,label:f,popoverTriggerLabel:f,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.RELEVANCE,label:l.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:l.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),loggingLabel:"Relevance",isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.SIZE,label:l.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:l.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size",isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:l.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:l.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),loggingLabel:"Last modified",isLocked:!1,isSortDisabled:!1}],t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.RELEVANCE,label:l.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:l.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),loggingLabel:"Relevance",isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.MODIFIED,label:l.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:l.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),loggingLabel:"Last modified",isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:o.SortField.FILENAME,label:f,popoverTriggerLabel:f,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:l.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),popoverTriggerLabel:l.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),loggingLabel:"Deleted",isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[r.NewFolderCreationState.CREATE_FOLDER_INACTIVE,r.NewFolderCreationState.PENDING_INPUT,r.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[r.RenameState.PENDING_INPUT,r.RenameState.SAVING_INPUT],t.AllViewTypes=[a.ViewType.Grid,a.ViewType.LargeGrid,a.ViewType.List,a.ViewType.CondensedList,a.ViewType.SmallGrid],t.AllDropTargetHighlightModes=[r.DropTargetHighlightMode.NONE,r.DropTargetHighlightMode.ALL_FOLDERS,r.DropTargetHighlightMode.NONSHARED_FOLDERS,r.DropTargetHighlightMode.NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[o.SortField.FILENAME,o.SortField.MODIFIED,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SIZE,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING,o.SortField.FILE_COUNTS,o.SortField.TAGS],t.SortIsFilename=[o.SortField.FILENAME,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING],t.AllLoadingStates=[r.LoadingState.LOADED,r.LoadingState.LOADING_FIRST_PAGE,r.LoadingState.LOADING_REMAINING_PAGES,r.LoadingState.LOAD_ERROR],t.AllSortDirections=[o.SortDirection.ASCENDING,o.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=((u={})[a.ViewType.Grid]=256,u[a.ViewType.LargeGrid]=512,u[a.ViewType.List]=32,u[a.ViewType.SmallGrid]=128,u),t.ViewTypeGridSizes=((d={})[a.ViewType.Grid]=160,d[a.ViewType.LargeGrid]=480,d[a.ViewType.List]=0,d[a.ViewType.SmallGrid]=80,d),t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.VIEW_TYPE_GLOBAL_SCOPE="*",t.VIEW_TYPE_SCOPE_TEXT_SEARCH=":search/text",t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=":search/image",t.IMAGE_THUMBNAIL_EXTENSIONS=["3fr","arw","bmp","cr2","crw","dcr","dcs","dng","erf","gif","heic","j2c","j2k","jp2","jpc","jpeg","jpf","jpg","jpg2","jpm","jpx","kdc","mef","mos","mrw","nef","nrw","orf","pef","png","ppm","psd","r3d","raf","rw2","rwl","sr2","svg","svgz","tga","tif","tiff","wbmp","web","webp","x3f","ai","eps","otf","ttf","3gp","3gpp","3gpp2","asf","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","mxf","oggtheora","ogv","rm","ts","vob","webm","wmv","indd"],t.defaultViewTypes=((c={})[t.VIEW_TYPE_GLOBAL_SCOPE]=a.ViewType.List,c[t.VIEW_TYPE_SCOPE_TEXT_SEARCH]=a.ViewType.List,c[t.VIEW_TYPE_SCOPE_IMAGE_SEARCH]=a.ViewType.LargeGrid,c)})),define("modules/clean/react/files_view/contexts/callback_context",["require","exports","tslib","react"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewCallbackContextProvider=t.FilesViewCallbackContext=void 0,n=i.__importStar(n),t.FilesViewCallbackContext=n.createContext(void 0),t.FilesViewCallbackContextProvider=function(e){var i=e.props,r=i.onDelete,o=i.onShowRename,a=i.onNewFolderSubmit,l=i.onNewFolderCancel,s=i.onRenameSubmit,u=i.onRenameCancel,d=i.onSetClipboard,c=i.onPasteFromClipboard,f=i.onSwitchViewType,g=i.onColumnsChanged,p=i.onCanDisplayFolderSizesChanged,_=i.onAddFileJumpKeyCode,m=i.onResetFileJump,h=i.onShowShare,T=i.onPresentInZoom,E=i.onLocationLinkClick,S=i.onNavigateToFileOrFolder,b=i.onNavigateToParentFolder,v=i.onOpenFileSharedWithMe,w=i.onOpenPaper,I=i.onSelectionChange,y=i.onSortChange,F=i.onStarClick,O=i.onComponentTTI,L=i.onFocusSearchBar,M=e.children,P=n.useMemo((function(){return{onDelete:r,onShowRename:o,onNewFolderSubmit:a,onNewFolderCancel:l,onRenameSubmit:s,onRenameCancel:u,onSetClipboard:d,onPasteFromClipboard:c,onSwitchViewType:f,onColumnsChanged:g,onCanDisplayFolderSizesChanged:p,onAddFileJumpKeyCode:_,onResetFileJump:m,onShowShare:h,onPresentInZoom:T,onLocationLinkClick:E,onNavigateToFileOrFolder:S,onNavigateToParentFolder:b,onOpenFileSharedWithMe:v,onOpenPaper:w,onSelectionChange:I,onSortChange:y,onStarClick:F,onComponentTTI:O,onFocusSearchBar:L}}),[r,o,a,l,s,u,d,c,f,g,p,_,m,h,T,E,S,b,v,w,I,y,F,O,L]);return n.createElement(t.FilesViewCallbackContext.Provider,{value:P},M)},t.FilesViewCallbackContextProvider.displayName="FilesViewCallbackContextProvider"})),define("modules/clean/react/files_view/contexts/experiments_context",["require","exports","tslib","react"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentsContext=void 0,n=i.__importDefault(n),t.ExperimentsContext=n.default.createContext({teamSpaceTsdAccessVisibility:""}),t.ExperimentsContext.displayName="FilesViewExperimentsContext"})),define("modules/clean/react/files_view/contexts/file_thumb_store",["require","exports","tslib","react","modules/clean/photos/thumb_loading/buffered_thumb_store","modules/clean/photos/thumb_loading/generic_thumb_store","modules/clean/react/files_view/view_type","modules/clean/react/browse/models","modules/clean/react/files_view/files_view_hooks","modules/clean/react/icon/file_folder_icon","modules/clean/react/files_view/constants"],(function(e,t,i,n,r,o,a,l,s,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withThumbStore=t.ThumbStoreContext=t.ThumbStoreProvider=void 0,n=i.__importDefault(n),t.ThumbStoreProvider=function(e){var i=e.shouldPrewarm,c=e.path,f=e.children,g=e.items,p=s.useIsPostTTI(),_=n.default.useMemo((function(){return p?new o.GenericThumbStore:new r.BufferedThumbStore}),[c]);return n.default.useEffect((function(){if(i){var e=[];return null==g||g.slice(0,100).forEach((function(t){if(t instanceof l.File||t instanceof l.FileSharedWithMe){var i=u.getThumbnailUrlForItem(t.thumbnail_url_tmpl,d.ViewTypeThumbnailSizes[a.ViewType.Grid]);if(i){var n=_.bind_url(i,{onSuccess:function(){}});n&&e.push(n)}}})),function(){return e.forEach((function(e){return _.unbind_url(e)}))}}}),[c,g,_,i]),n.default.createElement(t.ThumbStoreContext.Provider,{value:_},f)},t.ThumbStoreProvider.displayName="ThumbStoreProvider",t.ThumbStoreContext=n.default.createContext(new o.GenericThumbStore),t.withThumbStore=function(e){return function(r){return n.default.createElement(t.ThumbStoreContext.Consumer,null,(function(t){return n.default.createElement(e,i.__assign({},r,{thumbStore:t}))}))}}})),define("modules/clean/react/files_view/drag_drop/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/files_view/util"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFileDragEnterItem=t.cleanupExternalDragHandler=t.setupExternalDragHandler=void 0;var r=new n.ScopedEventHandlers(document);t.setupExternalDragHandler=function(e,t,i,n,o,a,l){r.add(e,"dragenter",(function(e){(t()||i())&&!e.target.closest(o)&&a()&&(l(null),n())}))},t.cleanupExternalDragHandler=function(e){r.remove(e,"dragenter")},t.onFileDragEnterItem=function(e,t,n,r,o,a,l,s){if(t||n)if(e.is_dir&&!(r&&n)){if(o)return;var u=a.isCurrentPathWriteable()&&!i.File.isReadOnlySharedFolder(e);l(e),s({path:e.fq_path,hasPermissionToUploadToFolder:u,isMovingIntoVault:Boolean(e.is_in_vault_folder)})}else l(null),s()}})),define("modules/clean/react/files_view/drag_drop/drag_to_select",["require","exports","tslib","react","modules/clean/react/components/css","modules/clean/react/files_view/types","modules/clean/react/selectable_list","lodash"],(function(e,t,i,n,r,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragToSelectController=t.shouldMouseDownInitiateDragToSelect=t.isItemInSelectArea=void 0,n=i.__importDefault(n),t.isItemInSelectArea=function(e,t){return!(e.top+e.height<t.top||e.top>t.top+t.height||e.left+e.width<t.left||e.left>t.left+t.width)},t.shouldMouseDownInitiateDragToSelect=function(e,n,r,o){return!u(e)&&(e.target===e.currentTarget||(null==r||!r.selected||!r.selected.some((function(e){return o[e]&&t.isItemInSelectArea(o[e],i.__assign(i.__assign({},n),{height:0,width:0}))}))))};var s=l.throttle((function(e,i,n,r,l){Object.keys(e).forEach((function(s){t.isItemInSelectArea(e[s],i)?(null==l?void 0:l.selected.has(s))||n(s,a.SelectOptions.DEFAULT,o.FilesViewActionSource.DRAG_TO_SELECT):(null==l?void 0:l.selected.has(s))&&r(s,!1,o.FilesViewActionSource.DRAG_TO_SELECT)}))}),25),u=function(e){for(var t=e.target;t instanceof Node&&t!==e.currentTarget;){if(!0===t.draggable)return!0;t=t.parentElement}return!1};t.DragToSelectController=r.requireCssWithComponent((function(e){var i=n.default.useState(!1),r=i[0],a=i[1],u=n.default.useState(!1),d=u[0],c=u[1],f=n.default.useState(0),g=f[0],p=f[1],_=n.default.useRef(null),m=n.default.useRef({}),h=n.default.useState({top:0,left:0}),T=h[0],E=h[1],S=n.default.useState({top:0,left:0,width:0,height:0}),b=S[0],v=S[1];n.default.useEffect((function(){var e=l.throttle(w,8);return d&&(window.document.addEventListener("mouseup",I),window.document.addEventListener("mousemove",e)),function(){window.document.removeEventListener("mousemove",e),window.document.removeEventListener("mouseup",I)}}),[d,r]),n.default.useEffect((function(){return window.document.addEventListener("click",y,!0),function(){window.document.removeEventListener("click",y,!0)}}),[g]),n.default.useEffect((function(){r&&s(m.current,b,e.handleSelect,e.handleDeselect,e.selection)}),[r,b,e.selection]);var w=function(t){var i;if(d){if(1!==t.buttons)return c(!1),void a(!1);var n=null===(i=_.current)||void 0===i?void 0:i.getBoundingClientRect(),l=t.clientX-((null==n?void 0:n.left)||0),s=t.clientY-((null==n?void 0:n.top)||0);s<0&&(s=0),l<0&&(l=0),n&&l-10>n.width&&(l=n.width-10),n&&s-20>n.height&&(s=n.height-20);var u={top:Math.min(T.top,s),left:Math.min(T.left,l),height:Math.abs(T.top-s),width:Math.abs(T.left-l)};!r&&u.width<=5&&u.height<=5||(r?r&&v(u):(t.preventDefault(),e.updateSelection([],o.FilesViewActionSource.DRAG_TO_SELECT,!0),v(u),a(!0)))}},I=function(e){d&&(r&&p(Date.now()),a(!1),c(!1),v({top:0,left:0,width:0,height:0}),E({top:0,left:0}),e.preventDefault())},y=function(e){Date.now()-g<50&&e.preventDefault(),window.document.removeEventListener("click",y,!0)};if(!e.isDragToSelectEnabled){return n.default.createElement("div",null,e.children({registerSelectableItem:function(e,t){}}))}return n.default.createElement("div",{className:"files-view_drag-to-select",onMouseDown:function(i){var n;if(!i.isDefaultPrevented()&&!d&&1===i.buttons){var r=null===(n=_.current)||void 0===n?void 0:n.getBoundingClientRect(),o=i.clientX-((null==r?void 0:r.left)||0),a=i.clientY-((null==r?void 0:r.top)||0);t.shouldMouseDownInitiateDragToSelect(i,{top:a,left:o},e.selection,m.current)&&(E({top:a,left:o}),v({top:a,left:o,width:0,height:0}),c(!0))}},ref:_},n.default.createElement("div",{className:"files-view_drag-to-select-removal"},e.children({registerSelectableItem:function(e,t){var i,n=t.top+40,r=null===(i=_.current)||void 0===i?void 0:i.getBoundingClientRect();if(r){var o=t.width||r.width;m.current[e]={top:n,width:o,left:t.left,height:t.height}}}})),r&&n.default.createElement("div",{className:"files-view_select-box",style:{top:b.top+"px",left:b.left+"px",width:b.width+"px",height:b.height+"px"}}))}),["/static/css/files_view/drag_to_select-vfl1pMR5V.css"])})),define("modules/clean/react/files_view/file_jump",["require","exports","tslib","ts-keycode-enum","modules/core/dom"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyPress=void 0,r=i.__importStar(r);var o=["/","\\",":","?","*","<",">","|"],a=null;t.handleKeyPress=function(e,t,i,l){var s=null!=e.which?e.which:e.keyCode,u=String.fromCharCode(s);s<n.Key.Space||o.includes(u)||!document.activeElement.closest(".brws-checkbox-cell")&&r.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||s===n.Key.Space&&!t()||(s===n.Key.Space&&t()&&e.preventDefault(),i(u),null!=a&&clearTimeout(a),a=setTimeout((function(){l()}),1e3))}})),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","immutable","lodash","react","spectrum/media_table/index","spectrum/table/index","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/view_type"],(function(e,t,i,n,r,o,a,l,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyFolderTable=void 0,n=i.__importStar(n),r=i.__importStar(r),o=i.__importDefault(o);t.EmptyFolderTable=function(e){var t=e.subtitle,i=e.subtitleLink,d=e.subtitleOnClick,c=e.numRowsAbove,f=void 0===c?2:c,g=e.totalRows,p=void 0===g?14:g,_=e.title,m=e.onTTI,h=e.onFocusSearchBar,T=void 0===h?r.noop:h,E=e.onNavigateToParentFolder,S=void 0===E?r.noop:E,b=e.onOpenKeyboardShortcutModal,v=void 0===b?r.noop:b,w=e.onPasteFromClipboard,I=void 0===w?r.noop:w,y=o.default.useRef(null);o.default.useEffect((function(){return null==m||m(),s.setupFilesViewKeyboardShortcuts({viewType:u.ViewType.List,getIsGlobalEvent:s.generateGetIsGlobalEventForRef(y),getIsItemEvent:function(){return!1},getSelectedFiles:function(){return n.OrderedMap()},isCurrentPathWriteable:function(){return!1},selectAllAction:r.noop,deselectAllAction:r.noop,onCopyToClipboard:r.noop,onCutToClipboard:r.noop,onDelete:r.noop,onFocusSearchBar:T,onNavigateToFileOrFolder:r.noop,onNavigateToParentFolder:S,onPasteFromClipboard:I,onShowRename:r.noop,scope:"EmptyFolderTable",onShowHelpMenu:function(){return v()}}),function(){s.resetFilesViewKeyboardShortcuts("EmptyFolderTable")}}),[]);for(var F=[],O=0;O<f;O++)F.push(o.default.createElement(a.MediaRow,{key:-O-1}));var L=[],M=Math.max(p-f-1,0);for(O=0;O<M;O++)L.push(o.default.createElement(a.MediaRow,{key:O+1}));var P=o.default.createElement("h3",{className:"u-font-strong empty-folder-table-title"},_);return o.default.createElement(l.Table,{role:"main","aria-atomic":"true","aria-live":"polite",className:"empty-folder-table",ref:y},o.default.createElement(l.TableHead,null),o.default.createElement(l.TableBody,null,F,o.default.createElement(a.MediaRow,{key:0},o.default.createElement(a.MediaCell,{className:"empty-folder-table-cell",title:P,subtitle:t&&i?o.default.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:i,onClick:d},t):t?o.default.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0})),L))},t.EmptyFolderTable.displayName="EmptyFolderTable"})),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],(function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSharingDisabledForFile=t.canFileBeHighlightedDropTarget=void 0,t.canFileBeHighlightedDropTarget=function(e){var t=e.file,o=e.dropTargetHighlightMode;if(o===n.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(r.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(o){case n.DropTargetHighlightMode.ALL_FOLDERS:return!0;case n.DropTargetHighlightMode.NONSHARED_FOLDERS:return t.type!==i.FileTypes.SHARED_FOLDER;case n.DropTargetHighlightMode.NONSHARED_NONTEAM_FOLDERS:return![i.FileTypes.SHARED_FOLDER,i.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1},t.isSharingDisabledForFile=function(e){var t=e.context,n=e.file,a=(e.user,e.expVaultEnableViewOnlySharing),l=void 0!==a&&a,s=n.per_node_metadata,u=!!((null==s?void 0:s.link_node)||(null==s?void 0:s.suppress_ns_partition)||(null==s?void 0:s.suppress_shared_link));return n.isDeleted||n.is_dir&&o.shouldUsePublicFolderSharing(t.config,n.fq_path)||r.File.isTeamMemberFolder(n)||!r.File.canViewFileMembers(n,t)||t.isInsideVaultFolder&&!l||n.type===i.FileTypes.VAULT_FOLDER||n.type===i.FileTypes.SANDBOX||u}})),define("modules/clean/react/files_view/file_thumbnail",["require","exports","tslib","classnames","react","spectrum/file_icon/get_extension","modules/clean/react/files_view/constants","modules/clean/react/files_view/view_type","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/user_education/react/user_education_effect","modules/clean/react/files_view/contexts/file_thumb_store"],(function(e,t,i,n,r,o,a,l,s,u,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileThumbnail=t.FileThumbnailComponentForTests=void 0,n=i.__importDefault(n);var f=(function(e){function t(t){var i=e.call(this,t)||this;i._thumbRequestId=null,i.handleThumbnailError=function(){i.setState({thumbnailSrc:null})};var n=t.thumbStore,r=t.file.thumbnail_url_tmpl;return i.state={thumbnailSrc:r?n.get_thumb(r):null},i}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchThumbnail(this.props)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e))},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded()},t.prototype.fetchThumbnail=function(e){var t=this,i=e.file,n=e.thumbStore,r=i.fq_path||i.filename||"",u=o.getExtension(r);if(u&&a.IMAGE_THUMBNAIL_EXTENSIONS.includes(u)){var d=s.getThumbnailUrlForItem(i.thumbnail_url_tmpl,this.props.thumbnailSize?this.props.thumbnailSize:a.ViewTypeThumbnailSizes[l.ViewType.List]);d&&(this._thumbRequestId=n.bind_url(d,{onSuccess:function(){t.setState({thumbnailSrc:n.get_thumb(d)})},onError:function(){t.handleThumbnailError()}}))}},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbnailSrc:null})},t.prototype.render=function(){var e=this.props,t=e.file,i=e.showCDMUserEducationEffects,o=e.iconSize,a=this.state.thumbnailSrc,l=t.fq_path||t.filename;return a?r.default.createElement(u.LockBadge,{file:this.props.file,variant:"preview-small"},r.default.createElement("img",{alt:l,draggable:!1,className:n.default("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:a,onError:this.handleThumbnailError})):r.default.createElement(g,{file:t,showCDMUserEducationEffects:i,iconSize:o})},t.displayName="FileThumbnailComponentForTests",t})((r=i.__importDefault(r)).default.PureComponent);t.FileThumbnailComponentForTests=f,t.FileThumbnail=c.withThumbStore(f);var g=function(e){var t=e.file,n=e.showCDMUserEducationEffects,o=e.iconSize,a=o?{height:o.toString(),width:o.toString()}:{},l=r.default.createElement(s.FileOrFolderIcon,i.__assign({className:"brws-file-name-cell-icon",file:t,showPreview:!1},a));return n?r.default.createElement(d.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},l):l};g.displayName="FileThumbnailFallback"})),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","tslib","keymaster","react-dom","modules/clean/react/browse/action_logger","modules/clean/react/files_view/file_jump","modules/clean/react/files_view/view_type","modules/clean/react/files_view/util","modules/clean/undo","modules/core/browser_detection","modules/core/i18n","modules/core/notify"],(function(e,t,i,n,r,o,a,l,s,u,d,c,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFileJumpKeyboardShortcuts=t.setupFileJumpKeyboardShortcuts=t.setupFilesViewKeyboardShortcuts=t.getActionsAndAttachLogging=t.resetFilesViewKeyboardShortcuts=t.generateGetIsGlobalEventForRef=t.generateGetIsGlobalEvent=t.FILES_VIEW_TILE_GRID_SHORTCUTS=t.FILES_VIEW_LIST_SHORTCUTS=t.FILES_VIEW_SHORTCUTS=void 0,n=i.__importDefault(n),r=i.__importStar(r),a=i.__importStar(a),u=i.__importStar(u),d=i.__importStar(d),t.FILES_VIEW_SHORTCUTS=[{key:c.intl.formatMessage({id:"kOb587",defaultMessage:"/"}),desc:c.intl.formatMessage({id:"vOBkFB",defaultMessage:"Search"})},{windowsKey:c.intl.formatMessage({id:"JD6thv",defaultMessage:"Ctrl + a"}),macKey:c.intl.formatMessage({id:"vXQEej",defaultMessage:"⌘ + a"}),desc:c.intl.formatMessage({id:"n7drWm",defaultMessage:"Select all files"})},{windowsKey:c.intl.formatMessage({id:"yY9fAj",defaultMessage:"Esc"}),macKey:c.intl.formatMessage({id:"yIq4Am",defaultMessage:"esc"}),desc:c.intl.formatMessage({id:"m7zp3J",defaultMessage:"Deselect all files"})},{windowsKey:c.intl.formatMessage({id:"BmNZ7+",defaultMessage:"Ctrl + c"}),macKey:c.intl.formatMessage({id:"L/3I1a",defaultMessage:"⌘ + c"}),desc:c.intl.formatMessage({id:"jD02CF",defaultMessage:"Copy selected file(s)"})},{windowsKey:c.intl.formatMessage({id:"TeH7ne",defaultMessage:"Ctrl + x"}),macKey:c.intl.formatMessage({id:"Hjoc2x",defaultMessage:"⌘ + x"}),desc:c.intl.formatMessage({id:"JvfueH",defaultMessage:"Cut selected file(s)"})},{windowsKey:c.intl.formatMessage({id:"pApXZD",defaultMessage:"Ctrl + v"}),macKey:c.intl.formatMessage({id:"1MiQRb",defaultMessage:"⌘ + v"}),desc:c.intl.formatMessage({id:"ORvNm9",defaultMessage:"Paste selected file(s) into the current folder"})},{key:c.intl.formatMessage({id:"u3d9dU",defaultMessage:"F2"}),desc:c.intl.formatMessage({id:"GrOPDo",defaultMessage:"Rename selected file"})},{windowsKey:c.intl.formatMessage({id:"kHlg2I",defaultMessage:"Delete"}),macKey:c.intl.formatMessage({id:"ZZU2Yr",defaultMessage:"delete"}),desc:c.intl.formatMessage({id:"45XRF8",defaultMessage:"Delete selected file(s)"})},{windowsKey:c.intl.formatMessage({id:"8X8aMD",defaultMessage:"Ctrl + z"}),macKey:c.intl.formatMessage({id:"10+RMZ",defaultMessage:"⌘ + z"}),desc:c.intl.formatMessage({id:"HGnEOI",defaultMessage:"Undo recent move/copy/rename/delete"})},{key:c.intl.formatMessage({id:"YQJt5v",defaultMessage:"?"}),desc:c.intl.formatMessage({id:"mFXmY0",defaultMessage:"Show keyboard shortcuts"})}],t.FILES_VIEW_LIST_SHORTCUTS=i.__spreadArrays([{key:c.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:c.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:c.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:c.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})},{key:c.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:c.intl.formatMessage({id:"rJHa1d",defaultMessage:"Go up a folder"})},{key:c.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:c.intl.formatMessage({id:"+WMBQW",defaultMessage:"Open folder"})}],t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=i.__spreadArrays([{key:c.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:c.intl.formatMessage({id:"Xg+zFf",defaultMessage:"Select file in previous row (hold shift to select range)"})},{key:c.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:c.intl.formatMessage({id:"erVlBC",defaultMessage:"Select file in next row (hold shift to select range)"})},{key:c.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:c.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:c.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:c.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})}],t.FILES_VIEW_SHORTCUTS);var g="",p=new s.ScopedEventHandlers(document);function _(e,t){return function(i){e(i)&&(i.preventDefault(),"function"==typeof t&&t(i))}}function m(e){var t=e.user,i=e.viewType,n=e.getSelectedFiles,r=e.isCurrentPathWriteable,a=e.onShowHelpMenu,l=e.onDelete,s=e.onShowRename,d=e.onFocusSearchBar,g=e.onNavigateToFileOrFolder,p=e.onNavigateToParentFolder,_=e.selectAllAction,m=e.onCopyToClipboard,h=e.onCutToClipboard,T=e.onPasteFromClipboard,E=e.deselectAllAction,S=function(){var e=n(),t=e.some((function(e){return e.read_only}));if(1===e.size)if(r()&&!t){var i=e.first();i.isDeleted?f.Notify.error(c.intl.formatMessage({id:"CCUrto",defaultMessage:"Deleted files can’t be renamed."})):s(i)}else f.Notify.warning(c.intl.formatMessage({id:"jXim1P",defaultMessage:"You don’t have permission to rename files in this folder."}))},b=function(){var e=n();e.size&&l(e)},v=function(){u.performUndo()},w=function(){var e=n();1===e.size&&g(e.first())},I=function(){var e=n(),t=e.first();1===e.size&&t.is_dir&&g(t)},y=function(e,n){o.logKeyboardShortcutUsage({user_id:t?t.id:null,view_type:i,keyboard_shortcut_type:e}),n()};return{renameFile:function(){y("rename",S)},focusSearchBar:function(){y("search",d)},showHelpMenu:function(){y("help",a)},selectAll:function(){y("select-all",_)},copyToClipboard:function(){y("copy",m)},cutToClipboard:function(){y("cut",h)},deleteFiles:function(){y("delete",b)},pasteFromClipboard:function(){y("paste",T)},undoAction:function(){y("undo",v)},deselectFiles:function(){y("deselect",E)},navigateToFileOrFolder:function(){y("navigate-file-folder",w)},navigateToFolder:function(){y("navigate-folder",I)},navigateToParent:function(){y("navigate-parent",p)}}}t.generateGetIsGlobalEvent=function(e){return function(t){return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&r.findDOMNode(e).contains(t.target)}},t.generateGetIsGlobalEventForRef=function(e){return function(t){var i;return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&(null===(i=e.current)||void 0===i?void 0:i.contains(t.target))||!1}},t.resetFilesViewKeyboardShortcuts=function(e){var t;t=e,n.default.clearScope(t),n.default.setScope(g),p.remove(e,"keydown"),p.remove(e,"keyup")},t.getActionsAndAttachLogging=m,t.setupFilesViewKeyboardShortcuts=function(e){var t=e.scope,i=e.getIsItemEvent,r=e.getIsGlobalEvent;(g=n.default.getScope())!==t&&n.default.setScope(t);var o=m(e);n.default("f2",t,_(i,o.renameFile)),n.default("/",t,_(r,o.focusSearchBar)),n.default("shift+/",t,_(r,o.showHelpMenu)),n.default("escape",t,_(r,o.deselectFiles)),d.mac?(n.default("command+a",t,_(r,o.selectAll)),n.default("command+c",t,_(i,o.copyToClipboard)),n.default("backspace",t,_(i,o.deleteFiles)),n.default("command+v",t,_(r,o.pasteFromClipboard)),n.default("command+x",t,_(i,o.cutToClipboard)),n.default("command+z",t,_(r,o.undoAction))):(n.default("ctrl+a",t,_(r,o.selectAll)),n.default("ctrl+c",t,_(i,o.copyToClipboard)),n.default("delete",t,_(i,o.deleteFiles)),n.default("ctrl+v",t,_(r,o.pasteFromClipboard)),n.default("ctrl+x",t,_(i,o.cutToClipboard)),n.default("ctrl+z",t,_(r,o.undoAction))),e.viewType===l.ViewType.List&&(n.default("right",t,_(i,o.navigateToFolder)),n.default("left",t,_(r,o.navigateToParent)))},t.setupFileJumpKeyboardShortcuts=function(e){var t=e.scope,i=e.getIsFileJumping,r=e.onAddFileJumpKeyCode,o=e.onResetFileJump;p.add(t,"keypress",(function(e){n.default.getScope()===t&&a.handleKeyPress(e,i,r,o)}))},t.resetFileJumpKeyboardShortcuts=function(e){p.remove(e,"keypress")}})),define("modules/clean/react/files_view/name_input",["require","exports","tslib","react","ts-keycode-enum","modules/clean/react/files_view/types","dig-components/text_fields"],(function(e,t,i,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameInput=void 0,n=i.__importDefault(n);var l=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=n.default.createRef(),t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(o.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===r.Key.Escape?(e.preventDefault(),t.props.onCancel({source:o.NameInputActionSource.ESC})):e.keyCode===r.Key.Enter&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(o.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.current&&this.inputRef.current.focus(),window.requestAnimationFrame((function(){if(e.inputRef.current){var t=e.inputRef.current.value,i=e.props.ignoreFileExtension?t.length:t.lastIndexOf(".");i<0&&(i=t.length),e.inputRef.current.setSelectionRange(0,i)}}))},t.prototype.submitIfChanged=function(e){if(this.inputRef.current){var t=this.inputRef.current.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)}},t.prototype.render=function(){return n.default.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},n.default.createElement(a.TextInput,{ref:this.inputRef,defaultValue:this.props.defaultValue,className:this.props.className,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:l,onClick:l,onSubmit:l,idDir:null},t.displayName="NameInput",t})(n.default.PureComponent);t.NameInput=s})),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","modules/clean/react/async/loadable","modules/core/browser_detection","modules/core/i18n"],(function(e,t,i,n,r,o,a,l,s,u,d,c){"use strict";var f;Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewOverflowMenu=t.OverflowMenuSize=t.AsyncFilesViewMobileOverflowMenu=void 0,n=i.__importDefault(n),r=i.__importDefault(r),l=i.__importStar(l),t.AsyncFilesViewMobileOverflowMenu=u.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/files_view/mobile_overflow_menu"],t,i)})).then(i.__importStar).then((function(e){return e.FilesViewMobileOverflowMenu}))}}),(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(f=t.OverflowMenuSize||(t.OverflowMenuSize={}));var g=(function(e){function o(t){var i=e.call(this,t)||this;return i.handleSelection=function(e){e.performAction()},i.handleMenuToggle=function(e){var t=e.isOpen;if(t&&i.props.onMenuOpen&&i.props.onMenuOpen(),o.isDynamicProps(i.props)&&t){var n=i.props.getOverflowMenuActions(i.props.file,!!i.props.canDisplayFolderSizes);i.setState({actionSection:n})}},i.handlePreventMouseDown=function(e){e.preventDefault(),e.stopPropagation()},i.handleMobileMenuOpen=function(e){return function(t){i.handlePreventMouseDown(t),i.handleMenuToggle({isOpen:!0}),e()}},i.handleClick=function(e){return function(t){i.handlePreventMouseDown(t),e({})}},i.state={actionSection:o.isDynamicProps(t)?[]:t.actionSection},i}return i.__extends(o,e),o.prototype.render=function(){var e=this,a=this.props,l=a.isResponsive,u=a.size,c=a.showBorders,g=a.ariaHidden,_=(o.isDynamicProps(this.props)?this.props:{}).file,m=void 0===_?void 0:_,h=l&&d.is_mobile_or_tablet(),T=u===f.Small?"small":"standard";return n.default.createElement("div",{"aria-hidden":g?"true":void 0,className:"browse-overflow-menu"},h?n.default.createElement(t.AsyncFilesViewMobileOverflowMenu,{trigger:function(t){var i=t.openMobileMenu;return n.default.createElement(p,{onClick:e.handleMobileMenuOpen(i),showBorders:c,size:T})},file:m,actionSection:this.state.actionSection}):n.default.createElement(s.Menu.Wrapper,{onSelection:this.handleSelection,onToggle:this.handleMenuToggle,onClick:this.handlePreventMouseDown,onDoubleClick:this.handlePreventMouseDown,isPortaled:!1},(function(t){var o=t.getTriggerProps,a=t.getContentProps,l=t.openMenu;return n.default.createElement(n.default.Fragment,null,n.default.createElement(p,{triggerProps:o(),onClick:e.handleClick(l),showBorders:c,size:T,tabIndex:g?-1:0}),n.default.createElement(s.Menu.Content,i.__assign({placement:"bottom-end"},a(),{className:"browse-overflow-menu-content"}),e.state.actionSection.map((function(e,t){return n.default.createElement(s.Menu.Segment,{key:"action-group-"+t},e.map((function(e,t){return n.default.createElement(s.Menu.ActionItem,{key:t+"-"+e.label,value:e,disabled:e.disabled,className:r.default("browse-overflow-menu-item",e.className)},e.label)})))}))))})))},o.isDynamicProps=function(e){return"file"in e},o.defaultProps={onMenuToggle:function(){},isResponsive:!0},o.displayName="FilesViewOverflowMenu",o})(n.default.Component);t.FilesViewOverflowMenu=g;var p=function(e){var t=e.size,r=e.showBorders,s=e.onClick,u=e.tabIndex,d=e.triggerProps,f=c.intl.formatMessage({id:"oeNPkV",defaultMessage:"More actions"});return n.default.createElement(o.IconButton,i.__assign({},d,{"aria-label":f,onClick:s,size:t,variant:r?"outline":"transparent",tabIndex:u}),n.default.createElement(a.UIIcon,{src:l.MoreHorizontalLine,size:t}))};p.displayName="MenuTrigger"})),define("modules/clean/react/files_view/star",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/files_view/contexts/callback_context","modules/clean/react/browse/models"],(function(e,t,i,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarContainer=void 0,n=i.__importDefault(n),t.StarContainer=r.Loadable({loader:function(){return i.__awaiter(void 0,void 0,void 0,(function(){var t,r,l,s,u;return i.__generator(this,(function(d){switch(d.label){case 0:return[4,new Promise((function(t,i){e(["modules/clean/react/starred/browse_exports"],t,i)})).then(i.__importStar)];case 1:return t=d.sent(),r=t.idTypePairFromStarrableItem,l=t.itemNameFromStarrableItem,s=t.Star,u=t.StarredSource,[2,function(e){var t=e.item,i=e.user,d=e.className,c=e.isReadOnly,f=e.tabIndex,g=e.starButtonClassName,p=e.alwaysShowUnstarred,_=r(t),m=_.id,h=_.type,T=l(t),E=(n.default.useContext(o.FilesViewCallbackContext)||{}).onStarClick;return n.default.createElement("div",{className:d},n.default.createElement(s,{id:m,key:"star",idType:h,isDir:Boolean(t.is_dir),user:i,onStarClick:function(e){t instanceof a.File&&(null==E||E(t,e))},source:u.BROWSE,isReadOnly:c,tabIndex:f,starButtonClassName:g,alwaysShowUnstarred:p,itemName:T}))}]}}))}))}})})),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","classnames","immutable","react","modules/clean/em_string","modules/clean/filepath/filepath","modules/clean/filetypes","modules/clean/react/browse/action_logger","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_drop/drag_and_drop","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/react/icon/file_folder_icon","modules/clean/react/files_view/base_tile_grid","modules/clean/react/selectable_list","modules/clean/react/sticky_position","modules/clean/react/title_bubble","modules/clean/web_user_action_events","modules/core/browser","modules/core/i18n"],(function(e,t,i,n,r,o,a,l,s,u,d,c,f,g,p,_,m,h,T,E,S,b,v,w,I,y,F,O){"use strict";function L(e){var t=e instanceof d.File?l.filename(e.fq_path):E.isFswm(e)?e.filename:e instanceof d.Paper?e.title:e.name;if(e instanceof d.File)switch(e.type){case s.FileTypes.FOLDER:t=O.intl.formatMessage({id:"C/gp+a",defaultMessage:"Folder, {alt}"},{alt:t});break;case s.FileTypes.PACKAGE:t=O.intl.formatMessage({id:"FhSkpL",defaultMessage:"Package, {alt}"},{alt:t});break;case s.FileTypes.SHARED_FOLDER:t=O.intl.formatMessage({id:"rWEPV0",defaultMessage:"Shared folder, {alt}"},{alt:t});break;case s.FileTypes.SANDBOX:t=O.intl.formatMessage({id:"+vbakm",defaultMessage:"Sandbox, {alt}"},{alt:t});break;case s.FileTypes.TEAM_SHARED_FOLDER:t=O.intl.formatMessage({id:"ZtOyAr",defaultMessage:"Team shared folder, {alt}"},{alt:t});break;case s.FileTypes.TEAM_MEMBER_FOLDER:t=O.intl.formatMessage({id:"1yRjbu",defaultMessage:"Team member folder, {alt}"},{alt:t});break;default:t=O.intl.formatMessage({id:"e8WrLw",defaultMessage:"File, {alt}"},{alt:t})}return t}function M(e){e.stopPropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewTileGrid=t.TileLabel=void 0,n=i.__importDefault(n),r=i.__importStar(r),o=i.__importDefault(o),l=i.__importStar(l),F=i.__importStar(F);var P=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props,i=t.fileRename,n=t.arePostTTIModulesLoaded,r=t.user,s=t.item,u=t.createRenameCancelHandler,f=t.createRenameSubmitHandler;if(e=s instanceof d.File?l.filename(s.fq_path):s instanceof d.FileSharedWithMe?s.filename:s instanceof d.Paper?s.title:s.name,s instanceof d.File&&i&&l.paths_are_equal(i.file.fq_path,s.fq_path)){if(i.state===T.RenameState.PENDING_INPUT)return o.default.createElement(h.TileLabelInput,{defaultValue:e,label:e,onCancel:u(s),onSubmit:f(s)});if(i.state===T.RenameState.SAVING_INPUT)return o.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:O.intl.formatMessage({id:"OefYpa",defaultMessage:"Renaming…"})})}var g=a.Emstring.em_snippet(e,14,.5),p=n&&s instanceof d.File&&!d.File.isNoAccessSharedFolder(s),_=o.default.createElement(b.TileItemLabelText,{key:"label",label:g});if(e!==g){var E=e.length<=c.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?e:o.default.createElement("div",{className:"tile-label-tooltip"},e);_=o.default.createElement(I.TitleBubble,{content:E,position:w.StickyPosition.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},_)}var S=o.default.createElement(m.StarContainer,{item:s,user:r,className:"tile-star",key:"tileStar",tabIndex:-1});return o.default.createElement("span",null,[_,p&&!i&&S])},t.displayName="TileLabel",t})(o.default.PureComponent);t.TileLabel=P;var C=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileGridRef=o.default.createRef(),t.state={inSelectMode:!1,selectedIds:r.Set(),menuOpenId:void 0},t.createRenameCancelHandler=function(e){return function(){t.props.onRenameCancel(e)}},t.createRenameSubmitHandler=function(e){return function(i){t.props.onRenameSubmit(e,i)}},t.logOverflowMenuOpen=function(){var e=t.props,i=e.selectedFiles,n=e.user,r=e.viewType,o=i?i.count((function(e){return e.is_dir})):0,a=i?i.count()-o:0;u.logContextMenuClick({uid:n.id,viewType:r,action_surface:y.ActionSurfaceLogValue.CENTER_PANE,numFilesSelected:a,numFoldersSelected:o})},t.hrefForItem=function(e,i){return i instanceof d.File?t.props.hrefForFile(e,i):i instanceof d.FileSharedWithMe?i.href:i.url},t.getTileItem=function(e,i){var n=t.props,r=n.activeDropTarget,o=n.isCreateFolderUIActive,a=n.isPhotosPage,l=n.items,s=n.selection,u=n.user,f=n.viewType,g=n.focusedFileIndex,p=n.disabledMultiselect,_=n.cutItems,m=t.state.menuOpenId,h=t.state.inSelectMode;if(o){if(0===e)return t.getCreateFolderTile();e-=1}var b=l.get(e);if(!b){var v="Placeholder "+e;return{altText:v,id:v,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var w=E.isFile(b)||E.isFswm(b),I=b,y=h&&w,F=g===e,M=y&&s.selected.some((function(e){return I instanceof d.FileSharedWithMe?I.file_id===e:I.fq_path===e})),P=t.createToggleSelectHandler(I,M),C=t.createClickHandler({item:b,inSelectModeAndIsFile:y,toggleSelectHandler:P}),R=t.createViewFileHandler(b,T.FilesViewActionSource.ROW_DOUBLE_CLICK),A=t.createViewFileHandler(b,T.FilesViewActionSource.ROW_TITLE),N=E.isFile(b)||E.isFswm(b)?t.renderTileOverflowMenu(b,i,a):void 0,D=t.renderLabelElement(e),k=L(b),x=b===r,H=t.hrefForItem(u,b),G=b instanceof d.File||b instanceof d.FileSharedWithMe?S.getThumbnailUrlForItem(b.thumbnail_url_tmpl,c.ViewTypeThumbnailSizes[f]):void 0;return{file:I,paper:b instanceof d.Paper?b:void 0,fileSharedWithMe:b instanceof d.FileSharedWithMe?b:void 0,id:d.itemId(b),labelNode:D,altText:k,thumbnailUrl:G,actionNode:N,onClick:C,onDoubleClick:R,onLabelClick:A,isDraggable:!a&&(M||!y),isViewOnly:p,isFocused:F,isSelectable:w,handleToggleSelect:P,checkboxAriaText:O.intl.formatMessage({id:"o3Djy2",defaultMessage:"Select tile"}),href:H,onDragEnter:a?void 0:t.createDragEnterHandler(I,M,x),onDragStart:a?void 0:t.createDragStartHandler(I,M,P),onDragEnd:a?void 0:t.createDragEndHandler(),isCheckboxFocusable:a,isCutToClipboard:_&&E.isCutToClipboard(b,_),className:m===d.itemId(b)?"tile--hover-forced":void 0}},t.shouldFileBeHighlightedDropTarget=function(e,i){var n=t.props.dropTargetHighlightMode;return g.canFileBeHighlightedDropTarget({file:e,dropTargetHighlightMode:n})},t.scrollIntoView=function(e,i){var n=e.top,r=e.bottom,o=t.props.viewportTopOffset,a=void 0===o?0:o,l=t.getScrollPane(),s=l.height,u=l.scrollTop,d=l.scrollTo,c=s-a,f=u+c;n<u?d(0,n):r>f&&d(0,i&&r-n<c/2?r-c/2:r-c)},t}return i.__extends(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setSelectedTiles(this.props)},t.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.props.isPhotosPage||p.resetFileJumpKeyboardShortcuts(v.SELECTABLE_TILE_GRID_KEY_SCOPE),p.resetFilesViewKeyboardShortcuts(v.SELECTABLE_TILE_GRID_KEY_SCOPE),f.cleanupExternalDragHandler(v.SELECTABLE_TILE_GRID_KEY_SCOPE)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0}))},t.prototype.componentDidUpdate=function(e){(e.createNewFolderState===T.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===T.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGridRef.current&&this.tileGridRef.current.forceUpdate(),e.isActive!==this.props.isActive&&(this.props.isActive?this.setupKeyboardShortcuts():p.resetFilesViewKeyboardShortcuts(v.SELECTABLE_TILE_GRID_KEY_SCOPE))},t.prototype.getTotalNumItems=function(){var e=this.props,t=e.items,i=e.totalNumItems,n=e.isCreateFolderUIActive,r=Math.max(t.size,i);return n&&(r+=1),r},t.prototype.createToggleSelectHandler=function(e,t){var i=this,n=e instanceof d.FileSharedWithMe?e.file_id:e.fq_path;return function(e){var r=i.props,o=r.onDeselectFile,a=r.onSelectFile,l=Boolean(!("keyCode"in e)&&e.shiftKey);t?o(n,l):a(n,l?v.SelectOptions.EXTEND:v.SelectOptions.DEFAULT)}},t.prototype.renderTileOverflowMenu=function(e,t,i){var n=this,r=this.props,a=r.getOverflowMenuActions,l=r.arePostTTIModulesLoaded,s=r.inlineActions;return s&&e instanceof d.File?o.default.createElement("div",{onClick:M},o.default.createElement(s,{file:e,className:"tile__action-button--overflow-menu",onHoverLocked:function(t){var i=t.isOpen;n.setState({menuOpenId:i?d.itemId(e):void 0})}})):l&&o.default.createElement(_.FilesViewOverflowMenu,{file:e,getOverflowMenuActions:a,size:_.OverflowMenuSize.Small,showBorders:!0,ariaHidden:!i,onMenuOpen:this.logOverflowMenuOpen})},t.prototype.renderLabelElement=function(e){var t=this.props,i=t.items,n=t.focusedFileIndex,r=t.user,a=t.fileRename,l=t.arePostTTIModulesLoaded;if(!t.isPhotosPage){var s=i.get(e);if(s){var u=this.state.inSelectMode,d=n===e;return o.default.createElement(P,{item:s,user:r,fileRename:a,arePostTTIModulesLoaded:l,inSelectMode:u,isTileFocused:d,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler})}}},t.prototype.createViewFileHandler=function(e,t){var i=this;return function(n){if(n.preventDefault(),n.stopPropagation(),"click"===n.type){var r=n;if(0===r.button){var o=i.hrefForItem(i.props.user,e);if(E.hasModifierKey(r))return void F.open_tab(o)}}e instanceof d.File?i.props.onNavigateToFileOrFolder(e,{actionSource:t}):e instanceof d.FileSharedWithMe?i.props.onOpenFileSharedWithMe(e):e instanceof d.Paper&&i.props.onOpenPaper(e)}},t.prototype.createClickHandler=function(e){var t=this,i=e.item,n=(e.inSelectModeAndIsFile,e.toggleSelectHandler),r=i instanceof d.File||i instanceof d.FileSharedWithMe;return function(e){if(r){var o="keyCode"in e;if(e.preventDefault(),o)n(e);else{var a=i instanceof d.FileSharedWithMe?i.file_id:i.fq_path;t.props.onSelectFile&&(e.shiftKey?t.props.onSelectFile(a,v.SelectOptions.EXTEND):e.ctrlKey||e.metaKey?n(e):t.props.onSelectFile(a,v.SelectOptions.ONLY))}}}},t.prototype.setSelectedTiles=function(e){var t=r.Set().withMutations((function(t){e.selectedFiles.forEach((function(e){var i;t.add((i=e)instanceof d.FileSharedWithMe?i.file_id:i.fq_path)}))}));this.setState({selectedIds:t})},t.prototype.setupExternalDragHandler=function(){var e=this;f.setupExternalDragHandler(v.SELECTABLE_TILE_GRID_KEY_SCOPE,(function(){return!!e.props.isDraggingInternalFiles}),(function(){return!!e.props.isDraggingExternalFiles}),this.props.onSetFileUploaderPath,".tile",(function(){return e.props.activeDropTarget}),this.props.onSetDropTarget)},t.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,i=t.user,n=t.viewType,r=t.onDelete,o=t.onShowRename,a=t.deselectAll,l=t.getIsCurrentPathWriteable,s=t.getIsFileJumping,u=t.onAddFileJumpKeyCode,d=t.onResetFileJump,c=t.onCopyToClipboard,f=t.onCutToClipboard,g=t.onFocusSearchBar,_=t.onPasteFromClipboard,m=t.selectAll,h=p.generateGetIsGlobalEvent(this),T=h;this.props.isPhotosPage||p.setupFileJumpKeyboardShortcuts({scope:v.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:s,onAddFileJumpKeyCode:u,onResetFileJump:d}),p.setupFilesViewKeyboardShortcuts({user:i,viewType:n,getIsGlobalEvent:h,getIsItemEvent:T,getSelectedFiles:function(){return e.props.selectedFiles},isCurrentPathWriteable:l,selectAllAction:m,deselectAllAction:a,onCopyToClipboard:c,onCutToClipboard:f,onDelete:r,onFocusSearchBar:g,onPasteFromClipboard:_,onShowRename:o,onNavigateToFileOrFolder:function(){},onNavigateToParentFolder:function(){},scope:v.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:this.props.onOpenKeyboardShortcutModal})},t.prototype.createDragEnterHandler=function(e,t,i){var n=this;return function(r){n.props.onDragEnter(r,e,t,i)}},t.prototype.createDragStartHandler=function(e,t,i){var n=this,r=this.props.preventSelectionOnDrag;return function(o){t?n.props.onDragStart(o):(r||i(o),n.props.onDragStart(o,[e]))}},t.prototype.createDragEndHandler=function(){var e=this;return function(t){e.props.onDragEnd(t)}},t.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,i=e.onNewFolderCancel,n=e.onNewFolderSubmit,r=O.intl.formatMessage({id:"pxGZm3",defaultMessage:"New folder"}),a=o.default.createElement("div",null);return t===T.NewFolderCreationState.PENDING_INPUT?(r=O.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),a=o.default.createElement(h.TileLabelInput,{label:r,onCancel:i,onSubmit:n})):t===T.NewFolderCreationState.SAVING_INPUT&&(r=O.intl.formatMessage({id:"p58M12",defaultMessage:"Creating new folder…"}),a=o.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:r})),{altText:r,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:a}},t.prototype.getScrollPane=function(){var e=this.props.scrollContainer;if(e&&e.current){var t=e.current,i=t.clientHeight,n=t.scrollTop,r=t.scrollTo;return{height:i,scrollTop:n,scrollTo:r?r.bind(e.current):function(){}}}return{height:window.innerHeight,scrollTop:"scrollingElement"in window.document&&window.document.scrollingElement?window.document.scrollingElement.scrollTop:window.document.documentElement.scrollTop,scrollTo:window.scrollTo?window.scrollTo.bind(window):function(){}}},t.prototype.getWindow=function(){var e=this.props.scrollContainer;return e&&e.current?E.createFakeWindow(e.current):window},t.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,i=e.sections,r=e.viewType,a=e.viewportTopOffset,l=e.scrollContainer,s=e.scrollPositionOffset,u=e.registerSelectableTile,d=e.isPhotosPage,f=n.default({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode,"file-tile-grid-container--click-to-select":!0}),g=new Set;return this.state.selectedIds.forEach((function(e){return g.add(e)})),l&&!l.current?null:o.default.createElement("div",{role:"grid","aria-multiselectable":"true"},o.default.createElement(b.InfiniteTileGrid,{key:"tileGrid",ref:this.tileGridRef,totalNumItems:this.getTotalNumItems(),containerClass:f,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:c.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:c.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:i.sectionStartIndices,sectionLabels:i.sectionLabels,showLabels:!d,contentOffset:a,getTileItem:this.getTileItem,selectedIds:g,handleTTI:this.props.onTTI,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:c.ViewTypeGridSizes[r],tileHeight:c.ViewTypeGridSizes[r],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget,scrollToIndex:this.props.focusedFileIndex,scrollIntoView:this.scrollIntoView,scrollPositionOffset:s||0,window:this.getWindow(),registerSelectableTile:u}))},t.defaultProps={enableMaxHeightGrouping:!1},t.displayName="FilesViewTileGrid",t})(o.default.PureComponent);t.FilesViewTileGrid=C})),define("modules/clean/react/files_view/tile_label_input",["require","exports","tslib","classnames","react","modules/clean/react/files_view/name_input"],(function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileLabelInput=void 0,n=i.__importDefault(n),r=i.__importDefault(r),t.TileLabelInput=function(e){var t=n.default("tile-label-input",e.className),i=e.defaultValue||"";return r.default.createElement(o.NameInput,{className:t,defaultValue:i,label:e.label,onCancel:e.onCancel,onClick:function(e){e&&(e.stopPropagation(),e.preventDefault())},onSubmit:e.onSubmit})}})),define("modules/clean/react/files_view/types",["require","exports","modules/clean/web_user_action_events"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewActionSource=t.DropTargetHighlightMode=t.LoadingState=t.RenameState=t.NewFolderCreationState=t.NameInputActionSource=void 0,Object.defineProperty(t,"FilesViewActionSource",{enumerable:!0,get:function(){return i.ActionSourceValue}}),(function(e){e.ESC="ESC",e.SUBMIT="SUBMIT",e.BLUR="BLUR"})(t.NameInputActionSource||(t.NameInputActionSource={})),(function(e){e.CREATE_FOLDER_INACTIVE="CREATE_FOLDER_INACTIVE",e.PENDING_INPUT="PENDING_INPUT",e.SAVING_INPUT="SAVING_INPUT"})(t.NewFolderCreationState||(t.NewFolderCreationState={})),(function(e){e.PENDING_INPUT="pending-input",e.SAVING_INPUT="saving-input"})(t.RenameState||(t.RenameState={})),(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_REMAINING_PAGES="LOADING_REMAINING_PAGES",e.LOAD_ERROR="LOAD_ERROR"})(t.LoadingState||(t.LoadingState={})),(function(e){e.NONE="NONE",e.ALL_FOLDERS="ALL_FOLDERS",e.NONSHARED_FOLDERS="NONSHARED_FOLDERS",e.NONSHARED_NONTEAM_FOLDERS="NONSHARED_NONTEAM_FOLDERS"})(t.DropTargetHighlightMode||(t.DropTargetHighlightMode={}))})),define("modules/clean/react/flows/types",["require","exports","immutable"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowsMap=t.FlowsRuleType=void 0,(function(e){e[e.None=0]="None",e[e.AutoPDF=1]="AutoPDF",e[e.AutoUnzip=2]="AutoUnzip",e[e.AutoTag=3]="AutoTag",e[e.AutoSmartSubfolders=4]="AutoSmartSubfolders",e[e.AutoImage=5]="AutoImage",e[e.AutoVideo=6]="AutoVideo",e[e.AutoTidyUp=7]="AutoTidyUp",e[e.AutoNamingConventions=8]="AutoNamingConventions",e[e.AutoAudio=9]="AutoAudio"})(t.FlowsRuleType||(t.FlowsRuleType={})),t.FlowsMap=function(e){return i.Map(e)}})),define("modules/clean/react/files_view/tile_element",["require","exports","tslib","classnames","react","dig-components/controls","ts-keycode-enum","modules/clean/paper_formatting_utils","modules/clean/react/files_view/double_click","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/react/files_view/tile_grid_logger","modules/clean/user_education/react/user_education_effect","modules/clean/react/files_view/contexts/file_thumb_store"],(function(e,t,i,n,r,o,a,l,s,u,d,c,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileElement=t.TileElementComponentForTests=t.TilePlaceholder=t.TileLabel=void 0,n=i.__importDefault(n),r=i.__importDefault(r),l=i.__importStar(l);var p=function(){return null};t.TileLabel=function(e){var t=e.ariaLabel,i=e.children,n=e.onClick;if(!i)return null;var o=r.default.createElement("div",{className:"tile-label","aria-hidden":"true"},i);return n?r.default.createElement("a",{onClick:n,tabIndex:-1,"aria-label":t},o):o},t.TileLabel.displayName="TileLabel",t.TilePlaceholder=function(e){var i=e.leftOffset,n=e.tileHeight,o=e.tileWidth,a=e.thumbNode,l=e.labelNode;return r.default.createElement("div",{className:"tile",style:{left:i,height:n,width:o,pointerEvents:"none"}},r.default.createElement("div",{className:"tile__thumb-container",style:{height:o,width:o}},a||r.default.createElement("div",{className:"tile__preview--placeholder"})),r.default.createElement(t.TileLabel,null,l))},t.TilePlaceholder.displayName="TilePlaceholder";var _=(function(e){function g(t){var n=e.call(this,t)||this;return n.thumbRequestId=null,n.animationRequestIds=[],n.handleThumbnailError=function(){var e=n.props,t=e.onThumbnailError,i=e.tileIndex;n.setState({thumbLoaded:!1}),t&&t(i)},n.logTileInteractive=function(){var e=!!n.props.thumbnailUrl,t=n.state.thumbLoaded;if(n.props.onThumbnailLoad){var i=window.requestAnimationFrame((function(){var i=window.requestAnimationFrame((function(){n.props.onThumbnailLoad(n.props.tileIndex,e,t)}));n.animationRequestIds.push(i)}));n.animationRequestIds.push(i)}},n.toggleSelect=function(e){e.stopPropagation(),n.props.handleToggleSelect(e)},n.handleKeyDown=function(e){var t=e.keyCode;e.currentTarget!==e.target||t!==a.Key.Space&&t!==a.Key.Enter||(e.preventDefault(),n.props.onClick(e))},n.handleCheckboxChange=function(){},n.state=i.__assign({thumbLoaded:g.isThumbLoaded(t)},n.calcPaperTitleState(t)),n}return i.__extends(g,e),g.prototype.componentDidMount=function(){var e=this;this.props.delayRenderFullTile?this.renderCompleteTileTimeout=setTimeout((function(){e.renderCompleteTileTimeout=0,e.fetchThumbnail(e.props)}),100):this.fetchThumbnail(this.props),this.logTileInteractive()},g.prototype.componentDidUpdate=function(e,t){if(!e.isFocused&&this.props.isFocused){var i=this.refs.tileContainer;i&&i.focus()}},g.prototype.UNSAFE_componentWillReceiveProps=function(e){if(e.thumbnailUrl!==this.props.thumbnailUrl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e)),g.getPaperTitle(this.props)!==g.getPaperTitle(e)){var t=this.calcPaperTitleState(e);this.setState(t)}},g.getPaperTitle=function(e){return e.paper?e.paper.title:null},g.prototype.calcPaperTitleState=function(e){return e.paper?{paperTitleParts:l.getPaperDocTitleParts(e.paper,"brws-file-name-grid-icon","brws-file-name-grid-icon-emoji",!0)}:{}},g.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded(),this.renderCompleteTileTimeout&&clearTimeout(this.renderCompleteTileTimeout),this.animationRequestIds.forEach((function(e){window.cancelAnimationFrame(e)})),this.animationRequestIds=[]},g.prototype.fetchThumbnail=function(e){var t=this,i=e.thumbnailUrl,n=e.thumbStore;if(i){var r=Date.now();this.thumbRequestId=n.bind_url(i,{onSuccess:function(){t.setState({thumbLoaded:!0}),c.InfiniteTileGridLogger.logThumbRTT(Date.now()-r)},onError:function(){t.handleThumbnailError()}})}},g.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this.thumbRequestId&&(e.unbind_url(this.thumbRequestId),this.thumbRequestId=null),this.setState({thumbLoaded:!1})},g.isThumbLoaded=function(e){var t=e.thumbStore,i=e.thumbnailUrl;return!(!i||!t.get_thumb(i))},g.prototype.renderCheckbox=function(){var e=r.default.createElement(o.Checkbox,{className:"tile-checkbox","aria-label":this.props.checkboxAriaText,onClick:this.toggleSelect,onChange:this.handleCheckboxChange,tabIndex:this.props.checkboxTabIndex,checked:this.props.isSelected});return 0===this.props.tileIndex&&(e=r.default.createElement(f.UserEducationEffect,{containerName:"FileItemRow",name:"FirstFileSelectCheckbox"},e)),r.default.createElement("div",{key:"tile-select-checkbox",className:"tile-select-checkbox"},e)},g.prototype.renderActionNode=function(){return r.default.createElement("div",{key:"tile-action-node",className:"tile__action-button"},this.props.actionNode)},g.prototype.renderThumbnail=function(){var e=this.props,t=e.thumbnailUrl,i=e.thumbStore,n=e.height,o=e.width,a=e.isSelected;if(this.state.thumbLoaded){var l=i.get_thumb(t);if(l){var s=a?o-24:o,u=n||s;return r.default.createElement(d.LockBadge,{file:this.props.file,variant:"preview-large"},r.default.createElement("img",{className:"tile__preview tile__preview--thumb",draggable:!1,src:l,style:{maxHeight:u,maxWidth:s},onError:this.handleThumbnailError,alt:""}))}}return this.renderFileIcon()},g.prototype.renderFileIcon=function(){var e=this.props,t=e.file;return e.paper?this.state.paperTitleParts.icon:t?r.default.createElement(u.FileOrFolderIcon,i.__assign({className:"tile__preview tile__preview--icon brws-file-name-grid-icon",file:t,variant:"large",showPreview:!1},{"aria-hidden":!0})):r.default.createElement("div",{className:"tile__preview--placeholder"})},g.prototype.render=function(){var e=this,o=this.props,a=o.altText,l=o.file,u=o.height,d=o.href,c=o.isActiveDropTarget,f=o.isAvailableDropTarget,g=o.isCutToClipboard,p=o.isDraggable,_=o.isFocused,m=o.isSelectable,h=o.isSelected,T=o.isViewOnly,E=o.labelHeight,S=o.labelNode,b=o.leftOffset,v=o.onClick,w=o.onDoubleClick,I=o.onLabelClick,y=o.onDragEnter,F=o.onDragStart,O=o.onDragEnd,L=o.overrideTabIndex,M=o.width,P=o.className,C=u||M,R=C+E;if(T)return r.default.createElement(t.TilePlaceholder,{leftOffset:b,tileHeight:R,tileWidth:M,thumbNode:this.renderThumbnail(),labelNode:S});var A={left:b,height:R,width:M},N={height:C,width:M},D={className:n.default("tile",P,{"tile--is-selected":h,"tile--is-dragover":c,"tile--is-droppable":f&&!c,"tile--is-cut":g}),"data-filename":l&&l.name,style:A,draggable:p,href:d,onDragEnter:y,onDragStart:F,onDragEnd:O,"aria-label":l&&l.name,role:"gridcell"},k=r.default.createElement("div",{className:"tile__thumb-container",style:N},this.renderThumbnail());return r.default.createElement("div",{role:"row",ref:"tileContainer",className:"tile__container",onKeyDown:this.handleKeyDown,tabIndex:L||_?0:-1,"aria-label":a,"aria-selected":h},r.default.createElement(s.WithDoubleClick,{onClick:v,onDoubleClick:w},(function(n){return r.default.createElement("div",i.__assign({},D,{onClick:n.onClick}),k,m&&e.renderCheckbox(),e.renderActionNode(),r.default.createElement(t.TileLabel,{onClick:I,ariaLabel:l&&l.name},S))})))},g.defaultProps={checkboxAriaText:"",checkboxTabIndex:-1,delayRenderFullTile:!0,handleToggleSelect:p,isFocused:!1,isSelected:!1,isViewOnly:!1,onDragEnter:p,onDragStart:p,onClick:p},g.displayName="TileElementComponentForTests",g})(r.default.PureComponent);t.TileElementComponentForTests=_,t.TileElement=g.withThumbStore(_)})),define("modules/clean/react/files_view/base_tile_grid",["require","exports","tslib","classnames","react","resize-observer-polyfill","react-dom","spectrum/culled_list/index","modules/clean/filepath/filepath","modules/clean/js_client_stopwatch","modules/clean/react/files_view/tile_element","modules/clean/react/files_view/tile_grid_logger"],(function(e,t,i,n,r,o,a,l,s,u,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteTileGrid=t.TileItemLabelText=t.memoizeCallback=void 0,n=i.__importDefault(n),r=i.__importDefault(r),o=i.__importDefault(o),a=i.__importStar(a),s=i.__importStar(s);function f(e){var t=null;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(!t||t.length!==i.length||!t.every((function(e,t){return e===i[t]})))return t=i,e.apply(void 0,i)}}t.memoizeCallback=f,t.TileItemLabelText=function(e){var t=e.className,i=e.label;return t=n.default("tile-label__text",t),r.default.createElement("div",{className:t},i)};var g=(function(e){function t(t){var i=e.call(this,t)||this;if(i.tileIndexToRowIndex=[],i.rowHeights=[],i.ttiReported=!1,i.itemRangeByRow=[],i.tileLoadLogger=null,i.updateLayout=function(){i.animationFrameRequestId=window.requestAnimationFrame((function(){var e=i.getAndUpdateTileLayout();i.props.logTileLoading&&!i.tileLoadLogger&&i.setupTileLogging(i.getRowHeight(),e.tilesPerRow)}))},i.updateScroll=function(e){var t=i.props,n=t.scrollToIndex,r=t.scrollIntoView,o=t.scrollPositionOffset;if(void 0!==n&&r){var a=i.tileIndexToRowIndex[n],l=i.rowHeights.slice(0,a).reduce((function(e,t){return e+t}),o);r({top:l,bottom:l+i.rowHeights[a]},e)}},i.getAndUpdateTileLayout=function(){var e=i.props.maxTileWidth+i.props.tilePadding,t=a.findDOMNode(i);if(!t||0===t.clientWidth)return{tileWidth:i.state.tileWidth,tilesPerRow:i.props.tilesPerRow};var n=t.clientWidth,r=Math.max(1,Math.floor(n/e)),o=i.props.maxTileWidth;return n%e>1&&(o=n/++r-i.props.tilePadding),i.state.tileWidth!==o&&i.setState({tileWidth:o}),i.props.tilesPerRow!==r&&i.props.onTilesPerRowChange(r),{tileWidth:o,tilesPerRow:r}},i.handleTTI=function(){i.ttiReported=!0;var e=i.props.handleTTI;e&&e()},i.setLastViewedPage=function(e){if(i.tileLoadLogger){var t=document.documentElement.scrollTop||document.body.scrollTop,n=Math.round(t/e);if(i.tileLoadLogger.pruneTrackedPages(),i.tileLoadLogger.logCompletedPages(),!i.tileLoadLogger.pagesCompletedLogging.has(n)&&!i.tileLoadLogger.pagesToLog.has(n))if(n!==i.tileLoadLogger.lastViewedPage){if(i.tileLoadLogger.lastViewedPage=n,i.tileLoadLogger.pageChangeTime=i.tileLoadLogger.getTimeNow(),!i.tileLoadLogger.startTimeByPage.get(n)){var r=i.tileLoadLogger.getTimeNow();i.tileLoadLogger.startTimeByPage.set(n,r)}}else(r=i.tileLoadLogger.getTimeNow())-i.tileLoadLogger.pageChangeTime>1e3&&i.tileLoadLogger.pagesToLog.add(n)}},i.logTileError=function(e){i.tileLoadLogger&&i.tileLoadLogger.recordTileError(e),i.props.logTileLoading&&c.InfiniteTileGridLogger.logThumbLoadError()},i.logTileLoaded=function(e,t,n){i.tileLoadLogger&&i.tileLoadLogger.recordTileLoaded(e,t,n)},i.renderTileElement=function(e,t,n,o){var a,l;if(e<0||e>i.props.totalNumItems)return null;var u=i.props.getTileItem(e,n);if(!u)return r.default.createElement(d.TilePlaceholder,{leftOffset:t,tileHeight:i.state.tileWidth,tileWidth:i.state.tileWidth});var c,f=i.ttiReported&&i.props.delayRenderFullTile,g=u.isSelectable&&!!i.props.selectedIds&&i.props.selectedIds.has(u.id),p=u.file&&i.props.shouldFileBeHighlightedDropTarget(u.file,g),_=p&&u.file===i.props.activeDropTarget,m="";u.fileSharedWithMe?(m=u.fileSharedWithMe.file_id,c={type:u.fileSharedWithMe.type,icon:u.fileSharedWithMe.icon,fq_path:"/"+u.fileSharedWithMe.filename,thumbnail_url_tmpl:u.fileSharedWithMe.thumbnail_url_tmpl,name:u.fileSharedWithMe.filename}):u.file&&(m=u.file.fq_path,c={type:u.file.type,icon:u.file.icon,fq_path:u.file.fq_path,thumbnail_url_tmpl:u.file.thumbnail_url_tmpl,name:s.filename(u.file.fq_path),isDeleted:u.file.isDeleted,is_locked:u.file.is_locked,is_lockholder:u.file.is_lockholder,lockholder_name:u.file.lockholder_name,lock_info:u.file.lock_info});var h=u.labelNode?i.props.labelHeight:0;null===(l=(a=i.props).registerSelectableTile)||void 0===l||l.call(a,m,{top:o,left:t,width:i.state.tileWidth,height:h+i.state.tileWidth});var T=0===e&&i.props.selectedIds&&0===i.props.selectedIds.size;return r.default.createElement(d.TileElement,{file:c,paper:u.paper,key:u.id,onClick:u.onClick,onDoubleClick:u.onDoubleClick,onLabelClick:u.onLabelClick,width:i.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:h,delayRenderFullTile:f,actionNode:u.actionNode,thumbnailUrl:u.thumbnailUrl,labelNode:u.labelNode,altText:u.altText,onThumbnailError:i.props.logTileLoading?i.logTileError:void 0,onThumbnailLoad:i.props.logTileLoading?i.logTileLoaded:void 0,isDraggable:u.isDraggable,onDragEnter:u.onDragEnter,onDragStart:u.onDragStart,onDragEnd:u.onDragEnd,isFocused:u.isFocused,isSelectable:u.isSelectable,isSelected:g,isViewOnly:u.isViewOnly,isActiveDropTarget:_,isAvailableDropTarget:p,handleToggleSelect:u.handleToggleSelect,checkboxAriaText:u.checkboxAriaText,checkboxTabIndex:u.isCheckboxFocusable?0:-1,href:u.href,overrideTabIndex:T,isCutToClipboard:u.isCutToClipboard,className:u.className})},i.renderRow=function(e,t,n){var o=i.getRowHeight(t);if(!e)return r.default.createElement(l.CulledItem,{className:i.props.rowClass,height:o,key:t,tagName:"div",topOffset:n});if(!Array.isArray(e))return r.default.createElement(l.CulledItem,{className:i.props.rowClass,height:o,key:t,tagName:"div",topOffset:n},e);for(var a=e,s=a[0],u=a[1],d=i.state.tileWidth+i.props.tilePadding,c=[],f=4,g=s;g<u;g++)c.push(i.renderTileElement(g,f,c.length,n)),f+=d;return r.default.createElement(l.CulledItem,{className:i.props.rowClass,height:o,key:t,tagName:"div",topOffset:n},c)},i.handleRangeInView=f((function(e,t){var n=i.props.onRangeInView;if(n&&0!==i.props.totalNumItems){var r=i.translateRowRangeToItemRange(e,t),o=r[0],a=r[1];isNaN(o)||isNaN(a)||n(o,a)}})),i.props.sectionLabels||i.props.sectionStartIndices){if(!i.props.sectionLabels||!i.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(i.props.sectionLabels.length!==i.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return i.state={tileWidth:i.props.maxTileWidth},u.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),i.resizeObserver=new o.default(i.updateLayout),i}return i.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateLayout),this.updateLayout(),this.updateScroll(!0);var e=document.querySelector(".maestro-secondary-sidebar-v2");e&&this.resizeObserver.observe(e)},t.prototype.componentDidUpdate=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(this.props.totalNumItems),e.scrollToIndex!==this.props.scrollToIndex&&this.updateScroll(void 0===e.scrollToIndex||e.scrollToIndex<0),e.maxTileWidth!==this.props.maxTileWidth&&this.updateLayout()},t.prototype.componentWillUnmount=function(){this.resizeObserver.disconnect(),window.removeEventListener("resize",this.updateLayout),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),this.tileLoadLogger=null)},t.prototype.getRowHeight=function(e){if(void 0!==e&&this.rowHeights)return this.rowHeights[e];var t=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(t+=this.props.labelHeight+4),t},t.prototype.getPageHeight=function(){var e=(document.documentElement.clientHeight||window.outerHeight)-(this.props.contentOffset||0),t=this.getRowHeight(),i=t*Math.ceil(e/t);return Math.max(i,t)},t.prototype.setupTileLogging=function(e,t){var i=this.getPageHeight(),n=t*Math.ceil(i/e);this.tileLoadLogger=new c.InfiniteTileGridLogger(this.props.totalNumItems,n,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);var r=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,r),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,i)},t.prototype.translateRowRangeToItemRange=function(e,t){var i=this.itemRangeByRow;return[i[e][0],i[t][1]]},t.prototype.render=function(){var e=this;this.itemRangeByRow=[],this.rowHeights=[],this.tileIndexToRowIndex=[];var t=[],i=this.getRowHeight(),n=this.props,o=n.containerClass,a=n.enableMaxHeightGrouping,s=n.numThresholdRows,u=n.scrollDeltaThreshold,d=n.sectionStartIndices,c=n.sectionLabels,f=n.totalNumItems,g=n.window;if(d&&d.length>0)d.forEach((function(n,o){var a=f;o!==d.length-1&&(a=d[o+1]),e.rowHeights.push(32);var l=a-n,s=Math.ceil(l/e.props.tilesPerRow),u=c[o],g=r.default.createElement("div",{className:"tile-section-header",role:"heading","aria-level":2},u);t.push(g),e.itemRangeByRow.push([n,n]);for(var p=0;p<s;p++){var _=n+p*e.props.tilesPerRow,m=Math.min(_+e.props.tilesPerRow,a),h=[_,m];t.push(h),e.itemRangeByRow.push(h);for(var T=_;T<m;T++)e.tileIndexToRowIndex.push(e.rowHeights.length);e.rowHeights.push(i)}}));else for(var p=Math.ceil(f/this.props.tilesPerRow),_=0;_<p;_++){var m=_*this.props.tilesPerRow,h=Math.min(m+this.props.tilesPerRow,f),T=[m,h];t.push(T),this.itemRangeByRow.push(T);for(var E=m;E<h;E++)this.tileIndexToRowIndex.push(this.rowHeights.length);this.rowHeights.push(i)}return r.default.createElement(l.CulledList,{enableMaxHeightGrouping:a,items:t,listItemHeight:this.rowHeights,itemBuffer:s,className:o,renderRow:this.renderRow,scrollThreshold:u,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView,tagName:"div",window:g})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(){return null},handleTTI:function(){}},t.displayName="InfiniteTileGrid",t})(r.default.PureComponent);t.InfiniteTileGrid=g})),define("modules/clean/react/files_view/tile_grid_logger",["require","exports","modules/clean/js_client_stopwatch","modules/core/browser"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteTileGridLogger=void 0;var r=(function(){function e(e,t,i,n){var r=this;this.recordTileError=function(e){var t=Math.floor(e/r.numTilesPerPage);r.pagesWithThumbErrors.has(t)||r.pagesWithThumbErrors.add(t)},this.recordTileLoaded=function(e,t,i){if(i){if(r.thumbsLoaded.has(e))return;r.thumbsLoaded.add(e)}else{if(r.iconsLoaded.has(e))return;r.iconsLoaded.add(e)}var n=!1;n=r.numTiles%r.numTilesPerPage==0?e>=r.numTiles-r.numTilesPerPage:e>=r.numTiles-r.numTiles%r.numTilesPerPage;var o=r.numTilesPerPage;if(n){var a=r.numTiles%r.numTilesPerPage;0!==a&&(o=a)}var l=Math.floor(e/r.numTilesPerPage);if(i||!t){var s=r.numTilesFinalizedByPage[l]||0;r.numTilesFinalizedByPage[l]=s+1}0===l&&r.handleTTI&&(!(r.iconsLoaded.has(e)&&r.thumbsLoaded.has(e))&&(r.numTilesLoadedOnFirstPage++,r.numTilesLoadedOnFirstPage===o&&r.handleTTI()));i&&(r.pagesWithThumbs.has(l)||r.pagesWithThumbs.add(l),r.anyThumbLoadedTimeByPage.get(l)||r.anyThumbLoadedTimeByPage.set(l,r.getTimeNow()),r.numTilesFinalizedByPage[l]===o&&r.allThumbsLoadedTimeByPage.set(l,r.getTimeNow()))},this.pruneTrackedPages=function(){r.startTimeByPage.forEach((function(e,t){!r.pagesToLog.has(t)&&!r.pagesCompletedLogging.has(t)&&r.getTimeNow()-e>2e3&&r.startTimeByPage.delete(t)}))},this.logCompletedPages=function(){r.pagesToLog.forEach((function(e){var t=r.startTimeByPage.get(e),i=Math.max(r.allThumbsLoadedTimeByPage.get(e),t),n=Math.max(r.anyThumbLoadedTimeByPage.get(e),t);!i||r.pagesWithThumbs.has(e)?r.pagesWithThumbErrors.has(e)?r.handlePageCompletedLogging(e):t&&i&&n&&(r.logPerfStats(e,t,n,i),r.handlePageCompletedLogging(e)):r.handlePageCompletedLogging(e)}))},this.numTiles=e,this.numTilesPerPage=t,this.numTilesFinalizedByPage=[],this.numTilesLoadedOnFirstPage=0,this.iconsLoaded=new Set,this.thumbsLoaded=new Set,this.startTimeByPage=new Map,this.allThumbsLoadedTimeByPage=new Map,this.anyThumbLoadedTimeByPage=new Map,this.pagesWithThumbErrors=new Set,this.pagesWithThumbs=new Set,this.pagesCompletedLogging=new Set,this.pagesToLog=new Set,this.handleTTI=n}return e.prototype.getTimeNow=function(){var e=n.performance(),t=-1;return e&&e.now&&(t=e.now()),t},e.prototype.updateNumTiles=function(e){this.numTiles>=e||(this.numTiles=e)},e.prototype.handlePageCompletedLogging=function(e){this.pagesCompletedLogging.add(e),this.pagesToLog.delete(e),this.startTimeByPage.delete(e),this.anyThumbLoadedTimeByPage.delete(e),this.allThumbsLoadedTimeByPage.delete(e)},e.logThumbLoadError=function(){i.JSStopwatch.recordTrace("visual_browse_thumb_load_error",{stopwatchName:"infinite_tile_grid_logging",traceTime:0})},e.logThumbRTT=function(e){i.JSStopwatch.recordTrace("visual_browse_thumb_rtt",{stopwatchName:"infinite_tile_grid_logging",traceTime:e})},e.prototype.logPerfStats=function(e,t,n,r){i.JSStopwatch.recordTrace("loaded_any_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:n-t}),i.JSStopwatch.recordTrace("loaded_all_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:r-t})},e})();t.InfiniteTileGridLogger=r})),define("modules/clean/tagging/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_TAGS_PER_ITEM=void 0,t.MAX_TAGS_PER_ITEM=20})),define("modules/clean/tagging/data/action_creators",["require","exports","tslib","lodash","modules/core/i18n","modules/clean/filepath/filepath","modules/clean/react/snackbar","modules/clean/tagging/data/selectors/index","modules/clean/tagging/data/types","modules/clean/tagging/api","modules/clean/tagging/constants","modules/clean/tagging/logger","modules/clean/tagging/utils"],(function(e,t,i,n,r,o,a,l,s,u,d,c,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAllTagsSuggestions=t.fetchTagsForFiles=t.setAllTags=t.fileRename=t.removeTagFromFiles=t.addTagToFiles=void 0,o=i.__importStar(o),l=i.__importStar(l),c=i.__importStar(c);var g=function(e){var t=e.fileToTags,i=e.override;return{type:s.ActionTypes.SET_FILE_TO_TAGS_MAP,payload:{fileToTags:t,override:i}}};t.addTagToFiles=function(e){var t=this,s=e.user,p=e.files,_=e.tag,m=e.onPartialError,h=e.onSuccess;return function(e,T){return i.__awaiter(t,void 0,void 0,(function(){var t,E,S,b,v,w,I,y,F,O,L,M,P;return i.__generator(this,(function(C){switch(C.label){case 0:if(t=l.selectTagsByFile(T()),E=f.tagTextToTagUserGeneratedTag(_),1!==p.length)return[3,5];S=f.getFileMapKey(p[0]),b=l.selectTagsByFile(T())[S],v=n.uniq(i.__spreadArrays([E],null!=b?b:[])),(P={})[S]=v,e(g({fileToTags:M=P})),C.label=1;case 1:return C.trys.push([1,3,,4]),[4,u.tagsApiClient.addTag(s,_,p[0])];case 2:return C.sent(),c.logAddTag(s,p,_),[3,4];case 3:return C.sent(),e(g({fileToTags:t,override:!0})),c.logFailTag(s,p,_),a.Snackbar.fail(r.intl.formatMessage({id:"IibVuC",defaultMessage:"Couldn’t add #{tag} to {fileName}."},{tag:_,fileName:o.filename(p[0].fq_path)})),[2];case 4:return h(!1,1),[2];case 5:return C.trys.push([5,7,,8]),a.Snackbar.sync(r.intl.formatMessage({id:"U2RxSG",defaultMessage:"Tagging…"}),!0,"add-tag-bulk"),[4,u.tagsApiClient.addTagBulk(s,_,p)];case 6:return w=C.sent(),I=p.filter((function(e){return-1===w.findIndex((function(t){var i=f.getFileObjectNsIdAndPath(e);return i.nsId===t.ns_id&&i.nsPath===t.ns_path}))})),y=w.length,F=I.length,O=p.filter((function(e){var t;return(null===(t=e.tags)||void 0===t?void 0:t.length)===d.MAX_TAGS_PER_ITEM})).length,L=p.filter((function(e){return!f.fileHasEditPermissions(e)})).length,M=I.reduce((function(e,t){var r,o=f.getFileMapKey(t),a=l.selectTagsByFile(T())[o],s=n.uniq(i.__spreadArrays([E],null!=a?a:[]));return i.__assign(i.__assign({},e),((r={})[o]=s,r))}),{}),c.logAddTag(s,I,_),e(g({fileToTags:M})),0===w.length?(a.Snackbar.close(),h(!0,F),[2]):(m(I),O>0&&L>0?(a.Snackbar.complete(r.intl.formatMessage({id:"Evli0B",defaultMessage:"Tagged {numOfSuccesses} items #{tag}. Couldn’t tag {numOfFailures} files or folders."},{numOfSuccesses:F,tag:_,numOfFailures:y}),"add-tag-bulk"),[2]):O>0?(a.Snackbar.complete(r.intl.formatMessage({id:"orDwNa",defaultMessage:"Tagged {numOfSuccesses} items #{tag}. Couldn’t tag {numOfFailures} files or folders that are at the limit."},{numOfSuccesses:F,tag:_,numOfFailures:y}),"add-tag-bulk"),[2]):(a.Snackbar.complete(r.intl.formatMessage({id:"JmcOdr",defaultMessage:"Tagged {numOfSuccesses} items #{tag}. Couldn’t tag {numOfFailures} files or folders without editing access."},{numOfSuccesses:F,tag:_,numOfFailures:y}),"add-tag-bulk"),[3,8]));case 7:return C.sent(),e(g({fileToTags:t,override:!0})),c.logFailTag(s,p,_),a.Snackbar.fail(r.intl.formatMessage({id:"8bKaBW",defaultMessage:"Couldn’t tag these files or folders."}),"add-tag-bulk"),[3,8];case 8:return[2]}}))}))}},t.removeTagFromFiles=function(t){var n=this,s=t.user,d=t.files,p=t.tag;return function(t,_){return i.__awaiter(n,void 0,void 0,(function(){var n,m,h,T,E,S,b,v=this;return i.__generator(this,(function(w){switch(w.label){case 0:if(n=p.tag_text,m=l.selectTagsByFile(_()),1!==d.length)return[3,5];h=f.getFileMapKey(d[0]),T=l.selectTagsByFile(_())[h],E=null!==(b=null==T?void 0:T.filter((function(e){return e.tag_text!==n})))&&void 0!==b?b:[],(S={})[h]=E,t(g({fileToTags:S})),w.label=1;case 1:return w.trys.push([1,3,,4]),[4,u.tagsApiClient.removeTag(s,n,d[0])];case 2:return w.sent(),c.logRemoveTag(s,d,p),[3,4];case 3:return w.sent(),t(g({fileToTags:m,override:!0})),a.Snackbar.fail(r.intl.formatMessage({id:"zXNhaY",defaultMessage:"Couldn’t remove #{tag} from {fileName}."},{tag:n,fileName:o.filename(d[0].fq_path)})),[3,4];case 4:return[2];case 5:return[4,new Promise((function(t,i){e(["modules/clean/react/right_rail/manual_tagging/remove_tags_modal"],t,i)})).then(i.__importStar)];case 6:return(0,w.sent().showRemoveTagsModal)({numOfFiles:d.length,tag:n,onRemoveClick:function(){return i.__awaiter(v,void 0,void 0,(function(){var e,o,h;return i.__generator(this,(function(T){switch(T.label){case 0:return T.trys.push([0,2,,3]),a.Snackbar.sync(r.intl.formatMessage({id:"FAj93H",defaultMessage:"Removing tags…"}),!0,"remove-tag-bulk"),[4,u.tagsApiClient.removeTagBulk(s,n,d)];case 1:return e=T.sent(),o=d.filter((function(t){return-1===e.findIndex((function(e){var i=f.getFileObjectNsIdAndPath(t);return i.nsId===e.ns_id&&i.nsPath===e.ns_path}))})),h=o.reduce((function(e,t){var r,o,a=f.getFileMapKey(t),s=l.selectTagsByFile(_())[a],u=null!==(o=null==s?void 0:s.filter((function(e){return e.tag_text!==n})))&&void 0!==o?o:[];return i.__assign(i.__assign({},e),((r={})[a]=u,r))}),{}),c.logRemoveTag(s,o,p),t(g({fileToTags:h})),a.Snackbar.complete(r.intl.formatMessage({id:"fXEVtA",defaultMessage:"Removed #{tag} from {numOfFiles} files."},{numOfFiles:o.length,tag:n}),"remove-tag-bulk"),[3,3];case 2:return T.sent(),t(g({fileToTags:m,override:!0})),a.Snackbar.fail(r.intl.formatMessage({id:"YV4k+f",defaultMessage:"Couldn’t remove #{tag}."},{tag:n}),"remove-tag-bulk"),[3,3];case 3:return[2]}}))}))}}),[2]}}))}))}},t.fileRename=function(e){var t=e.file,i=e.newFile;return{type:s.ActionTypes.FILE_RENAME,payload:{file:t,newFile:i}}},t.setAllTags=function(e){var t=e.tags;return{type:s.ActionTypes.SET_ALL_TAGS,payload:{tags:t}}},t.fetchTagsForFiles=function(e){var t=e.user,i=e.files,n=e.override,r=void 0!==n&&n;return function(e,n){0!==i.length&&u.tagsApiClient.getTags(t,i).then((function(t){e(g({fileToTags:t,override:r}))}))}},t.fetchAllTagsSuggestions=function(e){var i=e.user,n=e.onSuccess;return function(e,r){void 0===l.selectAllTagsSuggestions(r())&&u.tagsApiClient.getAllTags(i).then((function(i){e(t.setAllTags({tags:i})),null==n||n()}))}}})),define("modules/clean/tagging/data/reducer",["require","exports","tslib","lodash","modules/clean/tagging/data/types","modules/clean/tagging/utils"],(function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.taggingReducer=t.defaultTaggingState=void 0,t.defaultTaggingState={tagsByFile:{},tags:void 0};var a=function(e,t){var n=i.__spreadArrays(e,t),r=new Map(n.map((function(e){return[e.tag_text,e]})));return i.__spreadArrays(Array.from(r.values()))};t.taggingReducer=function(e,l){switch(void 0===e&&(e=t.defaultTaggingState),l.type){case r.ActionTypes.SET_FILE_TO_TAGS_MAP:return(function(e,t){var r=t.fileToTags,o=t.override,l=Object.keys(r).reduce((function(t,i){var o=e.tagsByFile[i],a=r[i];return void 0===o?(t[i]=a,t):(n.isEqual(n.sortBy(o,(function(e){return e.tag_text})),n.sortBy(a,(function(e){return e.tag_text})))?t[i]=o:t[i]=a,t)}),{}),s=void 0;if(void 0!==e.tags){var u=Object.entries(l).map((function(e){e[0];return e[1]})).reduce((function(e,t){return i.__spreadArrays(t,e)}),[]);s=a(e.tags,u)}return i.__assign(i.__assign({},e),{tagsByFile:i.__assign(i.__assign({},o?{}:e.tagsByFile),l),tags:null!=s?s:e.tags})})(e,l.payload);case r.ActionTypes.FILE_RENAME:return(function(e,t){var n=t.file,r=t.newFile,a=o.getFileMapKey(n),l=o.getFileMapKey(r),s=e.tagsByFile[a];if(!s)return e;var u=e.tagsByFile;return delete u[a],u[l]=s,i.__assign(i.__assign({},e),{tagsByFile:u})})(e,l.payload);case r.ActionTypes.SET_ALL_TAGS:return(function(e,t){var n=t.tags;return i.__assign(i.__assign({},e),{tags:n})})(e,l.payload);default:return e}}})),define("modules/clean/tagging/data/selectors/index",["require","exports","modules/clean/redux/namespaces","modules/clean/redux/selectors"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectAllTagsSuggestions=t.selectTagsByFile=void 0;var r=function(e){return n.getStateAtNamespace(e,i.TAGGING_NAMESPACE_KEY)};t.selectTagsByFile=function(e){return r(e).tagsByFile},t.selectAllTagsSuggestions=function(e){return r(e).tags}})),define("modules/clean/tagging/data/store",["require","exports","modules/clean/tagging/data/reducer","modules/clean/redux/namespaces","modules/clean/redux/store"],(function(e,t,i,n,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForTagging=void 0,t.getStoreForTagging=function(){var e;return o||(o=r.getStoreAndRegisterReducers(((e={})[n.TAGGING_NAMESPACE_KEY]=i.taggingReducer,e))),o}})),define("modules/clean/tagging/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(function(e){e.SET_FILE_TO_TAGS_MAP="TAGGING/SET_FILE_TO_TAGS_MAP",e.ADD_TAG_TO_FILE="TAGGING/ADD_TAG_TO_FILE",e.REMOVE_TAG_FROM_FILE="TAGGING/REMOVE_TAG_FROM_FILE",e.FILE_RENAME="TAGGING/FILE_RENAME",e.SET_ALL_TAGS="TAGGING/SET_ALL_TAGS"})(t.ActionTypes||(t.ActionTypes={}))})),define("modules/clean/tagging/hashing",["require","exports","tslib"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashString=void 0;var n=function(){return!!window.crypto.subtle&&!!window.crypto.subtle.digest};function r(e){if(n())return new Promise((function(t){window.crypto.subtle.digest("SHA-256",e).then(t)}));throw new Error("window.crypto.subtle.digest not available")}t.hashString=function(e){return i.__awaiter(this,void 0,Promise,(function(){var t;return i.__generator(this,(function(i){switch(i.label){case 0:if(!n()||void 0===window.TextEncoder||void 0===window.TextDecoder)return[2,null];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r((new TextEncoder).encode(e))];case 2:return t=i.sent(),[2,new TextDecoder("utf-16").decode(t)];case 3:return i.sent(),[2,null];case 4:return[2]}}))}))}})),define("modules/clean/tagging/logger",["require","exports","tslib","modules/clean/logging/telemetry","modules/clean/logging/hive/schemas/server-tag_actions","modules/clean/tagging/hashing"],(function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logAutoTagSnackbarAction=t.logTagClick=t.logFailTag=t.logAddTag=t.logStartTypingTag=t.logSelectTagBar=t.logRemoveTag=void 0,n=i.__importStar(n);var a=new n.HiveLogger;function l(e){var t;return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(i){switch(i.label){case 0:return[4,o.hashString(e)];case 1:return[2,null!==(t=i.sent())&&void 0!==t?t:""]}}))}))}function s(t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(t,i){e(["modules/constants/file_viewer"],t,i)})).then(i.__importStar)];case 1:return n=a.sent(),r=n.LOGGING_ALLOWED_EXTS,o=n.LOGGING_EXT_PLACEHOLDER,[2,r.includes(t.ext)?t.ext:o]}}))}))}t.logRemoveTag=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var o,u=this;return i.__generator(this,(function(d){switch(d.label){case 0:return[4,l(n.tag_text)];case 1:return o=d.sent(),[4,Promise.all(t.map((function(t){return i.__awaiter(u,void 0,void 0,(function(){var n,l,u,d;return i.__generator(this,(function(i){switch(i.label){case 0:return l=(n=a).log,u=r.ServerTagActionsRow.bind,d={tag_name:o,event_name:"remove_tag",action_surface:"right_pane"},[4,s(t)];case 1:return l.apply(n,[new(u.apply(r.ServerTagActionsRow,[void 0,(d.file_ext=i.sent(),d.file_nsid=t.ns_id.toString(),d.file_sjid=t.sjid.toString(),d.platform="web",d.user_id=e.id,d.file_id=t.file_id,d)]))]),[2]}}))}))})))];case 2:return d.sent(),[2]}}))}))},t.logSelectTagBar=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(o){switch(o.label){case 0:return[4,Promise.all(t.map((function(t){return i.__awaiter(n,void 0,void 0,(function(){var n,o,l,u;return i.__generator(this,(function(i){switch(i.label){case 0:return o=(n=a).log,l=r.ServerTagActionsRow.bind,u={tag_name:"",event_name:"select_tag_bar",action_surface:"right_pane"},[4,s(t)];case 1:return o.apply(n,[new(l.apply(r.ServerTagActionsRow,[void 0,(u.file_ext=i.sent(),u.file_nsid=t.ns_id.toString(),u.file_sjid=t.sjid.toString(),u.platform="web",u.user_id=e.id,u.file_id=t.file_id,u)]))]),[2]}}))}))})))];case 1:return o.sent(),[2]}}))}))},t.logStartTypingTag=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(o){switch(o.label){case 0:return[4,Promise.all(t.map((function(t){return i.__awaiter(n,void 0,void 0,(function(){var n,o,l,u;return i.__generator(this,(function(i){switch(i.label){case 0:return o=(n=a).log,l=r.ServerTagActionsRow.bind,u={tag_name:"",event_name:"start_typing_tag",action_surface:"right_pane"},[4,s(t)];case 1:return o.apply(n,[new(l.apply(r.ServerTagActionsRow,[void 0,(u.file_ext=i.sent(),u.file_nsid=t.ns_id.toString(),u.file_sjid=t.sjid.toString(),u.platform="web",u.user_id=e.id,u.file_id=t.file_id,u)]))]),[2]}}))}))})))];case 1:return o.sent(),[2]}}))}))},t.logAddTag=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var o,u=this;return i.__generator(this,(function(d){switch(d.label){case 0:return[4,l(n)];case 1:return o=d.sent(),[4,Promise.all(t.map((function(t){return i.__awaiter(u,void 0,void 0,(function(){var n,l,u,d;return i.__generator(this,(function(i){switch(i.label){case 0:return l=(n=a).log,u=r.ServerTagActionsRow.bind,d={tag_name:o,event_name:"add_tag",action_surface:"right_pane"},[4,s(t)];case 1:return l.apply(n,[new(u.apply(r.ServerTagActionsRow,[void 0,(d.file_ext=i.sent(),d.file_nsid=t.ns_id.toString(),d.file_sjid=t.sjid.toString(),d.platform="web",d.user_id=e.id,d.file_id=t.file_id,d)]))]),[2]}}))}))})))];case 2:return d.sent(),[2]}}))}))},t.logFailTag=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var o,u=this;return i.__generator(this,(function(d){switch(d.label){case 0:return[4,l(n)];case 1:return o=d.sent(),[4,Promise.all(t.map((function(t){return i.__awaiter(u,void 0,void 0,(function(){var n,l,u,d;return i.__generator(this,(function(i){switch(i.label){case 0:return l=(n=a).log,u=r.ServerTagActionsRow.bind,d={tag_name:o,event_name:"fail_tag",action_surface:"right_pane"},[4,s(t)];case 1:return l.apply(n,[new(u.apply(r.ServerTagActionsRow,[void 0,(d.file_ext=i.sent(),d.file_nsid=t.ns_id.toString(),d.file_sjid=t.sjid.toString(),d.platform="web",d.user_id=e.id,d.file_id=t.file_id,d)]))]),[2]}}))}))})))];case 2:return d.sent(),[2]}}))}))},t.logTagClick=function(e,t,n,o){return i.__awaiter(this,void 0,void 0,(function(){var u,d=this;return i.__generator(this,(function(c){switch(c.label){case 0:return[4,l(o.tag_text)];case 1:return u=c.sent(),[4,Promise.all(t.map((function(t){return i.__awaiter(d,void 0,void 0,(function(){var o,l,d,c;return i.__generator(this,(function(i){switch(i.label){case 0:return l=(o=a).log,d=r.ServerTagActionsRow.bind,c={tag_name:u,event_name:"select_tag",action_surface:n},[4,s(t)];case 1:return l.apply(o,[new(d.apply(r.ServerTagActionsRow,[void 0,(c.file_ext=i.sent(),c.file_nsid=t.ns_id.toString(),c.file_sjid=t.sjid.toString(),c.platform="web",c.user_id=e.id,c.file_id=t.file_id,c)]))]),[2]}}))}))})))];case 2:return c.sent(),[2]}}))}))},t.logAutoTagSnackbarAction=function(e,t,n,o,u){return i.__awaiter(this,void 0,void 0,(function(){var d,c,f,g,p;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,l(n)];case 1:return d=i.sent(),f=(c=a).log,g=r.ServerTagActionsRow.bind,p={tag_name:d,event_name:"auto_tag_snackbar_action",action_surface:"right_pane"},[4,s(t)];case 2:return f.apply(c,[new(g.apply(r.ServerTagActionsRow,[void 0,(p.file_ext=i.sent(),p.file_nsid=t.ns_id.toString(),p.file_sjid=t.sjid.toString(),p.platform="web",p.user_id=e,p.file_id=t.file_id,p.snackbar_action=o,p.tagging_type=u,p)]))]),[2]}}))}))}})),define("modules/clean/logging/hive/schemas/server-tag_actions",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerTagActionsRow=void 0;var i=function(e){this.category="server-tag_actions",this.file_oid=0,this.session_id=null,this.team_id=null,this.user_id=e.user_id,this.tag_name=e.tag_name,this.platform=e.platform,this.event_name=e.event_name,this.file_ext=e.file_ext,this.file_nsid=e.file_nsid,this.file_sjid=e.file_sjid,e.hasOwnProperty("file_oid")&&void 0!==e.file_oid&&(this.file_oid=e.file_oid),this.action_surface=e.action_surface,e.hasOwnProperty("session_id")&&void 0!==e.session_id&&(this.session_id=e.session_id),e.hasOwnProperty("team_id")&&void 0!==e.team_id&&(this.team_id=e.team_id),e.hasOwnProperty("snackbar_action")&&void 0!==e.snackbar_action&&(this.snackbar_action=e.snackbar_action),e.hasOwnProperty("tagging_type")&&void 0!==e.tagging_type&&(this.tagging_type=e.tagging_type),this.file_id=e.file_id,Object.seal(this)};t.ServerTagActionsRow=i})),define("modules/clean/teams/components/item_truncation_container/item_truncation_container",["require","exports","tslib","react","classnames","dig-components/chips","dig-components/tooltips","modules/clean/react/components/css","dig-components/typography","modules/core/i18n","modules/clean/react/hooks/resize_observer"],(function(e,t,i,n,r,o,a,l,s,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemTruncationContainer=t.ItemTruncationContainerWithoutCss=t.renderMoreButton=t.createChipsDefault=t.createMoreTooltipDefault=void 0,n=i.__importStar(n),r=i.__importDefault(r),t.createMoreTooltipDefault=function(e){return e.map((function(e){return"#"+e})).join(" ")},t.createChipsDefault=function(e,t,i,r){return function(a){var l=a.item,s=a.ref,u=t?o.InputChip:o.ChoiceChip;return n.default.createElement(u,{key:l,ref:s,className:r,onClick:function(t){return null==e?void 0:e(l,t)},onDelete:function(){return null==t?void 0:t(l)},size:i||"small"},"#"+l)}},t.renderMoreButton=function(e,t,i){return n.default.createElement(s.Text,{size:"small",className:r.default("itc-show-more-button",{clickable:void 0!==t},i),onClick:t},"+",e)},t.ItemTruncationContainerWithoutCss=function(e){var i=e.showMoreWidth,o=void 0===i?60:i,l=e.containerMaxRows,c=void 0===l?2:l,f=e.itemsToMoreTooltipString,g=e.expandable,p=void 0===g||g,_=e.renderItem,m=e.items,h=e.className,T=e.showMoreClassName,E=n.default.useState(m.length),S=E[0],b=E[1],v=n.default.useState(!1),w=v[0],I=v[1],y=n.default.useMemo((function(){return Array(m.length).fill(0).map((function(e){return n.createRef()}))}),[m]),F=n.useState(),O=F[0],L=F[1],M=[];if(m.map((function(e,t){(t<=S||w)&&M.push(_({item:e,ref:y[t],index:t}))})),y.length>S&&!w){var P=f(m.slice(S+1));M.push(n.default.createElement(a.Tooltip,{id:"more-button-tooltip",title:P},t.renderMoreButton(y.length-(S+1),p?function(){return I(!0)}:void 0,T)))}var C=d.useResizeObserver(),R=C[0],A=C[1];return n.default.useEffect((function(){O&&(b(m.length),L(null))}),[null==A?void 0:A.contentRect.width]),n.default.useLayoutEffect((function(){var e,t;if(y&&y[0]&&O&&0!==O.clientWidth){var i=((null===(t=null===(e=y[0])||void 0===e?void 0:e.current)||void 0===t?void 0:t.offsetHeight)||1)-1,n=(c-1)*i,r=y.findIndex((function(e){var t=e.current;if(t){var r=O.offsetLeft+O.clientWidth-(t.offsetLeft+t.clientWidth),a=t.offsetTop-O.offsetTop;if(r<o&&a>=n||a>=c*i)return!0}return!1}));I(!1),b(r<0?m.length:r-1)}else S!==m.length&&b(m.length)}),[m.length,O]),n.default.createElement("div",{ref:R,className:r.default("itc-container",h)},n.default.createElement("div",{key:m.length,className:"itc-items-container",ref:function(e){return L(e)}},M),w&&n.default.createElement(s.Text,{size:"small",key:"show_less",id:"show-less",onClick:function(){return I(!1)},className:r.default("itc-show-more-button clickable",T)},u.intl.formatMessage({id:"QSkw6O",defaultMessage:"show less"})))},t.ItemTruncationContainer=l.requireCssWithComponent(t.ItemTruncationContainerWithoutCss,["/static/css/teams/admin/components/item_truncation_container-vflnj951-.css"])})),define("modules/clean/tagging/api",["require","exports","tslib","api_v2/default_user_client","modules/clean/tagging/utils"],(function(e,t,i,n,r){"use strict";function o(e){var t=r.getFileObjectNsIdAndPath(e);return{ns_id:t.nsId,ns_path:t.nsPath}}Object.defineProperty(t,"__esModule",{value:!0}),t.tagsApiClient=t.TagsApiClient=void 0;var a=function(e){return new Promise((function(t){return setTimeout(t,e)}))},l=(function(){function e(){}return e.prototype.getTags=function(e,t){return i.__awaiter(this,void 0,Promise,(function(){var a,l;return i.__generator(this,(function(i){switch(i.label){case 0:return a=new n.DefaultUserApiV2Client(e),l={content_ids:t.map(o)},[4,a.ns("manual_tagging").rpc("tags/get",l,{})];case 1:return[2,i.sent().tags_by_content_id.reduce((function(e,t){var i=t.content_id,n=i.ns_id,o=i.ns_path,a=t.tags,l=t.typed_tags;return e[r.getFileObjectNsIdAndPathKey({nsId:n,nsPath:o})]=(function(e,t){return t?t.filter(r.isTextTag):e.map((function(e){return{".tag":"user_generated_tag",tag_text:e}}))})(a,l),e}),{})]}}))}))},e.prototype.getAllTags=function(e){return i.__awaiter(this,void 0,Promise,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,new n.DefaultUserApiV2Client(e).ns("manual_tagging").rpc("tags/get_viewable_tags",void 0,{})];case 1:return[2,t.sent().tag_and_counts.map((function(e){return e.typed_tag})).filter(r.isTextTag)]}}))}))},e.prototype.addTag=function(e,t,r){return i.__awaiter(this,void 0,Promise,(function(){var a,l;return i.__generator(this,(function(i){switch(i.label){case 0:return a=new n.DefaultUserApiV2Client(e),l={tag:t,content_id:o(r)},[4,a.ns("manual_tagging").rpc("tag/add",l,{})];case 1:return[2,i.sent().hlc]}}))}))},e.prototype.addTagBulk=function(e,t,r){return i.__awaiter(this,void 0,Promise,(function(){var l,s,u,d,c,f,g=this;return i.__generator(this,(function(p){switch(p.label){case 0:return l=new n.DefaultUserApiV2Client(e),s={tag:t,content_ids:r.map(o)},[4,l.ns("manual_tagging").rpc("tag/add_bulk",s,{})];case 1:if("complete"===(u=p.sent())[".tag"])return[2,u.failed];if("failed"===u[".tag"])throw new Error("tag/add_bulk failed");return d=u.async_job_id,[4,(c=function(){return i.__awaiter(g,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,l.ns("manual_tagging").rpc("tag/add_bulk/check",{async_job_id:d},{})];case 1:return[2,e.sent()]}}))}))})()];case 2:f=p.sent(),p.label=3;case 3:return"in_progress"!==f[".tag"]?[3,6]:[4,a(1e3)];case 4:return p.sent(),[4,c()];case 5:return f=p.sent(),[3,3];case 6:if("failed"===f[".tag"]||"other"===f[".tag"])throw new Error("tag/add_bulk failed");return[2,f.failed]}}))}))},e.prototype.removeTag=function(e,t,r){return i.__awaiter(this,void 0,Promise,(function(){var a,l;return i.__generator(this,(function(i){switch(i.label){case 0:return a=new n.DefaultUserApiV2Client(e),l={tag:t,content_id:o(r)},[4,a.ns("manual_tagging").rpc("tag/remove",l,{})];case 1:return[2,i.sent().hlc]}}))}))},e.prototype.removeTagBulk=function(e,t,r){return i.__awaiter(this,void 0,Promise,(function(){var l,s,u,d,c,f,g=this;return i.__generator(this,(function(p){switch(p.label){case 0:return l=new n.DefaultUserApiV2Client(e),s={tag:t,content_ids:r.map(o)},[4,l.ns("manual_tagging").rpc("tag/remove_bulk",s,{})];case 1:if("complete"===(u=p.sent())[".tag"])return[2,u.failed];if("failed"===u[".tag"])throw new Error("tag/remove_bulk failed");return d=u.async_job_id,[4,(c=function(){return i.__awaiter(g,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,l.ns("manual_tagging").rpc("tag/remove_bulk/check",{async_job_id:d},{})];case 1:return[2,e.sent()]}}))}))})()];case 2:f=p.sent(),p.label=3;case 3:return"in_progress"!==f[".tag"]?[3,6]:[4,a(1e3)];case 4:return p.sent(),[4,c()];case 5:return f=p.sent(),[3,3];case 6:if("failed"===f[".tag"]||"other"===f[".tag"])throw new Error("tag/remove_bulk failed");return[2,f.failed]}}))}))},e})();t.TagsApiClient=l,t.tagsApiClient=new l})),define("modules/clean/tagging/utils",["require","exports","tslib","lodash","modules/core/browser","modules/clean/search/search_helpers","modules/clean/fuzzy","modules/clean/history_helper"],(function(e,t,i,n,r,o,a,l){"use strict";function s(e){for(;e.startsWith("#");)e=e.substr(1);return e}function u(e){return"#"+s(e)}function d(e){var t=!e.is_unmounted&&e.target_ns;return{nsId:t?e.target_ns:e.ns_id,nsPath:t?"":e.ns_path}}function c(e){return e.nsId+","+e.nsPath.toLowerCase()}function f(){for(var e="",t=0;t<32;t++){var i=Math.floor(10*Math.random());e+=String(i)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.textTagsToUserGeneratedTags=t.fileHasEditPermissions=t.getTagsSuggestions=t.redirectToSearchByTag=t.queryContainsTag=t.isUserGeneratedTag=t.isSuggestedTag=t.isTextTag=t.tagTextToTagUserGeneratedTag=t.getFileMapKey=t.getFileObjectNsIdAndPathKey=t.getFileObjectNsIdAndPath=t.formatTypedTag=t.formatTag=t.trimHashtags=void 0,r=i.__importStar(r),o=i.__importStar(o),a=i.__importDefault(a),t.trimHashtags=s,t.formatTag=u,t.formatTypedTag=function(e){return t.isUserGeneratedTag(e)?u(e.tag_text):s(e.tag_text)},t.getFileObjectNsIdAndPath=d,t.getFileObjectNsIdAndPathKey=c,t.getFileMapKey=function(e){return c(d(e))},t.tagTextToTagUserGeneratedTag=function(e){return{".tag":"user_generated_tag",tag_text:e}},t.isTextTag=function(e){return"user_generated_tag"===e[".tag"]||"suggested_tag"===e[".tag"]},t.isSuggestedTag=function(e){return"suggested_tag"===e[".tag"]},t.isUserGeneratedTag=function(e){return"user_generated_tag"===e[".tag"]},t.queryContainsTag=function(e,t){if(e.toLowerCase().replace(/,/g,"").split(" ").filter((function(e){return e.startsWith("#")})).includes("#"+t))return!0;var i=e.toLowerCase().replace(/[.,\/!$%\^&\*;:{}=\-`~()]/g,"").split(" ").filter((function(e){return!e.startsWith("#")})).join(" ").replace("_"," ").split(" "),r=t.split("_");return n.intersection(i,r).length>0},t.redirectToSearchByTag=function(e,t){r.redirect(o.buildSearchURL({user:e,searchPath:"/",normalizedQuery:u(t)+", ",searchSessionId:f(),searchToken:o.getSearchCsrfToken(),qargs:{search_from:l.deconstructUrl().path}}).toString())},t.getTagsSuggestions=function(e,t){return a.default.filter(e,t,{extract:function(e){return e.tag_text}}).map((function(e){return e.original})).sort((function(e,t){return e.tag_text.localeCompare(t.tag_text)}))},t.fileHasEditPermissions=function(e){return(!e.is_dir||!e.isDeleted)&&(e.target_ns?!e._mount_access_perms||!(!e._mount_access_perms||!e._mount_access_perms.includes("can_edit")):!e.read_only)},t.textTagsToUserGeneratedTags=function(e){return e.map(t.tagTextToTagUserGeneratedTag)}})),define("modules/clean/tagging/components/tags_container",["require","exports","tslib","react","classnames","dig-components/chips","modules/clean/react/components/css","modules/clean/teams/components/item_truncation_container/item_truncation_container","modules/clean/tagging/utils","dig-components/icons","dig-components/icons/src","dig-components/tooltips","modules/core/i18n"],(function(e,t,i,n,r,o,a,l,s,u,d,c,f){"use strict";function g(e){return e.map((function(e){return s.formatTag(e.tag_text)})).join(" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.TagsContainer=void 0,n=i.__importDefault(n),r=i.__importDefault(r);var p=function(e){var t=e.tags,a=e.highlightedIndexes,p=void 0===a?[]:a,_=e.onTagClick,m=e.onTagDelete,h=e.containerClassName,T=e.chipClassName,E=e.chipSize;if(0===t.length)return null;var S=t.filter((function(e,t){return!p.includes(t)})),b=t.filter((function(e,t){return p.includes(t)}));return n.default.createElement(l.ItemTruncationContainer,i.__assign({items:i.__spreadArrays(b,S),itemsToMoreTooltipString:g,renderItem:function(e){var t=e.item,a=e.ref,l=e.index<b.length,g=m?o.InputChip:o.FilterChip,p=s.isSuggestedTag(t),h=p?{withIconLeft:n.default.createElement(u.UIIcon,{src:d.Twinkle2Line,size:"small"})}:{},S=n.default.createElement(g,i.__assign({},h,{key:t.tag_text,ref:a,className:r.default("tag-chip",{highlighted:l},T),onClick:function(e){return null==_?void 0:_(t,e)},onDelete:function(){return null==m?void 0:m(t)},size:E||"small"}),s.formatTypedTag(t));return p?n.default.createElement(c.Tooltip,{title:f.intl.formatMessage({id:"NXiDuW",defaultMessage:"Dropbox added this tag"})},S):S},className:r.default("tags-container",h)},e))};p.displayName="TagsContainerWithoutCss",t.TagsContainer=a.requireCssWithComponent(p,["/static/css/tagging/tags_container-vfl_m11fQ.css"])})),define("modules/clean/react/files_view/files_view_hooks",["require","exports","tslib","react","modules/core/cancelable_promise","modules/clean/web_timing_logger"],(function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIsPostTTI=void 0,n=i.__importDefault(n),o=i.__importStar(o),t.useIsPostTTI=function(){var e=n.default.useState(!!o.time_to_interactive),t=e[0],i=e[1];return n.default.useEffect((function(){var e=r.makeCancelable(o.waitForTTI().then((function(){i(!0)})));return function(){return e.cancel()}}),[]),t}})),define("modules/clean/photos/thumb_loading/buffered_thumb_store",["require","exports","tslib","modules/clean/photos/thumb_loading/generic_thumb_store","modules/clean/web_timing_logger","modules/core/assert"],(function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferedThumbStore=void 0,r=i.__importStar(r);var a=(function(){function e(e,t){var i=this;this.isTTI=!1,this.postTTISuccesses=[],this.postTTIErrors=[],this.postTTIRequests=[],this.wrapHandlers=function(e){return{onSuccess:function(t){i.isTTI?e.onSuccess(t):i.bufferCallbacks(i.postTTISuccesses,e,t)},onRequest:function(t){e.onRequest&&(i.isTTI?e.onRequest(t):i.bufferCallbacks(i.postTTIRequests,e,t))},onError:function(){e.onError&&(i.isTTI?e.onError():i.bufferErrorCallback(e))}}},this.innerStore=new n.GenericThumbStore(e,t),r.waitForTTI().then((function(){i.isTTI=!0,i.postTTIRequests.forEach((function(e){var t=e[0].onRequest;t&&t(e[1])})),i.postTTIErrors.forEach((function(e){return e.onError&&e.onError()})),i.postTTISuccesses.forEach((function(e){return e[0].onSuccess(e[1])})),i.postTTIRequests=[],i.postTTIErrors=[],i.postTTISuccesses=[]}))}return e.prototype.get_thumb=function(e){return this.isTTI?this.innerStore.get_thumb(e):null},e.prototype.is_batching=function(){return this.innerStore.is_batching()},e.prototype.bind_url=function(e,t){var i=this.isTTI?t:this.wrapHandlers(t);return this.innerStore.bind_url(e,i)},e.prototype.bufferCallbacks=function(e,t,i){o.assert(!this.isTTI,"Should not buffer callback after TTI"),e.push([t,i])},e.prototype.bufferErrorCallback=function(e){o.assert(!this.isTTI,"Should not buffer error callback after TTI"),this.postTTIErrors.push(e)},e.prototype.unbind_url=function(e){this.innerStore.unbind_url(e)},e})();t.BufferedThumbStore=a})),define("modules/clean/react/selection",["require","exports","tslib","immutable"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSelection=t.Selection=void 0;var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t})((n=i.__importStar(n)).Record({selected:null,anchor:null},"Selection"));t.Selection=r,t.createSelection=function(e,t){return new r({selected:e?n.OrderedSet(e):n.OrderedSet(),anchor:t||(e?e[0]:null)})}}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("modules/clean/sharing/public_folder/public_folder",["require","exports","modules/core/uri"],(function(e,t,i){"use strict";function n(e,t){if(e.publicAppToken)return t;if(!e.isPublicFolderEnabled)return null;var i=(e.publicFolderFqPath||"/public").toLowerCase(),n=t.toLowerCase();return n===i?"/":n.startsWith(i+"/")?t.substring(i.length):null}Object.defineProperty(t,"__esModule",{value:!0}),t.showPublicFolderLinkModal=t.makePublicFolderLink=t.shouldUsePublicFolderSharing=void 0,t.shouldUsePublicFolderSharing=function(e,t){return null!=n(e,t)},t.makePublicFolderLink=function(e,t,r,o){if(o)return null;var a=n(t,r);if(null!=a){var l=new i.URI({scheme:"https",authority:"dl.dropboxusercontent.com"});return t.publicAppToken?(l.setPath("/spa/"+t.publicAppToken+a+"/data"),l.toString()):(l.setPath("/u/"+e+a),l.toString())}return null},t.showPublicFolderLinkModal=function(t){return new Promise((function(i,n){Promise.all([new Promise((function(t,i){e(["react"],t,i)})).then(__importStar),new Promise((function(t,i){e(["modules/clean/react/components/modal"],t,i)})).then(__importStar),new Promise((function(t,i){e(["modules/clean/sharing/public_folder/modal"],t,i)})).then(__importStar)]).then((function(e){var n=e[0],r=e[1].Modal,o=e[2].CopyPublicLinkModal;r.showInstance(n.createElement(o,{publicLink:t})),i()}))}))}})),define("modules/clean/emoji_utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstEmojiFromTitle=void 0;var i;t.getFirstEmojiFromTitle=function(e){var t=(function(){i||(i=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]\ufe0f?|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g);return i})();t.lastIndex=0;var n=t.exec(e);if(n&&0===n.index){var r=n[0];if("‍"===e[r.length])return"";var o=t.exec(e);return o&&o.index===r.length?"":r||""}return""}})),define("modules/clean/filename_highlights",["require","exports","tslib","classnames","react"],(function(e,t,i,n,r){"use strict";function o(e,t,i,n){if(!t)return[{text:e,isHighlighted:!1}];i||(i=0),n||(n=e.length),t=(function(e,t){if(!t||!t.length)return[];var i=[],n=0;return t.forEach((function(t){var r=t.pos;r>n&&(n=r);var o=e.indexOf(t.string,n);o>=0&&i.push({pos:o,len:t.string.length,string:t.string})})),i})(e,t);for(var r=0,o=0,a=[];r<e.length;){var l=void 0,s=void 0,u=t[o];if(o>=t.length?(s=!1,l=r+e.length):u.pos>r?(s=!1,l=u.pos):(s=!0,l=u.pos+u.len),!(r<i&&l<=i||r>=n&&l>=n)){var d=e.substring(Math.max(r,i),Math.min(l,n));a.push({text:d,isHighlighted:s})}r=l,s&&o++}return a}function a(e,t,i,n){if(i||(i=0),n||(n=e.length),!t||!(function(e,t){var i=t.map((function(e){return e.highlight_str})).join("");return e===i})(e,t))return[{text:e.substring(i,n),isHighlighted:!1}];for(var r=[],o=0,a=0,l=t;a<l.length;a++){var s=l[a],u=e.indexOf(s.highlight_str,o),d=u+s.highlight_str.length;if(o=d,!(u<i&&d<=i||u>=n)){var c=s.highlight_str;u<i&&(c=c.slice(i-u)),n<d&&(c=c.slice(0,-(d-n))),r.push({text:c,isHighlighted:s.is_highlighted})}}return r}function l(e){return r.createElement("span",null,e.map((function(e,t){return r.createElement("span",{className:n.default({highlighted:e.isHighlighted,"is-highlighted":e.isHighlighted}),key:t},e.text)})))}Object.defineProperty(t,"__esModule",{value:!0}),t.highlightReactFromAllHighlightSpans=t.highlightReactFromHighlightSpans=t.highlightSectionsFromHighlightSpans=t.highlightMatchReact=t.highlightMatchSections=void 0,n=i.__importDefault(n),r=i.__importStar(r),t.highlightMatchSections=o,t.highlightMatchReact=function(e,t,i,n){return l(o(e,t,i,n))},t.highlightSectionsFromHighlightSpans=a,t.highlightReactFromHighlightSpans=function(e,t,i,n){return l(a(e,t,i,n))},t.highlightReactFromAllHighlightSpans=function(e){return l(e.map((function(e){return{text:e.highlight_str,isHighlighted:e.is_highlighted}})))}})),define("modules/clean/paper_formatting_utils",["require","exports","tslib","modules/clean/emoji_utils","react","modules/clean/filename_highlights","spectrum/icon_content/index"],(function(e,t,i,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaperDocTitleParts=void 0,n=i.__importStar(n),r=i.__importDefault(r),o=i.__importStar(o),t.getPaperDocTitleParts=function(e,t,l,s){var u=e.title,d=e.highlight_spans,c=e.title_highlights,f=d&&d.length>0,g=n.getFirstEmojiFromTitle(u);if(g)if(u=u.substr(g.length),f){var p={highlight_str:d[0].highlight_str.substr(g.length),is_highlighted:d[0].is_highlighted};d=i.__spreadArrays([p],d.slice(1))}else if(c){var _=g.length/2;c=c.slice().map((function(e){return{pos:e.pos-_,len:e.string.length,string:e.string}}))}return{title:u,highlightedTitle:f?o.highlightReactFromHighlightSpans(u,d):o.highlightMatchReact(u,c),icon:(function(e,t,i,n){return e?r.default.createElement("div",{className:"mc-media-cell-icon brws-file-name-icon-emoji-container"},r.default.createElement(a.IconContent,{name:n?"blank-large":"blank-small",className:t}),r.default.createElement("span",{className:i},e)):r.default.createElement(a.IconContent,{name:n?"paper-large":"paper-small",className:t})})(g,t,l,s)}}})),define("modules/clean/sharing/browse_exports",["require","exports","tslib","modules/clean/sharing/access_level","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/public_folder/public_folder","modules/clean/sharing/wizard/async_wizard_modals"],(function(e,t,i,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShowShareAFolderWizardModal=t.showPublicFolderLinkModal=t.shouldUsePublicFolderSharing=t.makePublicFolderLink=t.asyncShowPrefilledShareModal=t.asyncShowNewFolderShareModal=t.asyncShowShareModal=t.asyncShowAppropriateNewFolderModalForCdmUser=t.asyncShowMultiFolderPermissionsAtUploadModal=t.asyncShowCdmNewFolderViaUploadModal=t.asyncShowCdmNewFolderModal=t.asyncMountSharedFolder=void 0,t.asyncMountSharedFolder=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];new Promise((function(t,i){e(["modules/clean/sharing/shared_content_link_mount_folder"],t,i)})).then(i.__importStar).then((function(e){e.mountSharedFolder.apply(void 0,t)}))},t.asyncShowCdmNewFolderModal=function(t){var n=t.handleCreateFolder,r=t.user,o=t.context,a=t.shouldSyncDefault,l=t.shouldDisplaySyncSettings,s=t.shouldDisplayAudienceInput,u=t.defaultInputFolderName,d=t.autoTeamGroupDefaultAccessLevel,c=t.redirectOnCancel,f=t.useDigModal,g=void 0===f||f,p=t.isConfidential,_=void 0!==p&&p;new Promise((function(t,i){e(["modules/clean/sharing/cdm_new_folder_modal"],t,i)})).then(i.__importStar).then((function(e){e.showCdmNewFolderModal(n,r,o,a,l,s,d,u,c,void 0,g,_)}))},t.asyncShowCdmNewFolderViaUploadModal=function(t,r,o,a,l,s,u,d){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(c){switch(c.label){case 0:return[4,new Promise((function(t,i){e(["modules/clean/sharing/cdm_new_folder_modal"],t,i)})).then(i.__importStar)];case 1:return c.sent().showCdmNewFolderViaUploadModal(t,r,o,!0,n.ACCESS_LEVEL.WRITER,a,l,s,u,d),[2]}}))}))},t.asyncShowMultiFolderPermissionsAtUploadModal=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(t,i){e(["modules/clean/sharing/multifolder_permissions_at_upload/modal"],t,i)})).then(i.__importStar)];case 1:return n.sent().showMultiFolderPermissionsAtUploadModal(t),[2]}}))}))},t.asyncShowAppropriateNewFolderModalForCdmUser=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(t,i){e(["modules/clean/sharing/cdm_new_folder_modal_util"],t,i)})).then(i.__importStar)];case 1:return n.sent().showAppropriateNewFolderModalForCdmUser(t),[2]}}))}))},Object.defineProperty(t,"asyncShowShareModal",{enumerable:!0,get:function(){return r.asyncShowShareModal}}),Object.defineProperty(t,"asyncShowNewFolderShareModal",{enumerable:!0,get:function(){return r.asyncShowNewFolderShareModal}}),Object.defineProperty(t,"asyncShowPrefilledShareModal",{enumerable:!0,get:function(){return r.asyncShowPrefilledShareModal}}),Object.defineProperty(t,"makePublicFolderLink",{enumerable:!0,get:function(){return o.makePublicFolderLink}}),Object.defineProperty(t,"shouldUsePublicFolderSharing",{enumerable:!0,get:function(){return o.shouldUsePublicFolderSharing}}),Object.defineProperty(t,"showPublicFolderLinkModal",{enumerable:!0,get:function(){return o.showPublicFolderLinkModal}}),Object.defineProperty(t,"asyncShowShareAFolderWizardModal",{enumerable:!0,get:function(){return a.asyncShowShareAFolderWizardModal}})})),define("modules/clean/sharing/content_manager",["require","exports","tslib","modules/core/uri","modules/clean/filepath/filepath","modules/core/browser"],(function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goToContentManagerForPath=t.genContentManagerBridgeUri=void 0,o=i.__importStar(o),t.genContentManagerBridgeUri=function(e){var t,i=e.containingFolder,o=e.filenameToSelect;return i=r.normalize(i)||"",o&&(t=[i,o].join("/")),new n.URI({path:"/team/admin/content/home"+i,query:t?{select:t}:void 0})},t.goToContentManagerForPath=function(e){var i=t.genContentManagerBridgeUri(e);o.open_tab(i.toString())}})),define("modules/clean/react/path_filter_button",["require","exports","tslib","react","spectrum/dropdown_button/index","modules/clean/react/title_bubble","modules/clean/em_string","modules/clean/filepath/filepath","dig-components/tooltips","modules/clean/react/sticky_position","dig-components/chips"],(function(e,t,i,n,r,o,a,l,s,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathFilterButton=void 0,n=i.__importDefault(n),l=i.__importStar(l),t.PathFilterButton=function(e){var t=e.path,i=e.defaultText,c=e.dropdownClasses,f=e.disabled,g=e.onClick,p=e.useDigComponents,_=t&&!l.paths_are_equal(t,"/")?a.Emstring.em_snippet(l.filename(t),10,.6):null;if(p){var m=n.default.createElement(d.FilterChip,{className:c,disabled:f,onClick:g},_||i);return t&&_?n.default.createElement(s.Tooltip,{title:t,placement:"bottom"},m):m}var h=n.default.createElement(r.DropdownButton,{className:c,disabled:f,onClick:g},_||i);return _?n.default.createElement(o.TitleBubble,{content:t,position:u.StickyPosition.BOTTOM},h):h}}));
//# sourceMappingURL=pkg-browse-utils.min.js-vflCgMbxE.map