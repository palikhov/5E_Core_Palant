define(["require","exports","tslib"],(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsentCookieStore=t.getCookieStr=t.DNS_COOKIE_NAME=t.CCPA_TOKEN_COOKIE_NAME=t.SHADOW_COOKIE_NAME=void 0,t.SHADOW_COOKIE_NAME="__Secure-dbx_consent",t.CCPA_TOKEN_COOKIE_NAME="__Secure-dbx_ccpa_token",t.DNS_COOKIE_NAME="__Secure-dbx_do_not_sell";var n,i;function r(e){try{return String(document.cookie||"").split(";").map((function(e){return e.split("=")})).map((function(e){return[e[0],e.slice(1).join(";")].map((function(e){return e.replace(/^[ \t]+|[ \t]+$/g,"")}))})).reduce((function(e,t){var n,i=t[0],r=t[1];return o.__assign(o.__assign({},e),((n={})[i]=r,n))}),Object.create({}))[e]||""}catch(e){return""}}function a(e,t,o,n){var i,r=((i={})[t]=JSON.stringify(o).replace(/[;]|[^ -~]/g,(function(e){return"\\u"+(65536+e.charCodeAt(0)).toString(16).substr(1)})),i.domain=e,i.path="/",i.expires=n,i.samesite="lax",i.secure="",i),a=Object.keys(r).map((function(e){return r[e]?e+"="+r[e]:""+e}));document.cookie=a.join(";")}t.getCookieStr=r,(function(e){e[e.OptIn=1]="OptIn"})(n||(n={})),(function(e){e.StrictlyNecessary="strictly necessary",e.MarketingAdvertising="general marketing and advertising",e.Analytics="analytics",e.PerformanceFunctionality="performance and functionality",e.SocialMediaAdvertising="social media advertising",e.AllCookies="all"})(i||(i={}));var s={cookieDomain:"dropbox.com",consentDurationMonths:6},c=(function(){function e(e,t){var n=o.__assign(o.__assign({},s),e);this.cookieDomain=n.cookieDomain,this.consentDurationMonths=n.consentDurationMonths,this.numDots=n.cookieDomain.split(".").length-1,this.log=t}return e.prototype.hasUserInteracted=function(){var e;return!!(null===(e=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME))||void 0===e?void 0:e.userInteracted)},e.prototype.bakeShadowCookie=function(e){var o=new Date(e.expireDate).toUTCString();a(this.cookieDomain,t.SHADOW_COOKIE_NAME,e,o)},e.prototype.bakeDNSCookie=function(e){var o=new Date(e.expireDate).toUTCString();a(this.cookieDomain,t.DNS_COOKIE_NAME,e,o)},e.prototype.bakeCCPATokenCookie=function(e){var o=new Date(e.expireDate).toUTCString();a(this.cookieDomain,t.CCPA_TOKEN_COOKIE_NAME,e,o)},e.prototype.createShadowCookieValue=function(e,o){var i=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME),r=!!i.userInteracted,a=!(!r&&o)&&i.consentDate?new Date(i.consentDate):new Date,s=new Date(a);return s.setMonth(a.getMonth()+this.consentDurationMonths),{consentType:n.OptIn,consentDate:a.toISOString(),expireDate:s.toISOString(),consentMonths:this.consentDurationMonths,categories:e,userInteracted:r||o,numDots:this.numDots}},e.prototype.mapCookies=function(e){var t,o={};for(var n in e)if(e.hasOwnProperty(n)){var r=n.toLowerCase();Object.values(i).includes(r)?o[r]=e[n]:null===(t=this.log)||void 0===t||t.logInvalidCookieCategoryException(r)}return o},e.prototype.havePreferencesChanged=function(e){var o,n=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME);if(n)try{var i=JSON.stringify(n.categories);return JSON.stringify(e)!==i}catch(e){return null===(o=this.log)||void 0===o||o.logCookieParseException(t.SHADOW_COOKIE_NAME,r(t.SHADOW_COOKIE_NAME)),!1}return!0},e.prototype.getAllowedCategories=function(){var e=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME),n=null==e?void 0:e.categories,r=Object.keys(i),a=[];return n&&(n[i.AllCookies]?a=o.__spreadArrays(r):r.forEach((function(e){n[i[e]]&&a.push(e)}))),a},e.prototype.clearDNSCookie=function(){var e,o=new Date,n=((e={})[t.DNS_COOKIE_NAME]="",e.domain=this.cookieDomain,e.path="/",e.expires=o.toUTCString(),e.samesite="lax",e.secure="",e),i=Object.keys(n).map((function(e){return void 0!==n[e]?e+"="+n[e]:""+e}));document.cookie=i.join(";")},e.prototype.getCurrentCookieObj=function(e){var t,o=r(e);if(o)try{return JSON.parse(o)}catch(n){return null===(t=this.log)||void 0===t||t.logCookieParseException(e,o),null}return{}},e})();t.ConsentCookieStore=c}));
//# sourceMappingURL=privacy_consent_cookies.min.js-vfleNrgwL.map