define(["require","exports","typescript/libraries/comments2/src/components/annotation_instructional_tooltip_pane/utilities"],(function(t,e,i){"use strict";var n;function h(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),Math.min(Math.max(e,t),i)}function o(t){var e=t.x,i=t.y,n=t.width,o=t.height;return{x:h(e),y:h(i),width:h(n),height:h(o)}}function r(t,e,i){var n=i?i.x:t.left-e.left,h=i?i.y:t.top-e.top;return o({x:n/e.width,y:h/e.height,width:t.width/e.width,height:t.height/e.height})}function a(t,e){var i=t.x+t.width-e.width,n=t.y+t.height-e.height;return{x:Math.min(i,e.x),y:Math.min(n,e.y),width:e.width,height:e.height}}function g(t,e){var i=t.x+t.width,n=t.y+t.height,o=t.x,r=t.y,a={x:h(e.x,o,i),y:h(e.y,r,n)},g=h(e.x+e.width,o,i),d=h(e.y+e.height,r,n);return{x:a.x,y:a.y,width:g-a.x,height:d-a.y}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOverlayElementPosition=e.isOnDivWithClass=e.isOnImage=e.isOnLink=e.isOnText=e.getSurfaceFromEvt=e.getTextSelectionRange=e.applyEdgeBounding=e.applyEdgeBoundingByDimensions=e.applyEdgeBoundingByPosition=e.createAnnotation=e.createPlacementFromNormalizedRegion=e.createNormalizedRegion=e.createRectangleFromPixelRectangle=e.normalizeRegion=e.normalizeValue=e.toPoint=e.Surface=e.COMPONENT_CLASS_NAME=void 0,e.COMPONENT_CLASS_NAME="sc-annotation-conductor-layer",(n=e.Surface||(e.Surface={}))[n.None=0]="None",n[n.Text=1]="Text",n[n.Link=2]="Link",n[n.Creation=3]="Creation",e.toPoint=function(t){var e=t.currentTarget.getBoundingClientRect(),i=e.top,n=e.left,h=e.width,o=e.height,r=[t.clientX-n,t.clientY-i];return{x:r[0]/h,y:r[1]/o}},e.normalizeValue=h,e.normalizeRegion=o,e.createRectangleFromPixelRectangle=function(t,e){return r({left:t.x,top:t.y,width:t.width,height:t.height},{left:e.x,top:e.y,width:e.width,height:e.height})},e.createNormalizedRegion=r,e.createPlacementFromNormalizedRegion=function(t,e,i,n){var h=t.x,o=t.y,r=t.width,a=t.height;return{x:h*e+((null==n?void 0:n.x)||0),y:o*i+((null==n?void 0:n.y)||0),width:r*e,height:a*i}},e.createAnnotation=function(t,e){return void 0!==e?{type:"document",regionType:e,regions:t}:{type:"image",region:t[0]}},e.applyEdgeBoundingByPosition=a,e.applyEdgeBoundingByDimensions=g;function d(t){var e=t.target.tagName.toUpperCase();return"P"===e||"TEXT"===e}function u(t){return"A"===t.target.tagName}function c(t){return"IMG"===t.target.tagName}function l(t,e){return t.target.classList.contains(e)}e.applyEdgeBounding=function(t,e,i){return(function(t,e){var i=t.x,n=t.y,h=t.width,o=t.height,r=i+h,a=n+o,g=e.x+e.width,d=e.y+e.height;return h<=8&&r+8>g&&(i=r-8,h=8),o<=8&&a+8>d&&(n=a-8,o=8),{x:i,y:n,width:h,height:o}})(i?a(e,t):g(e,t),e)},e.getTextSelectionRange=function(){var t=window.getSelection();if(t)return t.getRangeAt(0)},e.getSurfaceFromEvt=function(t){return u(t)?2:d(t)?1:l(t,e.COMPONENT_CLASS_NAME)||l(t,i.COMPONENT_CLASS_NAME)||c(t)?3:0},e.isOnText=d,e.isOnLink=u,e.isOnImage=c,e.isOnDivWithClass=l,e.getOverlayElementPosition=function(t,e,i,n,h){var o,a,g=r(t,i);if(g.y*i.height>=n+h)o=(g.x+g.width/2)*i.width-n/2,a=g.y*i.height-n-h;else if((1-g.x-g.width)*i.width>=n)o=(g.x+g.width)*i.width+h,a=(g.y+g.height/2)*i.height-n/2;else if(g.x*i.width>=n)o=g.x*i.width-n-h,a=(g.y+g.height/2)*i.height-n/2;else if((1-g.y-g.height)*i.height>=n)o=(g.x+g.width/2)*i.width-n/2,a=(g.y+g.height)*i.height+h;else{var d=r(e,i);o=(d.x+d.width/2)*i.width-n/2,a=(d.y+d.height)*i.height+h}return{x:o,y:a}}}));
//# sourceMappingURL=utilities.min.js-vfl1HDCU7.map