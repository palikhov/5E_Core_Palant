define("modules/clean/open_in_app/actions",["require","exports","tslib","modules/clean/open_in_app/types","modules/clean/open_in_mobile_app"],(function(e,t,a,n,r){"use strict";function i(){var e=(navigator.userAgent||"").match(/OS (\d+)_(\d+)_?(\d+)?/);return!e||parseInt(e[1],10)>=9}Object.defineProperty(t,"__esModule",{value:!0}),t.cleanUp=t.openImmediately=t.openInApp=t.isIOS9OrHigher=void 0,r=a.__importDefault(r),t.isIOS9OrHigher=i,t.openInApp=function(e){n.areUrlsIOS(e)?r.default.open_ios(e.iOSAppUrl,e.iOSAppStoreUrl,i()):n.areUrlsAndroid(e)&&r.default.open_android_intent(e.androidAppUrl)},t.openImmediately=function(e){var t;if(n.areUrlsIOS(e))t=e.iOSAppUrl;else{if(!n.areUrlsAndroid(e))return;t=e.androidAppUrl}var a=document.createElement("iframe");a.setAttribute("class","open-in-app-transport"),a.setAttribute("src",t),a.setAttribute("style","display: none"),document.body.appendChild(a)},t.cleanUp=function(){r.default.cleanup()}})),define("modules/clean/react/file_viewer/data/reducer",["require","exports","tslib","modules/clean/react/file_viewer/data/types","modules/clean/react/watermarking/utils","modules/clean/react/file_viewer/constants","file-viewer/core/index","modules/clean/react/workflows/markup/utils"],(function(e,t,a,n,r,i,s,o){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.fileViewerReducer=t.defaultState=void 0,t.defaultState={currentFileId:void 0,currentPageIndex:0,fileRevision:void 0,latestFileId:void 0,forceHideToolbar:!1,isFullScreen:!1,isSidebarOpen:(l={},l[i.DocType.ppt]=!0,l[i.DocType.pdf]=!1,l),mode:s.FileViewerMode.Default,disabledModes:{},renderStatuses:{},showOverQuotaUpsell:void 0,sidebar:{visibility:s.SidebarVisibility.Closed,paneStack:[],selectedControlId:void 0},watermark:r.DEFAULT_WATERMARKING_STATE,markup:o.DEFAULT_MARKUP_STATE,campaign:void 0,activeUserBrandingInfo:void 0,overflowZoom:!1,docClassifications:{},docClassificationVariant:null},t.fileViewerReducer=function(e,r){var i,l,c,u,d,p,m,_;switch(void 0===e&&(e=t.defaultState),r.type){case n.Actions.CloseFile:return a.__assign(a.__assign({},e),{currentFileId:void 0,fileRevision:void 0,latestFileId:void 0});case n.Actions.OpenFile:var f=r.payload;return a.__assign(a.__assign({},e),{currentFileId:f.fileId,fileRevision:void 0,latestFileId:void 0});case n.Actions.SwitchRevision:f=r.payload;return a.__assign(a.__assign({},e),{fileRevision:f.file});case n.Actions.RestoreRevision:return a.__assign(a.__assign({},e),{fileRevision:void 0,currentFileId:e.latestFileId||e.currentFileId,latestFileId:void 0});case n.Actions.SetPageDimensions:var g=r.payload.pageDimensions;return a.__assign(a.__assign({},e),{pageDimensions:g});case n.Actions.UpdateWatermarkOptions:var v=r.payload.options;return a.__assign(a.__assign({},e),{watermark:a.__assign(a.__assign({},e.watermark),{textWatermarkingOptions:a.__assign(a.__assign({},e.watermark.textWatermarkingOptions),v.textWatermarkingOptions),imageWatermarkingOptions:a.__assign(a.__assign({},e.watermark.imageWatermarkingOptions),v.imageWatermarkingOptions)})});case n.Actions.SwitchWatermarkingMode:var h=r.payload.mode;return a.__assign(a.__assign({},e),{watermark:a.__assign(a.__assign({},e.watermark),{mode:h})});case n.Actions.SetMarkupCanvas:var y=r.payload,b=y.page,w=y.fabric,k=y.scale;return a.__assign(a.__assign({},e),{markup:a.__assign(a.__assign({},e.markup),(i={},i[b]={scale:k,fabric:w},i))});case n.Actions.UpdateMarkupCanvasScale:var E=r.payload;b=E.page,k=E.scale;return a.__assign(a.__assign({},e),{markup:a.__assign(a.__assign({},e.markup),(l={},l[b]=a.__assign(a.__assign({},e.markup[b]),{scale:k}),l))});case n.Actions.ResetMarkupState:return a.__assign(a.__assign({},e),{markup:o.DEFAULT_MARKUP_STATE});case n.Actions.SetMarkupDrawingMode:var M=r.payload.isDrawingMode;return a.__assign(a.__assign({},e),{markup:a.__assign(a.__assign({},e.markup),{isDrawingMode:M})});case n.Actions.SetMarkupFill:var S=r.payload.color;return a.__assign(a.__assign({},e),{markup:a.__assign(a.__assign({},e.markup),{fillColor:S})});case n.Actions.SetMarkupStroke:S=r.payload.color;return a.__assign(a.__assign({},e),{markup:a.__assign(a.__assign({},e.markup),{strokeColor:S})});case n.Actions.SetMarkupSubmenuType:var A=r.payload.formatSubmenu;return a.__assign(a.__assign({},e),{markup:a.__assign(a.__assign({},e.markup),{formatSubmenu:A})});case n.Actions.SaveForwardRevision:f=r.payload;return a.__assign(a.__assign({},e),{latestFileId:f.revisionKey});case n.Actions.UpdateMode:f=r.payload;return a.__assign(a.__assign({},e),{mode:f.mode});case n.Actions.DisableMode:f=r.payload;return a.__assign(a.__assign({},e),{disabledModes:a.__assign(a.__assign({},e.disabledModes),(c={},c[f.mode]=!0,c))});case n.Actions.EnableMode:f=r.payload;return a.__assign(a.__assign({},e),{disabledModes:a.__assign(a.__assign({},e.disabledModes),(u={},u[f.mode]=!1,u))});case n.Actions.OpenFullScreen:return a.__assign(a.__assign({},e),{isFullScreen:!0});case n.Actions.CloseFullScreen:return a.__assign(a.__assign({},e),{isFullScreen:!1});case n.Actions.OpenSidebar:f=r.payload;return a.__assign(a.__assign({},e),{isSidebarOpen:a.__assign(a.__assign({},e.isSidebarOpen),(d={},d[f.type]=!0,d))});case n.Actions.CloseSidebar:f=r.payload;return a.__assign(a.__assign({},e),{isSidebarOpen:a.__assign(a.__assign({},e.isSidebarOpen),(p={},p[f.type]=!1,p))});case n.Actions.DismissAppDownloadInterstitial:return a.__assign(a.__assign({},e),{appDownloadInterstitialDismissed:!0});case n.Actions.SetShowOverQuotaUpsell:f=r.payload;return a.__assign(a.__assign({},e),{showOverQuotaUpsell:f});case n.Actions.UpdateRenderStatus:f=r.payload;return a.__assign(a.__assign({},e),{renderStatuses:a.__assign(a.__assign({},e.renderStatuses),(m={},m[f.fileId]=f.renderStatus,m))});case n.Actions.PlayMedia:return a.__assign(a.__assign({},e),{isMediaPlaying:!0});case n.Actions.PauseMedia:return a.__assign(a.__assign({},e),{isMediaPlaying:!1,pauseCount:e.pauseCount?e.pauseCount+1:1});case n.Actions.ResetStore:return t.defaultState;case n.Actions.UpdateCurrentPageIndex:f=r.payload;return a.__assign(a.__assign({},e),{currentPageIndex:f.currentPageIndex});case n.Actions.ForceHideToolbar:return a.__assign(a.__assign({},e),{forceHideToolbar:!0});case n.Actions.DisableForceHideToolbar:return a.__assign(a.__assign({},e),{forceHideToolbar:!1});case n.Actions.PopSidebarPane:return e.sidebar.paneStack.length<1?e:a.__assign(a.__assign({},e),{sidebar:a.__assign(a.__assign({},e.sidebar),{paneStack:e.sidebar.paneStack.slice(0,-1)})});case n.Actions.PushSidebarPane:f=r.payload;return e.sidebar.paneStack.includes(f.paneId)?e:a.__assign(a.__assign({},e),{sidebar:a.__assign(a.__assign({},e.sidebar),{paneStack:a.__spreadArrays(e.sidebar.paneStack,[f.paneId])})});case n.Actions.SetSelectedSidebarControlId:f=r.payload;return a.__assign(a.__assign({},e),{sidebar:a.__assign(a.__assign({},e.sidebar),{selectedControlId:f.controlId})});case n.Actions.ResetSidebarPaneStack:return a.__assign(a.__assign({},e),{sidebar:a.__assign(a.__assign({},e.sidebar),{paneStack:[]})});case n.Actions.ResetSelectedSidebarControlId:return a.__assign(a.__assign({},e),{sidebar:a.__assign(a.__assign({},e.sidebar),{selectedControlId:void 0})});case n.Actions.SetSidebarVisibility:f=r.payload;return a.__assign(a.__assign({},e),{sidebar:a.__assign(a.__assign({},e.sidebar),{visibility:f.visibility})});case n.Actions.FetchControllerModeError:return a.__assign(a.__assign({},e),{mode:e.sidebar.visibility===s.SidebarVisibility.Closed?s.FileViewerMode.Default:s.FileViewerMode.Commenting});case n.Actions.SetActiveUserBrandingInfo:f=r.payload;return a.__assign(a.__assign({},e),{activeUserBrandingInfo:f.activeUserBrandingInfo});case n.Actions.SetBestCampaign:f=r.payload;return a.__assign(a.__assign({},e),{campaign:f.campaign});case n.Actions.SetDocClassification:f=r.payload;return a.__assign(a.__assign({},e),{docClassifications:a.__assign(a.__assign({},e.docClassifications),(_={},_[f.fileId]=f.docClassification,_))});case n.Actions.PageDown:return void 0===(T=e.currentPageIndex)?e:a.__assign(a.__assign({},e),{currentPageIndex:T+1});case n.Actions.PageUp:var T;return void 0===(T=e.currentPageIndex)?e:a.__assign(a.__assign({},e),{currentPageIndex:T-1});case n.Actions.RegisterUser:f=r.payload;return a.__assign(a.__assign({},e),{currentUser:f.user});case n.Actions.SetTrialMode:f=r.payload;return a.__assign(a.__assign({},e),{isTrialMode:f.isTrialMode});case n.Actions.OverflowZoomOn:return a.__assign(a.__assign({},e),{overflowZoom:!0});case n.Actions.OverflowZoomOff:return a.__assign(a.__assign({},e),{overflowZoom:!1});default:return e}}})),define("modules/clean/react/file_viewer/data/store",["require","exports","modules/clean/redux/store","modules/clean/redux/namespaces","modules/clean/file_store/reducer","modules/clean/react/file_viewer/data/reducer","modules/clean/previews/data/reducer","modules/clean/previews/data/actions","modules/clean/file_store/actions","modules/clean/react/file_viewer/data/actions","modules/clean/react/extensions/data/store"],(function(e,t,a,n,r,i,s,o,l,c,u){"use strict";var d;Object.defineProperty(t,"__esModule",{value:!0}),t.updateFileStore=t.hydrateFileStore=t.hydrateFileViewerNamespace=t.getStoreForFileViewer=t.fileViewerReducerMap=void 0,t.fileViewerReducerMap=((d={})[n.FILE_NAMESPACE_KEY]=r.fileNamespaceReducer,d[n.FILE_VIEWER_NAMESPACE_KEY]=i.fileViewerReducer,d[n.PREVIEW_NAMESPACE_KEY]=s.reducer,d),t.getStoreForFileViewer=function(){return u.getStore(),a.getStoreAndRegisterReducers(t.fileViewerReducerMap)},t.hydrateFileViewerNamespace=function(e,t,a){var n=t.file;n&&e.dispatch(c.openFile(n)),a&&e.dispatch(c.registerUser(a))},t.hydrateFileStore=function(e,t){e.dispatch(o.populateFilesPreviewData(t)),e.dispatch(l.putFiles(t))},t.updateFileStore=function(e,t){e.dispatch(l.putFiles(t))}})),define("modules/clean/react/file_viewer/data/utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUserOwnerOfFile=void 0,t.isUserOwnerOfFile=function(e,t){return e&&t&&e.home_ns_id===t.ns_id}})),define("modules/clean/react/size_class/size_class",["require","exports","tslib","react","classnames","hoist-non-react-statics","spectrum/match/index","modules/clean/react/size_class/constants","modules/clean/react/components/helpers"],(function(e,t,a,n,r,i,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withSizeClass=t.SizeClass=void 0,n=a.__importDefault(n),r=a.__importDefault(r),i=a.__importDefault(i),Object.defineProperty(t,"SizeClass",{enumerable:!0,get:function(){return o.SizeClass}}),t.withSizeClass=function(e,t){void 0===t&&(t={});var c=(function(i){function c(t){var a=i.call(this,t)||this;return a.displayName="WithSizeClass("+l.getDisplayName(e),a.onMatchSmall=function(){return a.setState({sizeClass:o.SizeClass.Small})},a.onMatchMedium=function(){return a.setState({sizeClass:o.SizeClass.Medium})},a.onMatchLarge=function(){return a.setState({sizeClass:o.SizeClass.Large})},a.onMatchExtraLarge=function(){return a.setState({sizeClass:o.SizeClass.ExtraLarge})},window.matchMedia(o.MEDIA_SIZE_CLASS_EXTRA_LARGE).matches?a.state={sizeClass:o.SizeClass.ExtraLarge}:window.matchMedia(o.MEDIA_SIZE_CLASS_LARGE).matches?a.state={sizeClass:o.SizeClass.Large}:window.matchMedia(o.MEDIA_SIZE_CLASS_MEDIUM).matches?a.state={sizeClass:o.SizeClass.Medium}:a.state={sizeClass:o.SizeClass.Small},a}return a.__extends(c,i),c.prototype.render=function(){var i,l=t.isResponsiveEnabled,c=t.responsiveClassName,u=void 0===c?"":c,d=!l||l();return n.default.createElement("div",{className:r.default((i={},i[u]=d,i))},n.default.createElement(s.Match,{media:o.MEDIA_SIZE_CLASS_SMALL,onMatch:this.onMatchSmall}),n.default.createElement(s.Match,{media:o.MEDIA_SIZE_CLASS_MEDIUM,onMatch:this.onMatchMedium}),n.default.createElement(s.Match,{media:o.MEDIA_SIZE_CLASS_LARGE,onMatch:this.onMatchLarge}),n.default.createElement(s.Match,{media:o.MEDIA_SIZE_CLASS_EXTRA_LARGE,onMatch:this.onMatchExtraLarge}),n.default.createElement(e,a.__assign({},this.props,{sizeClass:d?this.state.sizeClass:o.SizeClass.Large})))},c})(n.default.Component);return i.default(c,e)}})),define("modules/clean/react/workflows/markup/utils",["require","exports","modules/constants/file_viewer","modules/clean/file_store/utils","modules/clean/previews/constants","modules/core/i18n","modules/clean/react/workflows/markup/types"],(function(e,t,a,n,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MARKUP_STATE=t.getMarkupErrorMessage=t.getMarkupLabelText=t.allowMarkup=t.userCanMarkup=t.fileIsMarkupable=t.MOVE_DISTANCE_Y=t.MOVE_DISTANCE_X=t.DEFAULT_TOP=t.DEFAULT_LEFT=t.OFFSET=void 0;var o=[".pdf",".jpg",".jpeg",".png",".bmp"];t.OFFSET=10,t.DEFAULT_LEFT=100,t.DEFAULT_TOP=100,t.MOVE_DISTANCE_X=1,t.MOVE_DISTANCE_Y=1,t.fileIsMarkupable=function(e){return!!e&&(n.isBrowseFile(e)&&!e.read_only&&!!e.ext&&o.includes(e.ext.toLowerCase()))};t.userCanMarkup=function(){return["M0"].includes(a.FILE_MARKUP)},t.allowMarkup=function(e){return t.userCanMarkup()&&t.fileIsMarkupable(e)},t.getMarkupLabelText=function(e,t){if(e)return t===r.PreviewType.Image?i.intl.formatMessage({id:"4hf7s2",defaultMessage:"Markup is available on PDFs, PNGs, JPEGs, and BMPs."}):i.intl.formatMessage({id:"PSKrse",defaultMessage:"Markup is available on PDFs and images."})},t.getMarkupErrorMessage=function(e){switch(e[".tag"]){case"over_quota_error":return i.intl.formatMessage({id:"ebkvMX",defaultMessage:"Can’t save because your account is full. Upgrade to get more space."});case"filesystem_error":return i.intl.formatMessage({id:"rV+Py+",defaultMessage:"Couldn’t save markup. Refresh the page to try again."});case"unsupported_file_error":return i.intl.formatMessage({id:"9ZczZk",defaultMessage:"Can’t save. Markup isn’t available for this file type."});case"unauthorized_access":return i.intl.formatMessage({id:"+/+p5G",defaultMessage:"You don’t have permission to save to this folder."});default:return i.intl.formatMessage({id:"rV+Py+",defaultMessage:"Couldn’t save markup. Refresh the page to try again."})}},t.DEFAULT_MARKUP_STATE={isDrawingMode:!1,formatSubmenu:[],strokeColor:s.MarkupColor.RED_CHERRY,fillColor:s.MarkupColor.TRANSPARENT}})),define("modules/clean/react/previews/preview_toolbar_button",["require","exports","tslib","classnames","react","modules/clean/react/sprite","modules/clean/static_urls","spectrum/icon_document/index","spectrum/tooltip/index"],(function(e,t,a,n,r,i,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewToolbarButton=void 0,n=a.__importDefault(n),r=a.__importDefault(r),t.PreviewToolbarButton=function(e){var t=e.className,a=e["data-test"],c=e.disabled,u=e.iconName,d=e.onClick,p=e.spriteGroup,m=e.spriteName,_=e.spectrumIconName,f=e.tooltip;return r.default.createElement("div",{className:n.default(t,"toolbar-button-entry"),"data-test":a},r.default.createElement(l.Tooltip,{positioning:"above",positionOffset:24,tooltipContent:f},r.default.createElement("button",{className:t+"-button","aria-label":f,onClick:d},void 0!==u?r.default.createElement("img",{src:s.static_url("/static/images/previews/toolbar/"+u+".svg"),alt:f,className:n.default({disabled:c})}):void 0!==m?r.default.createElement(i.Sprite,{group:p,name:m,alt:f,className:n.default({disabled:c})}):r.default.createElement(o.IconDocument,{name:_}))))}})),define("spectrum/icon_document/index",["require","exports","tslib","react","spectrum/icon_templates/stateless/index","spectrum/svg_icon_bundle/index","spectrum/icon_document/bundle"],(function(e,t,a,n,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconDocument=t.ICONS=void 0,n=a.__importStar(n),Object.defineProperty(t,"ICONS",{enumerable:!0,get:function(){return s.ICONS}}),t.IconDocument=function(e){var t=e.name,a=n.createElement(i.SvgIconBundle,{focusable:"false",icon:s.ICONS[t]});return n.createElement(r.Component,Object.assign({icon:a},e))},t.IconDocument.displayName="IconDocument"})),define("spectrum/icon_document/bundle",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICONS=void 0,t.ICONS=JSON.parse('\n    {"date-small":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><g fill=\\"#000\\" fill-rule=\\"nonzero\\"><path d=\\"M4 4h16v16H4V4zm2 2v12h12V6H6z\\"></path><path d=\\"M5 8h14v2H5zM7 2h2v4H7zM15 2h2v4h-2z\\"></path></g></g>"},"date":{"attrs":{"width":"32","height":"32","viewBox":"0 0 32 32"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><g fill=\\"#000\\" fill-rule=\\"nonzero\\"><path d=\\"M6 6h20v20H6V6zm2 2v16h16V8H8z\\"></path><path d=\\"M7 11h18v2H7zM11 4h2v4h-2zM19 4h2v4h-2z\\"></path></g></g>"},"signature-small":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><g fill=\\"#000\\" fill-rule=\\"nonzero\\"><path d=\\"M1 18h22v1H1z\\"></path><path d=\\"M10.874 17.262c-1.33 1.046-1.25 2.246-.297 2.723 1.076.537 2.438-.321 3.206-2.953.226-.774.42-1.509.583-2.205-1.06.632-2.251 1.46-3.492 2.435zm4.589.26c-1.044 3.578-3.487 5.118-5.668 4.028-2.131-1.065-2.317-3.844-.003-5.664 1.857-1.46 3.565-2.6 5.014-3.317.634-4.207-.218-6.501-2.436-6.681-1.374-.111-1.993.459-2.027 1.713-.041 1.48.799 3.57 2.34 5.61l-1.397 1.054c-1.76-2.33-2.746-4.782-2.693-6.713.062-2.246 1.534-3.602 3.918-3.408 3.355.272 4.634 3.065 4.144 7.711 1.236-.31 2.137-.102 2.578.742.211.404.28.842.24 1.308a3.4 3.4 0 0 1-.025.205c1.118-.989 1.885-1.388 2.896-1.103.22.063.432.163.632.299l-.986 1.446a.42.42 0 0 0-.121-.06c-.223-.063-.618.152-1.332.792l-.42.379c-.17.151-.308.267-.442.37-.42.32-.786.5-1.217.5-.758 0-1.248-.545-1.188-1.264a2.4 2.4 0 0 1 .12-.543c.034-.105.181-.524.157-.454.11-.32.166-.532.182-.719a.652.652 0 0 0-.037-.325c.02.04.003.044-.143.053-.287.018-.69.127-1.183.324a38.652 38.652 0 0 1-.903 3.717zM1.381 11.619L2.62 10.38l4.95 4.95-1.238 1.237z\\"></path><path d=\\"M6.377 10.382l1.238 1.236-4.948 4.952-1.238-1.237z\\"></path></g></g>"},"signature":{"attrs":{"width":"32","height":"32","viewBox":"0 0 32 32"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><g fill=\\"#000\\" fill-rule=\\"nonzero\\"><path d=\\"M3 24h26v1H3z\\"></path><path d=\\"M12.5 23.31c-1.983 1.56-1.857 3.437-.376 4.177 1.643.821 3.682-.464 4.79-4.26.37-1.271.68-2.47.931-3.594-1.6.917-3.43 2.172-5.345 3.678zm6.334.476c-1.423 4.878-4.698 6.942-7.604 5.49-2.828-1.413-3.075-5.094.034-7.538 2.627-2.065 5.04-3.666 7.065-4.65.94-6.089-.293-9.445-3.584-9.712-2.047-.166-3.02.73-3.072 2.607-.058 2.126 1.133 5.09 3.313 7.976l-1.595 1.206c-2.431-3.218-3.79-6.597-3.717-9.237.082-3.012 2.03-4.805 5.233-4.546 4.596.373 6.315 4.295 5.547 10.86 1.785-.52 3.073-.3 3.663.83.273.523.363 1.094.31 1.705a4.971 4.971 0 0 1-.175.925c.12-.105.252-.223.4-.356 1.565-1.402 2.605-1.969 3.947-1.59.285.08.558.21.818.387l-1.126 1.652a.807.807 0 0 0-.235-.114c-.414-.117-1.015.21-2.07 1.155-.07.063-.47.426-.586.529a10.64 10.64 0 0 1-.604.506c-.55.42-1.024.653-1.565.653-.928 0-1.51-.649-1.437-1.524.018-.219.07-.436.158-.71.046-.143.25-.725.217-.63.16-.462.24-.774.265-1.057.023-.255-.008-.449-.09-.605-.063-.122-.828-.083-2.231.498-.3 1.634-.728 3.4-1.279 5.29z\\"></path><path d=\\"M8.293 14.294l1.415 1.414-4.997 5-1.414-1.414z\\"></path><path d=\\"M3.297 15.708l1.414-1.414 5 5-1.414 1.414z\\"></path></g></g>"},"text-small":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><g fill=\\"#000\\" fill-rule=\\"nonzero\\"><path d=\\"M4 4h16v16H4V4zm2 2v12h12V6H6z\\"></path><path d=\\"M8 8h8v2H8z\\"></path><path d=\\"M11 9h2v7h-2z\\"></path></g></g>"},"text":{"attrs":{"width":"32","height":"32","viewBox":"0 0 32 32"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><g fill=\\"#000\\" fill-rule=\\"nonzero\\"><path d=\\"M6 6h20v20H6V6zm2 2v16h16V8H8z\\"></path><path d=\\"M11 11h10v2H11zM15 13h2v8h-2z\\"></path></g></g>"}}\n  ')})),define("modules/clean/react/comments2/data/store",["require","exports","tslib","lodash","modules/clean/redux/namespaces","modules/clean/react/comments2/data/reducer","modules/clean/redux/store"],(function(e,t,a,n,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForComments2=void 0,n=a.__importStar(n),t.getStoreForComments2=n.once((function(){var e;return s.getStoreAndRegisterReducers(((e={})[r.COMMENTS2_NAMESPACE_KEY]=i.reducer,e))}))})),define("modules/clean/react/comments2/data/reducer",["require","exports","tslib","lodash","modules/clean/react/comments2/data/actions","modules/clean/react/comments2/data/initial_state","modules/clean/react/comments2/data/util","modules/clean/react/comments2/data/reducer_helper","modules/clean/react/comments2/data/types","typescript/libraries/comments2/src/transforms/index","modules/clean/react/file_metadata/data/type_guards","modules/clean/react/comments2/video_annotations/annotation_helper"],(function(e,t,a,n,r,i,s,o,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0,n=a.__importStar(n),c=a.__importStar(c);var p=o.createStatusReducer(r.ActionTypes),m=o.createActionReducer(),_=o.createReducerFrom(m(r.ActionTypes.SetContext,(function(e,t){return t?a.__assign(a.__assign({},t),{status:l.Comments2ContextStatus.Pending}):void 0})),m(r.ActionTypes.SetContextStatus,(function(e,t){return a.__assign(a.__assign({},e),{status:t})})));function f(e,t,a){return e.map((function(e){return e.id===t?a(e):e}))}function g(e,t,r){var i=e.threads[t];return i?(function(e,t){var n;return a.__assign(a.__assign({},e),{threads:a.__assign(a.__assign({},e.threads),(n={},n[t.id]=t,n))})})(e,n.assignIn({},i,r)):e}function v(e,t,n,r){var i,s=t.threads[n];return s?g(t,n,s.pending?a.__assign(a.__assign({},s),((i={})[r]=s.pending.originalValue,i.pending=a.__assign(a.__assign({},s.pending),{error:e}),i)):s):t}function h(e,t,a,n){var r=e.threads[a];return r?g(e,a,{comments:f(r.comments,t,n)}):e}function y(e,t,n,r,i){return h(t,n,r,(function(t){var n;return t.pending?a.__assign(a.__assign({},t),((n={})[i]=t.pending.originalValue,n.pending=a.__assign(a.__assign({},t.pending),{error:e}),n)):t}))}var b=o.createActionReducer(),w=o.createReducerFrom(b(r.ActionTypes.ActivateThread,(function(e,t){var n=t.thread,r=t.pendingAnnotationInfo,i=t.wasPreviewLayerClick;return a.__assign(a.__assign({},e),{activatedThreadId:n.id,documentRectangleToMakeVisible:i?void 0:s.documentRectangleFromThread(n),pendingAnnotationInfo:r||e.pendingAnnotationInfo})})),b(r.ActionTypes.DeactivateAllThreads,(function(e){return n.assignIn({},e,{activatedThreadId:void 0,activatedDocumentAnnotationRectangle:void 0})})),b(r.ActionTypes.ListComments,{Success:function(e,t,n){var r=a.__assign(a.__assign({},e.authors),c.usersToIUserMap(t.authors)),i=a.__assign(a.__assign({},e.threads),c.threadsToIThreadMap(t.threads,r,t.currentRevision));return a.__assign(a.__assign({},e),{threads:i,authors:r,cursor:t.cursor,listCommentsError:void 0})},Error:function(e,t,n){return a.__assign(a.__assign({},e),{listCommentsError:t})}}),b(r.ActionTypes.CreateThread,{Request:function(e,t,n){var i,o=new Date,l=n.annotation,c=n.author,u=n.content,d=n.guid,p={id:d,timestamp:o,read:!0,readonly:!0,isThirdParty:!1,resolved:!1,comments:[{id:d,threadId:d,timestamp:o,author:c,content:u,revisionInfo:{isCurrent:!0},userPermissions:{canDelete:!1,canEdit:!1}}],annotation:l},m=a.__assign(a.__assign({},p),{pending:{action:r.ActionTypes.CreateThread.name,originalValue:void 0,pendingValue:p}}),_=e.pendingAnnotationInfo.annotationMayBeOffscreen?s.documentRectangleFromThread(p):void 0;return a.__assign(a.__assign({},e),{activatedThreadId:d,documentRectangleToMakeVisible:_,threads:a.__assign(a.__assign({},e.threads),(i={},i[d]=m,i))})},Success:function(e,t,n){var r,i=n.guid,s=e.threads,o=i,l=s[o],c=a.__rest(s,["symbol"==typeof o?o:o+""]),u=f(l.comments,i,(function(e){return a.__assign(a.__assign({},e),{id:t.id,userPermissions:{canDelete:!0,canEdit:!(e.content.metadata[0]&&"sticker"===e.content.metadata[0].type)},readonly:!1})}));return a.__assign(a.__assign({},e),{activatedThreadId:e.activatedThreadId===n.guid?t.id:e.activatedThreadId,threads:a.__assign(a.__assign({},c),(r={},r[t.id]=a.__assign(a.__assign({},l),{id:t.id,comments:u,pending:void 0}),r))})},Error:function(e,t,n){var r=e.threads,i=n.guid,s=(r[i],a.__rest(r,["symbol"==typeof i?i:i+""]));return a.__assign(a.__assign({},e),{threads:s})}}),b(r.ActionTypes.ReplyToThread,{Request:function(e,t,n){var i,s=new Date,o=n.author,l=n.content,c=n.guid,u=n.threadId,d={id:c,threadId:u,timestamp:s,author:o,content:l,revisionInfo:{isCurrent:!0},userPermissions:{canDelete:!1,canEdit:!1}},p=e.threads[u],m=a.__assign(a.__assign({},p),{read:!0,comments:a.__spreadArrays(p.comments,[d])}),_=a.__assign(a.__assign({},m),{pending:{action:r.ActionTypes.ReplyToThread.name,originalValue:p,pendingValue:m}});return a.__assign(a.__assign({},e),{activatedThreadId:u,threads:a.__assign(a.__assign({},e.threads),(i={},i[u]=_,i))})},Success:function(e,t,n){var r,i=n.guid,s=n.threadId,o=e.threads[s],l=f(o.comments,i,(function(e){return a.__assign(a.__assign({},e),{id:t.id,userPermissions:{canDelete:!0,canEdit:!(e.content.metadata[0]&&"sticker"===e.content.metadata[0].type)}})}));return a.__assign(a.__assign({},e),{threads:a.__assign(a.__assign({},e.threads),(r={},r[s]=a.__assign(a.__assign({},o),{comments:l,pending:void 0}),r))})},Error:function(e,t,n){var r,i=e.threads[n.threadId],s=i.comments.filter((function(e){return e.id!==n.guid}));return a.__assign(a.__assign({},e),{threads:a.__assign(a.__assign({},e.threads),(r={},r[n.threadId]=a.__assign(a.__assign({},i),{comments:s,pending:void 0}),r))})}}),b(r.ActionTypes.DeleteComment,{Request:function(e,t,n){return h(e,n.commentId,n.threadId,(function(e){return a.__assign(a.__assign({},e),{deleted:!0,pending:{action:r.ActionTypes.DeleteComment.name,originalValue:e.deleted,pendingValue:!0}})}))},Success:function(e,t,n){return h(e,n.commentId,n.threadId,(function(e){return a.__assign(a.__assign({},e),{pending:void 0})}))},Error:function(e,t,a){return y(t,e,a.commentId,a.threadId,"deleted")}}),b(r.ActionTypes.EditComment,{Request:function(e,t,n){return h(e,n.commentId,n.threadId,(function(e){return a.__assign(a.__assign({},e),{content:n.content,pending:{action:r.ActionTypes.EditComment.name,originalValue:e.content,pendingValue:n.content}})}))},Success:function(e,t,n){return h(e,n.commentId,n.threadId,(function(e){return a.__assign(a.__assign({},e),{pending:void 0})}))},Error:function(e,t,a){return y(t,e,a.commentId,a.threadId,"content")}}),b(r.ActionTypes.SetPerfData,(function(e,t){return a.__assign(a.__assign({},e),{perfEvents:a.__assign(a.__assign({},e.perfEvents),t)})})),b(r.ActionTypes.CheckOnboardingStatus,(function(e,t){return a.__assign(a.__assign({},e),{onboardingVariants:{premium_av_comments_pane_surface:!1===t.premium_av_comments_pane_surface,premium_av_preview_surface:!1===t.premium_av_preview_surface,non_premium_av_comments_pane_surface:!1===t.non_premium_av_comments_pane_surface,not_annotatable_file_comments_pane_surface:!1===t.not_annotatable_file_comments_pane_surface,how_to_at_mention_comments_pane_surface:!1===t.how_to_at_mention_comments_pane_surface,image_preview_surface:!1,document_preview_surface:!1,share_as_comment:!1===t.share_as_comment}})})),b(r.ActionTypes.MarkOnboarded,(function(e,t,n){var r;return a.__assign(a.__assign({},e),{onboardingVariants:a.__assign(a.__assign({},e.onboardingVariants),(r={},r[n]=!1,r))})})),b(r.ActionTypes.GetMediaFeatures,(function(e,t){return a.__assign(a.__assign({},e),{framePreciseCommentsEnabled:t.frame_precise_comments})})),b(r.ActionTypes.GetFileMetadata,(function(e,t){return a.__assign(a.__assign({},e),{frameRate:u.isVideoSpecificMetadata(t.metadata)?t.metadata.frame_rate_precise?t.metadata.frame_rate_precise:t.metadata.frame_rate:void 0})})),b(r.ActionTypes.MarkModalVariantShown,(function(e,t){var n;return a.__assign(a.__assign({},e),{modalVariantsShown:a.__assign(a.__assign({},e.modalVariantsShown),(n={},n[t]=!0,n))})})),b(r.ActionTypes.DismissOnboarding,(function(e){return a.__assign(a.__assign({},e),{onboardingVariants:n.mapValues(e.onboardingVariants,(function(){return!1}))})})),b(r.ActionTypes.MarkThreadRead,{Request:function(e,t,a){return g(e,a.threadId,{read:!0,pending:{action:r.ActionTypes.MarkThreadRead.name,originalValue:e.threads[a.threadId].read,pendingValue:!0}})},Success:function(e,t,a){return g(e,a.threadId,{pending:void 0})},Error:function(e,t,a){return v(t,e,a.threadId,"read")}}),b(r.ActionTypes.MarkThreadUnread,{Request:function(e,t,a){return g(e,a,{read:!1,pending:{action:r.ActionTypes.MarkThreadUnread.name,originalValue:e.threads[a].read,pendingValue:!1}})},Success:function(e,t,a){return g(e,a,{pending:void 0})},Error:function(e,t,a){return v(t,e,a,"read")}}),b(r.ActionTypes.MarkThreadResolved,{Request:function(e,t,a){var n={type:"with_details",resolver:a.resolver,resolvedTimestamp:new Date};return g(e,a.threadId,{resolvedInfo:n,pending:{action:r.ActionTypes.MarkThreadResolved.name,originalValue:e.threads[a.threadId].resolvedInfo,pendingValue:n}})},Success:function(e,t,a){return g(e,a.threadId,{pending:void 0})},Error:function(e,t,a){return v(t,e,a.threadId,"resolvedInfo")}}),b(r.ActionTypes.MarkThreadUnresolved,{Request:function(e,t,a){return g(e,a,{resolvedInfo:void 0,pending:{action:r.ActionTypes.MarkThreadUnresolved.name,originalValue:e.threads[a].resolvedInfo,pendingValue:void 0}})},Success:function(e,t,a){return g(e,a,{pending:void 0})},Error:function(e,t,a){return v(t,e,a,"resolvedInfo")}}),b(r.ActionTypes.SetContext,(function(e,t){return a.__assign(a.__assign({},e),n.pick(i.INITIAL_STATE.data,"activatedThreadId","authors","cursor","documentMetadata","enabledStatus","pendingAnnotationInfo","playerIntegrationEnabled","requestEditorFocus","canSeeCommentEditor","subscriptionStatus","threads"))})),b(r.ActionTypes.ToggleShowResolved,(function(e){return a.__assign(a.__assign({},e),{showResolved:!e.showResolved})})),b(r.ActionTypes.UpdateEditorIsEmpty,(function(e,t){return a.__assign(a.__assign({},e),{editorIsEmpty:t})})),b(r.ActionTypes.UpdateDocumentCurrentPage,(function(e,t){return a.__assign(a.__assign({},e),{pendingAnnotationInfo:a.__assign(a.__assign({},e.pendingAnnotationInfo),{currentPageNumber:t})})})),b(r.ActionTypes.UpdatePlayerCurrentTime,(function(e,t){return a.__assign(a.__assign({},e),{pendingAnnotationInfo:a.__assign(a.__assign({},e.pendingAnnotationInfo),{playerCurrentTime:d.VideoAnnotationHelper.unitConvertSecondsToDomainObjectTime(t),playerCurrentTimeSec:t})})})),b(r.ActionTypes.HoverThread,(function(e,t){return a.__assign(a.__assign({},e),{hoverThreadId:t})})),b(r.ActionTypes.FocusThread,(function(e,t){return a.__assign(a.__assign({},e),{focusedThreadId:t})})),b(r.ActionTypes.SetPendingNumberedAnnotation,(function(e,t){return a.__assign(a.__assign({},e),{pendingAnnotationInfo:a.__assign(a.__assign({},e.pendingAnnotationInfo),{numberedAnnotation:t,annotationMayBeOffscreen:!1})})})),b(r.ActionTypes.ClearPendingNumberedAnnotation,(function(e,t){return a.__assign(a.__assign({},e),{pendingAnnotationInfo:a.__assign(a.__assign({},e.pendingAnnotationInfo),{numberedAnnotation:void 0,annotationMayBeOffscreen:!1})})})),b(r.ActionTypes.SetPendingNumberedAnnotationMayBeOffscreen,(function(e){return a.__assign(a.__assign({},e),{pendingAnnotationInfo:a.__assign(a.__assign({},e.pendingAnnotationInfo),{annotationMayBeOffscreen:!0})})})),b(r.ActionTypes.TrackSidebarCommentsVisibility,(function(e,t){return a.__assign(a.__assign({},e),{visibleInSidebar:t})})),b(r.ActionTypes.DocMetadataLoad,(function(e,t){return a.__assign(a.__assign({},e),{documentMetadata:t})})),b(r.ActionTypes.RequestEditorFocus,(function(e){return a.__assign(a.__assign({},e),{requestEditorFocus:!0})})),b(r.ActionTypes.FulfillEditorFocusRequest,(function(e){if(!e.requestEditorFocus)throw new Error("Fulfilling request for editor focus, but isnt requested in store");return a.__assign(a.__assign({},e),{requestEditorFocus:!1})})),b(r.ActionTypes.EnablePlayerIntegration,(function(e,t){return a.__assign(a.__assign({},e),{playerIntegrationEnabled:!0})})),b(r.ActionTypes.SetUpsellTooltipVariant,(function(e,t){return a.__assign(a.__assign({},e),{upsellTooltipVariant:t})})),b(r.ActionTypes.SetThirdPartySource,(function(e,t){return a.__assign(a.__assign({},e),{thirdPartySource:t})})),b(r.ActionTypes.SetCanSeeCommentEditor,(function(e,t){return a.__assign(a.__assign({},e),{canSeeCommentEditor:t})})),b(r.ActionTypes.RecordEnabledStatus,(function(e,t){return a.__assign(a.__assign({},e),{enabledStatus:n.merge({},e.enabledStatus,t)})})),b(r.ActionTypes.SetSubscriptionStatus,(function(e,t){return a.__assign(a.__assign({},e),{subscriptionStatus:t})})),b(r.ActionTypes.Subscribe,(function(e){return a.__assign(a.__assign({},e),{subscriptionStatus:n.merge({},e.subscriptionStatus,{isSubscribed:!0})})})),b(r.ActionTypes.Unsubscribe,(function(e){return a.__assign(a.__assign({},e),{subscriptionStatus:n.merge({},e.subscriptionStatus,{isSubscribed:!1})})})),b(r.ActionTypes.ResetStore,(function(e,t){return a.__assign({},i.INITIAL_STATE.data)})),b(r.ActionTypes.GetStickers,(function(e,t){return a.__assign(a.__assign({},e),{stickers:t.sticker_sets})})));t.reducer=function(e,t){void 0===e&&(e=i.INITIAL_STATE);var a=_(e.context,t),n=w(e.data,t),r=p(e.statuses,t);return a!==e.context||n!==e.data||r!==e.statuses?{context:a,data:n,statuses:r}:e}})),define("modules/clean/react/workflows/markup/markup_layer",["require","exports","tslib","react","react-redux","lodash","modules/clean/react/workflows/markup/fabric_wrapper","modules/clean/react/components/css","modules/clean/react/workflows/markup/selectors","modules/clean/react/file_viewer/data/actions","modules/clean/react/workflows/markup/types","modules/clean/react/workflows/markup/fabric"],(function(e,t,a,n,r,i,s,o,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkupLayer=t._MarkupLayer=t.ConnectedMarkupLayer=void 0;var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSelectionChange=function(e){if(e.selected){var a=e.selected,n=a.some((function(e){return["circle","rect"].includes(e.type||"")}))?[u.FormatSubmenuEntry.FILL,u.FormatSubmenuEntry.STROKE]:[u.FormatSubmenuEntry.STROKE];t.props.setMarkupFormatSubmenu(n);var r=a.filter((function(e){return d.getStroke(e)})),i=d.getStroke(r[0]),s=r.every((function(e){return d.getStroke(e)===i})),o=a.filter((function(e){return d.getFill(e)})),l=d.getFill(o[0]),c=o.every((function(e){return d.getFill(e)===l}));i&&s&&t.props.setMarkupStroke(i),l&&c&&t.props.setMarkupFill(l)}},t.handleObjectMoving=function(e){var t=e.target;if(t&&t.canvas&&null!=t.top&&null!=t.left){t.setCoords();var a=t.canvas.getWidth(),n=t.canvas.getHeight(),r=t.getBoundingRect().width,i=t.getBoundingRect().height,s=t.getBoundingRect().top,o=t.getBoundingRect().left;if(!(i>n||r>a)){var l=.9*r,c=.9*i,u=Math.max(t.top,t.top-s-c),d=Math.max(t.left,t.left-o-l);t.top=Math.min(u,n+c-i+t.top-s),t.left=Math.min(d,a+l-r+t.left-o),t.setCoords()}}},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.createFabricCanvas(),t=this.props.markupState[this.props.page];t&&t.fabric&&e.loadFromJSON(t.fabric.toJSON(),(function(){e.requestRenderAll()})),this.props.setMarkupCanvas(this.props.page,e,this.getCanvasSize().scale)},t.prototype.createFabricCanvas=function(){var e=new s.fabric.Canvas(this.canvasId);return e.on("selection:updated",this.handleSelectionChange),e.on("selection:created",this.handleSelectionChange),e.on("object:moving",this.handleObjectMoving),e.isDrawingMode=this.props.markupState.isDrawingMode,e},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.markupState,a=e.page,n=this.getCanvasSize(),r=n.width,i=n.height,s=n.scale,o=t[a]&&t[a].fabric;if(o)o.setDimensions({width:r,height:i}),this.props.updateMarkupCanvasScale(a,s);else{var l=this.createFabricCanvas();this.props.setMarkupCanvas(a,l,s)}},t.prototype.shouldComponentUpdate=function(e){return this.props.page!==e.page||!i.isEqual(this.props.pageDimensions,e.pageDimensions)||!i.isEqual(this.props.layerSize,e.layerSize)},t.prototype.getCanvasSize=function(){var e=this.props.layerSize.width,t=this.props.pageDimensions||this.props.layerSize,a=t.width,n=t.height,r=e/a;return{width:Math.round(a*r),height:Math.round(n*r),scale:r}},t.prototype.render=function(){var e=this.getCanvasSize(),t=e.width,a=e.height,r={width:t+"px",height:a+"px"};return this.canvasId="markup-canvas"+this.props.page,n.default.createElement("div",{className:"fv-markup-layer",style:r},n.default.createElement("canvas",{id:this.canvasId,width:t,height:a}))},t.displayName="MarkupLayer",t})((n=a.__importDefault(n)).default.Component);t._MarkupLayer=p;var m=r.connect((function(e){return{markupState:l.getMarkupState(e)}}),{setMarkupCanvas:c.setMarkupCanvas,updateMarkupCanvasScale:c.updateMarkupCanvasScale,setMarkupFormatSubmenu:c.setMarkupFormatSubmenu,setMarkupFill:c.setMarkupFill,setMarkupStroke:c.setMarkupStroke});t.ConnectedMarkupLayer=m(p);var _=o.requireCssWithComponent(t.ConnectedMarkupLayer,["/static/css/file_viewer/markup_layer-vflF_C1Ab.css"]);t.MarkupLayer=_})),define("modules/clean/previews/pending_upload_watcher",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/react/file_viewer/data/actions","modules/core/browser","modules/core/uri"],(function(e,t,a,n,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingUploadWatcher=void 0,n=a.__importStar(n),i=a.__importStar(i);var o=(function(){function e(e,t,a){void 0===a&&(a=""),this.pollUrl=new s.URI({path:"/sp/"}).updateQuery({link_type:e,link_key:t,secure_hash:a}).toString()}return e.prototype.startPolling=function(){this.pollPending()},e.prototype.pollSuccess=function(e){var t=JSON.parse(e);t.hasOwnProperty("upload_status")&&"complete"===t.upload_status?r.pendingFileUploaded():setTimeout(this.pollPending.bind(this),2e3)},e.prototype.pollFailure=function(e){e.status<400||e.status>=500?this.retryPoll():i.reload(!0)},e.prototype.retryPoll=function(){setTimeout(this.pollPending.bind(this),2e3)},e.prototype.pollPending=function(){var e=this;n.SilentBackgroundRequest({url:this.pollUrl,success:function(t){e.pollSuccess(t)},error:function(t){e.pollFailure(t)}})},e})();t.PendingUploadWatcher=o})),define("modules/clean/react/open_in_app/button",["require","exports","tslib","react","dig-components/buttons","spectrum/button/index","modules/clean/open_in_app/actions","modules/core/i18n","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants"],(function(e,t,a,n,r,i,s,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenInAppButton=void 0;var u=(function(e){function t(t){var a=e.call(this,t)||this;return a.handleClick=function(){l.logUserAction(c.UserAction.OpenInApp,a.props.userActionContext),s.openInApp(a.props.urls)},a}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){s.cleanUp()},t.prototype.render=function(){return this.props.shouldDisplayLayoutChange?n.default.createElement(r.Button,{className:"control__button open-in-app-button",variant:"primary",onClick:this.handleClick},o.intl.formatMessage({id:"B9kRrE",defaultMessage:"Open in app"})):n.default.createElement(i.Button,{className:"control__button open-in-app-button",variant:"primary",onClick:this.handleClick},o.intl.formatMessage({id:"B9kRrE",defaultMessage:"Open in app"}))},t.displayName="OpenInAppButton",t})((n=a.__importDefault(n)).default.Component);t.OpenInAppButton=u})),define("modules/clean/react/watermarking/watermarking_layer",["require","exports","tslib","react","react-redux","modules/clean/react/components/css","modules/clean/react/file_viewer/data/actions","modules/clean/react/watermarking/drawing","modules/clean/react/watermarking/selectors","modules/clean/react/watermarking/utils","modules/clean/react/watermarking/types"],(function(e,t,a,n,r,i,s,o,l,c,u){"use strict";function d(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var a=t.getContext("2d");if(!a)return 0;a.drawImage(e,0,0);for(var n,r,i,s=a.getImageData(0,0,t.width,t.height).data,o=0,l=0,c=s.length;l<c;l+=4)n=s[l],r=s[l+1],i=s[l+2],o+=Math.floor((n+r+i)/3);return Math.floor(o/(e.width*e.height))}Object.defineProperty(t,"__esModule",{value:!0}),t.WatermarkingLayer=t._WatermarkingLayer=t.ConnectedWatermarkingLayer=void 0;var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateWatermarkColor=function(){var e=t.props,a=e.thumbUrl,n=e.watermark;a?(t.img=new Image,t.img.crossOrigin="use-credentials",t.img.onload=function(){var e=d(t.img)<127?"white":"black";t.setTextWatermark({color:e})},t.img.src=a):t.setTextWatermark({color:n.textWatermarkingOptions.color})},t.updateWatermarkFontSize=function(){var e=t.props,a=e.pageDimensions,n=e.watermark;if(a){var r=n.textWatermarkingOptions.size,i=Math.floor((a.width+a.height)/2),s=Math.floor(i/200),o=Math.floor(i/5),l=r!==c.DEFAULT_WATERMARKING_STATE.textWatermarkingOptions.size&&s<r&&r<o?r:Math.floor(i/40);t.setTextWatermark({size:l,minSize:s,maxSize:o})}},t.canvasRef=function(e){t.canvas=e},t.redraw=function(){var e=t.props,a=e.tilingFunc,n=e.watermark;if(a&&t.canvas&&n){var r=t.canvas.getContext("2d");if(r){var i=u.getWatermarkingOptions(n),s=t.getCanvasSize(),l=s.canvasWidth,d=s.canvasHeight,p=s.scale;if(r.clearRect(0,0,l,d),i.position!==u.WatermarkPosition.REPEAT){var m,_=i.angle/180*Math.PI;if(n.mode===u.WatermarkingMode.TEXT){if(!(f=n.textWatermarkingOptions).text)return;m=o.drawTextTile(f.text,f.size*p,f.fontFamily,f.color,f.opacity/100,_).canvas}else{var f;if(!(f=n.imageWatermarkingOptions).image)return;m=o.drawImageTile(f.image,f.size*p,f.opacity/100,_).canvas}if(m){var g=i.marginX*p,v=i.marginY*p,h=g,y=v;switch(i.position){case u.WatermarkPosition.CENTER:h=(l-m.width)/2,y=(d-m.height)/2;break;case u.WatermarkPosition.NORTHEAST:h=l-m.width-g;break;case u.WatermarkPosition.SOUTHWEST:y=d-m.height-v;break;case u.WatermarkPosition.SOUTHEAST:h=l-m.width-g,y=d-m.height-v}r.drawImage(m,h,y)}}else{var b=void 0;try{b=a(p)}catch(e){if(e.message===c.WatermarkingError.TILE_NO_INPUT)return;throw e}for(var w=0,k=0,E=(b.startY+k)%b.distanceY-b.height;E<d;E+=b.distanceY){for(var M=(b.startX+w)%b.distanceX-b.width;M<l;M+=b.distanceX)r.drawImage(b.canvas,M,E);w+=b.offsetXPerRow,k+=b.offsetYPerCol}}}}},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.updateWatermarkColor(),this.updateWatermarkFontSize(),this.redraw(),this.props.pageDimensions&&this.props.setPageDimensions(this.props.pageDimensions)},t.prototype.componentDidUpdate=function(e){this.props.thumbUrl!==e.thumbUrl&&this.updateWatermarkColor(),this.redraw()},t.prototype.setTextWatermark=function(e){var t=this.props,a=t.updateWatermarkOptions;t.watermark.mode===u.WatermarkingMode.TEXT&&a({textWatermarkingOptions:e})},t.prototype.getCanvasSize=function(){var e=this.props.layerSize.width,t=this.props.pageDimensions||this.props.layerSize,a=t.width,n=t.height,r=e/a;if(this.props.watermark){var i=u.getWatermarkingOptions(this.props.watermark);r=Math.min(r,i.scale)}return{canvasWidth:Math.round(a*r),canvasHeight:Math.round(n*r),scale:r}},t.prototype.render=function(){var e=this.props,t=e.watermark,a=e.tilingFunc;if(!t||!a)return null;var r=this.props.layerSize,i=r.width,s=r.height,o=this.getCanvasSize(),l=o.canvasWidth,c=o.canvasHeight,u={width:i+"px",height:s+"px"};return n.default.createElement("canvas",{ref:this.canvasRef,className:"fv-watermarking-layer",style:u,width:l,height:c})},t.displayName="WatermarkingLayer",t})((n=a.__importDefault(n)).default.PureComponent);t._WatermarkingLayer=p;var m=r.connect((function(e){return{watermark:l.getWatermarkState(e),tilingFunc:l.getWatermarkTilingFunc(e)}}),{updateWatermarkOptions:s.updateWatermarkOptions,setPageDimensions:s.setPageDimensions});t.ConnectedWatermarkingLayer=m(p);var _=i.requireCssWithComponent(t.ConnectedWatermarkingLayer,["/static/css/file_viewer/watermarking_layer-vflNek1am.css"]);t.WatermarkingLayer=_}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(t,e,a);return __setModuleDefault(t,e),t};define("modules/clean/abuse/async_report_flag",["require","exports","modules/clean/react/async/loadable"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncReportFlag=void 0;var n={loader:function(){return new Promise((function(t,a){e(["modules/clean/abuse/report_flag"],t,a)})).then(__importStar).then((function(e){return e.ReportFlag}))}};t.AsyncReportFlag=a.Loadable(n)})),define("api_v2/redux/user_link_analytics",["require","exports","api_v2/redux/base_action"],(function(e,t,a){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=t.getUserFileAnalyticsResultAction=t.getUserFileAnalyticsAction=t.getUserAnalyticsResultAction=t.getUserAnalyticsAction=t.Action=void 0,t.Action={GetUserAnalytics:"@@apiv2_redux/user_link_analytics/get_user_analytics",GetUserAnalyticsResult:"@@apiv2_redux/user_link_analytics/get_user_analytics_result",GetUserFileAnalytics:"@@apiv2_redux/user_link_analytics/get_user_file_analytics",GetUserFileAnalyticsResult:"@@apiv2_redux/user_link_analytics/get_user_file_analytics_result"},t.getUserAnalyticsAction=a._createAction(t.Action.GetUserAnalytics),t.getUserAnalyticsResultAction=a._createAction(t.Action.GetUserAnalyticsResult),t.getUserFileAnalyticsAction=a._createAction(t.Action.GetUserFileAnalytics),t.getUserFileAnalyticsResultAction=a._createAction(t.Action.GetUserFileAnalyticsResult);var r=((n={})[t.Action.GetUserAnalytics]={endpoint:"get_user_analytics",action:t.getUserAnalyticsResultAction},n[t.Action.GetUserFileAnalytics]={endpoint:"get_user_file_analytics",action:t.getUserFileAnalyticsResultAction},n);t.middleware=a._createMiddleware(r)})),define("modules/clean/loggers/workflows_logger",["require","exports","tslib","modules/clean/logging/hive/schemas/web-workflows","modules/clean/logging/telemetry","modules/clean/previews/util","modules/clean/react/file_viewer/models"],(function(e,t,a,n,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logWorkflowsEvent=t.WorkflowsEvent=t.hiveLogger=void 0,r=a.__importStar(r),t.hiveLogger=new r.HiveLogger,(function(e){e.WatermarkApplyOverwrite="watermark_apply_overwrite",e.WatermarkApplySaveAsCopy="watermark_apply_save_as_copy",e.WatermarkCancel="watermark_cancel",e.WatermarkEducationTooltipExposed="watermark_education_tooltip_exposed",e.WatermarkEducationTooltipClicked="watermark_education_tooltip_clicked",e.WatermarkEnable="watermark_enable",e.WatermarkOpenApplyMenu="watermark_open_apply_menu",e.WatermarkPositionMenuOpened="watermark_position_menu_opened",e.WatermarkPositionMenuSelectionMade="watermark_position_menu_selection_made",e.WatermarkRotationClicked="watermark_rotation_clicked",e.WatermarkSizeChanged="watermark_size_changed",e.WatermarkTextInputEnterFocus="watermark_text_input_enter_focus",e.WatermarkTextInputExitFocus="watermark_text_input_exit_focus",e.WatermarkTransparencyChanged="watermark_transparency_changed",e.WatermarkUpsellHeaderButtonClicked="watermark_upsell_header_button_clicked",e.WatermarkUpsellPopoverClickedProCopy="watermark_upsell_popover_clicked_pro_copy",e.WatermarkUpsellPopoverClickedWmCopy="watermark_upsell_popover_clicked_wm_copy",e.WatermarkUpsellPopoverExposedProCopy="watermark_upsell_popover_exposed_pro_copy",e.WatermarkUpsellPopoverExposedWmCopy="watermark_upsell_popover_exposed_wm_copy",e.WatermarkUpsellSingleLineProClicked="watermark_upsell_single_line_pro_clicked",e.WatermarkUpsellSingleLineProExposed="watermark_upsell_single_line_pro_exposed",e.WatermarkUpsellTooltipClicked="watermark_upsell_tooltip_clicked",e.WatermarkUpsellTooltipExposed="watermark_upsell_tooltip_exposed",e.WatermarkVersionHistoryClicked="watermark_version_history_clicked",e.WatermarkTextTabClicked="watermark_type_text_clicked",e.WatermarkImageTabClicked="watermark_type_image_clicked",e.WatermarkImageUploadClicked="watermark_image_upload_clicked",e.WatermarkImageUploaded="watermark_image_uploaded",e.WatermarkImageDeleted="watermark_image_deleted",e.WatermarkColorClicked="watermark_color_clicked",e.WatermarkToolbarClicked="watermark_toolbar_clicked",e.WatermarkPageNumberClicked="watermark_page_number_clicked",e.WatermarkArrowClicked="watermark_arrow_clicked",e.WatermarkPagePreviewClicked="watermark_page_preview_clicked",e.MarkupEnabled="markup_enabled",e.MarkupRectangleClicked="markup_rectangle_clicked",e.MarkupCircleClicked="markup_circle_clicked",e.MarkupTextboxClicked="markup_textbox_clicked",e.MarkupArrowClicked="markup_arrow_clicked",e.MarkupDrawClicked="markup_draw_clicked",e.MarkupApplyOverwrite="markup_apply_overwrite",e.MarkupApplySaveAsCopy="markup_apply_save_as_copy",e.MarkupCancel="markup_cancel",e.MarkupDelete="markup_delete",e.MarkupCustomizationClicked="markup_customization_clicked"})(t.WorkflowsEvent||(t.WorkflowsEvent={})),t.logWorkflowsEvent=function(e,a,r){var o=s.FilePreviewSession.currentSession;if(o&&o.fileViewerSession){var l={event_name:e,source_context:o.sourceContext,device_type:o.fileViewerSession.deviceType,milestone:a,ns_id:o.file.ns_id,file_obj_id:o.file.file_id,file_viewer_session_id:o.fileViewerSession.id,file_preview_session_id:o.id,file_size:o.file.bytes||-1,file_preview_size:o.previewSize,file_extension:i.getWhitelistedExtensionFromFile(o.file),platform:"desktop"===o.fileViewerSession.deviceType?"web":"mobile_web",extra:r};t.hiveLogger.log(new n.WebWorklowsLoggingTableRow(l))}}})),define("modules/clean/logging/hive/schemas/web-workflows",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebWorklowsLoggingTableRow=void 0;var a=function(e){this.category="web-workflows",this.active_user_id=null,this.authed_user_ids=null,this.identity_gid=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_id=null,this.event_name=e.event_name,this.source_context=e.source_context,this.device_type=e.device_type,this.milestone=e.milestone,this.app_id=e.app_id,this.ns_id=e.ns_id,this.file_obj_id=e.file_obj_id,this.file_viewer_session_id=e.file_viewer_session_id,this.file_preview_session_id=e.file_preview_session_id,this.file_size=e.file_size,this.file_preview_size=e.file_preview_size,this.file_extension=e.file_extension,this.platform=e.platform,this.extra=e.extra,Object.seal(this)};t.WebWorklowsLoggingTableRow=a})),define("modules/clean/mouse_button_code",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseButtonCode=void 0,(function(e){e[e.LEFT=0]="LEFT"})(t.MouseButtonCode||(t.MouseButtonCode={}))})),define("modules/clean/pro_analytics/data/store",["require","exports","lodash","typescript/component_libraries/pro-ui/src/data/reducer","api_v2/redux/user_link_analytics","api_v2/default_user_client","redux","modules/clean/redux/devtools"],(function(e,t,a,n,r,i,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProAnalyticsStore=void 0,t.getProAnalyticsStore=a.once((function(e){var t=new i.DefaultUserApiV2Client(e);return s.createStore(n.reducer,o.composeEnhancersWithDevTools(s.applyMiddleware(r.middleware(t.ns("user_link_analytics")))))}))})),define("modules/clean/react/branding/branding_modal_controller",["require","exports","tslib","react","dig-components/modal","typescript/component_libraries/pro-ui/src/components/branding/background/index","typescript/component_libraries/pro-ui/src/components/branding/prop_utils","modules/clean/react/components/css","modules/clean/react/hooks/storage","typescript/component_libraries/pro-ui/src/components/branding/cover_modal/index"],(function(e,t,a,n,r,i,s,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrandingModalController=t.UnstyledBrandingModalController=t.canBrandingModalRender=void 0,n=a.__importDefault(n);var u={initialValue:{isModalOpen:!0},key:"BRANDING_MODAL_CONTROLLER"};t.canBrandingModalRender=function(e,t){return s.areModalPropsSet(s.mapToBrandingProps(e,t))},t.UnstyledBrandingModalController=function(e){var t=e.brandingInfo,a=e.closeButtonText,o=e.sharedLinkInfo,d=s.mapToBrandingProps(o,t),p=l.useSessionStorage(u),m=p[0].isModalOpen,_=p[1];return n.default.useEffect((function(){return r.Modal.setAppElement(document.getElementById("embedded-app")||document.body)}),[]),s.areModalPropsSet(d)?n.default.createElement(c.CoverModal,{onClose:function(){_({isModalOpen:!1})},open:m,background:n.default.createElement(i.ImageBackground,{src:d.orgBackgroundUrl}),orgLogoUrl:d.orgLogoUrl,orgName:d.orgName,closeButtonText:a}):null},t.UnstyledBrandingModalController.displayName="UnstyledBrandingModalController",t.BrandingModalController=o.requireCssWithComponent(t.UnstyledBrandingModalController,["/static/css/dig-components/index.web-vflfsfj-g.css","/static/js/typescript/component_libraries/pro-ui/src/index.web-vfl7fyKnY.css"]),t.BrandingModalController.displayName="BrandingModalController"})),define("typescript/component_libraries/pro-ui/src/components/branding/branding_block/optional_branding_block",["require","exports","tslib","react","typescript/component_libraries/pro-ui/src/components/branding/branding_block/index","typescript/component_libraries/pro-ui/src/components/branding/prop_utils"],(function(e,t,a,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalBrandingBlock=void 0,n=a.__importDefault(n),t.OptionalBrandingBlock=function(e){var t=e.brandingInfo,a=e.className,s=e.sharedLinkInfo,o=i.mapToBrandingProps(s,t),l=o.orgLogoUrl,c=o.orgName;return l&&c?n.default.createElement(r.BrandingBlock,{className:a,orgLogoUrl:l,orgName:c}):null},t.OptionalBrandingBlock.displayName="OptionalBrandingBlock",t.OptionalBrandingBlock.displayName="OptionalBrandingBlock"})),define("typescript/component_libraries/pro-ui/src/components/branding/prop_utils",["require","exports","typescript/component_libraries/pro-ui/src/common/premium_kit/asset_utils"],(function(e,t,a){"use strict";function n(e){var t=null==e?void 0:e.backgroundAsset,n=void 0;t&&a.isAssetTypeImage(t)&&(n=t.graphic.value.original_url);return{orgBackgroundUrl:n,orgLogoUrl:null==e?void 0:e.logoUrl,orgName:null==e?void 0:e.organizationName}}Object.defineProperty(t,"__esModule",{value:!0}),t.areModalPropsSet=t.mapToBrandingProps=void 0,t.mapToBrandingProps=function(e,t){return(null==e?void 0:e.ownerTeamName)?(null==e?void 0:e.teamMemberBrandingPolicyEnabled)?n(t):(function(e){return{orgBackgroundUrl:null==e?void 0:e.ownerTeamBackground,orgLogoUrl:null==e?void 0:e.ownerTeamLogo,orgName:null==e?void 0:e.ownerTeamName}})(e):n(t)},t.areModalPropsSet=function(e){return Boolean((null==e?void 0:e.orgBackgroundUrl)&&(null==e?void 0:e.orgLogoUrl)&&(null==e?void 0:e.orgName))}})),define("modules/clean/react/comments2/components/mobile_web_comments",["require","exports","tslib","react","lodash","modules/clean/web_timing_logger","modules/clean/react/async/loadable"],(function(e,t,a,n,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileWebComments=t.AsyncManagedCommentsTab=void 0,n=a.__importDefault(n),r=a.__importStar(r),t.AsyncManagedCommentsTab=s.Loadable({loader:function(){return i.waitForTTI().then((function(){return new Promise((function(t,a){e(["modules/clean/react/file_sidebar/managed_comments_tab"],t,a)})).then(a.__importStar).then((function(e){return e.ManagedCommentsTab}))}))}}),t.MobileWebComments=function(e){return n.default.createElement(t.AsyncManagedCommentsTab,a.__assign({},e,{collapsed:!1,fileSidebarDispatch:r.noop,isMobile:!0,isVersionHistoryMode:!1}))}}));__createBinding=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(t,e,a);return __setModuleDefault(t,e),t};define("modules/clean/react/file_metadata/component/loadable_metadata_details",["require","exports","modules/clean/react/async/loadable","modules/clean/web_timing_logger"],(function(e,t,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableMetadataDetails=void 0,t.LoadableMetadataDetails=a.Loadable({loader:function(){return n.waitForTTI().then((function(){return new Promise((function(t,a){e(["modules/clean/react/file_metadata/component/metadata_details"],t,a)})).then(__importStar).then((function(e){return e.MetadataDetails}))}))}})})),define("modules/clean/react/file_sidebar/file_sidebar_connect",["require","exports","tslib","react","react-redux","hoist-non-react-statics","modules/clean/react/file_sidebar/generic_file_sidebar_provider"],(function(e,t,a,n,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileSidebarConnect=t.FILE_SIDEBAR_REDUX_STORE_KEY=void 0,n=a.__importDefault(n),i=a.__importDefault(i),t.FILE_SIDEBAR_REDUX_STORE_KEY="SIDEBAR_REDUX_STORE_KEY",t.fileSidebarConnect=function(e,t){var o={context:s.GenericFileSidebarContext},l=t?r.connect(e,t,void 0,o):r.connect(e,void 0,void 0,o);return function(e){var t=l(e),r=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(r,e),r.prototype.render=function(){return n.default.createElement(t,a.__assign({},this.props))},r.displayName="FileSidebar"+t.displayName,r.WrappedComponent=t,r})(n.default.Component);return i.default(r,t)}}})),define("modules/clean/react/file_sidebar/file_sidebar_provider",["require","exports","tslib","react","modules/clean/react/file_sidebar/generic_file_sidebar_provider","modules/clean/react/file_sidebar/store/instance"],(function(e,t,a,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileSidebarProvider=void 0;var s=(function(e){function t(t){var a=e.call(this,t)||this;return a.state={loaded:!0,store:i.store},a}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){var e=this.state.store;e&&e.dispatch({type:"::RESET"})},t.prototype.render=function(){return n.default.createElement(r.GenericFileSidebarProvider,null,this.props.children)},t.displayName="FileSidebarProvider",t})((n=a.__importDefault(n)).default.Component);t.FileSidebarProvider=s})),define("modules/clean/react/file_sidebar/generic_file_sidebar_provider",["require","exports","tslib","react","react-redux","modules/clean/react/file_sidebar/store/instance"],(function(e,t,a,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericFileSidebarProvider=t.GenericFileSidebarContext=void 0,n=a.__importDefault(n),t.GenericFileSidebarContext=n.default.createContext({store:i.store,storeState:i.store.getState()});var s=(function(e){function s(t){var a=e.call(this,t)||this;return a.state={loaded:!0,store:i.store},a}return a.__extends(s,e),s.prototype.render=function(){return n.default.createElement(r.Provider,{store:this.state.store,context:t.GenericFileSidebarContext},this.props.children)},s.displayName="GenericFileSidebarProvider",s})(n.default.Component);t.GenericFileSidebarProvider=s})),define("modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial",["require","exports","tslib","classnames","react","spectrum/button/index","spectrum/file_icon/index","spectrum/icon_content/index","spectrum/icon_form/index","modules/clean/open_in_app/types","modules/clean/static_urls","modules/core/i18n","modules/clean/react/components/css","modules/clean/open_in_app/actions","modules/clean/open_in_mobile_app"],(function(e,t,a,n,r,i,s,o,l,c,u,d,p,m,_){"use strict";function f(e){var t=e.onClose;return r.default.createElement("header",null,r.default.createElement("h1",{className:"DropboxLogo"},r.default.createElement("img",{src:u.static_url("/static/images/index/rebrand/logos/glyphs/glyph_blue-vfla3iXuq.svg"),className:"DropboxLogo--glyph",alt:"Dropbox"}),r.default.createElement("img",{src:u.static_url("/static/images/index/rebrand/logos/wordmarks/wordmark_black-vflmhE3RY.svg"),className:"Dropbox--wordmark",alt:"Dropbox"})),r.default.createElement("button",{className:"button-as-link app-download-interstitial-close","aria-label":"Close",onClick:t},r.default.createElement(l.IconForm,{name:"cancel"})))}function g(e){var t=e.appUrls,a=e.onContinue,n=e.onAppDownload,s=r.default.useCallback((function(){m.openInApp(t),null==n||n()}),[t,n]);return r.default.createElement("div",{className:"app-download-interstitial-ctas"},r.default.createElement(_.CopyUrlLabelText,{className:"app-download-interstial-copy-notification"}),r.default.createElement(i.Button,{className:"app-download-interstitial-cta",size:"large",href:h(t),onClick:s},d.intl.formatMessage({id:"81NCFj",defaultMessage:"Get the app"})),r.default.createElement(i.Button,{className:"app-download-interstitial-cta",size:"large",variant:"secondary",onClick:a},d.intl.formatMessage({id:"OGP7zL",defaultMessage:"Or continue to website"})))}function v(e){var t,a,n=e.fileOrFolderName,i=e.isFolder,l=e.ownerName,c=e.ownerTeamName;return r.default.createElement("section",{className:"app-download-interstitial-content"},r.default.createElement("header",null,r.default.createElement("h2",null,d.intl.formatMessage({id:"PHaeBQ",defaultMessage:"Get a better view with our mobile app"}))),r.default.createElement("div",{className:"app-download-interstitial-content-thumbnail"},i?r.default.createElement(o.IconContent,{name:"folder_shared-large"}):r.default.createElement(s.FileIcon,{path:n,variant:"large"}),r.default.createElement("p",{className:"app-download-interstitial-filename"},n),r.default.createElement("p",{className:"app-download-interstitial-owner"},(a=c,(t=l)&&a?d.intl.formatMessage({id:"pYAdxo",defaultMessage:"{owner} ({team}) shared this with you."},{owner:t,team:a}):t&&!a?d.intl.formatMessage({id:"UpPnqL",defaultMessage:"{owner} shared this with you."},{owner:t}):!t&&a?d.intl.formatMessage({id:"YVlUTG",defaultMessage:"{team} shared this with you."},{team:a}):d.intl.formatMessage({id:"esqj6U",defaultMessage:"This file was shared with you."})))))}function h(e){if(e){if(c.areUrlsIOS(e))return e.iOSAppStoreUrl;if(c.areUrlsAndroid(e))return e.androidAppUrl}}Object.defineProperty(t,"__esModule",{value:!0}),t.AppDownloadInterstitial=void 0,n=a.__importDefault(n),r=a.__importDefault(r);var y=p.requireCssWithComponent((function(e){var t=e.className,a=e.open_in_app_data,i=e.fileOrFolderName,s=e.isFolder,o=e.onClose,l=e.onContinue,c=e.onAppDownload,u=e.ownerName,d=e.ownerTeamName;return r.default.createElement("section",{className:n.default("app-download-interstitial-container",t)},r.default.createElement(f,{onClose:o}),r.default.createElement(v,{isFolder:s,fileOrFolderName:i,ownerName:u,ownerTeamName:d}),r.default.createElement(g,{onContinue:l,onAppDownload:c,appUrls:a}))}),["/static/css/index/obsidian/logo-vflbo_vhR.css","/static/css/file_viewer/app_download_interstitial-vfl-ps0OO.css","/static/css/dig-components/index.web-vflfsfj-g.css"]);t.AppDownloadInterstitial=y})),define("modules/clean/react/file_viewer/location_utils",["require","exports","tslib","modules/clean/react/file_viewer/constants","modules/clean/history","modules/core/exception"],(function(e,t,a,n,r,i){"use strict";function s(e,t){if(e&&!(t<=0))return e.split("/").slice(0,t+1).join("/")}function o(e,t){var a=r.default.get_uri();return t?a.updateQuery(e,t):a.removeQuery(e),a}function l(e){r.default.push_state(e.getPath(),e.getQuery())}Object.defineProperty(t,"__esModule",{value:!0}),t.updatePageQuery=t.getPageQuery=t.getFileSubpath=t.updateFileSubpathQuery=t.shortenFileSubpathBy=t.truncateFileSubpath=t.addToFileSubpath=t.getFilenameFromLocation=void 0,r=a.__importDefault(r),i=a.__importStar(i),t.getFilenameFromLocation=function(e){return e?e.query.preview:""},t.addToFileSubpath=function(e,t){return e?e+"/"+t:"/"+t},t.truncateFileSubpath=s,t.shortenFileSubpathBy=function(e,t){if(e){if(t<=0)return e;var a=e.split("/");return s(e,a.length-t-1)}},t.updateFileSubpathQuery=function(e){l(o(n.SubpathQueryKey,e))},t.getFileSubpath=function(e){var t,a=e.query[n.SubpathQueryKey];if(!(t=a instanceof Array?a.length?a[0]:void 0:a)||0===t.indexOf("/"))return t;i.reportStack("path malformed",{severity:i.SEVERITY.NONCRITICAL,exc_extra:{fileSubpath:t}})},t.getPageQuery=function(e){var t=e.query[n.PageQueryKey];if(t){var a=+t;return a||void 0}},t.updatePageQuery=function(e){e?e>0&&l(o(n.PageQueryKey,e.toString())):l(o(n.PageQueryKey,null))}})),define("modules/clean/react/file_viewer/title_utils",["require","exports","modules/constants/python","modules/clean/filepath/filepath","modules/clean/file_store/utils","modules/core/i18n"],(function(e,t,a,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customLogoUrl=t.closeButtonTitle=void 0,t.closeButtonTitle=function(e){var t=(function(e){var t=e.file,s=e.fileViewAction,o=e.fileViewOrigin;return e.isVersionHistoryMode?i.intl.formatMessage({id:"kfhlgf",defaultMessage:"Version history"}):o===a.FileViewOriginType.RECENTS?i.intl.formatMessage({id:"hDgBBt",defaultMessage:"Recents"}):o===a.FileViewOriginType.HOME?i.intl.formatMessage({id:"cPi7mo",defaultMessage:"Home"}):o!==a.FileViewOriginType.PHOTOS&&s!==a.FileViewActionType.SEARCH&&r.isBrowseFile(t)&&t.fq_path?n.filename(n.parent_dir(t.fq_path)):void 0})(e);return!e.sharedLinkInfo&&t?i.intl.formatMessage({id:"LyB3q5",defaultMessage:"Back to {folder}"},{folder:t}):i.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})},t.customLogoUrl=function(e){return e?e.ownerTeamLogo:void 0}})),define("modules/clean/react/file_viewer/url_utils",["require","exports","tslib","modules/clean/history","modules/core/browser"],(function(e,t,a,n,r){"use strict";function i(e){n.default.push_state(e.getPath(),e.getQuery())}Object.defineProperty(t,"__esModule",{value:!0}),t.openFile=t.closeFile=t.getCurrentFolderHref=t.linkClickHandler=void 0,n=a.__importDefault(n),r=a.__importStar(r),t.linkClickHandler=function(e){return function(t){t.ctrlKey||t.metaKey||e(t)}},t.getCurrentFolderHref=function(){var e=r.get_uri();return e.removeQuery("preview"),e},t.closeFile=function(){var e,t;e="preview",(t=n.default.get_uri()).removeQuery(e),i(t)},t.openFile=function(e){(function(e,t){var a={};a[e]=t;var r=n.default.get_uri();r.updateQuery(a),i(r)})("preview",e.filename)}})),define("modules/clean/react/hooks/storage",["require","exports","tslib","react"],(function(e,t,a,n){"use strict";function r(e,t){var a=t.decode,r=void 0===a?JSON.parse:a,i=t.encode,s=void 0===i?JSON.stringify:i,o=t.initialValue,l=t.key,c=n.default.useState((function(){try{var t=e.getItem(l);return null!==t?r(t):o}catch(e){return o}})),u=c[0],d=c[1];return[u,function(t){try{e.setItem(l,s(t)),d(t)}catch(e){}}]}Object.defineProperty(t,"__esModule",{value:!0}),t.useSessionStorage=t.useLocalStorage=void 0,n=a.__importDefault(n),t.useLocalStorage=function(e){return r(window.localStorage,e)},t.useSessionStorage=function(e){return r(window.sessionStorage,e)}})),define("modules/clean/react/location/with_location",["require","exports","tslib","react","modules/clean/react/location/types","modules/core/browser","modules/clean/history","modules/clean/react/components/helpers"],(function(e,t,a,n,r,i,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withLocation=void 0,n=a.__importDefault(n),i=a.__importStar(i),s=a.__importDefault(s);var l=function(e){return{location:e}};t.withLocation=function(e,t){var c;return void 0===t&&(t=l),(c=(function(o){function l(e){var a=o.call(this,e)||this;a.onLocationChange=function(e,n){a.setState(t(new r.Location(a.basePathComponent+"/"+decodeURIComponent(e),n),a.props))};var n=i.get_uri(),s=n.getPath();return a.basePathComponent="/"+s.split("/")[1],a.state=t(r.Location.fromURI(n),e),a}return a.__extends(l,o),l.prototype.componentDidMount=function(){s.default.add_callback(this.basePathComponent,this.onLocationChange,!0)},l.prototype.componentWillUnmount=function(){s.default.remove_callback(this.basePathComponent,this.onLocationChange)},l.prototype.render=function(){return n.default.createElement(e,a.__assign({},this.props,this.state))},l})(n.default.PureComponent)).displayName="WithLocation("+o.getDisplayName(e)+")",c}})),define("modules/clean/react/open_in_app/banner",["require","exports","tslib","react","modules/clean/react/components/css","modules/clean/open_in_app/actions","modules/core/i18n","modules/constants/file_viewer","modules/core/browser","modules/core/browser_detection","modules/clean/open_in_mobile_app"],(function(e,t,a,n,r,i,s,o,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenInAppBanner=void 0,n=a.__importDefault(n),l=a.__importStar(l),c=a.__importStar(c);var d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={closed:!1},t.handleAppRedirect=function(){var e;t.props.onClick&&t.props.onClick(),t.props.isMountedFile&&(null===(e=t.props.urls)||void 0===e?void 0:e.platform)===o.OpenInMobileAppPlatform.ANDROID_MARKET?l.redirect(t.props.urls.androidAppUrl):i.openInApp(t.props.urls)},t.dismiss=function(){t.setState({closed:!0});var e=t.props.onClose;e&&e()},t}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){i.cleanUp()},t.prototype.render=function(){if(this.state.closed||!this.props.urls)return null;var e=c.iOS&&i.isIOS9OrHigher();return n.default.createElement("div",{className:"open-in-app-banner-container"},n.default.createElement("div",{className:"open-in-app-banner-text-container"},n.default.createElement("button",{className:"button-as-link open-in-app-banner-text",onClick:this.handleAppRedirect},e?s.intl.formatMessage({id:"ye+BbQ",defaultMessage:"Get the Dropbox App"}):this.props.isMountedFile&&this.props.urls.platform===o.OpenInMobileAppPlatform.ANDROID_MARKET?s.intl.formatMessage({id:"gxO/+x",defaultMessage:"Open App"}):s.intl.formatMessage({id:"pezXnL",defaultMessage:"View In App"})),n.default.createElement(u.CopyUrlLabelText,{className:"open-in-app-banner-copy-notification",size:"small"})),n.default.createElement("button",{className:"button-as-link open-in-app-banner-close","aria-label":"Close",onClick:this.dismiss}))},t.displayName="OpenInAppBanner",t})(n.default.Component),p=r.requireCssWithComponent(d,["/static/css/open_in_app/banner-vflQfBV6r.css"]);t.OpenInAppBanner=p})),define("typescript/component_libraries/pro-ui/src/common/premium_kit/asset_utils",["require","exports","typescript/component_libraries/pro-ui/src/common/premium_kit/types"],(function(e,t,a){"use strict";function n(e){return!!e.color_hex&&!e.graphic}function r(e){var t,a;return!!e.color_hex&&"video"===(null===(a=null===(t=e.graphic)||void 0===t?void 0:t.value)||void 0===a?void 0:a[".tag"])}function i(e){var t,a;return!!e.color_hex&&"image"===(null===(a=null===(t=e.graphic)||void 0===t?void 0:t.value)||void 0===a?void 0:a[".tag"])}Object.defineProperty(t,"__esModule",{value:!0}),t.isAssetTypeImage=t.isAssetTypeVideo=t.isAssetTypeColor=t.getAssetType=void 0,t.getAssetType=function(e){return n(e)?a.AssetType.Color:r(e)?a.AssetType.Video:i(e)?a.AssetType.Image:a.AssetType.Other},t.isAssetTypeColor=n,t.isAssetTypeVideo=r,t.isAssetTypeImage=i})),define("typescript/component_libraries/pro-ui/src/common/premium_kit/types",["require","exports"],(function(e,t){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.AssetType=void 0,(a=t.AssetType||(t.AssetType={})).Image="image",a.Video="video",a.Color="color",a.Other="other"})),define("modules/clean/react/premium_kit/errors",["require","exports","tslib"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PremiumKitValidationError=t.PremiumKitError=void 0;var n=function(e){this.message=e};t.PremiumKitError=n;var r=(function(e){function t(t){var a=e.call(this,"Validation errors found.")||this;return a.errors=t,a}return a.__extends(t,e),t})(n);t.PremiumKitValidationError=r})),define("modules/clean/react/premium_kit/upload_provider",["require","exports","tslib","modules/clean/react/premium_kit/api","modules/clean/react/premium_kit/errors","modules/clean/react/premium_kit/types","modules/clean/react/upload_kit/lib/processors","modules/clean/react/upload_kit/lib/upload_block","modules/clean/react/upload_kit/uploader/context","modules/clean/viewer","react"],(function(e,t,a,n,r,i,s,o,l,c,u){"use strict";var d;Object.defineProperty(t,"__esModule",{value:!0}),t.UploadProvider=t.DEFAULT_MAX_FILE_SIZE_IN_MB=void 0,u=a.__importDefault(u);var p=[".ai",".bmp",".eps",".gif",".indd",".jpeg",".jpg",".otf",".png",".psd",".svg",".svgz",".tif",".tiff",".ttf",".wbmp",".webp"];t.DEFAULT_MAX_FILE_SIZE_IN_MB=5;var m=((d={})[i.AssetLibraryId.BrandingBackground]={maxFileSize:1048576*t.DEFAULT_MAX_FILE_SIZE_IN_MB,selectMultiple:!1,fileExtensions:p},d[i.AssetLibraryId.BrandingLogo]={maxFileSize:1048576*t.DEFAULT_MAX_FILE_SIZE_IN_MB,selectMultiple:!1,fileExtensions:p},d[i.AssetLibraryId.CustomLogo]={maxFileSize:1048576*t.DEFAULT_MAX_FILE_SIZE_IN_MB,selectMultiple:!1,fileExtensions:p},d),_=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uploadBlock=function(e,a){var n=c.Viewer.get_viewer().get_user_by_id(t.props.userId);return o.uploadBlock(n.id,n.root_ns_id,e.bytes,a)},t.commitBlocksBatch=function(e){return Promise.all(e.map((function(e){return n.addAssetByBlock(t.props.userId,t.props.assetId,e.tokens,t.props.assetLibraryId).then((function(e){t.props.onBlocksCommitted&&t.props.onBlocksCommitted(e)}))})))},t.processFiles=function(e,t,a){if(t.length)throw new r.PremiumKitValidationError(t);return s.processFilesWithRenaming(e,t,a)},t}return a.__extends(t,e),t.prototype.render=function(){return u.default.createElement(l.UploadProvider,a.__assign({processFiles:this.processFiles,commitBlocksBatch:this.commitBlocksBatch,uploadBlock:this.uploadBlock},m[this.props.assetLibraryId],this.props),this.props.children)},t.displayName="PremiumKitUploadProvider",t})(u.default.Component);t.UploadProvider=_})),define("modules/clean/react/watermarking/api",["require","exports","api_v2/user_client"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendWatermarkRequest=void 0,t.sendWatermarkRequest=function(e,t,n,r){var i,s,o=new a.UserApiV2Client;r&&(!(function(e){return"distanceX"in e})(r)?s={image:r.image,position:r.position,margin_x:Math.round(r.marginX),margin_y:Math.round(r.marginY)}:i={image:r.image,distance_x:Math.round(r.distanceX),distance_y:Math.round(r.distanceY),start_x:Math.round(r.startX),start_y:Math.round(r.startY),offset_x_per_row:Math.round(r.offsetXPerRow),offset_y_per_col:Math.round(r.offsetYPerCol)});var l={path:t,overwrite:n,tiled_image:i,image_watermark:s};return o.ns("file_viewer").rpc("watermarking/watermark_file",l,{subjectUserId:e})}})),define("modules/clean/react/watermarking/apply_watermark_button",["require","exports","tslib","react","modules/core/browser","modules/core/i18n","spectrum/popover/index","spectrum/button/index","typescript/component_libraries/pro-ui/src/components/trial/trial_popover_content/index","modules/clean/loggers/workflows_logger","spectrum/tooltip/index"],(function(e,t,a,n,r,i,s,o,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApplyWatermarkButton=void 0,n=a.__importDefault(n),r=a.__importStar(r);var d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickedTrialPopover=function(){c.logWorkflowsEvent(c.WorkflowsEvent.WatermarkUpsellPopoverClickedWmCopy,t.props.milestone),r.redirect(t.getLink("?_tk=watermarking_popover_wm_upsell"))},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.isPopoverTrialVariant()&&c.logWorkflowsEvent(c.WorkflowsEvent.WatermarkUpsellPopoverExposedWmCopy,this.props.milestone)},t.prototype.getLink=function(e){return this.props.isPlusUser?"/buy"+e:"/pro/try"+e},t.prototype.isPopoverTrialVariant=function(){var e=this.props,t=e.allowWatermark,a=e.trialVariant;return!t&&"POPOVER_WM_VALUE_PROPS"===a},t.prototype.renderPopoverContent=function(){return this.isPopoverTrialVariant()?n.default.createElement(s.PopoverContent,null,n.default.createElement(l.TrialPopoverContent,{variant:"watermarking_wm",onClick:this.onClickedTrialPopover})):n.default.createElement(s.PopoverContent,null,n.default.createElement(s.PopoverContentItem,{value:!1,className:"apply-watermark-menu-item__copy"},i.intl.formatMessage({id:"P7t+8/",defaultMessage:"Make a copy"})),n.default.createElement(s.PopoverContentItem,{value:!0,className:"apply-watermark-menu-item__overwrite"},i.intl.formatMessage({id:"WIcUMB",defaultMessage:"Replace original"})))},t.prototype.renderButton=function(){var e=this.props,t=e.onClick,a=e.hasInput,r=n.default.createElement(o.Button,{className:"apply-watermark-button",tagName:"div",disabled:!a,variant:"primary",onClick:t},i.intl.formatMessage({id:"78AHo5",defaultMessage:"Save"}));return a?r:n.default.createElement(u.Tooltip,{className:"watermarking-save-bubble--no-watermark",tooltipContent:i.intl.formatMessage({id:"RwsOX3",defaultMessage:"Add an image or text watermark to save"}),positioning:"below"},r)},t.prototype.render=function(){var e=this.props.hasInput;return n.default.createElement(s.Popover,{onSelection:this.props.onApply},n.default.createElement(s.PopoverTrigger,{disabled:!e},this.renderButton()),this.renderPopoverContent())},t.displayName="ApplyWatermarkButton",t})(n.default.Component);t.ApplyWatermarkButton=d})),define("modules/clean/react/workflows/i18n/apply_translation",["require","exports","modules/core/i18n"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyTranslation=void 0,t.applyTranslation=function(e){return"Test string"===e.text&&"this is an unused string for sample purposes only"===e.description?a.intl.formatMessage({id:"yZXoct",defaultMessage:"Test string"}):"Upgrade"===e.text&&"Upgrade Dropbox account"===e.description?a.intl.formatMessage({id:"Mc+U9E",defaultMessage:"Upgrade"}):"You’re in trial mode."===e.text&&"This will be shown to basic and plus users when they test out watermarking"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"0jP5B/",defaultMessage:"You’re in trial mode."}):"Upgrade to Professional to apply your watermark."===e.text&&"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"XAmQfp",defaultMessage:"Upgrade to Professional to apply your watermark."}):"Upgrade to Professional for advanced features"===e.text&&"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"GlPgxg",defaultMessage:"Upgrade to Professional for advanced features"}):"Upgrade to Professional to get watermarking"===e.text&&"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"VlErup",defaultMessage:"Upgrade to Professional to get watermarking"}):"Protect work right in Dropbox"===e.text&&"Value prop: Users can protect their images/pdfs by watermarking them right in Dropbox"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"8h+ZVh",defaultMessage:"Protect work right in Dropbox"}):"Apply watermarks quickly"===e.text&&"Value prop: Users can apply watermarks to their pdf/images quickly"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"uPK3Ke",defaultMessage:"Apply watermarks quickly"}):"Create custom watermarks"===e.text&&"Value prop: Users can create custom watermarks (e.g. changing text, uploading an image)"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"STI9Ug",defaultMessage:"Create custom watermarks"}):"Protect work with watermarking"===e.text&&"Value prop: Users can protect their images/pdfs by watermarking them in Dropbox"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"0e5Pxx",defaultMessage:"Protect work with watermarking"}):"Get %(pro_space_limit)s of storage"===e.text&&"Value prop: Users get more storage if they upgrade to Professional"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"SSoF5o",defaultMessage:"Get {pro_space_limit} of storage"},{pro_space_limit:e.pro_space_limit}):"Free up space with Smart Sync"===e.text&&"Value prop: Users can free up space with Smart Sync if they upgrade to Professional"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"+NeLdn",defaultMessage:"Free up space with Smart Sync"}):"Make a copy"===e.text&&"As in: save the markup file as a copy"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"NhIxxD",defaultMessage:"Make a copy"}):"Replace original"===e.text&&"As in: overwrite this file with markup file"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"kOdY2i",defaultMessage:"Replace original"}):"Save"===e.text&&"Save the file"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"T45O2I",defaultMessage:"Save"}):"Try Professional free"===e.text&&"Try Dropbox Professional for free"===e.description?a.intl.formatMessage({id:"EwtFU3",defaultMessage:"Try Professional free"}):"Set expiration dates for file requests"===e.text&&"Value prop: Users can set expiration dates for their file requests"===e.description?a.intl.formatMessage({id:"M2xkJm",defaultMessage:"Set expiration dates for file requests"}):"Add an image or text watermark to save"===e.text&&"As in: notifying user they cannot save watermark if no image uploaded or text set"===e.description&&"watermarking"===e.project?a.intl.formatMessage({id:"RwsOX3",defaultMessage:"Add an image or text watermark to save"}):null}})),define("modules/clean/react/workflows/i18n/with_translations",["require","exports","tslib","react","typescript/component_libraries/pro-ui/src/common/i18n/index","modules/core/i18n","modules/clean/react/components/helpers","modules/clean/react/workflows/i18n/apply_translation","modules/clean/display_format"],(function(e,t,a,n,r,i,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withTranslations=void 0,n=a.__importDefault(n),t.withTranslations=function(e){var t=function(t){return n.default.createElement(r.TranslationProvider,{applyTranslation:o.applyTranslation,formatBytes:l.format_bytes,formatPercent:function(e){return i.intl.formatNumber(e/100,{style:"percent"})},isEnvExternal:!0},n.default.createElement(e,a.__assign({},t)))};return t.displayName="WithTranslations("+s.getDisplayName(e)+")",t}})),define("modules/clean/react/workflows/markup_icons",["require","exports","tslib","react"],(function(e,t,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transparentFillIcon=t.textIcon=t.rectIcon=t.drawIcon=t.circleIcon=t.arrowIcon=void 0,n=a.__importDefault(n),t.arrowIcon=n.default.createElement("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("line",{y1:"-1",x2:"18.4444",y2:"-1",transform:"matrix(0.714122 -0.700021 0.724869 0.688886 2 19.5325)",stroke:"white","stroke-width":"2"}),n.default.createElement("path",{d:"M15.6003 4.81822L15.4013 13.4904L6.62128 5.14504L15.6003 4.81822Z",fill:"white"})),t.circleIcon=function(e){var t=e.stroke,a=void 0===t?"white":t,r=e.fill,i=void 0===r?"none":r;return n.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:i,xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("rect",{x:"1",y:"1",width:"18",height:"18",rx:"9",stroke:a,"stroke-width":"2"}))},t.drawIcon=n.default.createElement("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M1 3.12785C1 3.12785 5.98474 -0.481787 7.42857 1.70169C9.66397 5.08224 -0.322983 7.42821 2.28571 10.6819C4.85714 13.8892 11.2857 4.26736 13.8571 7.37626C16.659 10.7637 3.89286 14.5305 6.78571 18.3792C9.19643 21.5864 19 11.3233 19 11.3233",stroke:"white","stroke-width":"2",strokeLinecap:"round"}),n.default.createElement("circle",{cx:"19",cy:"11",r:"2",fill:"white"})),t.rectIcon=n.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("rect",{x:"1",y:"1",width:"16",height:"16",stroke:"white","stroke-width":"2"})),t.textIcon=n.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("rect",{x:"1",y:"1",width:"16",height:"16",stroke:"white","stroke-width":"2"}),n.default.createElement("line",{x1:"5",y1:"6",x2:"13",y2:"6",stroke:"white","stroke-width":"2"}),n.default.createElement("line",{x1:"9",y1:"5",x2:"9",y2:"13",stroke:"white","stroke-width":"2"})),t.transparentFillIcon=n.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("rect",{x:"1",y:"1",width:"15",height:"15",rx:"7.5",stroke:"#F3F4F5","stroke-width":"2"}),n.default.createElement("line",{x1:"1.93223",y1:"13.6637",x2:"13.8322",y2:"4.31368",stroke:"#F3F4F5","stroke-width":"2"}))})),define("modules/clean/logging/hive/schemas/professional_sharing-smart_links_analytics",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartLinksAnalyticsLoggingTableRow=void 0;var a=function(e){this.category="professional_sharing-smart_links_analytics",this.user_id=e.user_id,this.timestamp=e.timestamp,this.event_name=e.event_name,this.file_id=e.file_id,Object.seal(this)};t.SmartLinksAnalyticsLoggingTableRow=a})),define("typescript/component_libraries/pro-ui/src/common/i18n/index",["require","exports","tslib","react","prop-types"],(function(e,t,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationProvider=t.IntlPluralString=t.IntlString=void 0,n=a.__importStar(n),r=a.__importDefault(r),t.IntlString=function(e,t){if(t.applyTranslation?t.applyTranslation(e):null)return n.createElement("span",null,t.applyTranslation(e));var a={};return t.isEnvExternal||(a={textShadow:"2px 2px 0px red"}),n.createElement("span",{style:a},e.text)},t.IntlString.displayName="IntlString",t.IntlString.contextTypes={applyTranslation:r.default.func},t.IntlPluralString=function(e,a){return t.IntlString(e,a)},t.IntlPluralString.displayName="IntlPluralString",t.IntlPluralString.contextTypes={applyTranslation:r.default.func};var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.getChildContext=function(){return{applyTranslation:this.props.applyTranslation,formatBytes:this.props.formatBytes,formatPercent:this.props.formatPercent,isEnvExternal:this.props.isEnvExternal}},t.prototype.render=function(){return n.createElement("div",null,this.props.children)},t})(n.Component);t.TranslationProvider=i,i.displayName="TranslationProvider",i.childContextTypes={applyTranslation:r.default.func,formatBytes:r.default.func,formatPercent:r.default.func,isEnvExternal:r.default.bool}})),define("typescript/component_libraries/pro-ui/src/components/base/apply_button/index",["require","exports","tslib","react","spectrum/popover/index","spectrum/button/index","typescript/component_libraries/pro-ui/src/common/i18n/index"],(function(e,t,a,n,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApplyButton=void 0;var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.renderPopoverContent=function(){var e=this.props.makeACopyText||n.createElement(s.IntlString,{text:"Make a copy",description:"As in: save the markup file as a copy",project:"watermarking"}),t=this.props.overwriteText||n.createElement(s.IntlString,{text:"Replace original",description:"As in: overwrite this file with markup file",project:"watermarking"});return n.createElement(r.PopoverContent,null,n.createElement(n.Fragment,null,n.createElement(r.PopoverContentItem,{value:!1,className:"apply-workflow-menu-item__copy"},e),n.createElement(r.PopoverContentItem,{value:!0,className:"apply-workflow-menu-item__overwrite"},t)))},t.prototype.renderButton=function(){var e=this.props,t=e.onClick,a=e.disabled,r=this.props.buttonText||n.createElement(s.IntlString,{text:"Save",description:"Save the file",project:"watermarking"});return n.createElement(i.Button,{className:"apply-workflow-button",tagName:"div",disabled:a,variant:"primary",onClick:t},r)},t.prototype.render=function(){var e=this.props,t=e.onApply,a=e.disabled;return n.createElement(r.Popover,{className:"apply-workflow-button__popover",onSelection:t},n.createElement(r.PopoverTrigger,{disabled:a},this.renderButton()),this.renderPopoverContent())},t})((n=a.__importStar(n)).Component);t.ApplyButton=o,o.displayName="ApplyButton"})),define("typescript/component_libraries/pro-ui/src/components/base/slider/index",["require","exports","tslib","react","classnames"],(function(e,t,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0,n=a.__importStar(n),r=a.__importDefault(r);var i={trackBaseColor:"#dddfe1",trackFillColor:"#0d2484"},s={trackBaseColor:"#6a7c8f",trackFillColor:"#fff"},o=(function(e){function t(t){var a=e.call(this,t)||this;return a.handleChange=function(){if(a.inputEl){var e=Number(a.inputEl.value),t=a.props.onChange,n={value:e};a.setState(n,(function(){t&&t(e)}))}},a.getTrackStyleBackground=function(e){var t=a.props,n=t.darkMode,r=t.max,o=t.min,l=Math.round(100*(e-o)*100/(r-o))/100,c=n?s:i,u=c.trackFillColor,d=c.trackBaseColor;return"linear-gradient(to right, "+u+" 0%, "+u+" "+l+"%, "+d+" "+l+"%, "+d+" 100%)"},a.handleRef=function(e){a.inputEl=e||void 0,a.handleChange()},a.state={value:t.value||50},a}return a.__extends(t,e),t.prototype.componentDidUpdate=function(e){e.value!==this.props.value&&this.setState({value:this.props.value})},t.prototype.render=function(){var e=this.props,t=e.className,a=e.darkMode,i=e.disabled,s=e.fullWidth,o=e.min,l=e.max,c=e.name,u=e.step,d=this.state.value,p=r.default("range-slider__wrapper",{"range-slider--dark-mode":a,"range-slider--full-width":s,"range-slider--disabled":i},t);return n.createElement("span",{className:p},n.createElement("span",{className:"range-slider__track",style:{background:this.getTrackStyleBackground(d)}}),n.createElement("input",{className:"range-slider",disabled:i,type:"range",min:o,max:l,value:d,name:c,step:u,onChange:this.handleChange,ref:this.handleRef,"aria-valuemin":o,"aria-valuemax":l,"aria-valuenow":d}))},t})(n.PureComponent);t.Slider=o,o.defaultProps={disabled:!1,min:0,max:100,step:1},o.displayName="Slider",t.default=o})),define("typescript/component_libraries/pro-ui/src/components/base/top_banner/index",["require","exports","tslib","react","spectrum/button/index"],(function(e,t,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TopBanner=void 0,n=a.__importStar(n),t.TopBanner=function(e){var t=e.primaryText,a=e.secondaryText,i=e.buttonText,s=e.href,o=e.onClick;return n.createElement("div",{className:"top-banner"},n.createElement("div",{className:"top-banner__text"},n.createElement("div",{className:"top-banner__primary-text"},t," "),a),n.createElement(r.Button,{variant:"secondary",href:s,onClick:o},i))}})),define("typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/index",["require","exports","tslib","react","typescript/component_libraries/pro-ui/src/data/selectors","react-redux","typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/upsell","typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/connected_analytics_pane"],(function(e,t,a,n,r,i,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsComponentPicker=void 0,n=a.__importDefault(n);var l=function(e){return e.upsellEnabled?n.default.createElement(s.AnalyticsPaneUpsell,Object.assign({},e)):n.default.createElement(o.AnalyticsPane,Object.assign({},e))};l.displayName="AnalyticsOrUpsell",t.AnalyticsComponentPicker=i.connect((function(e){return{upsellEnabled:r.FileLinkAnalyticsSelectors.upsellEnabled(e)}}))(l)})),define("typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/total_views",["require","exports","tslib","react","dig-components/typography","react-intl"],(function(e,t,a,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TotalViews=t.LOADING=void 0,n=a.__importDefault(n),t.LOADING="loading",t.TotalViews=function(e){var a=e.totalViews,s=i.useIntl();return n.default.createElement("div",{className:"totalViews"},n.default.createElement(r.Text,{tagName:"p",color:"faint"},n.default.createElement("strong",null,s.formatMessage({id:"Pht6fV",defaultMessage:"Views"}))),n.default.createElement(r.Title,{size:"large"},a===t.LOADING?s.formatMessage({id:"Xe3IgJ",defaultMessage:"…"}):a))},t.TotalViews.displayName="TotalViews"})),define("typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/total_downloads",["require","exports","tslib","react","dig-components/typography","react-intl"],(function(e,t,a,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TotalDownloads=t.LOADING=void 0,n=a.__importDefault(n),t.LOADING="loading",t.TotalDownloads=function(e){var a=e.totalDownloads,s=i.useIntl();return n.default.createElement("div",{className:"totalDownloads"},n.default.createElement(r.Text,{tagName:"p",color:"faint"},n.default.createElement("strong",null,s.formatMessage({id:"WONnN7",defaultMessage:"Downloads"}))),n.default.createElement(r.Title,{size:"large"},a===t.LOADING?s.formatMessage({id:"Xe3IgJ",defaultMessage:"…"}):a))},t.TotalDownloads.displayName="TotalDownloads"})),define("typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/activity_stream",["require","exports","tslib","react","typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/activity_stream_row","react-intl"],(function(e,t,a,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityStream=void 0,n=a.__importDefault(n),t.ActivityStream=function(e){var t=e.activityStreamDataBundle,a=e.displayLocations,s=e.getUserInitials,o=e.teamFilter,l=i.useIntl(),c=n.default.useMemo((function(){return t.sort((function(e,t){var a=e.date;return t.date.getTime()-a.getTime()})).map((function(e,t){var i,c=l.formatMessage({id:"gM+aTa",defaultMessage:"Guest"}),u=e.displayName,d=e.isGuest,p=e.location,m=e.userId,_=e.userId,f=void 0===_?"dbafvid:":_;return i=!d&&u&&m?s(m,u):s(f,c),n.default.createElement(r.ActivityStreamRow,Object.assign({key:o+"_"+t,userInitials:i},e,{location:a?p:void 0}))}))}),[t,a,s,l,o]);return n.default.createElement("div",{className:"activity-stream-container"},c)},t.ActivityStream.displayName="ActivityStream"})),define("typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/activity_stream_row",["require","exports","tslib","react","dig-components/avatar","dig-components/typography","dig-components/icons","dig-components/icons/src","dig-components/tooltips","react-intl","typescript/component_libraries/pro-ui/src/data/i18n-util"],(function(e,t,a,n,r,i,s,o,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityStreamRow=void 0,n=a.__importDefault(n);var d=function(e){var t=e.userInitials,a=e.isGuest,i=e.photoUrl,s=a?{size:"large",isInactive:!0}:{size:"large",src:i,backgroundColor:r.avatarColorForUserIdentifier(t)};return n.default.createElement(r.Avatar,Object.assign({},s),t)};d.displayName="UserAvatar";var p=function(e){var t,a,r=e.deviceType,i=c.useIntl();switch(null==r?void 0:r[".tag"]){case"desktop":t=i.formatMessage({id:"AvcnE0",defaultMessage:"From a computer"}),a=o.ComputerLine;break;case"mobile":t=i.formatMessage({id:"MSsIup",defaultMessage:"From mobile"}),a=o.MobileLine;break;default:return null}return n.default.createElement(l.Tooltip,{title:t},n.default.createElement("div",null,n.default.createElement(s.UIIcon,{src:a})))};p.displayName="DeviceTypeIcon",t.ActivityStreamRow=function(e){var t=e.date,a=e.displayName,r=e.photoUrl,s=e.activityType,o=e.deviceType,l=e.location,m=e.userInitials,_=e.isGuest,f=c.useIntl();if("other"===s[".tag"])return null;var g=(function(e,t,a,r){switch(e[".tag"]){case"download":return a||!t?r.formatMessage({id:"DRVSxm",defaultMessage:"<strong>A guest</strong> downloaded this file"},{strong:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("strong",null,e)}}):r.formatMessage({id:"+/aseH",defaultMessage:"<strong>{name}</strong> downloaded this file"},{strong:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("strong",null,e)},name:t});case"view":default:return a||!t?r.formatMessage({id:"9b6lrI",defaultMessage:"<strong>A guest</strong> viewed this file"},{strong:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("strong",null,e)}}):r.formatMessage({id:"v3Rw50",defaultMessage:"<strong>{name}</strong> viewed this file"},{strong:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("strong",null,e)},name:t})}})(s,a,_,f),v=u.timeSince(t.getTime(),f),h=l&&(function(e,t){var a=e.country,n=e.region,r=e.city;return[" • ",n?r?t.formatMessage({id:"JEkrtt",defaultMessage:"{city}, {region}"},{region:n,city:r}):t.formatMessage({id:"1CRuUi",defaultMessage:"{region}, {country}"},{region:n,country:a}):r?t.formatMessage({id:"47gydg",defaultMessage:"{city}, {country}"},{city:r,country:a}):a]})(l,f);return n.default.createElement("div",{className:"activity-stream-row"},n.default.createElement("div",{className:"avatar"},n.default.createElement(d,{userInitials:m,isGuest:_,photoUrl:r})),n.default.createElement("div",{className:"display-info"},n.default.createElement(i.Text,{className:"name"},g),n.default.createElement(i.Text,{color:"faint",className:"date-and-location"},v,h)),n.default.createElement("div",{className:"device-container"},n.default.createElement("div",{className:"device"},n.default.createElement(p,{deviceType:o}))))},t.ActivityStreamRow.displayName="ActivityStreamRow"})),define("typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/unconnected_analytics_pane",["require","exports","tslib","react","react-dom","typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/total_views","typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/total_downloads","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/typography","react-intl","dig-components/progress_indicators","dig-components/tooltips","lodash","typescript/component_libraries/pro-ui/src/data/amp-logger","typescript/component_libraries/pro-ui/src/data/hive-logger","typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/activity_stream","typescript/component_libraries/pro-ui/src/data/util","typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/team_filter_menu"],(function(e,t,a,n,r,i,s,o,l,c,u,d,p,m,_,f,g,v,h,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnconnectedAnalyticsPane=t.UnconnectedAnalyticsPaneInternal=t.LATER_DATES_ID=t.EARLIER_DATES_ID=void 0,n=a.__importStar(n),r=a.__importDefault(r),t.EARLIER_DATES_ID="premium-analytics-pane-earlier-dates",t.LATER_DATES_ID="premium-analytics-pane-later-dates";var b;function w(e,t,a){return e.formatDate(t,{day:"numeric",month:"short",year:t.getUTCFullYear()===a?void 0:"numeric",timeZone:"UTC"})}(function(e){e.LOADING="loading",e.TIMED_OUT="timed_out",e.SUCCEEDED="succeeded"})(b||(b={}));t.UnconnectedAnalyticsPaneInternal=function(e){var a=e.clearDataCache,k=e.dataBundle,E=k.viewBreakout,M=k.totalViewCount,S=k.totalDownloadCount,A=k.activityStreamDataBundle,T=e.fileId,C=e.changeDisplayMode,I=e.changeTeamFilter,x=e.displayStreamItemLocations,D=e.highcharts,P=e.highchartsReactComponent,F=e.isFetchingAnalyticsData,U=e.fetchingTimedOut,O=e.getUserInitials,N=e.now,L=e.teamName,R=e.selectedTeamFilter,B=N.getFullYear(),V=n.useRef(),W=n.useRef(),j=n.useState((function(){var e=h.createDisplayRangeForNow(N);return V.current=e.endDate,e})),q=j[0],z=j[1],G=q.startDate,H=q.endDate,Y=n.useState(b.SUCCEEDED),K=Y[0],X=Y[1],Q=n.useMemo((function(){return h.getTodayAndXDaysAgo(N,90).xDaysAgo}),[N]),Z=d.useIntl(),J=n.useMemo((function(){return Z.formatDate(Q,{month:"short",day:"numeric",timeZone:"UTC"})}),[Z,Q]);n.useEffect((function(){f.AmpLogger.singleton.logAnalyticsPaneClicked(),g.HiveLogger.singleton.logAnalyticsPaneClicked(T)}),[T]),n.useEffect((function(){return a}),[a]),n.useEffect((function(){C(q,T)}),[q,T,C]);var $,ee=n.useCallback((function(){U(),X(b.TIMED_OUT)}),[U,X]);n.useEffect((function(){return W.current&&(clearTimeout(W.current),W.current=void 0),F?(X(b.LOADING),W.current=window.setTimeout(ee,1e4)):X(b.SUCCEEDED),function(){return X(b.SUCCEEDED)}}),[ee,F]);var te=n.useCallback((function(e){e!==R&&(g.HiveLogger.singleton.logFilterSelected(T,e),I(e))}),[I,T,R]);$=L?n.default.createElement(y.TeamFilterMenu,{teamName:L,selectedFilter:R,onFilterSelected:te}):null;var ae,ne=n.default.createElement(i.TotalViews,{totalViews:K===b.LOADING?i.LOADING:M}),re=n.default.createElement(s.TotalDownloads,{totalDownloads:K===b.LOADING?i.LOADING:S}),ie=Z.formatMessage({id:"4qDMOz",defaultMessage:"{from_date} — {to_date}"},{from_date:w(Z,G,B),to_date:w(Z,H,B)}),se=n.default.createElement(u.Text,{size:"large"},ie),oe=n.useCallback((function(e){e.currentTarget.id===t.LATER_DATES_ID?g.HiveLogger.singleton.logAnalyticsPaneNavRight(T):g.HiveLogger.singleton.logAnalyticsPaneNavLeft(T);var a=h.addUTCDays(G,e.currentTarget.id===t.LATER_DATES_ID?7:-7),n=h.addUTCDays(a,6);z({startDate:a,endDate:n})}),[G,T]),le=Z.formatMessage({id:"DVJ4/q",defaultMessage:"View earlier dates"}),ce=n.default.createElement(o.IconButton,{variant:"transparent",id:t.EARLIER_DATES_ID,onClick:oe,disabled:G.getTime()-Q.getTime()<72e5},n.default.createElement(l.UIIcon,{src:c.ChevronLeftLine,"aria-label":le})),ue=Z.formatMessage({id:"UY88fh",defaultMessage:"View later dates"}),de=n.default.createElement(o.IconButton,{variant:"transparent",id:t.LATER_DATES_ID,onClick:oe,disabled:Boolean(V.current&&H>=V.current)},n.default.createElement(l.UIIcon,{src:c.ChevronRightLine,"aria-label":ue})),pe=n.default.createElement("div",{className:"title-row"},se,n.default.createElement("span",{className:"spacer"}),n.default.createElement("div",{className:"hc-navigation-buttons"},ce,de)),me=n.useMemo((function(){return(function(e,t,a){var i,s=t.startDate,o=t.endDate,l=a.formatMessage({id:"rV0u1M",defaultMessage:"Views"}),c=a.formatMessage({id:"LlAXM+",defaultMessage:"Downloads"}),d=_.keyBy(_.filter(e,(function(e){var t=e.date;return Boolean(t)})),(function(e){var t=e.date;return h.toUTCString(h.startOfUTCDay(t))})),p=[],m=[],f=[],g=!1,v=s,y=(function(e){return[e.formatMessage({id:"bF2GU6",defaultMessage:"S"}),e.formatMessage({id:"/7A7ii",defaultMessage:"M"}),e.formatMessage({id:"F+LnFL",defaultMessage:"T"}),e.formatMessage({id:"8GWs/W",defaultMessage:"W"}),e.formatMessage({id:"aoqQzY",defaultMessage:"T"}),e.formatMessage({id:"6OXw94",defaultMessage:"F"}),e.formatMessage({id:"+aXkQH",defaultMessage:"S"})]})(a);for(;!h.isAfterUTCDay(v,o);){var b=null!==(i=d[h.toUTCString(v)])&&void 0!==i?i:{},w=b.viewCount,k=void 0===w?0:w,E=b.downloadCount,M=void 0===E?0:E;p.push(y[v.getUTCDay()]),m.push(k),f.push(M),g=g||k>0||M>0,v=h.addUTCDays(v,1)}if(!g)return null;return{chart:{type:"column",height:200},title:{text:""},xAxis:{categories:p},yAxis:{allowDecimals:!1,min:0,title:{text:""}},plotOptions:{series:{animation:!1},column:{dataLabels:{enabled:!0,formatter:function(){return 0!=this.y?""+this.y:""}},events:{legendItemClick:function(){return!1}}}},tooltip:{backgroundColor:"black",borderWidth:0,shadow:!1,shared:!0,useHTML:!0,formatter:function(){var e=this;return this.points.map((function(t,a){var i=document.createElement("div"),s=t.y+" "+t.series.name.toLowerCase();return r.default.render(n.default.createElement(u.Text,{inverse:!0},s),i),i.innerHTML+(a===e.points.length-1?"":"<br/>")}))}},series:[{type:"column",name:l,data:m,color:"#0D2481"},{type:"column",name:c,data:f,color:"#29BC80"}],credits:{enabled:!1},legend:{enabled:!0,align:"left"}}})(E,q,Z)}),[E,q,Z]);if(K===b.LOADING)ae=n.default.createElement("div",{className:"no-data-container"},n.default.createElement(p.Spinner,{className:"progress-spinner","aria-valuetext":Z.formatMessage({id:"27Ivr1",defaultMessage:"Loading all analytics information"}),size:"large"}));else if(null===me)ae=n.default.createElement("div",{className:"no-data-container"},n.default.createElement(u.Text,{size:"large"},Z.formatMessage({id:"G22gqW",defaultMessage:"Nothing happened this week"})));else{var _e=D&&P&&n.default.createElement(P,{options:me,highcharts:D}),fe=A&&A.length>0&&n.default.createElement(v.ActivityStream,{activityStreamDataBundle:A,getUserInitials:O,displayLocations:x,teamFilter:R});ae=n.default.createElement("div",null,_e,fe)}var ge=Z.formatMessage({id:"wrC8hw",defaultMessage:"Up to 90 days available"});return n.default.createElement("div",{className:"pro-analytics-pane"},n.default.createElement(u.Title,{className:"paneLabelText",size:"large"},Z.formatMessage({id:"+fgFGr",defaultMessage:"Traffic and insights"})),n.default.createElement("div",null,n.default.createElement(u.Text,{size:"small",color:"faint"},Z.formatMessage({id:"tOJfEY",defaultMessage:"Since {date}"},{date:J})),n.default.createElement(m.Tooltip,{title:ge},n.default.createElement(o.IconButton,{variant:"transparent",className:"since-explanation"},n.default.createElement(l.UIIcon,{src:c.InfoSmallLine,"aria-label":ge})))),$,n.default.createElement("div",{className:"total-views-downloads-container"},ne,re),pe,ae)},t.UnconnectedAnalyticsPaneInternal.displayName="UnconnectedAnalyticsPaneInternal",t.UnconnectedAnalyticsPane=function(r){var i=n.useState(null),s=i[0],o=i[1];new Promise((function(t,a){e(["highcharts"],t,a)})).then(a.__importStar).then((function(e){s||o(e.default)}));var l=n.useState(null),c=l[0],u=l[1];return new Promise((function(t,a){e(["highcharts-react-official"],t,a)})).then(a.__importStar).then((function(e){c||u(e.default)})),n.default.createElement(t.UnconnectedAnalyticsPaneInternal,Object.assign({},r,{highcharts:s,highchartsReactComponent:c}))},t.UnconnectedAnalyticsPane.displayName="UnconnectedAnalyticsPane"})),define("typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/connected_analytics_pane",["require","exports","react-redux","typescript/component_libraries/pro-ui/src/data/selectors","typescript/component_libraries/pro-ui/src/data/actions","typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/unconnected_analytics_pane"],(function(e,t,a,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsPane=void 0;t.AnalyticsPane=a.connect((function(e,t){return{dataBundle:{totalViewCount:n.FileLinkAnalyticsSelectors.totalViews(e)(t.fileId),totalUniqueViewCount:n.FileLinkAnalyticsSelectors.totalUniqueViews(e)(t.fileId),viewBreakout:n.FileLinkAnalyticsSelectors.totalViewsByDate(e)(t.fileId),totalDownloadCount:n.FileLinkAnalyticsSelectors.totalDownloadCount(e)(t.fileId),activityStreamDataBundle:n.FileLinkAnalyticsSelectors.activityStreamDataBundle(e)(t.fileId),viewBreakoutIsComplete:!0},isFetchingAnalyticsData:n.MiscSelectors.isFetchingAnalyticsData(e),selectedTeamFilter:e.teamFilter,now:new Date}}),(function(e){return{changeDisplayMode:r.changeDisplayModeThunk(e),changeTeamFilter:r.changeTeamFilterThunk(e),fetchingTimedOut:r.fetchingTimedOutThunk(e),clearDataCache:r.clearDataCache}}))(i.UnconnectedAnalyticsPane)})),define("typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/team_filter_menu",["require","exports","tslib","react","dig-components/buttons","dig-components/menu","dig-components/typography","typescript/component_libraries/pro-ui/src/data/types","react-intl"],(function(e,t,a,n,r,i,s,o,l){"use strict";function c(e,t,a){switch(t){case o.TeamFilter.EVERYONE:return e.formatMessage({id:"WcJbLV",defaultMessage:"Everyone"});case o.TeamFilter.TEAM_MEMBERS:return e.formatMessage({id:"Dla82j",defaultMessage:"{team_name} members"},{team_name:a});case o.TeamFilter.NON_TEAM_MEMBERS:return e.formatMessage({id:"0lCFx+",defaultMessage:"People outside {team_name}"},{team_name:a})}}Object.defineProperty(t,"__esModule",{value:!0}),t.TeamFilterMenu=void 0,n=a.__importStar(n),t.TeamFilterMenu=function(e){var t=e.selectedFilter,a=e.onFilterSelected,u=e.teamName,d=l.useIntl(),p=[o.TeamFilter.EVERYONE,o.TeamFilter.TEAM_MEMBERS,o.TeamFilter.NON_TEAM_MEMBERS],m=n.useCallback((function(e){e!==t&&a(e)}),[a,t]);return n.default.createElement(i.Menu.Wrapper,{className:"team-filter-menu",onSelection:m},(function(e){var a=e.getTriggerProps,o=e.getContentProps;return n.default.createElement(n.default.Fragment,null,n.default.createElement(s.Text,{className:"team-filter-label"},d.formatMessage({id:"N1WvGk",defaultMessage:"Show me:"})),n.default.createElement(r.Button,Object.assign({variant:"opacity",withDropdownIcon:!0},a()),c(d,t,u)),n.default.createElement(i.Menu.Content,Object.assign({},o()),n.default.createElement(i.Menu.Segment,null,p.map((function(e){return n.default.createElement(i.Menu.SelectItem,{key:e+"",value:e,selected:e===t},c(d,e,u))})))))}))},t.TeamFilterMenu.displayName="TeamFilterMenu"})),define("typescript/component_libraries/pro-ui/src/components/sidebar_pane/analytics_pane/upsell",["require","exports","tslib","react","dig-components/typography","react-intl","dig-components/buttons","classnames","typescript/component_libraries/pro-ui/src/data/hive-logger"],(function(e,t,a,n,r,i,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsPaneUpsell=void 0,n=a.__importStar(n),o=a.__importDefault(o);var c="preview_analytics_upsell_v1";t.AnalyticsPaneUpsell=function(e){var t=e.collapsed,a=e.fileId,u=e.openTab,d=i.useIntl(),p=d.formatMessage({id:"o81APx",defaultMessage:"Traffic and insights"}),m=d.formatMessage({id:"g8qxf9",defaultMessage:"See who's visiting"}),_=d.formatMessage({id:"WX3rjN",defaultMessage:"Get graphs and stats showing who's checking out this file. Upgrade to Dropbox Professional to start tracking."}),f=d.formatMessage({id:"AzRPpu",defaultMessage:"Try for free"}),g=d.formatMessage({id:"o3rTDK",defaultMessage:"Tell me more"}),v=n.useCallback((function(){l.HiveLogger.singleton.logUpsellTryForFreeClicked(a),u("/pro/try?_tk="+c)}),[a,u]),h=n.useCallback((function(){l.HiveLogger.singleton.logUpsellLearnMoreClicked(a),u("/pro?_tk="+c)}),[a,u]);return n.default.createElement("div",{className:"upsell-container"},n.default.createElement("div",{className:"upsell-container__title"},n.default.createElement(r.Title,null,p)),n.default.createElement("div",{className:o.default("upsell-container__upsell-box",{collapsed:t})},n.default.createElement("div",{className:o.default("upsell-container__upsell-box-title",{collapsed:t})},n.default.createElement(r.Text,{isBold:!0},m)),n.default.createElement("div",{className:o.default("upsell-container__upsell-box-description",{collapsed:t})},n.default.createElement(r.Text,null,_)),n.default.createElement("div",{className:o.default("upsell-container__upsell-buttons",{collapsed:t})},n.default.createElement(s.Button,{variant:"primary",onClick:v},f),n.default.createElement("div",{className:o.default("upsell-container__button-tell-me-more",{collapsed:t})},n.default.createElement(s.Button,{variant:"transparent",onClick:h},g)))))},t.AnalyticsPaneUpsell.displayName="AnalyticsPaneUpsell"})),define("typescript/component_libraries/pro-ui/src/components/trial/banner/index",["require","exports","tslib","react","typescript/component_libraries/pro-ui/src/components/base/top_banner/index","typescript/component_libraries/pro-ui/src/common/i18n/index"],(function(e,t,a,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Banner=t.SecondaryText=t.PrimaryText=void 0,n=a.__importStar(n),t.PrimaryText=function(e){switch(e.mode){case"watermarking":return n.createElement(i.IntlString,{text:"You’re in trial mode.",description:"This will be shown to basic and plus users when they test out watermarking",project:"watermarking"});default:return null}},t.SecondaryText=function(e){switch(e.mode){case"watermarking":return n.createElement(i.IntlString,{text:"Upgrade to Professional to apply your watermark.",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade",project:"watermarking"});default:return null}},t.Banner=function(e){var a=e.mode,s=e.onClick;return n.createElement(r.TopBanner,{primaryText:n.createElement(t.PrimaryText,{mode:a}),secondaryText:n.createElement(t.SecondaryText,{mode:a}),buttonText:n.createElement(i.IntlString,{text:"Upgrade",description:"Upgrade Dropbox account"}),onClick:s})}})),define("typescript/component_libraries/pro-ui/src/components/trial/trial_popover_content/index",["require","exports","tslib","react","prop-types","typescript/component_libraries/pro-ui/src/common/i18n/index","spectrum/button/index","spectrum/icon_form/index"],(function(e,t,a,n,r,i,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrialPopoverContent=t.ValueProp=t.ValueProp3=t.ValueProp2=t.ValueProp1=t.Title=void 0,n=a.__importStar(n),r=a.__importDefault(r),t.Title=function(e){switch(e.variant){case"watermarking_wm":return n.createElement(i.IntlString,{text:"Upgrade to Professional to get watermarking",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade",project:"watermarking"});case"file_requests":return n.createElement(i.IntlString,{text:"Upgrade to Professional for advanced features",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade",project:"watermarking"});default:return null}},t.ValueProp1=function(e){switch(e.variant){case"watermarking_wm":return n.createElement(i.IntlString,{text:"Protect work right in Dropbox",description:"Value prop: Users can protect their images/pdfs by watermarking them right in Dropbox",project:"watermarking"});case"file_requests":return n.createElement(i.IntlString,{text:"Set expiration dates for file requests",description:"Value prop: Users can set expiration dates for their file requests"});default:return null}},t.ValueProp2=function(e){switch(e.variant){case"watermarking_wm":return n.createElement(i.IntlString,{text:"Apply watermarks quickly",description:"Value prop: Users can apply watermarks to their pdf/images quickly",project:"watermarking"});case"file_requests":return n.createElement(i.IntlString,{text:"Get %(pro_space_limit)s of storage",pro_space_limit:e.proSpaceLimit||"",description:"Value prop: Users get more storage if they upgrade to Professional",project:"watermarking"});default:return null}},t.ValueProp2.contextTypes={formatBytes:r.default.func},t.ValueProp3=function(e){switch(e.variant){case"watermarking_wm":return n.createElement(i.IntlString,{text:"Create custom watermarks",description:"Value prop: Users can create custom watermarks (e.g. changing text, uploading an image)",project:"watermarking"});case"file_requests":return n.createElement(i.IntlString,{text:"Free up space with Smart Sync",description:"Value prop: Users can free up space with Smart Sync if they upgrade to Professional",project:"watermarking"});default:return null}},t.ValueProp=function(e){var t=e.children;return n.createElement("span",{className:"value-prop"},n.createElement(o.IconForm,{className:"value-prop__check",name:"check"}),t)},t.TrialPopoverContent=function(e){var a=e.variant,r=e.proSpaceLimit,o=e.onClick;return n.createElement("div",{className:"trial-popover-content"},n.createElement("div",{className:"trial-popover-content__title"},n.createElement(t.Title,{variant:a})),n.createElement("div",{className:"trial-popover-content__value-props"},n.createElement(t.ValueProp,null,n.createElement(t.ValueProp1,{variant:a})),n.createElement(t.ValueProp,null,n.createElement(t.ValueProp2,{variant:a,proSpaceLimit:r})),n.createElement(t.ValueProp,null,n.createElement(t.ValueProp3,{variant:a}))),n.createElement(s.Button,{variant:"primary",onClick:o,shouldWrapContent:!0},n.createElement(i.IntlString,{text:"Try Professional free",description:"Try Dropbox Professional for free"})))}})),define("typescript/component_libraries/pro-ui/src/data/actions",["require","exports","api_v2/redux/user_link_analytics","typescript/component_libraries/pro-ui/src/data/cache_manager","lodash","typescript/component_libraries/pro-ui/src/data/util"],(function(e,t,a,n,r,i){"use strict";var s;function o(e){return{type:t.Action.IsFetchingFileAnalytics,payload:e}}function l(e){return{type:t.Action.LoadSavedFileData,payload:e}}function c(){return{type:t.Action.SetFetchingAnalyticsDataStartTime}}function u(){return{type:t.Action.FetchingTimedOut}}function d(e,a){return{type:t.Action.UpdateFileIdAndDateRange,payload:{fileId:e,dateRange:a}}}function p(e){return{type:t.Action.UpdateAnalyticsEnabledCallback,payload:{callback:e}}}function m(e){return{type:t.Action.UpdateTeamFilter,payload:{filter:e}}}function _(e,t){return function(s,u,m){void 0===m&&(m=r.noop);var _=s.startDate,g=s.endDate,v=i.addUTCDays(g,1),h="("+i.formatUTCYYYYMMDD(_)+")("+i.formatUTCYYYYMMDD(v)+")";e(d(u,h)),e(p((function(e,t){u===e.file_id&&m(u,t)}))),n.CacheManager.refreshTimer.create(s,u,f(e));var y=n.CacheManager.get(u,h);if(!t&&y)e(l(y)),y.pending||(y.error?m(u,!1):m(u,!0));else{n.CacheManager.set(u,h,{},!0,!1),e(c());var b=[{file_id:u}];(function(e,t,n,r){e(o(r)),e(a.getUserFileAnalyticsAction({arg:{from_date:t,to_date:n,file_ids:r},params:{}},{fileIds:r}))})(e,i.toUTCString(_),i.toUTCString(v),b)}}}function f(e){return _(e,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.clearDataCache=t.refreshDataThunk=t.changeDisplayModeThunk=t.changeTeamFilterThunk=t.updateTeamFilter=t.updateAnalyticsEnabledCallback=t.updateFileIdAndDateRange=t.fetchingTimedOutThunk=t.fetchingTimedOut=t.setFetchingAnalyticsStartTime=t.loadSavedFileData=t.isFetchingFileAnalytics=t.isFetchingUserAnalytics=t.Action=void 0,(s=t.Action||(t.Action={})).IsFetchingUserAnalytics="@@isFetchingUserAnalytics",s.IsFetchingFileAnalytics="@@isFetchingFileAnalytics",s.LoadSavedFileData="@@loadSavedFileData",s.UpdateFileIdAndDateRange="@@updateFileIdAndDateRange",s.UpdateAnalyticsEnabledCallback="@@updateAnalyticsEnabledCallback",s.SetFetchingAnalyticsDataStartTime="@@setFetchingAnalyticsDataStartTime",s.FetchingTimedOut="@@fetchingTimedOut",s.UpdateTeamFilter="@@updateTeamFilter",t.isFetchingUserAnalytics=function(){return{type:t.Action.IsFetchingUserAnalytics,payload:void 0}},t.isFetchingFileAnalytics=o,t.loadSavedFileData=l,t.setFetchingAnalyticsStartTime=c,t.fetchingTimedOut=u,t.fetchingTimedOutThunk=function(e){return function(){return e(u())}},t.updateFileIdAndDateRange=d,t.updateAnalyticsEnabledCallback=p,t.updateTeamFilter=m,t.changeTeamFilterThunk=function(e){return function(t){e(m(t))}},t.changeDisplayModeThunk=_,t.refreshDataThunk=f,t.clearDataCache=function(){n.CacheManager.refreshTimer.destroy(),n.CacheManager.clearCache()}})),define("typescript/component_libraries/pro-ui/src/data/cache_manager",["require","exports","typescript/component_libraries/pro-ui/src/data/cache"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CacheManager=void 0;var n,r=void 0,i="";(n=t.CacheManager||(t.CacheManager={})).get=function(e,t){var n,r=a.loadSavedDataBundle(e,t);if(r&&(n=r.timestamp.getTime(),(Date.now()-n)/1e3<300))return r},n.set=function(e,t,n,r,i){a.saveDataBundle(e,t,n,r,i)},n.clearCache=function(){a.clearCacheInternal()},n.refreshTimer={create:function(e,t,a){i!==t&&(i=t,r&&clearInterval(r),r=window.setInterval((function(){return a(e,t)}),301e3))},destroy:function(){r&&clearInterval(r)}}})),define("typescript/component_libraries/pro-ui/src/data/cache",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invalidateFileId=t.clearCacheInternal=t.saveDataBundle=t.loadSavedDataBundle=t.CACHE_DATE_FORMAT=void 0;var a=new Map;t.CACHE_DATE_FORMAT="YYYY-MM-DD",t.loadSavedDataBundle=function(e,t){var n=a.get(e);if(n)return n[t]},t.saveDataBundle=function(e,t,n,r,i){var s;if(a.has(e)){var o=a.get(e),l={timestamp:new Date,fileAnalytics:n,pending:r,error:i};o[t]=l,a.set(e,o)}else a.set(e,((s={})[t]={timestamp:new Date,fileAnalytics:n},s))},t.clearCacheInternal=function(){a.clear()},t.invalidateFileId=function(e){a.has(e)&&a.delete(e)}})),define("typescript/component_libraries/pro-ui/src/data/feature_checker",["require","exports","typescript/component_libraries/pro-ui/src/data/actions","typescript/component_libraries/pro-ui/src/data/util"],(function(e,t,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkFileAnalyticsEnablement=void 0,t.checkFileAnalyticsEnablement=function(e,t,r){a.changeDisplayModeThunk(e)(n.createDisplayRangeForNow(new Date),t,r)}})),define("typescript/component_libraries/pro-ui/src/data/reducer",["require","exports","tslib","api_v2/redux/user_link_analytics","typescript/component_libraries/pro-ui/src/data/types","typescript/component_libraries/pro-ui/src/data/actions","typescript/component_libraries/pro-ui/src/data/cache_manager","lodash"],(function(e,t,a,n,r,i,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.initialState=void 0,t.initialState={fileId:"",dateRange:"",file_link_daily_analytics:{analytics:void 0,events:void 0},user_link_daily_analytics:{analytics:void 0},isFetchingUserAnalyticsData:!1,fetchingAnalyticsDataFileIds:void 0,fetchingAnalyticsDataStartTime:void 0,analyticsEnabledCallback:void 0,teamFilter:r.TeamFilter.EVERYONE},t.reducer=function(e,r){var l,c;switch(void 0===e&&(e=t.initialState),r.type){case n.Action.GetUserAnalyticsResult:if(r.error)return a.__assign(a.__assign({},e),{isFetchingUserAnalyticsData:!1});if(r.payload.result){var u=r.payload.result;return a.__assign(a.__assign({},e),{isFetchingUserAnalyticsData:!1,user_link_daily_analytics:u})}break;case n.Action.GetUserFileAnalyticsResult:var d=r.meta.fileIds,p=null!==(l=e.analyticsEnabledCallback)&&void 0!==l?l:o.noop;if(r.error){switch(null===(c=r.error.error.error_type)||void 0===c?void 0:c[".tag"]){case"sku_error":case"no_perm_error":case"pass_disabled_error":s.CacheManager.set(e.fileId,e.dateRange,{},!1,!0),d.forEach((function(e){return p(e,!1)}))}return a.__assign(a.__assign({},e),{fetchingAnalyticsDataFileIds:void 0,analyticsEnabledCallback:void 0})}if(r.payload.result)if(e.fetchingAnalyticsDataFileIds&&o.isEqual(d,e.fetchingAnalyticsDataFileIds)){var m=r.payload.result;return s.CacheManager.set(e.fileId,e.dateRange,m,!1,!1),d.forEach((function(e){return p(e,!0)})),a.__assign(a.__assign({},e),{fetchingAnalyticsDataFileIds:void 0,file_link_daily_analytics:m,analyticsEnabledCallback:void 0})}break;case i.Action.FetchingTimedOut:return a.__assign(a.__assign({},e),{isFetchingUserAnalyticsData:!1,fetchingAnalyticsDataFileIds:void 0});case i.Action.IsFetchingUserAnalytics:return a.__assign(a.__assign({},e),{isFetchingUserAnalyticsData:!0});case i.Action.IsFetchingFileAnalytics:return a.__assign(a.__assign({},e),{fetchingAnalyticsDataFileIds:r.payload});case i.Action.LoadSavedFileData:return a.__assign(a.__assign({},e),{file_link_daily_analytics:r.payload.fileAnalytics});case i.Action.SetFetchingAnalyticsDataStartTime:return a.__assign(a.__assign({},e),{fetchingAnalyticsDataStartTime:new Date});case i.Action.UpdateFileIdAndDateRange:var _=r.payload,f=_.fileId,g=_.dateRange;return e.fileId!==f&&i.clearDataCache(),a.__assign(a.__assign({},e),{fileId:f,dateRange:g});case i.Action.UpdateAnalyticsEnabledCallback:var v=r.payload.callback;return a.__assign(a.__assign({},e),{analyticsEnabledCallback:v});case i.Action.UpdateTeamFilter:return a.__assign(a.__assign({},e),{teamFilter:r.payload.filter})}return e}})),define("typescript/component_libraries/pro-ui/src/data/selectors",["require","exports","reselect","typescript/component_libraries/pro-ui/src/data/types"],(function(e,t,a,n){"use strict";function r(e){switch(e){case n.TeamFilter.EVERYONE:return;case n.TeamFilter.NON_TEAM_MEMBERS:return"no";case n.TeamFilter.TEAM_MEMBERS:return"yes"}}function i(e,t){return t?function(a){var n=a.file_id,r=a.within_team;return(null==n?void 0:n.file_id)===e&&r&&r[".tag"]===t}:function(t){var a=t.file_id;return(null==a?void 0:a.file_id)===e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MiscSelectors=t.FileLinkAnalyticsSelectors=t.UserLinkAnalyticsSelectors=void 0;var s,o,l=function(e){return e.user_link_daily_analytics.analytics},c=function(e){return{analytics:e.file_link_daily_analytics.analytics,teamTag:r(e.teamFilter)}},u=function(e){return{events:e.file_link_daily_analytics.events,teamTag:r(e.teamFilter)}},d=function(e){return e.file_link_daily_analytics.ineligible_sku_notice};(s=t.UserLinkAnalyticsSelectors||(t.UserLinkAnalyticsSelectors={})).totalViewsSelector=a.createSelector(l,(function(e){return e?e.reduce((function(e,t){return e+(t.total_view_count||0)}),0):0})),s.totalUniqueViewsSelector=a.createSelector(l,(function(e){return e?e.reduce((function(e,t){return e+(t.unique_view_count||0)}),0):0})),s.totalViewsByDate=a.createSelector(l,(function(e){return e?e.map((function(e){return{date:e.date,unique_view_count:e.unique_view_count,total_view_count:e.total_view_count}})):[]})),(o=t.FileLinkAnalyticsSelectors||(t.FileLinkAnalyticsSelectors={})).totalViews=a.createSelector(c,(function(e){var t=e.analytics,a=e.teamTag;return function(e){return t?t.filter(i(e,a)).reduce((function(e,t){return e+(t.total_view_count||0)}),0):0}})),o.totalUniqueViews=a.createSelector(c,(function(e){var t=e.analytics,a=e.teamTag;return function(e){return t?t.filter(i(e,a)).reduce((function(e,t){return e+(t.unique_view_count||0)}),0):0}})),o.totalViewsByDate=a.createSelector(c,(function(e){var t=e.analytics,a=e.teamTag;return function(e){var n,r,s,o,l,c,u;if(t){var d=!0,p=t.filter(i(e,a)).map((function(e){var t=e.date,a=e.total_view_count,n=e.unique_view_count,r=e.download_count;return e.within_team&&(d=!1),{date:t?new Date(t):void 0,viewCount:a,uniqueViewCount:n,downloadCount:r}}));if(a||d)return p;p.sort((function(e,t){var a=e.date,n=t.date;return(null!=a?a:0)<(null!=n?n:0)?1:-1}));for(var m=[p[0]],_=m[0],f=1;f<p.length;f++){var g=p[f];_.date&&_.date.getTime()===(null===(n=g.date)||void 0===n?void 0:n.getTime())?(_.viewCount=(null!==(r=_.viewCount)&&void 0!==r?r:0)+(null!==(s=g.viewCount)&&void 0!==s?s:0),_.uniqueViewCount=(null!==(o=_.uniqueViewCount)&&void 0!==o?o:0)+(null!==(l=g.uniqueViewCount)&&void 0!==l?l:0),_.downloadCount=(null!==(c=_.downloadCount)&&void 0!==c?c:0)+(null!==(u=g.downloadCount)&&void 0!==u?u:0)):(m.push(g),_=m[m.length-1])}return m}return[]}})),o.totalDownloadCount=a.createSelector(c,(function(e){var t=e.analytics,a=e.teamTag;return function(e){return t?t.filter(i(e,a)).reduce((function(e,t){return e+(t.download_count||0)}),0):0}})),o.upsellEnabled=a.createSelector(d,(function(e){return Boolean(e&&("individual_user_not_in_sufficient_plan"===e[".tag"]||"individual_user_no_longer_in_sufficient_plan"===e[".tag"]))})),o.activityStreamDataBundle=a.createSelector(u,(function(e){var t=e.events,a=e.teamTag;return function(e){if(t)return t.filter((function(t){var n=t.activity_type,r=t.date,i=t.file_id,s=t.user;return i===e&&n&&r&&(!a||a===(s?s.within_team&&s.within_team[".tag"]:"no"))})).map((function(e){var t=e.activity_type,a=e.date,n=e.user,r=null!=n?n:{},i=r.id,s=r.display_name,o=r.device_type,l=r.geo_country,c=r.geo_region,u=r.geo_city,d=r.photo_url,p=void 0===l?void 0:{country:l,region:c,city:u};return{activityType:t,date:new Date(a),isGuest:!n,userId:i,displayName:s,photoUrl:d,deviceType:o,location:p}}))}})),(t.MiscSelectors||(t.MiscSelectors={})).isFetchingAnalyticsData=function(e){var t=e.isFetchingUserAnalyticsData,a=e.fetchingAnalyticsDataFileIds;return t||Boolean(a)}})),define("typescript/component_libraries/pro-ui/src/data/types",["require","exports"],(function(e,t){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.TeamFilter=void 0,(a=t.TeamFilter||(t.TeamFilter={}))[a.EVERYONE=1]="EVERYONE",a[a.TEAM_MEMBERS=2]="TEAM_MEMBERS",a[a.NON_TEAM_MEMBERS=3]="NON_TEAM_MEMBERS"})),define("typescript/component_libraries/pro-ui/src/data/util",["require","exports"],(function(e,t){"use strict";function a(e,t){var a=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return{today:a,xDaysAgo:n(a,-t)}}function n(e,t){var a=new Date(e);return a.setUTCDate(a.getUTCDate()+t),a}function r(e){return e<10?"0"+e:String(e)}function i(e){return e.getUTCFullYear()+"-"+r(e.getUTCMonth()+1)+"-"+r(e.getUTCDate())}Object.defineProperty(t,"__esModule",{value:!0}),t.formatUTCYYYYMMDD=t.isAfterUTCDay=t.toUTCString=t.startOfUTCDay=t.addUTCDays=t.createDisplayRangeForNow=t.getTodayAndXDaysAgo=void 0,t.getTodayAndXDaysAgo=a,t.createDisplayRangeForNow=function(e){var t=a(e,6);return{startDate:t.xDaysAgo,endDate:t.today}},t.addUTCDays=n,t.startOfUTCDay=function(e){void 0===e&&(e=new Date);var t=new Date(e);return t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),t},t.toUTCString=function(e){void 0===e&&(e=new Date);var t=r(e.getUTCHours()),a=r(e.getUTCMinutes()),n=r(e.getUTCSeconds());return i(e)+"T"+t+":"+a+":"+n+"Z"},t.isAfterUTCDay=function(e,t){return e.getTime()-t.getTime()>864e5||e.getUTCDate()>t.getUTCDate()},t.formatUTCYYYYMMDD=i})),define("typescript/component_libraries/pro-ui/src/data/amp-logger",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmpLogger=void 0;var a;(function(e){e.PANE_CLICKED="pane_clicked",e.FETCH_TIME="fetch_time"})(a||(a={}));var n=(function(){function e(e){this.metricsReporter=e}return e.conditionallySetSingleton=function(t){this.internalInstance||(this.internalInstance=new e(null==t?void 0:t()))},Object.defineProperty(e,"singleton",{get:function(){if(!this.internalInstance)throw new Error("AmpLogger.singleton was never set. Be sure to set the instance before using it!");return this.internalInstance},enumerable:!1,configurable:!0}),e.prototype.record=function(e,t){var a;null===(a=this.metricsReporter)||void 0===a||a.createStats({ns:"smart_links_analytics",name:e}).record(t)},e.prototype.recordDuration=function(e,t,a){var n;null===(n=this.metricsReporter)||void 0===n||n.createStats({ns:"smart_links_analytics",name:e}).recordDuration(t,a)},e.prototype.logFetchTime=function(e,t){this.recordDuration(a.FETCH_TIME,e,t)},e.prototype.logAnalyticsPaneClicked=function(){this.record(a.PANE_CLICKED,1)},e})();t.AmpLogger=n,n.internalInstance=void 0})),define("typescript/component_libraries/pro-ui/src/data/hive-logger",["require","exports","typescript/component_libraries/pro-ui/src/data/types"],(function(e,t,a){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.HiveLogger=t.EventName=void 0,(n=t.EventName||(t.EventName={})).PANE_CLICKED="PANE_CLICKED",n.PANE_REGISTERED="PANE_REGISTERED",n.PANE_REGISTERED__DISABLED="PANE_REGISTERED__DISABLED",n.UPSELL_TRY_FOR_FREE_CLICKED="UPSELL_TRY_FOR_FREE_CLICKED",n.UPSELL_LEARN_MORE_CLICKED="UPSELL_LEARN_MORE_CLICKED",n.NAV_LEFT="NAV_LEFT",n.NAV_RIGHT="NAV_RIGHT",n.EVERYONE_FILTER_SELECTED="EVERYONE_FILTER_SELECTED",n.TEAM_MEMBERS_ONLY_SELECTED="TEAM_MEMBERS_ONLY_SELECTED",n.NON_TEAM_MEMBERS_ONLY_SELECTED="NON_TEAM_MEMBERS_ONLY_SELECTED";var r=(function(){function e(e){this.internalLogger=e}return e.create=function(t){return new e(t)},Object.defineProperty(e,"singleton",{get:function(){if(!this.singletonInstance)throw new Error("HiveLogger.singleton was never set. Be sure to set the instance before using it!");return this.singletonInstance},set:function(e){this.singletonInstance=e},enumerable:!1,configurable:!0}),e.prototype.logBasic=function(e,t){this.internalLogger.logBasic(Date.now(),e,t)},e.prototype.logAnalyticsPaneClicked=function(e){this.logBasic(t.EventName.PANE_CLICKED,e)},e.prototype.logAnalyticsPaneRegistered=function(e,a){this.logBasic(a?t.EventName.PANE_REGISTERED:t.EventName.PANE_REGISTERED__DISABLED,e)},e.prototype.logAnalyticsPaneNavLeft=function(e){this.logBasic(t.EventName.NAV_LEFT,e)},e.prototype.logAnalyticsPaneNavRight=function(e){this.logBasic(t.EventName.NAV_RIGHT,e)},e.prototype.logUpsellTryForFreeClicked=function(e){this.logBasic(t.EventName.UPSELL_TRY_FOR_FREE_CLICKED,e)},e.prototype.logUpsellLearnMoreClicked=function(e){this.logBasic(t.EventName.UPSELL_LEARN_MORE_CLICKED,e)},e.prototype.logFilterSelected=function(e,n){var r;switch(n){case a.TeamFilter.EVERYONE:r=t.EventName.EVERYONE_FILTER_SELECTED;break;case a.TeamFilter.TEAM_MEMBERS:r=t.EventName.TEAM_MEMBERS_ONLY_SELECTED;break;case a.TeamFilter.NON_TEAM_MEMBERS:r=t.EventName.NON_TEAM_MEMBERS_ONLY_SELECTED}this.logBasic(r,e)},e})();t.HiveLogger=r,r.singletonInstance=void 0})),define("typescript/component_libraries/pro-ui/src/data/i18n-util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=void 0;var a;(function(e){e.year="year",e.month="month",e.week="week",e.day="day",e.hour="hour",e.minute="minute"})(a||(a={})),t.timeSince=function(e,t){var n,r,i=Date.now()-e;return i<=6e4?t.formatMessage({id:"WV5Q3y",defaultMessage:"Just now"}):(i>31536e6?(n=i/31536e6,r=a.year):i>2592e6?(n=i/2592e6,r=a.month):i>6048e5?(n=i/6048e5,r=a.week):i>864e5?(n=i/864e5,r=a.day):i>36e5?(n=i/36e5,r=a.hour):(n=i/6e4,r=a.minute),t.formatRelativeTime(0|-n,r,{numeric:"auto"}))}}));
//# sourceMappingURL=pkg-pro-ui.min.js-vfl4JrWAy.map