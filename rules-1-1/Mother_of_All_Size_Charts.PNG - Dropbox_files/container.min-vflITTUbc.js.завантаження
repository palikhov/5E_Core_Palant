define(["require","exports","tslib","react","classnames","spectrum/facepile/facepile_members","file-viewer/pass/reducer"],(function(e,t,r,a,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Facepiles=t.timeSince=void 0,a=r.__importStar(a),n=r.__importDefault(n);var s="remainderTooltip__38GjlTWaQc__pass",l="avatarTooltip__2s5rFRYcHq__pass",u="facepileMembers__1u9O8SWEIE__pass";function m(e){return e.split(/\s+/g).slice(0,2).map((function(e){return e[0]})).join("").toLocaleUpperCase()}function c(e,t){var r=Date.now()-("number"==typeof e?e:e.getTime());return r>31536e6?t.formatMessage({id:"8w63fP",defaultMessage:"Viewed {number, plural, one {# year ago} other {# years ago}}"},{number:r/31536e6|0}):r>2592e6?t.formatMessage({id:"p+J/9i",defaultMessage:"Viewed {number, plural, one {# month ago} other {# months ago}}"},{number:r/2592e6|0}):r>6048e5?t.formatMessage({id:"Sr+rcm",defaultMessage:"Viewed {number, plural, one {# week ago} other {# weeks ago}}"},{number:r/6048e5|0}):r>864e5?t.formatMessage({id:"zdIfoz",defaultMessage:"Viewed {number, plural, one {# day ago} other {# days ago}}"},{number:r/864e5|0}):r>36e5?t.formatMessage({id:"xs1WyB",defaultMessage:"Viewed {number, plural, one {# hour ago} other {# hours ago}}"},{number:r/36e5|0}):r>6e4?t.formatMessage({id:"oZ87NQ",defaultMessage:"Viewed {number, plural, one {# min ago} other {# mins ago}}"},{number:r/6e4|0}):t.formatMessage({id:"2Sqn0x",defaultMessage:"Viewed just now"})}function d(e){var t=e.name,r=e.ts,n=e.intl,i=e.active;return a.createElement("article",{className:l},a.createElement("header",null,a.createElement("h3",null,t)),i?n.formatMessage({id:"cSWjTH",defaultMessage:"Viewing now"}):r?c(1e3*r,n):null)}function f(e){return e.startsWith("dbafvid:")}function p(e,t){var r=e.name.display_name,n=e.account_id,i=e.profile_photo_url;return{active:!0,alt:r,avatarColorSeed:n,initials:m(r),memberKey:n,photoUrl:i||"",tooltipContent:a.createElement(d,{name:r,active:!0,intl:t})}}function g(e){var t=e.currentUser,n=e.viewingUserIds,i=e.users,o=e.seenStates,s=e.fileMembers,l=e.intl,u=r.__spreadArrays([p(t,l)],n.filter((function(e){return e!==t.account_id&&(f(e)||i[e])})).slice(0,3).map((function(e){return f(e)?(function(e,t){var r=t.formatMessage({id:"uxSU4g",defaultMessage:"Guest"});return{active:!0,alt:r,avatarColorSeed:e,initials:m(r),memberKey:e,photoUrl:"",tooltipContent:a.createElement(d,{name:r,active:!0,intl:t})}})(e,l):p(i[e],l)})));return u.length<4&&u.push.apply(u,o.order.filter((function(e){return!n.includes(e)&&e!==t.account_id})).slice(0,4-u.length).map((function(e){return(function(e,t,r){void 0===r&&(r=!1);var n=e.when_last_seen,i=e.seen_state_user,o=i.display_name,s=i.email,l=i.user_id,u=i.photo_circle_url;return{active:r,alt:o||s||"",avatarColorSeed:l,initials:m(o),memberKey:l,photoUrl:u||"",tooltipContent:a.createElement(d,{name:o,active:!1,ts:n,intl:t})}})(o.infos[e],l)}))),u.length<4&&u.push.apply(u,s.order.filter((function(e){return!(e===t.account_id||n.includes(e)||e in o.infos)})).slice(0,4-u.length).map((function(e){return s.users[e]?(function(e,t){var r=e.user,n=r.display_name,i=r.account_id;return{active:!1,alt:n,avatarColorSeed:i,initials:m(n),memberKey:i,photoUrl:"",tooltipContent:a.createElement(d,{name:n,intl:t})}})(s.users[e],l):(function(e,t){var r=e.user,n=e.invitee;if(r){var i=r.display_name,o=r.account_id;return{active:!1,alt:i,avatarColorSeed:o,initials:m(i),memberKey:o,photoUrl:"",tooltipContent:a.createElement(d,{name:i,intl:t})}}if("email"===n[".tag"])return{active:!1,alt:n.email,avatarColorSeed:n.email,initials:m(n.email),memberKey:n.email,photoUrl:"",tooltipContent:a.createElement(d,{name:n.email,intl:t})}})(s.invitees[e],l)})).filter((function(e){return!!e}))),u}t.timeSince=c,t.Facepiles=function(e){var t=e.seenStates,r=void 0===t?o.DEFAULT_SEEN_STATES:t,l=e.intl,m=e.className,c=e.fileMemberCounts,d=void 0===c?o.DEFAULT_FILE_MEMBER_COUNTS:c,f=e.fileMembers,p=void 0===f?o.DEFAULT_FILE_MEMBERS:f,_=e.currentUser,v=e.users,h=e.viewingUserIds,M=void 0===h?o.DEFAULT_VIEWING_USER_IDS:h,b=0,E=[];_&&(b=(function(e,t,r,a){return e.count+t.order.filter((function(e){return!(e in r.users||e in r.invitees)})).length+a.filter((function(e){return!(e in t.infos||e in r.users||e in r.invitees)})).length})(d,r,p,M),E=g({currentUser:_,viewingUserIds:M,users:v,seenStates:r,fileMembers:p,intl:l}));var S=b-E.length,y=S>99?l.formatMessage({id:"tkBGME",defaultMessage:"99+"}):S>0?S.toString():"";return 1===E.length&&E[0].memberKey===(null==_?void 0:_.account_id)&&M.length<=1?null:a.createElement(i.FacepileMembers,{className:n.default(m,u),remainderCount:y,avatarSize:32,remainderTooltipProps:{backgroundColor:"#344063",tooltipContent:a.createElement("p",{className:s},l.formatMessage({id:"U34Aor",defaultMessage:"{count, plural, one {# other} other {# others}}"},{count:S}))},isRemainderActive:!1,members:E})},t.Facepiles.displayName="Facepiles"}));
//# sourceMappingURL=container.min.js-vflGoGYdR.map