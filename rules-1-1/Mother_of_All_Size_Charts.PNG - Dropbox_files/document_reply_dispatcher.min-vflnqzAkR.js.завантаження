define(["require","exports","modules/clean/react/integrations/pdf_editor/document_message_bus/dispatchers/event_relay"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultDocumentReplyDispatcher=void 0;var i=(function(){function e(e,t){var i=this;void 0===t&&(t=void 0),this.targetOrigin=e,this.windowMessageEventRelay=new s.WindowMessageEventRelay((function(e){return i.handleWindowOnMessage(e)})),this.messagePortEventRelay=new s.MessagePortEventRelay,t&&this.registerOnActionHandler(t),this.messageBusInitializedEventRelay=new s.SimpleEventRelay,this.sendFrameInitializedMessage(),this._busInitialized=!1}return Object.defineProperty(e.prototype,"busInitialized",{get:function(){return this._busInitialized},enumerable:!1,configurable:!0}),e.prototype.sendDocumentReply=function(e){if(this.port)switch(e.kind){case"extract_document_reply":this.port.postMessage(e,[e.documentData]);break;case"create_document_page_thumbnail_reply":this.port.postMessage(e,[e.thumbnailImageData]);break;default:this.port.postMessage(e)}},e.prototype.registerOnActionHandler=function(e){this.messagePortEventRelay.registerHandler(e)},e.prototype.removeOnActionHandler=function(e){this.messagePortEventRelay.removeHandler(e)},e.prototype.registerOnInitializedHandler=function(e){this.messageBusInitializedEventRelay.registerHandler(e)},e.prototype.removeOnInitializedHandler=function(e){this.messageBusInitializedEventRelay.removeHandler(e)},e.prototype.dispose=function(){this.windowMessageEventRelay.dispose(),this.messagePortEventRelay.dispose(),this._busInitialized=!1},e.prototype.sendFrameInitializedMessage=function(){window.parent.postMessage({kind:"frame_initialized_message"},this.targetOrigin)},e.prototype.sendMessageChannelPortAckMessage=function(){window.parent.postMessage({kind:"message_channel_port_ack_message"},this.targetOrigin)},e.prototype.handleWindowOnMessage=function(e){e.origin===this.targetOrigin&&("message_channel_port_message"===e.data.kind&&(this.port=e.ports[0],this.messagePortEventRelay.port=this.port,this.sendMessageChannelPortAckMessage(),this._busInitialized=!0,this.messageBusInitializedEventRelay.triggerHandlers(),this.windowMessageEventRelay.dispose()))},e})();t.DefaultDocumentReplyDispatcher=i}));
//# sourceMappingURL=document_reply_dispatcher.min.js-vfl0vczjo.map