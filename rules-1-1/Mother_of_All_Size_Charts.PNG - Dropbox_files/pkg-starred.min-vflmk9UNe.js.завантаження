define("modules/clean/react/starred/actions",["require","exports","tslib","modules/clean/flux/dispatcher","modules/clean/react/starred/api","modules/clean/react/starred/constants","modules/clean/react/starred/model","modules/core/i18n","modules/clean/react/snackbar"],(function(e,t,r,a,o,s,i,n,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredActions=void 0,o=r.__importStar(o);var c=(function(){function e(){}return e.setStarredStatus=function(e,t){a.Dispatcher.dispatch({type:s.StarredActionTypes.SET_STATUS,starredStatuses:[{idTypePair:e,starred:t}]})},e.fetchStatuses=function(t,r,n){return void 0===n&&(n=!1),n||e.markAsLoading(r),o.fetchStatuses(t,r).then((function(e){a.Dispatcher.dispatch({type:s.StarredActionTypes.SET_STATUS,starredStatuses:i.statusResultsToStarredStatuses(e)})})).catch((function(e){return a.Dispatcher.dispatch({type:s.StarredActionTypes.LOAD_FAILURE,idTypePairs:r}),Promise.reject(e)}))},e.markAsLoading=function(e){a.Dispatcher.dispatch({type:s.StarredActionTypes.LOADING,idTypePairs:e})},e.update=function(e,t,r,i){var n,d={id:t,type:r};a.Dispatcher.dispatch({type:s.StarredActionTypes.LOADING,idTypePairs:[d]});var c=o.update(e,t,r,i);return c.then((function(){return n=i})).catch((function(e){throw n=!i,e})).finally((function(){a.Dispatcher.dispatch({type:s.StarredActionTypes.SET_STATUS,starredStatuses:[{idTypePair:{id:t,type:r},starred:n}]})})),c},e.updateWithSnackbar=function(t,r,a,o,s){return e.update(t,r,a,o).then((function(){var e;e=s?o?n.intl.formatMessage({id:"m96IvY",defaultMessage:"Starred {itemName}."},{itemName:s}):n.intl.formatMessage({id:"Yn2gx1",defaultMessage:"Unstarred {itemName}."},{itemName:s}):o?n.intl.formatMessage({id:"IxGSEU",defaultMessage:"Starred."},{itemName:s}):n.intl.formatMessage({id:"RZWOu0",defaultMessage:"Unstarred."},{itemName:s}),d.Snackbar.complete(e,"star-action")})).catch((function(e){var t;s?t=o?n.intl.formatMessage({id:"5O9Xva",defaultMessage:"There was a problem starring {item_name}"},{item_name:s}):n.intl.formatMessage({id:"CvW0nU",defaultMessage:"There was a problem unstarring {item_name}"},{item_name:s}):(t=o?n.intl.formatMessage({id:"jouX9E",defaultMessage:"There was a problem starring your selection"}):n.intl.formatMessage({id:"TkdYlT",defaultMessage:"There was a problem unstarring your selection"}),d.Snackbar.fail(t))}))},e})();t.StarredActions=c})),define("modules/clean/react/starred/api",["require","exports","modules/clean/deprecated_ajax/ajax_jquery"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.fetchStatuses=void 0;var a=function(e,t,a){return new Promise((function(o,s){(a?r.SilentBackgroundRequest:r.WebRequest)({url:e,type:"POST",dataType:"json",data:t,success:o,error:function(e,t,r){return s(Error("error: "+r+", status: "+t))}})}))};t.fetchStatuses=function(e,t){return a("/starred/get_status",{role:e,resources_json:JSON.stringify(t)},!0)},t.update=function(e,t,r,o){return a("/starred/update",{role:e,resource_id:t,id_type:r,is_starred:o},!0)}})),define("modules/clean/react/starred/star",["require","exports","tslib","classnames","react","dig-components/icons","dig-components/icons/src","dig-components/tooltips","modules/clean/react/components/css","modules/clean/react/starred/actions","modules/clean/react/starred/starred_activity_logger","modules/clean/react/starred/store","modules/core/i18n"],(function(e,t,r,a,o,s,i,n,d,c,l,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Star=void 0,a=r.__importDefault(a);var m=(function(e){function t(t){var r=e.call(this,t)||this;return r.onStoreUpdate=function(){var e=r.getStateFromStore();r.setState(e)},r.onClick=function(e){if(e.stopPropagation(),e.preventDefault(),!r.state.isLoading){var t=!r.state.isStarred,a=r.props,o=a.id,s=a.idType,i=a.isDir,n=a.itemName,d=a.onStarClick,u=a.source,p=a.user;l.starredActivityLogger.logClick(p,o,s,i,u,t),d&&d(t),c.StarredActions.updateWithSnackbar(p.role,o,s,t,n)}},r.state=r.getStateFromStore(),r.removeStoreListener=u.StarredStore.addListener(r.onStoreUpdate),r}return r.__extends(t,e),t.prototype.componentWillUnmount=function(){this.removeStoreListener&&this.removeStoreListener()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.id===e.id&&this.props.idType===e.idType||this.setState(this.getStateFromStore(e))},t.prototype.getStateFromStore=function(e){void 0===e&&(e=this.props);var t={id:e.id,type:e.idType};return{isLoading:u.StarredStore.getIsLoading(t),isStarred:u.StarredStore.getIsStarred(t)}},t.prototype.getTooltipContent=function(){return this.props.isReadOnly?this.state.isStarred?p.intl.formatMessage({id:"LAVXPn",defaultMessage:"Starred"}):null:this.state.isStarred?p.intl.formatMessage({id:"XQNf7s",defaultMessage:"Remove from Starred"}):p.intl.formatMessage({id:"iGfiaV",defaultMessage:"Add to Starred"})},t.prototype.render=function(){var e=this.props,t=e.starButtonClassName,r=e.alwaysShowUnstarred;if(void 0===this.state.isStarred)return null;if(this.props.isReadOnly&&!this.state.isStarred)return null;var d={star__toggle:!0,"star__toggle--starred":this.state.isStarred,"star__toggle--unstarred":!this.state.isStarred&&!this.props.isTabbing&&!r,"star__toggle--loading":this.state.isLoading},c=this.getTooltipContent();return o.default.createElement(n.Tooltip,{title:c,placement:this.props.tooltipPlacement||"top"},o.default.createElement("button",{className:a.default(d,t),role:"button","aria-pressed":this.state.isStarred,"aria-label":c,onClick:this.onClick,onDoubleClick:this.onClick,disabled:this.props.isReadOnly,tabIndex:this.props.tabIndex},o.default.createElement(s.UIIcon,{src:this.state.isStarred?i.StarFill:i.StarLine})))},t.displayName="Star",t})((o=r.__importDefault(o)).default.PureComponent);t.Star=d.requireCssWithComponent(m,["/static/css/starred/star-vflRNeO9W.css"])})),define("modules/clean/react/starred/starred_activity_logger",["require","exports","modules/clean/react/home/api","modules/clean/react/home/starred/constants","modules/clean/react/starred/constants","modules/clean/web_user_action_logger","modules/clean/web_user_action_events"],(function(e,t,r,a,o,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.starredActivityLogger=t.StarredActivityLogger=void 0;var n=[o.StarredSource.HOME_STARRED,o.StarredSource.HOME_RECENTS],d=(function(){function e(){}return e.prototype.logClick=function(e,t,o,d,c,l){if("BROWSE"===c)return Promise.resolve();var u=[];if(n.includes(c)){var p=l?a.StarredLoggingTypes.CLICK_STAR:a.StarredLoggingTypes.CLICK_UNSTAR;u.push(r.logHomeActivity({eventName:p,role:e.role,extra:{resource_id:t,id_type:o,is_dir:d}}))}var m=l?i.WebUserActionLogEvent.STAR:i.WebUserActionLogEvent.REMOVE_STAR;return u.push(s.WebUserActionLog.log(e.id,m,{resource_id:t,id_type:o,is_dir:d,role:e.role,source:c})),Promise.all(u)},e})();t.StarredActivityLogger=d,t.starredActivityLogger=new d})),define("modules/clean/react/starred/store",["require","exports","tslib","lodash","modules/clean/flux/dispatcher","modules/clean/flux/flux_store","modules/clean/react/starred/constants","modules/clean/react/home/starred/constants","modules/clean/react/starred/id_type_pair"],(function(e,t,r,a,o,s,i,n,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredStore=t._StarredStoreClass=void 0,a=r.__importStar(a);var c=(function(e){function t(){var t=e.call(this,o.Dispatcher)||this;return t.idsToLoadingState={},t.idsToStarred={},t}return r.__extends(t,e),t.prototype.getLoadingStates=function(){return this.idsToLoadingState},t.prototype.hasIdTypePair=function(e){return this.idsToLoadingState.hasOwnProperty(d.idTypePairToString(e))},t.prototype.getLoadingState=function(e){return this.idsToLoadingState[d.idTypePairToString(e)]},t.prototype.getIsStarred=function(e){return this.idsToStarred[d.idTypePairToString(e)]},t.prototype.getAllStarredPairStrings=function(){return Object.keys(a.pickBy(this.idsToStarred,(function(e){return e})))},t.prototype.getIsLoading=function(e){return this.getLoadingState(e)===i.StarredLoadingState.LOADING},t.prototype.onLoading=function(e){var t={};e.forEach((function(e){return t[d.idTypePairToString(e)]=i.StarredLoadingState.LOADING})),this.idsToLoadingState=r.__assign(r.__assign({},this.idsToLoadingState),t)},t.prototype.onSetStatus=function(e){void 0===e&&(e=[]);var t={},a={};e.forEach((function(e){var r=d.idTypePairToString(e.idTypePair);t[r]=i.StarredLoadingState.LOAD_SUCCESS,a[r]=e.starred})),this.idsToLoadingState=r.__assign(r.__assign({},this.idsToLoadingState),t),this.idsToStarred=r.__assign(r.__assign({},this.idsToStarred),a)},t.prototype.onLoadFailure=function(e){var t=this,a={};e.forEach((function(e){var r=d.idTypePairToString(e),o=t.idsToLoadingState[r];void 0!==o&&o!==i.StarredLoadingState.LOADING||(a[r]=i.StarredLoadingState.LOAD_FAILED)})),this.idsToLoadingState=r.__assign(r.__assign({},this.idsToLoadingState),a)},t.prototype.__onDispatch=function(e){var t=e.action;switch(t.type){case i.StarredActionTypes.LOADING:this.onLoading(t.idTypePairs),this.__emitChange();break;case i.StarredActionTypes.SET_STATUS:case n.StarredResourceActionTypes.LOAD_SUCCESS:this.onSetStatus(t.starredStatuses),this.__emitChange();break;case i.StarredActionTypes.LOAD_FAILURE:this.onLoadFailure(t.idTypePairs),this.__emitChange();break;default:return}},t})(s.FluxStore);t._StarredStoreClass=c,t.StarredStore=new c})),define("modules/clean/react/starred/model",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statusResultsToStarredStatuses=void 0,t.statusResultsToStarredStatuses=function(e){return e.map((function(e){var t=e.id,r=e.type,a=e.is_starred,o=e.canonical_id,s=e.canonical_id_type,i={idTypePair:{id:t,type:r},starred:a};return o&&s&&(i.canonicalIdTypePair={id:o,type:s}),i}))}})),define("modules/clean/react/home/starred/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STARRED_ITEMS_LIMIT=t.LOAD_ALL_ITEMS_COUNT=t.StarredLoadingTypes=t.StarredLoggingTypes=t.NOT_PAPER_USER_ERROR=t.StarredResourceActionTypes=void 0,t.StarredResourceActionTypes={LOADING_INITIAL:"HOME_STARRED_LOADING_INITIAL",LOADING_ALL:"HOME_STARRED_LOADING_ALL",LOAD_SUCCESS:"HOME_STARRED_LOAD_SUCCESS",LOAD_FAILURE:"HOME_STARRED_LOAD_FAILURE",HIDE_EMPTY_SECTION:"HOME_STARRED_HIDE_EMPTY_SECTION"},t.NOT_PAPER_USER_ERROR="not_paper_user",t.StarredLoggingTypes={CLICK_STAR:"click_star",CLICK_UNSTAR:"click_unstar"},t.StarredLoadingTypes={INITIAL:"INITIAL",ALL:"ALL"},t.LOAD_ALL_ITEMS_COUNT=1e3,t.INITIAL_STARRED_ITEMS_LIMIT=5})),define("modules/clean/react/home/starred/conditional_interface",["require","exports","modules/clean/react/home/starred/starred_resource_store","modules/clean/react/starred/star","modules/clean/react/home/recents/recent_activity_starred","modules/clean/react/home/starred/starred_view","modules/clean/react/starred/id_type_pair","modules/clean/react/files_page/data/store","modules/clean/react/files_page/data/action_creators"],(function(e,t,r,a,o,s,i,n,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filesPageAppInit=t.getStoreForFilesPage=t.idTypePairToString=t.StarredView=t.getIdTypePairFromRecentItem=t.Star=t.getStarredResourceStore=void 0,Object.defineProperty(t,"getStarredResourceStore",{enumerable:!0,get:function(){return r.getStarredResourceStore}}),Object.defineProperty(t,"Star",{enumerable:!0,get:function(){return a.Star}}),Object.defineProperty(t,"getIdTypePairFromRecentItem",{enumerable:!0,get:function(){return o.getIdTypePairFromRecentItem}}),Object.defineProperty(t,"StarredView",{enumerable:!0,get:function(){return s.StarredView}}),Object.defineProperty(t,"idTypePairToString",{enumerable:!0,get:function(){return i.idTypePairToString}}),Object.defineProperty(t,"getStoreForFilesPage",{enumerable:!0,get:function(){return n.getStoreForFilesPage}}),Object.defineProperty(t,"filesPageAppInit",{enumerable:!0,get:function(){return d.appInit}})})),define("modules/clean/react/home/starred/actions",["require","exports","tslib","modules/clean/flux/dispatcher","modules/clean/react/home/starred/constants","modules/clean/react/home/starred/models/starred_item","modules/clean/react/starred/model","modules/clean/react/home/starred/models/starred_item","modules/core/exception","modules/core/exception"],(function(e,t,r,a,o,s,i,n,d,c){"use strict";function l(e,t){return a.Dispatcher.dispatch({type:o.StarredResourceActionTypes.LOAD_FAILURE,error:t,loadingType:e}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.StarredActions=t.onRetrieveStarredError=void 0,c=r.__importStar(c),t.onRetrieveStarredError=l;var u=(function(){function e(){}return e.handleRetrieveStarredPayload=function(e,t,r){if("success"!==r.status)throw l(t,r.status);if(!r.items||void 0===r.has_more)throw d.reportStack("Home starred items request returned success without items or hasMore",{severity:d.SEVERITY.NONCRITICAL}),l(t,new Error("Invalid server response for Starred getItems"));var n=r.items.map(s.starredItemFromJson),c=i.statusResultsToStarredStatuses(n.map(s.starredItemModelToStarredStatus));a.Dispatcher.dispatch({type:o.StarredResourceActionTypes.LOAD_SUCCESS,hasMore:r.has_more,items:n,starredStatuses:c,loadingType:t}),e().then((function(e){return(0,e.getStarredStatusMetadata)(c)}))},e.handleEdisonStarredData=function(t,r,s){if(s.jsonData){var i;i=JSON.parse(s.jsonData),e.handleRetrieveStarredPayload(t,o.StarredLoadingTypes.ALL,i)}else if("success"===s.status){var d=n.edisonStarredDataToStarredStatus(s);a.Dispatcher.dispatch({type:o.StarredResourceActionTypes.LOAD_SUCCESS,hasMore:Boolean(s.hasMore),items:s.items,starredStatuses:d,loadingType:r}),t().then((function(e){return(0,e.getStarredStatusMetadata)(d)}))}else{var l=new Error("EdisonStarredPrefetchFailure");c.reportException({err:l,severity:c.SEVERITY.CRITICAL,exc_extra:{starredData:JSON.stringify(s)}}),a.Dispatcher.dispatch({type:o.StarredResourceActionTypes.LOAD_FAILURE,loadError:l,loadingType:r})}},e})();t.StarredActions=u})),define("modules/clean/react/home/starred/models/starred_item",["require","exports","modules/clean/react/home/constants"],(function(e,t,r){"use strict";function a(e,t){var a,o=r.DisplayTypeToResourceType[e];return o===r.FILE_RESOURCE_TYPE?{fqPath:(a=t).fq_path}:o===r.FOLDER_RESOURCE_TYPE?{fqPath:(a=t).fq_path,targetNsId:a.target_ns_id,isTeamMemberFolder:a.is_team_member_folder}:{}}Object.defineProperty(t,"__esModule",{value:!0}),t.starredItemModelToStarredStatus=t.edisonStarredDataToStarredStatus=t.detailsFromJson=t.starredItemFromJson=void 0,t.starredItemFromJson=function(e){return{title:e.title,resourceId:e.resource_id,idType:e.id_type,displayType:e.display_type,url:e.url,isMounted:e.is_mounted,perNodeMetadata:e.per_node_metadata,details:a(e.display_type,e.details),icon:e.icon}},t.detailsFromJson=a,t.edisonStarredDataToStarredStatus=function(e){return e.items.map((function(e){return{idTypePair:{id:e.resourceId,type:e.idType},starred:!0}}))},t.starredItemModelToStarredStatus=function(e){return{id:e.resourceId,type:e.idType,is_starred:!0}}})),define("modules/clean/react/home/starred/starred_item_list",["require","exports","tslib","react","react-dom","modules/clean/react/common/rendering","modules/clean/react/home/post_tti/api","modules/clean/react/home/starred/constants","modules/clean/react/home/starred/starred_empty_state","modules/clean/react/home/util/logging/activity_logger","modules/clean/react/home/util/show_hide_link","modules/clean/react/home/starred/starred_table"],(function(e,t,r,a,o,s,i,n,d,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredItemList=void 0,a=r.__importDefault(a),o=r.__importDefault(o);var p=s.withSuspenseNoSSR(a.default.lazy((function(){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,r){e(["modules/clean/react/files_page/actionBar/files_page_action_bar"],t,r)})).then(r.__importStar)];case 1:return[2,{default:t.sent().FilesPageActionBar}]}}))}))}))),m=(function(e){function t(t){var a=e.call(this,t)||this;return a.toggleShowAll=function(){return r.__awaiter(a,void 0,void 0,(function(){var e,t,a;return r.__generator(this,(function(r){switch(r.label){case 0:return e=!this.state.showAll,c.homeActivityLogger.logClickShowAll("starred",e),this.setState({showAll:e}),e&&this.props.hasMore?[4,i.waitForHomeTTI()]:[3,2];case 1:(0,r.sent().loadAllStarredItems)(),r.label=2;case 2:return(t=o.default.findDOMNode(this.refs.lastUnhiddenStar))&&(a=t.querySelector("a"))&&a.focus(),[2]}}))}))},a.state={showAll:t.showAll},a}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.itemModels,t=this.state.showAll,r="STARRED"===this.props.pageType&&this.props.useStarredActionBar,o=Math.max(e.length-n.INITIAL_STARRED_ITEMS_LIMIT,0),s=o&&!t?e.slice(0,n.INITIAL_STARRED_ITEMS_LIMIT):e,i=a.default.createElement(d.StarredEmptyState,null);return s.length&&(i=a.default.createElement(u.StarredTable,{items:s,withSelection:r})),a.default.createElement("div",{className:"starred"},a.default.createElement("div",{className:"starred-container"},r&&a.default.createElement(p,null),i,!this.props.showAll&&o?a.default.createElement(l.ShowHideLink,{onClick:this.toggleShowAll,isExpanded:t,hiddenItemCount:o,canLoadMore:!1}):null))},t.displayName="StarredItemList",t})(a.default.PureComponent);t.StarredItemList=m})),define("modules/clean/react/home/starred/starred_resource_store",["require","exports","tslib","modules/clean/flux/dispatcher","modules/clean/react/home/constants","modules/clean/react/home/starred/constants","modules/clean/react/starred/constants","modules/clean/react/home/starred/actions","modules/clean/react/starred/store","modules/clean/react/home/util/logging/availability_logger","modules/clean/flux/flux_store","modules/clean/react/home/post_tti/api"],(function(e,t,r,a,o,s,i,n,d,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStarredResourceStore=t.PrivateStarredResourceStoreClass=void 0;var p=(function(e){function t(t){var r=e.call(this,a.Dispatcher)||this;return r.orderedIds=[],r.itemsById={},r.loadingState=o.LoadingStates.LOADING,r.hasMore=!0,r.hasLoadedInitial=!1,r.hasLoadedAll=!1,r.isPaperUser=!0,t?n.StarredActions.handleEdisonStarredData(u.waitForHomeTTI,s.StarredResourceActionTypes.LOADING_INITIAL,t):c.getHomeAvailabilityLogger().handlePrefetch(o.HomePrefetchTypes.RETRIEVE_STARRED,(function(e){return n.StarredActions.handleRetrieveStarredPayload(u.waitForHomeTTI,s.StarredResourceActionTypes.LOADING_INITIAL,e)})),r}return r.__extends(t,e),t.prototype.getStarredStore=function(){return d.StarredStore},t.prototype.clearPresentableItemsCache=function(){this.presentableItemsCache=null},t.prototype.getItems=function(){var e=this;return this.presentableItemsCache||(this.presentableItemsCache=this.orderedIds.map((function(t){return e.itemsById[t]})).filter((function(t){var r={id:t.resourceId,type:t.idType},a=e.getStarredStore().getLoadingState(r),o=e.getStarredStore().getIsStarred(r);return a===i.StarredLoadingState.LOADING||o}))),this.presentableItemsCache},t.prototype.getItem=function(e){return this.itemsById[e]},t.prototype.getLoadingState=function(){return this.loadingState},t.prototype.getHasMore=function(){return this.hasMore},t.prototype.getHasLoadedInitial=function(){return this.hasLoadedInitial},t.prototype.getHasLoadedAll=function(){return this.hasLoadedAll},t.prototype.getIsPaperUser=function(){return this.isPaperUser},t.prototype.onItemsLoading=function(){this.loadingState=o.LoadingStates.LOADING},t.prototype.onItemsLoadSuccess=function(e,t){var r=this;e.forEach((function(e){r.itemsById[e.resourceId]=e})),this.loadingState=o.LoadingStates.SUCCESS,this.orderedIds=e.map((function(e){return e.resourceId})),this.hasMore=t,e.length&&this.clearPresentableItemsCache()},t.prototype.onItemsLoadFailure=function(e){this.loadingState=o.LoadingStates.FAILURE,e&&e===s.NOT_PAPER_USER_ERROR&&(this.isPaperUser=!1)},t.prototype.onItemsLoadComplete=function(e,t){e!==s.StarredLoadingTypes.INITIAL&&t||(this.hasLoadedInitial=!0),e!==s.StarredLoadingTypes.ALL&&t||(this.hasLoadedAll=!0)},t.prototype.onStatusChange=function(){u.waitForHomeTTI().then((function(e){return(0,e.loadAllStarredItems)()})),this.clearPresentableItemsCache()},t.prototype.__onDispatch=function(e){var t=e.action;switch(t.type){case s.StarredResourceActionTypes.LOADING_INITIAL:case s.StarredResourceActionTypes.LOADING_ALL:this.onItemsLoading(),this.__emitChange();break;case s.StarredResourceActionTypes.LOAD_SUCCESS:this.onItemsLoadSuccess(t.items,t.hasMore),this.onItemsLoadComplete(t.loadingType,t.hasMore),this.__emitChange();break;case s.StarredResourceActionTypes.LOAD_FAILURE:this.onItemsLoadFailure(t.error),this.onItemsLoadComplete(t.loadingType,!0),this.__emitChange();break;case i.StarredActionTypes.LOADING:this.clearPresentableItemsCache(),this.__emitChange();break;case i.StarredActionTypes.SET_STATUS:this.onStatusChange(),this.__emitChange()}},t})(l.FluxStore);t.PrivateStarredResourceStoreClass=p;var m=null;t.getStarredResourceStore=function(e){return null===m&&(m=new p(e)),m}})),define("modules/clean/react/home/starred/starred_view",["require","exports","tslib","react","react-redux","modules/clean/react/files_page/data/store","modules/clean/react/files_page/data/action_creators","modules/clean/react/home/constants","modules/clean/react/home/starred/constants","modules/clean/react/home/starred/starred_item_list","modules/clean/react/home/starred/starred_layout","modules/clean/react/home/store","modules/clean/react/home/starred/starred_resource_store","modules/clean/react/home/util/logging/activity_logger","modules/clean/react/home/util/logging/timing_component","modules/clean/react/home/util/logging/timing_logger"],(function(e,t,r,a,o,s,i,n,d,c,l,u,p,m,S,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredView=t.StarViewWithFilesPage=void 0;var g=(function(e){function o(t){var a=e.call(this,t)||this;return a.onStoreUpdate=function(){return a.setState(a.getStateFromStore())},a.removeStoreListener=p.getStarredResourceStore().addListener(a.onStoreUpdate),a.state=r.__assign({showAll:"STARRED"===t.pageType,pageType:t.pageType},a.getStateFromStore()),a}return r.__extends(o,e),o.prototype.getStateFromStore=function(){var e=p.getStarredResourceStore(),t=e.getLoadingState(),r=e.getItems(),a=e.getHasMore(),o=e.getHasLoadedInitial();if(t===n.LoadingStates.SUCCESS&&_.homeTimingLogger.logTTData(n.HomeSections.STARRED)){var s=r.length>d.INITIAL_STARRED_ITEMS_LIMIT;m.homeActivityLogger.logStarredShown(r.length,s,a)}return{itemModels:r,hasLoadedInitial:o,hasMore:a,canShowSpinner:t===n.LoadingStates.LOADING&&!e.getHasLoadedAll()}},o.prototype.componentWillUnmount=function(){this.removeStoreListener&&this.removeStoreListener()},o.prototype.render=function(){var e=this.props,o=e.canRenderItems,s=e.isHiddenByUser,i=e.useStarredActionBar;return a.default.createElement(t.StarViewWithFilesPage,null,a.default.createElement(a.default.Fragment,null,o?a.default.createElement(l.StarredLayout,r.__assign({isHiddenByUser:s,showHeader:"HOME"===this.state.pageType,starredComponent:c.StarredItemList,useStarredActionBar:i},this.state)):null))},o.displayName="StarredView",o})((a=r.__importDefault(a)).default.PureComponent);t.StarViewWithFilesPage=function(e){var t=e.children,r=a.default.useMemo((function(){var e=s.getStoreForFilesPage();return e.dispatch(i.appInit({user:u.getUser()})),e}),[]);return a.default.createElement(o.Provider,{store:r},t)},t.StarViewWithFilesPage.displayName="StarViewWithFilesPage",t.StarredView=S.timingComponent(g,n.HomeSections.STARRED)})),define("modules/clean/react/home/starred/starred_uri_interface",["require","exports","modules/clean/react/home/constants","modules/clean/browse_uri_interface"],(function(e,t,r,a){"use strict";function o(e){return r.DisplayTypeToResourceType[e.displayType]===r.FOLDER_RESOURCE_TYPE}Object.defineProperty(t,"__esModule",{value:!0}),t.isFolder=t.href_for_file=void 0,t.href_for_file=function(e,t,r){var s;if(void 0===r&&(r={}),o(t))return t.url;var i=null===(s=t.details)||void 0===s?void 0:s.fqPath;return i?a.preview_uri_for_fq_path(e,i,r).toString():t.url},t.isFolder=o})),define("modules/clean/react/home/util/paper_utils",["require","exports","modules/clean/navigation"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharePaperDoc=void 0,t.sharePaperDoc=function(e,t){r.logAndNavigate(e+"?openSharing=1",t)}})),define("modules/clean/react/home/recents/recent_activity_starred",["require","exports","tslib","lodash","modules/clean/react/starred/id_type_pair"],(function(e,t,r,a,o){"use strict";function s(e){return e.resource_id&&e.id_type?{id:e.resource_id,type:e.id_type}:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getIdTypePairFromRecentItem=t.getIdTypePairsByRecentActivityItems=t.getIdTypePair=void 0,a=r.__importStar(a),t.getIdTypePair=s,t.getIdTypePairsByRecentActivityItems=function(e){var t={};return e.forEach((function(e){var r=s(e);r&&(t[o.idTypePairToString(r)]=r)})),a.values(t)},t.getIdTypePairFromRecentItem=function(e){return e.resourceId&&e.idType?{id:e.resourceId,type:e.idType}:null}})),define("modules/clean/search/logger",["require","exports","tslib","modules/clean/analytics","modules/clean/search/api_helpers"],(function(e,t,r,a,o){"use strict";function s(e,t){var a=e;return r.__assign(r.__assign({},t),{file_nsid:a.ns_id,file_sjid:a.sjid,match_type:a.match_type||void 0})}Object.defineProperty(t,"__esModule",{value:!0}),t.logHoverPreviewFailed=t.logHoverPreviewCompleted=t.logHoverPreviewStarted=t.logRecentHistoryDisplayed=t.SearchLogResultType=void 0,(function(e){e.SHARED_DOC="shared_doc",e.SHARED_CLOUD_DOC="shared_cloud_doc"})(t.SearchLogResultType||(t.SearchLogResultType={})),t.logRecentHistoryDisplayed=function(e){var t=e.searchSessionId,r=e.user,s=e.history,i=o.getCurrentTimezoneOffset(),n=s.map((function(e){return e.rawQuery})).reduce((function(e,t,r){return e[r]=t,e}),{}),d={search_session_id:t,recent_history_map:JSON.stringify(n),timezone_offset:i,viewport:"dropdown-view"};a.SearchClientActivityLogger.log("recent_history_displayed",r.id,d)},t.logHoverPreviewStarted=function(e){var t=e.searchSessionId,r=e.result,i=e.user,n=e.previewRequestId,d=e.viewport,c=void 0===d?"dropdown-view":d,l={search_session_id:t,preview_request_id:n,timezone_offset:o.getCurrentTimezoneOffset(),viewport:c};a.SearchClientActivityLogger.log("preview_started",i.id,s(r,l))},t.logHoverPreviewCompleted=function(e){var t=e.searchSessionId,r=e.result,i=e.user,n=e.previewRequestId,d=e.viewport,c=void 0===d?"dropdown-view":d,l=e.latency,u=e.displayed,p={search_session_id:t,preview_request_id:n,timezone_offset:o.getCurrentTimezoneOffset(),viewport:c,latency:l,displayed:u?"true":"false"};a.SearchClientActivityLogger.log("preview_completed",i.id,s(r,p))},t.logHoverPreviewFailed=function(e){var t=e.searchSessionId,r=e.result,i=e.user,n=e.previewRequestId,d=e.viewport,c=void 0===d?"dropdown-view":d,l=e.failureType,u={search_session_id:t,preview_request_id:n,timezone_offset:o.getCurrentTimezoneOffset(),viewport:c,failure_type:l};a.SearchClientActivityLogger.log("preview_failed",i.id,s(r,u))}})),define("modules/clean/react/home/starred/starred_table",["require","exports","tslib","react","dig-experimental/managed_table/index","typescript/component_libraries/files_components/src/index","modules/clean/react/components/css","modules/clean/react/home/starred/starred_to_ikea"],(function(e,t,r,a,o,s,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredTable=void 0,a=r.__importStar(a);var d=o.createManagedTable(s.UseStarring,o.useHoverActions,o.useLinkBehavior,o.useKeyboarding),c=function(e){var t=e.data,i=e.columns,n=r.__rest(e,["data","columns"]),d=o.useManagedTable({columns:i,data:t},s.UseStarring,o.useHoverActions,o.useLinkBehavior,o.useKeyboarding,o.useFlexLayout,o.useRowSelect);return a.createElement(o.UnmanagedTable,r.__assign({instance:d},n))},l=[s.FileNameColumn],u=[o.rowSelectionColumn,s.FileNameColumn],p=function(e){var t=e.items,r=e.withSelection,o=void 0!==r&&r,s=a.useMemo((function(){return t.map(n.starredToIkea)}),[t]);return o?a.createElement(c,{isSelectable:!0,showHeader:!1,columns:u,data:s}):a.createElement(d,{isSelectable:!0,showHeader:!1,columns:l,data:s})};p.displayName="StarredTableNoCss",t.StarredTable=i.requireCssWithComponent(p,["/static/js/dig-experimental/index.web-vfl_TJZKT.css"])})),define("modules/clean/react/home/starred/starred_to_ikea",["require","exports","tslib","react","modules/clean/react/home/constants","modules/clean/react/starred/id_type_pair","modules/clean/react/starred/actions","modules/clean/react/home/store","modules/core/i18n","dig-components/buttons","modules/clean/react/home/post_tti/api","modules/clean/navigation","modules/clean/filepath/filepath","modules/clean/react/home/util/paper_utils","spectrum-sharing/utils/sharing_constants","modules/clean/react/home/util/logging/activity_logger","modules/clean/react/home/starred/starred_uri_interface","modules/clean/react/edison/router_utils","modules/clean/history_singleton"],(function(e,t,r,a,o,s,i,n,d,c,l,u,p,m,S,_,g,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.starredToIkea=void 0,a=r.__importStar(a),t.starredToIkea=function(e,t){var r,o=Object.assign(e,{index:t}),i=null===(r=e.details)||void 0===r?void 0:r.fqPath;return{uniqueKey:s.idTypePairToString({type:e.idType,id:e.resourceId}),title:e.title,extension:p.file_extension(i||""),isFolder:g.isFolder(e),isStarred:!0,isStarrable:!0,url:g.href_for_file(n.getUser(),e),renderHoverActions:function(){return a.createElement(y,{item:o})},performOpenAction:function(e){return I(o,e)},performStarAction:function(e){return v(o,e)}}};var y=function(e){var t=e.item;return a.createElement(c.Button,{onClick:function(){return T(t)},variant:"opacity"},d.intl.formatMessage({id:"At94iP",defaultMessage:"Share"}))};y.displayName="StarredHoverActions";var T=function(e){if(e.displayType!==o.PAPER_DOCUMENT_RESOURCE_TYPE){A(e);var t=g.isFolder(e)?e.details.targetNsId:null,r=e.details.fqPath;l.waitForHomeTTI().then((function(a){a.asyncShowShareModal(n.getUser(),{fqPath:r,isFolder:g.isFolder(e),origin:S.SHARE_ACTION_ORIGIN_TYPE.STARRED,targetNsId:t})}))}else m.sharePaperDoc(e.url,(function(){return A(e)}))},v=function(e,t){return i.StarredActions.updateWithSnackbar(n.getUser().role,e.resourceId,e.idType,t,e.title)},I=function(e,t){if(o.DisplayTypeToResourceType[e.displayType]!==o.FILE_RESOURCE_TYPE||t)if(!t&&h.shouldUseReactRouter()){var r=new URL(e.url).pathname;R(e),f.getBrowserHistory().push(r)}else u.logAndNavigate(e.url,(function(){return R(e)}),t?u.NavigationMethod.NEW_TAB:u.NavigationMethod.REDIRECT);else l.waitForHomeTTI().then((function(t){return t.openInFileViewer(s.idTypePairToString({type:e.idType,id:e.resourceId}),(function(){return R(e)}))}))},L=function(e){return[e.resourceId,o.DisplayTypeToResourceType[e.displayType],e.index]},A=function(e){return _.homeActivityLogger.logClickStarOverflowShare.apply(_.homeActivityLogger,L(e))},R=function(e){return _.homeActivityLogger.logOpenStarredItem.apply(_.homeActivityLogger,L(e))}})),define("modules/clean/react/async_overquota_modal_controller",["require","exports","tslib"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showOverquota=void 0,t.showOverquota=function(t,a,o){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(s){switch(s.label){case 0:return[4,new Promise((function(t,r){e(["modules/clean/react/overquota/overquota_modal_controller"],t,r)})).then(r.__importStar)];case 1:return(0,s.sent().showOverquota)({oqa:t,tagline:a,headline:o}),[2]}}))}))}}));
//# sourceMappingURL=pkg-starred.min.js-vflZlMfxU.map