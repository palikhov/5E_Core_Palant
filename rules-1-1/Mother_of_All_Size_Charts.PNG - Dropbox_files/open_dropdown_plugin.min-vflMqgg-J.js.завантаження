define(["require","exports","tslib","react","react-redux","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/utils","modules/core/i18n","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/icons/src","modules/clean/react/extensions/data/store","modules/clean/react/extensions/data/helpers","modules/clean/react/extensions/data/selectors","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/extensions/extensions_menu_component_v2","modules/clean/react/file_viewer/unity/with_unity","modules/clean/file_store/utils"],(function(e,t,n,i,o,r,a,l,s,c,u,f,d,p,m,_,v,O){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeOpenDropdownActionLoader=t.OpenMenuContent=t.OPEN_DROPDOWN_ACTION_PLUGIN_ID=void 0,i=n.__importDefault(i);var g={surface:"preview"};t.OPEN_DROPDOWN_ACTION_PLUGIN_ID="OPEN_DROPDOWN_ACTION",t.OpenMenuContent=function(e){return O.isBrowseFile(e.file)?i.default.createElement(v.WithUnity,{file:e.file,user:e.user,render:function(t){return i.default.createElement(_.ExtensionsPopoverContent,n.__assign({},e,{unityInfo:t}))}}):i.default.createElement(_.ExtensionsPopoverContent,n.__assign({},e))},t.OpenMenuContent.displayName="OpenMenuContent";var I=function(e){var r=e.file,f=e.user,d=e.store,p=e.closeFile,_=i.default.createElement(t.OpenMenuContent,{user:f,file:r,isInActionBar:!0,telemetryContext:g,goToFolderActionHandler:function(){return null==p?void 0:p()},hideZipAction:!0}),v=i.default.createElement(c.UIIcon,{src:u.OpenLine}),O=a.intl.formatMessage(m.OPEN_ACTION_STRING),I=function(e){e.menuItem.handler()};return{renderButton:function(e){return i.default.createElement(o.Provider,{store:d},i.default.createElement(l.Menu.Wrapper,{onSelection:I},(function(t){var o=t.getTriggerProps,r=t.getContentProps;return i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Button,n.__assign({},o(),{variant:"opacity",withIconLeft:e?null:v,withDropdownIcon:!0}),O),i.default.createElement(l.Menu.Content,n.__assign({},r()),_))})))},overflowItem:i.default.createElement(o.Provider,{store:d},i.default.createElement(l.Menu.Submenu,{withTriggerContent:O,withLeftAccessory:v},_))}};I.displayName="OpenDropdownPreview",t.makeOpenDropdownActionLoader=function(e,t,n){return function(){var i=f.getStore(),o=(function(){function o(){var e=this;this.lifecycle={previewWillInitialize:function(){e.actionDefinitions.atTopLevelIfSpace=e.actionToDisplay(),e.actionDefinitions.alwaysInOverflow=[e.actionToDisplay()]}}}return Object.defineProperty(o.prototype,"actionDefinitions",{get:function(){return{atTopLevelIfSpace:this.actionToDisplay(),alwaysInOverflow:[this.actionToDisplay()]}},enumerable:!1,configurable:!0}),o.prototype.actionToDisplay=function(){var o=e().file;if(!r.isLiveFile(o)||r.isInsideVaultFolder(o)||r.isPnmLinkNodeSelected(o)||O.isArchiveFile(o))return[];if(O.isSharedFile(o)){var a=p.getOpenActionsForFile(i.getState(),o);if(0===d.partitionActions(a).cloudEditors.length)return[]}return[I({file:e().file,store:i,user:t,closeFile:n})]},o})();return Promise.resolve(o)}}}));
//# sourceMappingURL=open_dropdown_plugin.min.js-vfl55VQpt.map