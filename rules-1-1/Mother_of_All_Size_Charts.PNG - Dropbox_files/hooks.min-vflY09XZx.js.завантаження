define(["require","exports","react","modules/clean/file_actions/strings","modules/clean/react/starred/browse_exports","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/portable/star/portable_star","modules/clean/react/home/resource_id_types","modules/clean/react/snackbar","modules/clean/react/starred/browse_exports","modules/core/i18n","dig-components/icons/src","file-viewer/hooks/useStabilizedCallback","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/utils","modules/clean/file_store/utils"],(function(e,r,t,a,n,i,s,o,l,c,u,d,f,_,S){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isStarringEnabled=r.useStarControl=void 0,r.useStarControl=function(e){var r=e.getActiveFile,_=e.user,S=e.onToggle,m=r(),b=f.useStabilizedCallback((function(){return n.StarredStore.getIsStarred({id:m.file.file_id,type:o.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID})})),E=t.useState(b()),p=E[0],g=E[1];t.useEffect((function(){var e=n.StarredStore.addListener((function(){return g(b())}));return function(){return e()}}),[b]);var v=c.itemNameFromStarrableItem(m.file),I=function(e){return function(){var r=e?a.starSnackbarSuccess:a.unstarSnackbarSuccess;l.Snackbar.complete(u.intl.formatMessage(r,{itemName:v}),"star-action");var t={id:m.file.file_id,type:o.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID};c.StarredActions.setStarredStatus(t,e)}},k=function(e){return function(){var r=e?a.starSnackbarError:a.unstarSnackbarError;l.Snackbar.fail(u.intl.formatMessage(r,{itemName:v}))}},C=function(){null==S||S();var e=!p;s.star({userId:_.id,fileId:m.file.file_id,newStarredValue:e},{onSuccess:I(e),onError:k(e)})};return{message:u.intl.formatMessage(p?i.UNSTAR_ACTION_STRING:i.STAR_ACTION_STRING),iconSrc:p?d.StarFill:d.StarLine,handleClick:function(e){e.preventDefault(),e.stopPropagation(),C()},handleKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),C())}}},r.isStarringEnabled=function(e){return _.isLiveFile(e)&&!S.isSharedFile(e)&&!_.isInsideVaultFolder(e)}}));
//# sourceMappingURL=hooks.min.js-vflw-zXQ0.map