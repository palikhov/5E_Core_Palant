define(["require","exports","tslib","file-viewer/plugins/shims","file-viewer/core/index","file-viewer/core/data/selectors"],(function(e,i,r,t,n,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.pluginsMiddleware=void 0,i.pluginsMiddleware=function(e){return function(i){var s=i.dispatch,d=i.getState;return function(i){return function(u){var o=e();if(0===o.length)return i(u);switch(u.type){case"@@previews/modes/changeMode":var a=u.payload,g=a.fileViewerId,c=a.mode,w=d(),p=l.getCurrentPreviewKey(w,{fileViewerId:g}),v=t.getPluginFromMode(c),f=u.payload.sourceContext;return null!=v&&o.includes(v)?(s(n.setActiveRightRailPlugin({pluginId:v,fileViewerId:g,previewKey:p,sourceContext:f})),i(r.__assign(r.__assign({},u),{payload:r.__assign(r.__assign({},u.payload),{mode:n.FileViewerMode.Plugins})}))):(s(n.setActiveRightRailPlugin({pluginId:void 0,fileViewerId:g,previewKey:p,sourceContext:f})),i(u));case"@@previews/setInitialFocus":var y=u.payload;g=y.fileViewerId,c=y.mode,w=d(),p=l.getCurrentPreviewKey(w,{fileViewerId:g});return null!=(v=t.getPluginFromMode(c))&&o.includes(v)?(s(n.setActiveRightRailPlugin({pluginId:v,fileViewerId:g,previewKey:p,sourceContext:"sidebar"})),i(n.setInitialFocus({previewKey:p,fileViewerId:g,mode:n.FileViewerMode.Plugins}))):i(u);default:return i(u)}}}}}}));
//# sourceMappingURL=plugins.min.js-vflf8g4Bv.map