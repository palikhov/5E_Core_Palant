define(["require","exports","tslib","file-viewer/core/data/selectors","file-viewer/core/data/utils"],(function(e,i,n,r,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getCurrentSharedLinkInfo=i.getCurrentPreviewKey=i.getCurrentFileId=i.getCurrentUnsupportedFile=i.getCurrentArchiveFile=i.getCurrentAudioVideoFile=i.getCurrentDocFile=i.getCurrentImageFile=void 0;var l=(function(e){function i(i,n){return e.call(this,"Expected "+i+" to be of type "+n+", but it is not")||this}return n.__extends(i,e),i})(Error),a=function(e,i){var n=i.fileViewerId,r=e.currentFileInfo,t=e.fileMetadata,l=r[n];if(null==l)return null;var a=l.file_id,u=l.ns_id,d=l.sj_id,o=l.url;if(null==a||null==u||null==d)return null;var f=t[l.previewKey.serialized];if(null==f)return null;var s=f.file_name,v=f.file_path;return{fileId:a,lastModifiedDate:f.file_last_modified_date,name:s,nsId:u,fqPath:v,sjId:d,url:o,size:f.size,previewKey:l.previewKey}};i.getCurrentImageFile=function(e,i){var l,u=i.fileViewerId,d=a(e,{fileViewerId:u});if(null==d)return null;var o=e.previewData[d.previewKey.serialized],f=null===(l=r.getFileContentMetadata(e,d.previewKey))||void 0===l?void 0:l.metadata,s="image"===(null==f?void 0:f[".tag"])?f:null,v=t.filterDimensionsFilePreviewUiState(r.getFilePreviewUi(e,{fileViewerId:u},d.previewKey));return n.__assign(n.__assign({},d),{dimensions:(null==o?void 0:o.dimensions)||(null==v?void 0:v.dimensions),contentMetadata:s})},i.getCurrentDocFile=function(e,i){var t,u=i.fileViewerId,d=a(e,{fileViewerId:u});if(null==d)return null;var o=e.rivieraData[d.previewKey.serialized];if(null==o||0===Object.getOwnPropertyNames(o).length)return null;if(!("pages"in o))throw new l("rivieraData","DocPreviewMetadata");var f=null===(t=r.getFileContentMetadata(e,d.previewKey))||void 0===t?void 0:t.metadata,s="ms_office"===(null==f?void 0:f[".tag"])||"pdf"===(null==f?void 0:f[".tag"])?f:null;return n.__assign(n.__assign({},d),{pages:o.pages.map((function(e){var i=e.dimension,n=i[0],r=i[1];return{pageIndex:e.pageIndex,dimensions:{width:n,height:r}}})),contentMetadata:s})},i.getCurrentAudioVideoFile=function(e,i){var t,l=i.fileViewerId,u=a(e,{fileViewerId:l});if(null==u)return null;var d=null===(t=r.getFileContentMetadata(e,u.previewKey))||void 0===t?void 0:t.metadata,o="audio"===(null==d?void 0:d[".tag"])||"video"===(null==d?void 0:d[".tag"])?d:null;return null==o?null:n.__assign(n.__assign({},u),{contentMetadata:o})},i.getCurrentArchiveFile=function(e,i){var r=i.fileViewerId,t=a(e,{fileViewerId:r});return null==t?null:n.__assign(n.__assign({},t),{contentMetadata:null})},i.getCurrentUnsupportedFile=function(e,i){var r=i.fileViewerId,t=a(e,{fileViewerId:r});return null==t?null:n.__assign(n.__assign({},t),{contentMetadata:null})},i.getCurrentFileId=function(e,i){var n=i.fileViewerId,t=r.getCurrentFile(e,n);if(null!=t)return t.file_id},i.getCurrentPreviewKey=function(e,i){var n=i.fileViewerId,t=r.getCurrentFile(e,n);if(null!=t)return t.previewKey},i.getCurrentSharedLinkInfo=function(e,n){var r=n.fileViewerId,t=i.getCurrentPreviewKey(e,{fileViewerId:r});if(t)return e.sharedLinkInfo[t.serialized]}}));
//# sourceMappingURL=file.min.js-vflYLA_Ov.map