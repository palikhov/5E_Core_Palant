define(["require","exports","tslib","react","modules/clean/react/flows/conversions/conversion_actions","dig-components/menu","dig-components/icons/src","dig-components/icons","modules/core/i18n","modules/clean/react/file_viewer/file_conversion/utils"],(function(e,n,o,t,i,r,s,c,a,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.makeFileConversionsLoader=n.getOverflowItem=n.SaveAsOverflowItem=n.CONVERSION_ACTION_PLUGIN_ID=void 0,t=o.__importDefault(t),n.CONVERSION_ACTION_PLUGIN_ID="CONVERSION_ACTION",n.SaveAsOverflowItem=function(e){var n=e.file,o=e.user,i=e.shareToken,l=e.conversionActions,u=e.logUserAction;return t.default.createElement(r.Menu.Submenu,{withLeftAccessory:t.default.createElement(c.UIIcon,{src:s.AddFileLine}),withTriggerContent:a.intl.formatMessage({id:"N4qajY",defaultMessage:"Save as..."})},t.default.createElement(r.Menu.Segment,null,l.map((function(e){return t.default.createElement(r.Menu.ActionItem,{key:e.actionText,onClick:function(){return(function(e,n,o,t){u({action:"convert_file",context:"preview_workflows_button",conversion_type:o.actionText}),o.convert([e],n,{shareToken:t})})(n,o,e,i)},onKeyPress:function(t){return(function(e,n,o,t,i){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),u({action:"convert_file",context:"preview_workflows_button",conversion_type:t.actionText}),t.convert([n],o,{shareToken:i}))})(t,n,o,e,i)},withLeftAccessory:t.default.createElement(c.UIIcon,{src:e.actionIcon})},e.actionText)}))))},n.SaveAsOverflowItem.displayName="SaveAsOverflowItem",n.getOverflowItem=function(e,o,r,s){var c={expFlowsManualVideoRemuxUi:l.isManualVideoRemuxingEnabled(o),expFlowsManualVideoGifUi:l.isManualVideoGifEnabled(o),expFlowsAudioConversionUi:l.isManualAudioConversionEnabled(o)},a=i.getConversionActionsForFiles([e],c);if(a.length)return t.default.createElement(n.SaveAsOverflowItem,{file:e,user:o,shareToken:s,conversionActions:a,logUserAction:r})},n.makeFileConversionsLoader=function(e,o){return function(){var t=(function(){function t(n){var o=this;this.lifecycle={previewDidRender:function(){o.actionDefinitions=o.conversionsDefinition(e())}},this.actionDefinitions=this.conversionsDefinition(e()),this.context=n}return t.prototype.conversionsDefinition=function(e){var t=this;return{categories:{workflows:[{overflowItem:n.getOverflowItem(e.file,o,(function(e){return t.context.logUserAction(e)}),e.shareToken)}]}}},t})();return Promise.resolve(t)}}}));
//# sourceMappingURL=conversion_plugin.min.js-vflGSy7ia.map