define(["require","exports","tslib","react","react-redux","typescript/component_libraries/files_components/src/blades/utils","dig-components/typography","dig-components/progress_indicators","typescript/component_libraries/files_components/src/blades/file_activity/data/selectors","typescript/component_libraries/files_components/src/blades/file_activity/component/activity_list","react-intl","typescript/component_libraries/files_components/src/blades/file_activity/utils","typescript/component_libraries/files_components/src/blades/file_activity/data/types","api_v2/redux/file_activity_stream","typescript/component_libraries/files_components/src/blades/file_activity/component/filter","typescript/component_libraries/files_components/src/blades/file_activity/data/actions"],(function(e,t,i,a,r,s,n,l,o,c,d,p,u,f,m,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileActivity=void 0,a=i.__importDefault(a),t.FileActivity=a.default.memo((function(e){var t=e.fileId,i=e.onLogComponentTTI,v=e.user,_=e.rootNamespaceName,g=void 0===_?"Dropbox":_,b=e.logFilterChange,E=d.useIntl(),F=r.useDispatch(),h=a.default.useMemo((function(){return o.createGetFilteredEvents()}),[]),A=r.useSelector((function(e){return h(e,{fileId:t})})),S=r.useSelector(o.getFilter),I=r.useSelector((function(e){return o.areApiActivitiesPresent(e,{fileId:t})})),T=a.default.useMemo((function(){return p.processEvents(A,{intl:E,viewingUserId:v.account_id,rootNamespaceName:g})}),[A,E,v,g]);a.default.useEffect((function(){F(f.getActivityStreamAction({arg:{file_path_or_id:t},params:{subjectUserId:String(v.id)}}))}),[t,v,F]);var M=a.default.useCallback((function(e){F({type:y.FileActivityActionTypes.SET_FILTER,filter:e})}),[F]);return s.useLogComponentTTI(i),a.default.createElement("div",{className:"activity-history-container"},A.status===u.EventState.loading?a.default.createElement("div",{className:"event-history-loading-indicator-container"},a.default.createElement(l.Spinner,{size:"standard","aria-valuetext":E.formatMessage({id:"csFB2E",defaultMessage:"Loading"})})):A.status===u.EventState.error?a.default.createElement(n.Text,{color:"faint",size:"small"},A.errorString):I?a.default.createElement(a.default.Fragment,null,a.default.createElement(m.ActivityFilter,{filter:S,setFilter:M,logFilterChange:b}),a.default.createElement(c.ActivityList,{activity:T})):a.default.createElement(n.Text,{size:"small",color:"faint"},E.formatMessage({id:"E5o8M1",defaultMessage:"When people work with this file, you'll see their activity here."})))})),t.FileActivity.displayName="FileActivity"}));
//# sourceMappingURL=file_activity.amd.min.js-vflU0V9_q.map